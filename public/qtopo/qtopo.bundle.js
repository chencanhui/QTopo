!function(g){function I(c){if(C[c])return C[c].exports;var n=C[c]={exports:{},id:c,loaded:!1};return g[c].call(n.exports,n,n.exports,I),n.loaded=!0,n.exports}var C={};return I.m=g,I.c=C,I.p="",I(0)}([function(module,exports,__webpack_require__){eval('/**\r\n * Created by qiyc on 2017/2/6.\r\n */\r\n    //核心依赖\r\n__webpack_require__(1);\r\n//QTopo\r\nwindow.QTopo = {};\r\nwindow.QTopo.instance=[];\r\nwindow.QTopo.util = __webpack_require__(2);\r\nvar Scene = __webpack_require__(3);\r\nvar windows=__webpack_require__(15);\r\nwindow.QTopo.init = function (dom, config) {\r\n    dom = dom instanceof Array ? dom[0] : dom;\r\n    var canvas=initCanvas(dom,$(dom).width(),$(dom).height());\r\n    var QtopoInstance = {\r\n        scene:new Scene(new JTopo.Stage(canvas),config),\r\n        setOption : setOption,\r\n        document:dom,\r\n        resize:resize(dom,canvas)\r\n    };\r\n    this.instance.push(QtopoInstance);\r\n    return QtopoInstance;\r\n};\r\nfunction setOption(option,clear) {\r\n    var scene = this.scene;\r\n    if(clear){\r\n        scene.clear();\r\n    }\r\n    createNode(scene, option.node);\r\n    createContainer(scene, option.container);\r\n    createLink(scene, option.link);\r\n    drawAlarm(scene,option.alarm);\r\n    scene.center();\r\n}\r\nfunction resize(dom,canvas){\r\n    return function(){\r\n        canvas.setAttribute(\'width\', $(dom).width());\r\n        canvas.setAttribute(\'height\',$(dom).height());\r\n    }\r\n}\r\nfunction initCanvas(dom,width,height){\r\n    if(width<=0||height<=0){\r\n        console.error("The topo need config width and height!");\r\n    }\r\n    dom.style.position=\'relative\';\r\n    dom.style.overflow=\'hidden\';\r\n    var canvas=document.createElement(\'canvas\');\r\n    dom.appendChild(canvas);\r\n    canvas.setAttribute(\'width\', width);\r\n    canvas.setAttribute(\'height\',height);\r\n    canvas.style.position="absolute";\r\n    canvas.style.top=0;\r\n    canvas.style.left=0;\r\n    canvas.style[\'user-select\']= \'none\';\r\n    canvas.style[\'-webkit-tap-highlight-color\']= \'rgba(0, 0, 0, 0)\';\r\n    return canvas;\r\n}\r\nfunction createNode(scene, config) {\r\n    if (config) {\r\n        if ($.isArray(config.data)) {\r\n            $.each(config.data, function (i, v) {\r\n                var node = scene.createNode(v);\r\n                //额外属性添加\r\n                if ($.isArray(config.exprop)) {\r\n                    $.each(config.exprop, function (j, key) {\r\n                        if( v[key]){\r\n                            node[key] = v[key];\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\nfunction createContainer(scene, config) {\r\n    if (config) {\r\n        var findChild;\r\n        if (config.children) {\r\n            findChild = config.children;\r\n        }\r\n        if ($.isArray(config.data)) {\r\n            //开始构造分组\r\n            $.each(config.data, function (i, cData) {\r\n                //无论是否有子元素，分组先创造出来\r\n                var container = scene.createContainer(cData);\r\n                //额外属性添加\r\n                if ($.isArray(config.exprop)) {\r\n                    $.each(config.exprop, function (j, key) {\r\n                        if(cData[key]) {\r\n                            container[key] = cData[key];\r\n                        }\r\n                    });\r\n                }\r\n                //确定查找子元素的标记\r\n                var findChild_exact = findChild;\r\n                if (cData.children) {\r\n                    findChild_exact = cData.children;\r\n                }\r\n                //查找子元素并塞入\r\n                if (findChild_exact) {\r\n                    $.each(cData.data, function (j, children) {\r\n                        var child = scene.find(findChild_exact + "=" + children);\r\n                        if (child && child.length > 0) {\r\n                            $.each(child, function (m, one) {\r\n                                container.add(one);\r\n                            });\r\n                        } else {\r\n                            console.error("some child not found : " + j, findChild_exact + "=" + children);\r\n                        }\r\n                    });\r\n                } else {\r\n                    console.error("can\'t find children,need config children");\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\nfunction createLink(scene, config) {\r\n    if (config) {\r\n        var path = config.path;\r\n        if ($.isArray(path) && path.length > 0) {\r\n            var findStart;\r\n            var findEnd;\r\n            //path为数组，0为起点条件1为终点条件,确定搜索条件,起始点条件可不同\r\n            if (path.length == 1) {\r\n                findEnd = path[0];\r\n                findStart = findEnd;\r\n            } else {\r\n                findStart = path[0];\r\n                findEnd = path[1];\r\n            }\r\n            if ($.isArray(config.data)) {\r\n                $.each(config.data, function (i, v) {\r\n                    var link;\r\n                    //根据确定的条件进行搜索\r\n                    var start = scene.find(findStart + "=" + v.start)[0];\r\n                    var end = scene.find(findEnd + "=" + v.end)[0];\r\n                    if (start && end) {\r\n                        v.start = start;\r\n                        v.end = end;\r\n                        link = scene.createLink(v);\r\n                        //额外属性添加\r\n                        if (link && $.isArray(config.exprop)) {\r\n                            $.each(config.exprop, function (j, key) {\r\n                                if(v[key]){\r\n                                    link[key] = v[key];\r\n                                }\r\n                            });\r\n                        }\r\n                    } else {\r\n                        console.error("some link path invalid : "+ i, v);\r\n                        if(!start){\r\n                            console.error("start not found : ",v.start);\r\n                        }\r\n                        if(!end){\r\n                            console.error("end not found : ",v.end);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        } else {\r\n            console.error("can not draw link,need config \'path\' and \'path\' is Array and not empty, path used to find start and end");\r\n        }\r\n    }\r\n}\r\nfunction drawAlarm(scene,config){\r\n    if(config){\r\n        if ($.isArray(config.data)&&config.node) {\r\n            var alarmData=config.data;\r\n            var findNode=config.node;\r\n            var alarmNodes=[];\r\n            $.each(alarmData,function(k,v){\r\n                var node=scene.find(findNode + "=" + v["node"],"node")[0];\r\n                if(node){\r\n                    alarmNodes.push({\r\n                        node:node,\r\n                        alarm:{\r\n                            show: typeof v.show=="undefined"?true: v.show,\r\n                            text: v.text,\r\n                            color: v.color,\r\n                            font: v.font\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            if(config.animate){\r\n                alarmAnimate(config.animate,alarmNodes);\r\n            }else{\r\n                console.info("alarm nodes : "+alarmNodes.length);\r\n                $.each(alarmNodes,function(i,v){\r\n                    v.node.set({\r\n                        alarm:v.alarm\r\n                    });\r\n                });\r\n            }\r\n        }\r\n    }\r\n}\r\nvar animateRuning;\r\nfunction alarmAnimate(animate,alarmNodes){\r\n    if(animate){\r\n        if($.isNumeric(animate.time)){\r\n            clearAnimat();\r\n            console.info("begin alarm animate times : "+alarmNodes.length);\r\n            animateRuning=setInterval(function(){\r\n                if(alarmNodes.length>0){\r\n                    var data=alarmNodes.pop();\r\n                    data.node.set({\r\n                        alarm:data.alarm\r\n                    });\r\n                    if($.isFunction(animate.callBack)){\r\n                        animate.callBack(data.node);\r\n                    }\r\n                }else{\r\n                    clearAnimat();\r\n                }\r\n            },parseInt(animate.time));\r\n        }\r\n    }\r\n}\r\nfunction clearAnimat(){\r\n    if(animateRuning){\r\n        console.info("end alarm animate");\r\n        clearInterval(animateRuning);\r\n        animateRuning="";\r\n    }\r\n}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kZXZlbG9wL21haW4uanM/ZjkwOSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0IseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6IjAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBxaXljIG9uIDIwMTcvMi82LlxyXG4gKi9cclxuICAgIC8v5qC45b+D5L6d6LWWXHJcbnJlcXVpcmUoXCIuL2NvcmUvbGliL2p0b3BvLW1pbi5qc1wiKTtcclxuLy9RVG9wb1xyXG53aW5kb3cuUVRvcG8gPSB7fTtcclxud2luZG93LlFUb3BvLmluc3RhbmNlPVtdO1xyXG53aW5kb3cuUVRvcG8udXRpbCA9IHJlcXVpcmUoJy4vdXRpbC5qcycpO1xyXG52YXIgU2NlbmUgPSByZXF1aXJlKCcuL2NvcmUvU2NlbmUuanMnKTtcclxudmFyIHdpbmRvd3M9cmVxdWlyZShcIi4vY29tcG9uZW50L3dpbmRvd3MuanNcIik7XHJcbndpbmRvdy5RVG9wby5pbml0ID0gZnVuY3Rpb24gKGRvbSwgY29uZmlnKSB7XHJcbiAgICBkb20gPSBkb20gaW5zdGFuY2VvZiBBcnJheSA/IGRvbVswXSA6IGRvbTtcclxuICAgIHZhciBjYW52YXM9aW5pdENhbnZhcyhkb20sJChkb20pLndpZHRoKCksJChkb20pLmhlaWdodCgpKTtcclxuICAgIHZhciBRdG9wb0luc3RhbmNlID0ge1xyXG4gICAgICAgIHNjZW5lOm5ldyBTY2VuZShuZXcgSlRvcG8uU3RhZ2UoY2FudmFzKSxjb25maWcpLFxyXG4gICAgICAgIHNldE9wdGlvbiA6IHNldE9wdGlvbixcclxuICAgICAgICBkb2N1bWVudDpkb20sXHJcbiAgICAgICAgcmVzaXplOnJlc2l6ZShkb20sY2FudmFzKVxyXG4gICAgfTtcclxuICAgIHRoaXMuaW5zdGFuY2UucHVzaChRdG9wb0luc3RhbmNlKTtcclxuICAgIHJldHVybiBRdG9wb0luc3RhbmNlO1xyXG59O1xyXG5mdW5jdGlvbiBzZXRPcHRpb24ob3B0aW9uLGNsZWFyKSB7XHJcbiAgICB2YXIgc2NlbmUgPSB0aGlzLnNjZW5lO1xyXG4gICAgaWYoY2xlYXIpe1xyXG4gICAgICAgIHNjZW5lLmNsZWFyKCk7XHJcbiAgICB9XHJcbiAgICBjcmVhdGVOb2RlKHNjZW5lLCBvcHRpb24ubm9kZSk7XHJcbiAgICBjcmVhdGVDb250YWluZXIoc2NlbmUsIG9wdGlvbi5jb250YWluZXIpO1xyXG4gICAgY3JlYXRlTGluayhzY2VuZSwgb3B0aW9uLmxpbmspO1xyXG4gICAgZHJhd0FsYXJtKHNjZW5lLG9wdGlvbi5hbGFybSk7XHJcbiAgICBzY2VuZS5jZW50ZXIoKTtcclxufVxyXG5mdW5jdGlvbiByZXNpemUoZG9tLGNhbnZhcyl7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24oKXtcclxuICAgICAgICBjYW52YXMuc2V0QXR0cmlidXRlKCd3aWR0aCcsICQoZG9tKS53aWR0aCgpKTtcclxuICAgICAgICBjYW52YXMuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCQoZG9tKS5oZWlnaHQoKSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gaW5pdENhbnZhcyhkb20sd2lkdGgsaGVpZ2h0KXtcclxuICAgIGlmKHdpZHRoPD0wfHxoZWlnaHQ8PTApe1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJUaGUgdG9wbyBuZWVkIGNvbmZpZyB3aWR0aCBhbmQgaGVpZ2h0IVwiKTtcclxuICAgIH1cclxuICAgIGRvbS5zdHlsZS5wb3NpdGlvbj0ncmVsYXRpdmUnO1xyXG4gICAgZG9tLnN0eWxlLm92ZXJmbG93PSdoaWRkZW4nO1xyXG4gICAgdmFyIGNhbnZhcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgIGRvbS5hcHBlbmRDaGlsZChjYW52YXMpO1xyXG4gICAgY2FudmFzLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCB3aWR0aCk7XHJcbiAgICBjYW52YXMuc2V0QXR0cmlidXRlKCdoZWlnaHQnLGhlaWdodCk7XHJcbiAgICBjYW52YXMuc3R5bGUucG9zaXRpb249XCJhYnNvbHV0ZVwiO1xyXG4gICAgY2FudmFzLnN0eWxlLnRvcD0wO1xyXG4gICAgY2FudmFzLnN0eWxlLmxlZnQ9MDtcclxuICAgIGNhbnZhcy5zdHlsZVsndXNlci1zZWxlY3QnXT0gJ25vbmUnO1xyXG4gICAgY2FudmFzLnN0eWxlWyctd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3InXT0gJ3JnYmEoMCwgMCwgMCwgMCknO1xyXG4gICAgcmV0dXJuIGNhbnZhcztcclxufVxyXG5mdW5jdGlvbiBjcmVhdGVOb2RlKHNjZW5lLCBjb25maWcpIHtcclxuICAgIGlmIChjb25maWcpIHtcclxuICAgICAgICBpZiAoJC5pc0FycmF5KGNvbmZpZy5kYXRhKSkge1xyXG4gICAgICAgICAgICAkLmVhY2goY29uZmlnLmRhdGEsIGZ1bmN0aW9uIChpLCB2KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IHNjZW5lLmNyZWF0ZU5vZGUodik7XHJcbiAgICAgICAgICAgICAgICAvL+mineWkluWxnuaAp+a3u+WKoFxyXG4gICAgICAgICAgICAgICAgaWYgKCQuaXNBcnJheShjb25maWcuZXhwcm9wKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQuZWFjaChjb25maWcuZXhwcm9wLCBmdW5jdGlvbiAoaiwga2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCB2W2tleV0pe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVtrZXldID0gdltrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBjcmVhdGVDb250YWluZXIoc2NlbmUsIGNvbmZpZykge1xyXG4gICAgaWYgKGNvbmZpZykge1xyXG4gICAgICAgIHZhciBmaW5kQ2hpbGQ7XHJcbiAgICAgICAgaWYgKGNvbmZpZy5jaGlsZHJlbikge1xyXG4gICAgICAgICAgICBmaW5kQ2hpbGQgPSBjb25maWcuY2hpbGRyZW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgkLmlzQXJyYXkoY29uZmlnLmRhdGEpKSB7XHJcbiAgICAgICAgICAgIC8v5byA5aeL5p6E6YCg5YiG57uEXHJcbiAgICAgICAgICAgICQuZWFjaChjb25maWcuZGF0YSwgZnVuY3Rpb24gKGksIGNEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAvL+aXoOiuuuaYr+WQpuacieWtkOWFg+e0oO+8jOWIhue7hOWFiOWIm+mAoOWHuuadpVxyXG4gICAgICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IHNjZW5lLmNyZWF0ZUNvbnRhaW5lcihjRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAvL+mineWkluWxnuaAp+a3u+WKoFxyXG4gICAgICAgICAgICAgICAgaWYgKCQuaXNBcnJheShjb25maWcuZXhwcm9wKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQuZWFjaChjb25maWcuZXhwcm9wLCBmdW5jdGlvbiAoaiwga2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNEYXRhW2tleV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcltrZXldID0gY0RhdGFba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy/noa7lrprmn6Xmib7lrZDlhYPntKDnmoTmoIforrBcclxuICAgICAgICAgICAgICAgIHZhciBmaW5kQ2hpbGRfZXhhY3QgPSBmaW5kQ2hpbGQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoY0RhdGEuY2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICBmaW5kQ2hpbGRfZXhhY3QgPSBjRGF0YS5jaGlsZHJlbjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8v5p+l5om+5a2Q5YWD57Sg5bm25aGe5YWlXHJcbiAgICAgICAgICAgICAgICBpZiAoZmluZENoaWxkX2V4YWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKGNEYXRhLmRhdGEsIGZ1bmN0aW9uIChqLCBjaGlsZHJlbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSBzY2VuZS5maW5kKGZpbmRDaGlsZF9leGFjdCArIFwiPVwiICsgY2hpbGRyZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hpbGQgJiYgY2hpbGQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5lYWNoKGNoaWxkLCBmdW5jdGlvbiAobSwgb25lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmFkZChvbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwic29tZSBjaGlsZCBub3QgZm91bmQgOiBcIiArIGosIGZpbmRDaGlsZF9leGFjdCArIFwiPVwiICsgY2hpbGRyZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJjYW4ndCBmaW5kIGNoaWxkcmVuLG5lZWQgY29uZmlnIGNoaWxkcmVuXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gY3JlYXRlTGluayhzY2VuZSwgY29uZmlnKSB7XHJcbiAgICBpZiAoY29uZmlnKSB7XHJcbiAgICAgICAgdmFyIHBhdGggPSBjb25maWcucGF0aDtcclxuICAgICAgICBpZiAoJC5pc0FycmF5KHBhdGgpICYmIHBhdGgubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB2YXIgZmluZFN0YXJ0O1xyXG4gICAgICAgICAgICB2YXIgZmluZEVuZDtcclxuICAgICAgICAgICAgLy9wYXRo5Li65pWw57uE77yMMOS4uui1t+eCueadoeS7tjHkuLrnu4jngrnmnaHku7Ys56Gu5a6a5pCc57Si5p2h5Lu2LOi1t+Wni+eCueadoeS7tuWPr+S4jeWQjFxyXG4gICAgICAgICAgICBpZiAocGF0aC5sZW5ndGggPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgZmluZEVuZCA9IHBhdGhbMF07XHJcbiAgICAgICAgICAgICAgICBmaW5kU3RhcnQgPSBmaW5kRW5kO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZmluZFN0YXJ0ID0gcGF0aFswXTtcclxuICAgICAgICAgICAgICAgIGZpbmRFbmQgPSBwYXRoWzFdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICgkLmlzQXJyYXkoY29uZmlnLmRhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICAkLmVhY2goY29uZmlnLmRhdGEsIGZ1bmN0aW9uIChpLCB2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxpbms7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/moLnmja7noa7lrprnmoTmnaHku7bov5vooYzmkJzntKJcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3RhcnQgPSBzY2VuZS5maW5kKGZpbmRTdGFydCArIFwiPVwiICsgdi5zdGFydClbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IHNjZW5lLmZpbmQoZmluZEVuZCArIFwiPVwiICsgdi5lbmQpWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGFydCAmJiBlbmQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdi5zdGFydCA9IHN0YXJ0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2LmVuZCA9IGVuZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGluayA9IHNjZW5lLmNyZWF0ZUxpbmsodik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v6aKd5aSW5bGe5oCn5re75YqgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW5rICYmICQuaXNBcnJheShjb25maWcuZXhwcm9wKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5lYWNoKGNvbmZpZy5leHByb3AsIGZ1bmN0aW9uIChqLCBrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih2W2tleV0pe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rW2tleV0gPSB2W2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwic29tZSBsaW5rIHBhdGggaW52YWxpZCA6IFwiKyBpLCB2KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXN0YXJ0KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJzdGFydCBub3QgZm91bmQgOiBcIix2LnN0YXJ0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZighZW5kKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJlbmQgbm90IGZvdW5kIDogXCIsdi5lbmQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiY2FuIG5vdCBkcmF3IGxpbmssbmVlZCBjb25maWcgJ3BhdGgnIGFuZCAncGF0aCcgaXMgQXJyYXkgYW5kIG5vdCBlbXB0eSwgcGF0aCB1c2VkIHRvIGZpbmQgc3RhcnQgYW5kIGVuZFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZHJhd0FsYXJtKHNjZW5lLGNvbmZpZyl7XHJcbiAgICBpZihjb25maWcpe1xyXG4gICAgICAgIGlmICgkLmlzQXJyYXkoY29uZmlnLmRhdGEpJiZjb25maWcubm9kZSkge1xyXG4gICAgICAgICAgICB2YXIgYWxhcm1EYXRhPWNvbmZpZy5kYXRhO1xyXG4gICAgICAgICAgICB2YXIgZmluZE5vZGU9Y29uZmlnLm5vZGU7XHJcbiAgICAgICAgICAgIHZhciBhbGFybU5vZGVzPVtdO1xyXG4gICAgICAgICAgICAkLmVhY2goYWxhcm1EYXRhLGZ1bmN0aW9uKGssdil7XHJcbiAgICAgICAgICAgICAgICB2YXIgbm9kZT1zY2VuZS5maW5kKGZpbmROb2RlICsgXCI9XCIgKyB2W1wibm9kZVwiXSxcIm5vZGVcIilbMF07XHJcbiAgICAgICAgICAgICAgICBpZihub2RlKXtcclxuICAgICAgICAgICAgICAgICAgICBhbGFybU5vZGVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlOm5vZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsYXJtOntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3c6IHR5cGVvZiB2LnNob3c9PVwidW5kZWZpbmVkXCI/dHJ1ZTogdi5zaG93LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogdi50ZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHYuY29sb3IsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250OiB2LmZvbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYoY29uZmlnLmFuaW1hdGUpe1xyXG4gICAgICAgICAgICAgICAgYWxhcm1BbmltYXRlKGNvbmZpZy5hbmltYXRlLGFsYXJtTm9kZXMpO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhcImFsYXJtIG5vZGVzIDogXCIrYWxhcm1Ob2Rlcy5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgJC5lYWNoKGFsYXJtTm9kZXMsZnVuY3Rpb24oaSx2KXtcclxuICAgICAgICAgICAgICAgICAgICB2Lm5vZGUuc2V0KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxhcm06di5hbGFybVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxudmFyIGFuaW1hdGVSdW5pbmc7XHJcbmZ1bmN0aW9uIGFsYXJtQW5pbWF0ZShhbmltYXRlLGFsYXJtTm9kZXMpe1xyXG4gICAgaWYoYW5pbWF0ZSl7XHJcbiAgICAgICAgaWYoJC5pc051bWVyaWMoYW5pbWF0ZS50aW1lKSl7XHJcbiAgICAgICAgICAgIGNsZWFyQW5pbWF0KCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhcImJlZ2luIGFsYXJtIGFuaW1hdGUgdGltZXMgOiBcIithbGFybU5vZGVzLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIGFuaW1hdGVSdW5pbmc9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIGlmKGFsYXJtTm9kZXMubGVuZ3RoPjApe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhPWFsYXJtTm9kZXMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5ub2RlLnNldCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsYXJtOmRhdGEuYWxhcm1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZigkLmlzRnVuY3Rpb24oYW5pbWF0ZS5jYWxsQmFjaykpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRlLmNhbGxCYWNrKGRhdGEubm9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJBbmltYXQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxwYXJzZUludChhbmltYXRlLnRpbWUpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gY2xlYXJBbmltYXQoKXtcclxuICAgIGlmKGFuaW1hdGVSdW5pbmcpe1xyXG4gICAgICAgIGNvbnNvbGUuaW5mbyhcImVuZCBhbGFybSBhbmltYXRlXCIpO1xyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoYW5pbWF0ZVJ1bmluZyk7XHJcbiAgICAgICAgYW5pbWF0ZVJ1bmluZz1cIlwiO1xyXG4gICAgfVxyXG59XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9kZXZlbG9wL21haW4uanNcbi8vIG1vZHVsZSBpZCA9IDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==')},function(module,exports){eval('!function (window) {\r\n    function Element() {\r\n        this.initialize = function () {\r\n            this.elementType = "element", this.serializedProperties = ["elementType"], this.propertiesStack = [], this._id = "" + (new Date).getTime()\r\n        }, this.distroy = function () {\r\n        }, this.removeHandler = function () {\r\n        }, this.attr = function (a, b) {\r\n            if (null != a && null != b)this[a] = b; else if (null != a)return this[a];\r\n            return this\r\n        }, this.save = function () {\r\n            var a = this, b = {};\r\n            this.serializedProperties.forEach(function (c) {\r\n                b[c] = a[c]\r\n            }), this.propertiesStack.push(b)\r\n        }, this.restore = function () {\r\n            if (null != this.propertiesStack && 0 != this.propertiesStack.length) {\r\n                var a = this, b = this.propertiesStack.pop();\r\n                this.serializedProperties.forEach(function (c) {\r\n                    a[c] = b[c]\r\n                })\r\n            }\r\n        }, this.toJson = function () {\r\n            var a = this, b = "{", c = this.serializedProperties.length;\r\n            return this.serializedProperties.forEach(function (d, e) {\r\n                var f = a[d];\r\n                "string" == typeof f && (f = \'"\' + f + \'"\'), b += \'"\' + d + \'":\' + f, c > e + 1 && (b += ",")\r\n            }), b += "}"\r\n        }\r\n    }\r\n\r\n    CanvasRenderingContext2D.prototype.JTopoRoundRect = function (a, b, c, d, e) {\r\n        "undefined" == typeof e && (e = 5), this.beginPath(), this.moveTo(a + e, b), this.lineTo(a + c - e, b), this.quadraticCurveTo(a + c, b, a + c, b + e), this.lineTo(a + c, b + d - e), this.quadraticCurveTo(a + c, b + d, a + c - e, b + d), this.lineTo(a + e, b + d), this.quadraticCurveTo(a, b + d, a, b + d - e), this.lineTo(a, b + e), this.quadraticCurveTo(a, b, a + e, b), this.closePath()\r\n    }, CanvasRenderingContext2D.prototype.JTopoDashedLineTo = function (a, b, c, d, e) {\r\n        "undefined" == typeof e && (e = 5);\r\n        var f = c - a, g = d - b, h = Math.floor(Math.sqrt(f * f + g * g)), i = 0 >= e ? h : h / e, j = g / h * e, k = f / h * e;\r\n        this.beginPath();\r\n        for (var l = 0; i > l; l++)l % 2 ? this.lineTo(a + l * k, b + l * j) : this.moveTo(a + l * k, b + l * j);\r\n        this.stroke()\r\n    }, JTopo = {\r\n        version: "0.4.8_01",\r\n        zIndex_Container: 1,\r\n        zIndex_Link: 2,\r\n        zIndex_Node: 3,\r\n        SceneMode: {normal: "normal", drag: "drag", edit: "edit", select: "select"},\r\n        MouseCursor: {\r\n            normal: "default",\r\n            pointer: "pointer",\r\n            top_left: "nw-resize",\r\n            top_center: "n-resize",\r\n            top_right: "ne-resize",\r\n            middle_left: "e-resize",\r\n            middle_right: "e-resize",\r\n            bottom_left: "ne-resize",\r\n            bottom_center: "n-resize",\r\n            bottom_right: "nw-resize",\r\n            move: "move",\r\n            open_hand: "url(./img/cur/openhand.cur) 8 8, default",\r\n            closed_hand: "url(./img/cur/closedhand.cur) 8 8, default"\r\n        },\r\n        createStageFromJson: function (jsonStr, canvas) {\r\n            eval("var jsonObj = " + jsonStr);\r\n            var stage = new JTopo.Stage(canvas);\r\n            for (var k in jsonObj)"childs" != k && (stage[k] = jsonObj[k]);\r\n            var scenes = jsonObj.childs;\r\n            return scenes.forEach(function (a) {\r\n                var b = new JTopo.Scene(stage);\r\n                for (var c in a)"childs" != c && (b[c] = a[c]), "background" == c && (b.background = a[c]);\r\n                var d = a.childs;\r\n                d.forEach(function (a) {\r\n                    var c = null, d = a.elementType;\r\n                    "node" == d ? c = new JTopo.Node : "CircleNode" == d && (c = new JTopo.CircleNode);\r\n                    for (var e in a)c[e] = a[e];\r\n                    b.add(c)\r\n                })\r\n            }), stage\r\n        }\r\n    }, JTopo.Element = Element, window.JTopo = JTopo\r\n}(window), function (JTopo) {\r\n    function MessageBus(a) {\r\n        var b = this;\r\n        this.name = a, this.messageMap = {}, this.messageCount = 0, this.subscribe = function (a, c) {\r\n            var d = b.messageMap[a];\r\n            null == d && (b.messageMap[a] = []), b.messageMap[a].push(c), b.messageCount++\r\n        }, this.unsubscribe = function (a) {\r\n            var c = b.messageMap[a];\r\n            null != c && (b.messageMap[a] = null, delete b.messageMap[a], b.messageCount--)\r\n        }, this.publish = function (a, c, d) {\r\n            var e = b.messageMap[a];\r\n            if (null != e)for (var f = 0; f < e.length; f++)d ? !function (a, b) {\r\n                setTimeout(function () {\r\n                    a(b)\r\n                }, 10)\r\n            }(e[f], c) : e[f](c)\r\n        }\r\n    }\r\n\r\n    function getDistance(a, b, c, d) {\r\n        var e, f;\r\n        return null == c && null == d ? (e = b.x - a.x, f = b.y - a.y) : (e = c - a, f = d - b), Math.sqrt(e * e + f * f)\r\n    }\r\n\r\n    function getElementsBound(a) {\r\n        for (var b = {left: Number.MAX_VALUE, right: Number.MIN_VALUE, top: Number.MAX_VALUE, bottom: Number.MIN_VALUE}, c = 0; c < a.length; c++) {\r\n            var d = a[c];\r\n            d instanceof JTopo.Link || (b.left > d.x && (b.left = d.x, b.leftNode = d), b.right < d.x + d.width && (b.right = d.x + d.width, b.rightNode = d), b.top > d.y && (b.top = d.y, b.topNode = d), b.bottom < d.y + d.height && (b.bottom = d.y + d.height, b.bottomNode = d))\r\n        }\r\n        return b.width = b.right - b.left, b.height = b.bottom - b.top, b\r\n    }\r\n\r\n    function mouseCoords(a) {\r\n        return a = cloneEvent(a), a.pageX || (a.pageX = a.clientX + document.body.scrollLeft - document.body.clientLeft, a.pageY = a.clientY + document.body.scrollTop - document.body.clientTop), a\r\n    }\r\n\r\n    function getEventPosition(a) {\r\n        return a = mouseCoords(a)\r\n    }\r\n\r\n    function rotatePoint(a, b, c, d, e) {\r\n        var f = c - a, g = d - b, h = Math.sqrt(f * f + g * g), i = Math.atan2(g, f) + e;\r\n        return {x: a + Math.cos(i) * h, y: b + Math.sin(i) * h}\r\n    }\r\n\r\n    function rotatePoints(a, b, c) {\r\n        for (var d = [], e = 0; e < b.length; e++) {\r\n            var f = rotatePoint(a.x, a.y, b[e].x, b[e].y, c);\r\n            d.push(f)\r\n        }\r\n        return d\r\n    }\r\n\r\n    function $foreach(a, b, c) {\r\n        function d(e) {\r\n            e != a.length && (b(a[e]), setTimeout(function () {\r\n                d(++e)\r\n            }, c))\r\n        }\r\n\r\n        if (0 != a.length) {\r\n            var e = 0;\r\n            d(e)\r\n        }\r\n    }\r\n\r\n    function $for(a, b, c, d) {\r\n        function e(a) {\r\n            a != b && (c(b), setTimeout(function () {\r\n                e(++a)\r\n            }, d))\r\n        }\r\n\r\n        if (!(a > b)) {\r\n            var f = 0;\r\n            e(f)\r\n        }\r\n    }\r\n\r\n    function cloneEvent(a) {\r\n        var b = {};\r\n        for (var c in a)"returnValue" != c && "keyLocation" != c && (b[c] = a[c]);\r\n        return b\r\n    }\r\n\r\n    function clone(a) {\r\n        var b = {};\r\n        for (var c in a)b[c] = a[c];\r\n        return b\r\n    }\r\n\r\n    function isPointInRect(a, b) {\r\n        var c = b.x, d = b.y, e = b.width, f = b.height;\r\n        return a.x > c && a.x < c + e && a.y > d && a.y < d + f\r\n    }\r\n\r\n    function isPointInLine(a, b, c) {\r\n        var d = JTopo.util.getDistance(b, c), e = JTopo.util.getDistance(b, a), f = JTopo.util.getDistance(c, a), g = Math.abs(e + f - d) <= .5;\r\n        return g\r\n    }\r\n\r\n    function removeFromArray(a, b) {\r\n        for (var c = 0; c < a.length; c++) {\r\n            var d = a[c];\r\n            if (d === b) {\r\n                a = a.del(c);\r\n                break\r\n            }\r\n        }\r\n        return a\r\n    }\r\n\r\n    function randomColor() {\r\n        return Math.floor(255 * Math.random()) + "," + Math.floor(255 * Math.random()) + "," + Math.floor(255 * Math.random())\r\n    }\r\n\r\n    function isIntsect() {\r\n    }\r\n\r\n    function getProperties(a, b) {\r\n        for (var c = "", d = 0; d < b.length; d++) {\r\n            d > 0 && (c += ",");\r\n            var e = a[b[d]];\r\n            "string" == typeof e ? e = \'"\' + e + \'"\' : void 0 == e && (e = null), c += b[d] + ":" + e\r\n        }\r\n        return c\r\n    }\r\n\r\n    function loadStageFromJson(json, canvas) {\r\n        var obj = eval(json), stage = new JTopo.Stage(canvas);\r\n        for (var k in stageObj)if ("scenes" != k)stage[k] = obj[k]; else for (var scenes = obj.scenes, i = 0; i < scenes.length; i++) {\r\n            var sceneObj = scenes[i], scene = new JTopo.Scene(stage);\r\n            for (var p in sceneObj)if ("elements" != p)scene[p] = sceneObj[p]; else for (var nodeMap = {}, elements = sceneObj.elements, m = 0; m < elements.length; m++) {\r\n                var elementObj = elements[m], type = elementObj.elementType, element;\r\n                "Node" == type && (element = new JTopo.Node);\r\n                for (var mk in elementObj)element[mk] = elementObj[mk];\r\n                nodeMap[element.text] = element, scene.add(element)\r\n            }\r\n        }\r\n        return console.log(stage), stage\r\n    }\r\n\r\n    function toJson(a) {\r\n        var b = "backgroundColor,visible,mode,rotate,alpha,scaleX,scaleY,shadow,translateX,translateY,areaSelect,paintAll".split(","), c = "text,elementType,x,y,width,height,visible,alpha,rotate,scaleX,scaleY,fillColor,shadow,transformAble,zIndex,dragable,selected,showSelected,font,fontColor,textPosition,textOffsetX,textOffsetY".split(","), d = "{";\r\n        d += "frames:" + a.frames, d += ", scenes:[";\r\n        for (var e = 0; e < a.childs.length; e++) {\r\n            var f = a.childs[e];\r\n            d += "{", d += getProperties(f, b), d += ", elements:[";\r\n            for (var g = 0; g < f.childs.length; g++) {\r\n                var h = f.childs[g];\r\n                g > 0 && (d += ","), d += "{", d += getProperties(h, c), d += "}"\r\n            }\r\n            d += "]}"\r\n        }\r\n        return d += "]", d += "}"\r\n    }\r\n\r\n    function changeColor(a, b, c) {\r\n        var d = c.split(","), e = parseInt(d[0]), f = parseInt(d[1]), g = parseInt(d[2]), h = canvas.width = b.width, i = canvas.height = b.height;\r\n        a.clearRect(0, 0, canvas.width, canvas.height), a.drawImage(b, 0, 0);\r\n        for (var j = a.getImageData(0, 0, b.width, b.height), k = j.data, l = 0; h > l; l++)for (var m = 0; i > m; m++) {\r\n            var n = 4 * (l + m * h);\r\n            0 != k[n + 3] && (null != e && (k[n + 0] += e), null != f && (k[n + 1] += f), null != g && (k[n + 2] += g))\r\n        }\r\n        a.putImageData(j, 0, 0, 0, 0, b.width, b.height);\r\n        var o = canvas.toDataURL();\r\n        return o\r\n    }\r\n\r\n    function genImageAlarm(a, b) {\r\n        var c = a.src + b;\r\n        if (alarmImageCache[c])return alarmImageCache[c];\r\n        var d = new Image;\r\n        return d.src = changeColor(graphics, a, b), alarmImageCache[c] = d, d\r\n    }\r\n\r\n    function getOffsetPosition(a) {\r\n        if (!a)return {left: 0, top: 0};\r\n        var b = 0, c = 0;\r\n        if ("getBoundingClientRect" in document.documentElement)var d = a.getBoundingClientRect(), e = a.ownerDocument, f = e.body, g = e.documentElement, h = g.clientTop || f.clientTop || 0, i = g.clientLeft || f.clientLeft || 0, b = d.top + (self.pageYOffset || g && g.scrollTop || f.scrollTop) - h, c = d.left + (self.pageXOffset || g && g.scrollLeft || f.scrollLeft) - i; else do b += a.offsetTop || 0, c += a.offsetLeft || 0, a = a.offsetParent; while (a);\r\n        return {left: c, top: b}\r\n    }\r\n\r\n    function lineF(a, b, c, d) {\r\n        function e(a) {\r\n            return a * f + g\r\n        }\r\n\r\n        var f = (d - b) / (c - a), g = b - a * f;\r\n        return e.k = f, e.b = g, e.x1 = a, e.x2 = c, e.y1 = b, e.y2 = d, e\r\n    }\r\n\r\n    function inRange(a, b, c) {\r\n        var d = Math.abs(b - c), e = Math.abs(b - a), f = Math.abs(c - a), g = Math.abs(d - (e + f));\r\n        return 1e-6 > g ? !0 : !1\r\n    }\r\n\r\n    function isPointInLineSeg(a, b, c) {\r\n        return inRange(a, c.x1, c.x2) && inRange(b, c.y1, c.y2)\r\n    }\r\n\r\n    function intersection(a, b) {\r\n        var c, d;\r\n        return a.k == b.k ? null : (1 / 0 == a.k || a.k == -1 / 0 ? (c = a.x1, d = b(a.x1)) : 1 / 0 == b.k || b.k == -1 / 0 ? (c = b.x1, d = a(b.x1)) : (c = (b.b - a.b) / (a.k - b.k), d = a(c)), 0 == isPointInLineSeg(c, d, a) ? null : 0 == isPointInLineSeg(c, d, b) ? null : {\r\n            x: c,\r\n            y: d\r\n        })\r\n    }\r\n\r\n    function intersectionLineBound(a, b) {\r\n        var c = JTopo.util.lineF(b.left, b.top, b.left, b.bottom), d = JTopo.util.intersection(a, c);\r\n        return null == d && (c = JTopo.util.lineF(b.left, b.top, b.right, b.top), d = JTopo.util.intersection(a, c), null == d && (c = JTopo.util.lineF(b.right, b.top, b.right, b.bottom), d = JTopo.util.intersection(a, c), null == d && (c = JTopo.util.lineF(b.left, b.bottom, b.right, b.bottom), d = JTopo.util.intersection(a, c)))), d\r\n    }\r\n\r\n    requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame || window.oRequestAnimationFrame || function (a) {\r\n            setTimeout(a, 1e3 / 24)\r\n        }, Array.prototype.del = function (a) {\r\n        if ("number" != typeof a) {\r\n            for (var b = 0; b < this.length; b++)if (this[b] === a)return this.slice(0, b).concat(this.slice(b + 1, this.length));\r\n            return this\r\n        }\r\n        return 0 > a ? this : this.slice(0, a).concat(this.slice(a + 1, this.length))\r\n    }, [].indexOf || (Array.prototype.indexOf = function (a) {\r\n        for (var b = 0; b < this.length; b++)if (this[b] === a)return b;\r\n        return -1\r\n    }), window.console || (window.console = {\r\n        log: function () {\r\n        }, info: function () {\r\n        }, debug: function () {\r\n        }, warn: function () {\r\n        }, error: function () {\r\n        }\r\n    });\r\n    var canvas = document.createElement("canvas"), graphics = canvas.getContext("2d"), alarmImageCache = {};\r\n    JTopo.util = {\r\n        rotatePoint: rotatePoint,\r\n        rotatePoints: rotatePoints,\r\n        getDistance: getDistance,\r\n        getEventPosition: getEventPosition,\r\n        mouseCoords: mouseCoords,\r\n        MessageBus: MessageBus,\r\n        isFirefox: navigator.userAgent.indexOf("Firefox") > 0,\r\n        isIE: !(!window.attachEvent || -1 !== navigator.userAgent.indexOf("Opera")),\r\n        isChrome: null != navigator.userAgent.toLowerCase().match(/chrome/),\r\n        clone: clone,\r\n        isPointInRect: isPointInRect,\r\n        isPointInLine: isPointInLine,\r\n        removeFromArray: removeFromArray,\r\n        cloneEvent: cloneEvent,\r\n        randomColor: randomColor,\r\n        isIntsect: isIntsect,\r\n        toJson: toJson,\r\n        loadStageFromJson: loadStageFromJson,\r\n        getElementsBound: getElementsBound,\r\n        genImageAlarm: genImageAlarm,\r\n        getOffsetPosition: getOffsetPosition,\r\n        lineF: lineF,\r\n        intersection: intersection,\r\n        intersectionLineBound: intersectionLineBound\r\n    }, window.$for = $for, window.$foreach = $foreach\r\n}(JTopo), function (a) {\r\n    function b(a) {\r\n        return {\r\n            hgap: 16, visible: !1, exportCanvas: document.createElement("canvas"), getImage: function (b, c) {\r\n                var d = a.getBound(), e = 1, f = 1;\r\n                this.exportCanvas.width = a.canvas.width, this.exportCanvas.height = a.canvas.height, null != b && null != c ? (this.exportCanvas.width = b, this.exportCanvas.height = c, e = b / d.width, f = c / d.height) : (d.width > a.canvas.width && (this.exportCanvas.width = d.width), d.height > a.canvas.height && (this.exportCanvas.height = d.height));\r\n                var g = this.exportCanvas.getContext("2d");\r\n                return a.childs.length > 0 && (g.save(), g.clearRect(0, 0, this.exportCanvas.width, this.exportCanvas.height), a.childs.forEach(function (a) {\r\n                    1 == a.visible && (a.save(), a.translateX = 0, a.translateY = 0, a.scaleX = 1, a.scaleY = 1, g.scale(e, f), d.left < 0 && (a.translateX = Math.abs(d.left)), d.top < 0 && (a.translateY = Math.abs(d.top)), a.paintAll = !0, a.repaint(g), a.paintAll = !1, a.restore())\r\n                }), g.restore()), this.exportCanvas.toDataURL("image/png")\r\n            }, canvas: document.createElement("canvas"), update: function () {\r\n                this.eagleImageDatas = this.getData(a)\r\n            }, setSize: function (a, b) {\r\n                this.width = this.canvas.width = a, this.height = this.canvas.height = b\r\n            }, getData: function (b, c) {\r\n                function d(a) {\r\n                    var b = a.stage.canvas.width, c = a.stage.canvas.height, d = b / a.scaleX / 2, e = c / a.scaleY / 2;\r\n                    return {translateX: a.translateX + d - d * a.scaleX, translateY: a.translateY + e - e * a.scaleY}\r\n                }\r\n\r\n                null != j && null != k ? this.setSize(b, c) : this.setSize(200, 160);\r\n                var e = this.canvas.getContext("2d");\r\n                if (a.childs.length > 0) {\r\n                    e.save(), e.clearRect(0, 0, this.canvas.width, this.canvas.height), a.childs.forEach(function (a) {\r\n                        1 == a.visible && (a.save(), a.centerAndZoom(null, null, e), a.repaint(e), a.restore())\r\n                    });\r\n                    var f = d(a.childs[0]), g = f.translateX * (this.canvas.width / a.canvas.width) * a.childs[0].scaleX, h = f.translateY * (this.canvas.height / a.canvas.height) * a.childs[0].scaleY, i = a.getBound(), j = a.canvas.width / a.childs[0].scaleX / i.width, k = a.canvas.height / a.childs[0].scaleY / i.height;\r\n                    j > 1 && (j = 1), k > 1 && (j = 1), g *= j, h *= k, i.left < 0 && (g -= Math.abs(i.left) * (this.width / i.width)), i.top < 0 && (h -= Math.abs(i.top) * (this.height / i.height)), e.save(), e.lineWidth = 1, e.strokeStyle = "rgba(255,0,0,1)", e.strokeRect(-g, -h, e.canvas.width * j, e.canvas.height * k), e.restore();\r\n                    var l = null;\r\n                    try {\r\n                        l = e.getImageData(0, 0, e.canvas.width, e.canvas.height)\r\n                    } catch (m) {\r\n                    }\r\n                    return l\r\n                }\r\n                return null\r\n            }, paint: function () {\r\n                if (null != this.eagleImageDatas) {\r\n                    var b = a.graphics;\r\n                    b.save(), b.fillStyle = "rgba(211,211,211,0.3)", b.fillRect(a.canvas.width - this.canvas.width - 2 * this.hgap, a.canvas.height - this.canvas.height - 1, a.canvas.width - this.canvas.width, this.canvas.height + 1), b.fill(), b.save(), b.lineWidth = 1, b.strokeStyle = "rgba(0,0,0,1)", b.rect(a.canvas.width - this.canvas.width - 2 * this.hgap, a.canvas.height - this.canvas.height - 1, a.canvas.width - this.canvas.width, this.canvas.height + 1), b.stroke(), b.restore(), b.putImageData(this.eagleImageDatas, a.canvas.width - this.canvas.width - this.hgap, a.canvas.height - this.canvas.height), b.restore()\r\n                } else this.eagleImageDatas = this.getData(a)\r\n            }, eventHandler: function (a, b, c) {\r\n                var d = b.x, e = b.y;\r\n                if (d > c.canvas.width - this.canvas.width && e > c.canvas.height - this.canvas.height) {\r\n                    if (d = b.x - this.canvas.width, e = b.y - this.canvas.height, "mousedown" == a && (this.lastTranslateX = c.childs[0].translateX, this.lastTranslateY = c.childs[0].translateY), "mousedrag" == a && c.childs.length > 0) {\r\n                        var f = b.dx, g = b.dy, h = c.getBound(), i = this.canvas.width / c.childs[0].scaleX / h.width, j = this.canvas.height / c.childs[0].scaleY / h.height;\r\n                        c.childs[0].translateX = this.lastTranslateX - f / i, c.childs[0].translateY = this.lastTranslateY - g / j\r\n                    }\r\n                } else;\r\n            }\r\n        }\r\n    }\r\n\r\n    function c(c) {\r\n        function d(b) {\r\n            var c = a.util.getEventPosition(b), d = a.util.getOffsetPosition(n.canvas);\r\n            return c.offsetLeft = c.pageX - d.left, c.offsetTop = c.pageY - d.top, c.x = c.offsetLeft, c.y = c.offsetTop, c.target = null, c\r\n        }\r\n\r\n        function e(a) {\r\n            document.onselectstart = function () {\r\n                return !1\r\n            }, this.mouseOver = !0;\r\n            var b = d(a);\r\n            n.dispatchEventToScenes("mouseover", b), n.dispatchEvent("mouseover", b)\r\n        }\r\n\r\n        function f(a) {\r\n            p = setTimeout(function () {\r\n                o = !0\r\n            }, 500), document.onselectstart = function () {\r\n                return !0\r\n            };\r\n            var b = d(a);\r\n            n.dispatchEventToScenes("mouseout", b), n.dispatchEvent("mouseout", b), n.needRepaint = 0 == n.animate ? !1 : !0\r\n        }\r\n\r\n        function g(a) {\r\n            var b = d(a);\r\n            n.mouseDown = !0, n.mouseDownX = b.x, n.mouseDownY = b.y, n.dispatchEventToScenes("mousedown", b), n.dispatchEvent("mousedown", b)\r\n        }\r\n\r\n        function h(a) {\r\n            var b = d(a);\r\n            n.dispatchEventToScenes("mouseup", b), n.dispatchEvent("mouseup", b), n.mouseDown = !1, n.needRepaint = 0 == n.animate ? !1 : !0\r\n        }\r\n\r\n        function i(a) {\r\n            p && (window.clearTimeout(p), p = null), o = !1;\r\n            var b = d(a);\r\n            n.mouseDown ? 0 == a.button && (b.dx = b.x - n.mouseDownX, b.dy = b.y - n.mouseDownY, n.dispatchEventToScenes("mousedrag", b), n.dispatchEvent("mousedrag", b), 1 == n.eagleEye.visible && n.eagleEye.update()) : (n.dispatchEventToScenes("mousemove", b), n.dispatchEvent("mousemove", b))\r\n        }\r\n\r\n        function j(a) {\r\n            var b = d(a);\r\n            n.dispatchEventToScenes("click", b), n.dispatchEvent("click", b)\r\n        }\r\n\r\n        function k(a) {\r\n            var b = d(a);\r\n            n.dispatchEventToScenes("dbclick", b), n.dispatchEvent("dbclick", b)\r\n        }\r\n\r\n        function l(a) {\r\n            var b = d(a);\r\n            n.dispatchEventToScenes("mousewheel", b), n.dispatchEvent("mousewheel", b), null != n.wheelZoom && (a.preventDefault ? a.preventDefault() : (a = a || window.event, a.returnValue = !1), 1 == n.eagleEye.visible && n.eagleEye.update())\r\n        }\r\n\r\n        function m(b) {\r\n            a.util.isIE || !window.addEventListener ? (b.onmouseout = f, b.onmouseover = e, b.onmousedown = g, b.onmouseup = h, b.onmousemove = i, b.onclick = j, b.ondblclick = k, b.onmousewheel = l, b.touchstart = g, b.touchmove = i, b.touchend = h) : (b.addEventListener("mouseout", f), b.addEventListener("mouseover", e), b.addEventListener("mousedown", g), b.addEventListener("mouseup", h), b.addEventListener("mousemove", i), b.addEventListener("click", j), b.addEventListener("dblclick", k), a.util.isFirefox ? b.addEventListener("DOMMouseScroll", l) : b.addEventListener("mousewheel", l)), window.addEventListener && (window.addEventListener("keydown", function (b) {\r\n                n.dispatchEventToScenes("keydown", a.util.cloneEvent(b));\r\n                var c = b.keyCode;\r\n                (37 == c || 38 == c || 39 == c || 40 == c) && (b.preventDefault ? b.preventDefault() : (b = b || window.event, b.returnValue = !1))\r\n            }, !0), window.addEventListener("keyup", function (b) {\r\n                n.dispatchEventToScenes("keyup", a.util.cloneEvent(b));\r\n                var c = b.keyCode;\r\n                (37 == c || 38 == c || 39 == c || 40 == c) && (b.preventDefault ? b.preventDefault() : (b = b || window.event, b.returnValue = !1))\r\n            }, !0))\r\n        }\r\n\r\n        a.stage = this;\r\n        var n = this;\r\n        this.initialize = function (c) {\r\n            m(c), this.canvas = c, this.graphics = c.getContext("2d"), this.childs = [], this.frames = 24, this.messageBus = new a.util.MessageBus, this.eagleEye = b(this), this.wheelZoom = null, this.mouseDownX = 0, this.mouseDownY = 0, this.mouseDown = !1, this.mouseOver = !1, this.needRepaint = !0, this.serializedProperties = ["frames", "wheelZoom"]\r\n        }, null != c && this.initialize(c);\r\n        var o = !0, p = null;\r\n        document.oncontextmenu = function () {\r\n            return o\r\n        }, this.dispatchEventToScenes = function (a, b) {\r\n            if (0 != this.frames && (this.needRepaint = !0), 1 == this.eagleEye.visible && -1 != a.indexOf("mouse")) {\r\n                var c = b.x, d = b.y;\r\n                if (c > this.width - this.eagleEye.width && d > this.height - this.eagleEye.height)return void this.eagleEye.eventHandler(a, b, this)\r\n            }\r\n            this.childs.forEach(function (c) {\r\n                if (1 == c.visible) {\r\n                    var d = c[a + "Handler"];\r\n                    if (null == d)throw new Error("Function not found:" + a + "Handler");\r\n                    d.call(c, b)\r\n                }\r\n            })\r\n        }, this.add = function (a) {\r\n            for (var b = 0; b < this.childs.length; b++)if (this.childs[b] === a)return;\r\n            a.addTo(this), this.childs.push(a)\r\n        }, this.remove = function (a) {\r\n            if (null == a)throw new Error("Stage.remove出错: 参数为null!");\r\n            for (var b = 0; b < this.childs.length; b++)if (this.childs[b] === a)return a.stage = null, this.childs = this.childs.del(b), this;\r\n            return this\r\n        }, this.clear = function () {\r\n            this.childs = []\r\n        }, this.addEventListener = function (a, b) {\r\n            var c = this, d = function (a) {\r\n                b.call(c, a)\r\n            };\r\n            return this.messageBus.subscribe(a, d), this\r\n        }, this.removeEventListener = function (a) {\r\n            this.messageBus.unsubscribe(a)\r\n        }, this.removeAllEventListener = function () {\r\n            this.messageBus = new a.util.MessageBus\r\n        }, this.dispatchEvent = function (a, b) {\r\n            return this.messageBus.publish(a, b), this\r\n        };\r\n        var q = "click,dbclick,mousedown,mouseup,mouseover,mouseout,mousemove,mousedrag,mousewheel,touchstart,touchmove,touchend,keydown,keyup".split(","), r = this;\r\n        q.forEach(function (a) {\r\n            r[a] = function (b) {\r\n                null != b ? this.addEventListener(a, b) : this.dispatchEvent(a)\r\n            }\r\n        }), this.saveImageInfo = function (a, b) {\r\n            var c = this.eagleEye.getImage(a, b), d = window.open("about:blank");\r\n            return d.document.write("<img src=\'" + c + "\' alt=\'from canvas\'/>"), this\r\n        }, this.saveAsLocalImage = function (a, b) {\r\n            var c = this.eagleEye.getImage(a, b);\r\n            return c.replace("image/png", "image/octet-stream"), window.location.href = c, this\r\n        }, this.paint = function () {\r\n            null != this.canvas && (this.graphics.save(), this.graphics.clearRect(0, 0, this.width, this.height), this.childs.forEach(function (a) {\r\n                1 == a.visible && a.repaint(n.graphics)\r\n            }), 1 == this.eagleEye.visible && this.eagleEye.paint(this), this.graphics.restore())\r\n        }, this.repaint = function () {\r\n            0 != this.frames && (this.frames < 0 && 0 == this.needRepaint || (this.paint(), this.frames < 0 && (this.needRepaint = !1)))\r\n        }, this.zoom = function (a) {\r\n            this.childs.forEach(function (b) {\r\n                0 != b.visible && b.zoom(a)\r\n            })\r\n        }, this.zoomOut = function (a) {\r\n            this.childs.forEach(function (b) {\r\n                0 != b.visible && b.zoomOut(a)\r\n            })\r\n        }, this.zoomIn = function (a) {\r\n            this.childs.forEach(function (b) {\r\n                0 != b.visible && b.zoomIn(a)\r\n            })\r\n        }, this.centerAndZoom = function () {\r\n            this.childs.forEach(function (a) {\r\n                0 != a.visible && a.centerAndZoom()\r\n            })\r\n        }, this.setCenter = function (a, b) {\r\n            var c = this;\r\n            this.childs.forEach(function (d) {\r\n                var e = a - c.canvas.width / 2, f = b - c.canvas.height / 2;\r\n                d.translateX = -e, d.translateY = -f\r\n            })\r\n        }, this.getBound = function () {\r\n            var a = {left: Number.MAX_VALUE, right: Number.MIN_VALUE, top: Number.MAX_VALUE, bottom: Number.MIN_VALUE};\r\n            return this.childs.forEach(function (b) {\r\n                var c = b.getElementsBound();\r\n                c.left < a.left && (a.left = c.left, a.leftNode = c.leftNode), c.top < a.top && (a.top = c.top, a.topNode = c.topNode), c.right > a.right && (a.right = c.right, a.rightNode = c.rightNode), c.bottom > a.bottom && (a.bottom = c.bottom, a.bottomNode = c.bottomNode)\r\n            }), a.width = a.right - a.left, a.height = a.bottom - a.top, a\r\n        }, this.toJson = function () {\r\n            {\r\n                var b = this, c = \'{"version":"\' + a.version + \'",\';\r\n                this.serializedProperties.length\r\n            }\r\n            return this.serializedProperties.forEach(function (a) {\r\n                var d = b[a];\r\n                "string" == typeof d && (d = \'"\' + d + \'"\'), c += \'"\' + a + \'":\' + d + ","\r\n            }), c += \'"childs":[\', this.childs.forEach(function (a) {\r\n                c += a.toJson()\r\n            }), c += "]", c += "}"\r\n        }, function () {\r\n            0 == n.frames ? setTimeout(arguments.callee, 100) : n.frames < 0 ? (n.repaint(), setTimeout(arguments.callee, 1e3 / -n.frames)) : (n.repaint(), setTimeout(arguments.callee, 1e3 / n.frames))\r\n        }(), setTimeout(function () {\r\n            n.mousewheel(function (a) {\r\n                var b = null == a.wheelDelta ? a.detail : a.wheelDelta;\r\n                null != this.wheelZoom && (b > 0 ? this.zoomIn(this.wheelZoom) : this.zoomOut(this.wheelZoom))\r\n            }), n.paint()\r\n        }, 300), setTimeout(function () {\r\n            n.paint()\r\n        }, 1e3), setTimeout(function () {\r\n            n.paint()\r\n        }, 3e3)\r\n    }\r\n\r\n    c.prototype = {\r\n        get width() {\r\n            return this.canvas.width\r\n        }, get height() {\r\n            return this.canvas.height\r\n        }, set cursor(a) {\r\n            this.canvas.style.cursor = a\r\n        }, get cursor() {\r\n            return this.canvas.style.cursor\r\n        }, set mode(a) {\r\n            this.childs.forEach(function (b) {\r\n                b.mode = a\r\n            })\r\n        }\r\n    }, a.Stage = c\r\n}(JTopo), function (a) {\r\n    function b(c) {\r\n        function d(a, b, c, d) {\r\n            return function (e) {\r\n                e.beginPath(), e.strokeStyle = "rgba(0,0,236,0.5)", e.fillStyle = "rgba(0,0,236,0.1)", e.rect(a, b, c, d), e.fill(), e.stroke(), e.closePath()\r\n            }\r\n        }\r\n\r\n        var e = this;\r\n        this.initialize = function () {\r\n            b.prototype.initialize.apply(this, arguments), this.messageBus = new a.util.MessageBus, this.elementType = "scene", this.childs = [], this.zIndexMap = {}, this.zIndexArray = [], this.backgroundColor = "255,255,255", this.visible = !0, this.alpha = 0, this.scaleX = 1, this.scaleY = 1, this.mode = a.SceneMode.normal, this.translate = !0, this.translateX = 0, this.translateY = 0, this.lastTranslateX = 0, this.lastTranslateY = 0, this.mouseDown = !1, this.mouseDownX = null, this.mouseDownY = null, this.mouseDownEvent = null, this.areaSelect = !0, this.operations = [], this.selectedElements = [], this.paintAll = !1;\r\n            var c = "background,backgroundColor,mode,paintAll,areaSelect,translate,translateX,translateY,lastTranslatedX,lastTranslatedY,alpha,visible,scaleX,scaleY".split(",");\r\n            this.serializedProperties = this.serializedProperties.concat(c)\r\n        }, this.initialize(), this.setBackground = function (a) {\r\n            this.background = a\r\n        }, this.addTo = function (a) {\r\n            this.stage !== a && null != a && (this.stage = a)\r\n        }, null != c && (c.add(this), this.addTo(c)), this.show = function () {\r\n            this.visible = !0\r\n        }, this.hide = function () {\r\n            this.visible = !1\r\n        }, this.paint = function (a) {\r\n            if (0 != this.visible && null != this.stage) {\r\n                if (a.save(), this.paintBackgroud(a), a.restore(), a.save(), a.scale(this.scaleX, this.scaleY), 1 == this.translate) {\r\n                    var b = this.getOffsetTranslate(a);\r\n                    a.translate(b.translateX, b.translateY)\r\n                }\r\n                this.paintChilds(a), a.restore(), a.save(), this.paintOperations(a, this.operations), a.restore()\r\n            }\r\n        }, this.repaint = function (a) {\r\n            0 != this.visible && this.paint(a)\r\n        }, this.paintBackgroud = function (a) {\r\n            null != this.background ? a.drawImage(this.background, 0, 0, a.canvas.width, a.canvas.height) : (a.beginPath(), a.fillStyle = "rgba(" + this.backgroundColor + "," + this.alpha + ")", a.fillRect(0, 0, a.canvas.width, a.canvas.height), a.closePath())\r\n        }, this.getDisplayedElements = function () {\r\n            for (var a = [], b = 0; b < this.zIndexArray.length; b++)for (var c = this.zIndexArray[b], d = this.zIndexMap[c], e = 0; e < d.length; e++) {\r\n                var f = d[e];\r\n                this.isVisiable(f) && a.push(f)\r\n            }\r\n            return a\r\n        }, this.getDisplayedNodes = function () {\r\n            for (var b = [], c = 0; c < this.childs.length; c++) {\r\n                var d = this.childs[c];\r\n                d instanceof a.Node && this.isVisiable(d) && b.push(d)\r\n            }\r\n            return b\r\n        }, this.paintChilds = function (b) {\r\n            for (var c = 0; c < this.zIndexArray.length; c++)for (var d = this.zIndexArray[c], e = this.zIndexMap[d], f = 0; f < e.length; f++) {\r\n                var g = e[f];\r\n                if (1 == this.paintAll || this.isVisiable(g)) {\r\n                    if (b.save(), 1 == g.transformAble) {\r\n                        var h = g.getCenterLocation();\r\n                        b.translate(h.x, h.y), g.rotate && b.rotate(g.rotate), g.scaleX && g.scaleY ? b.scale(g.scaleX, g.scaleY) : g.scaleX ? b.scale(g.scaleX, 1) : g.scaleY && b.scale(1, g.scaleY)\r\n                    }\r\n                    //源码修改\r\n                    if(g.alarmFlash){\r\n                        g.alarmFlash();\r\n                    }\r\n                    1 == g.shadow && (b.shadowBlur = g.shadowBlur, b.shadowColor = g.shadowColor, b.shadowOffsetX = g.shadowOffsetX, b.shadowOffsetY = g.shadowOffsetY), g instanceof a.InteractiveElement && (g.selected && 1 == g.showSelected && g.paintSelected(b), 1 == g.isMouseOver && g.paintMouseover(b)), g.paint(b), b.restore()\r\n                }\r\n            }\r\n        }, this.getOffsetTranslate = function (a) {\r\n            var b = this.stage.canvas.width, c = this.stage.canvas.height;\r\n            null != a && "move" != a && (b = a.canvas.width, c = a.canvas.height);\r\n            var d = b / this.scaleX / 2, e = c / this.scaleY / 2, f = {translateX: this.translateX + (d - d * this.scaleX), translateY: this.translateY + (e - e * this.scaleY)};\r\n            return f\r\n        }, this.isVisiable = function (b) {\r\n            if (1 != b.visible)return !1;\r\n            if (b instanceof a.Link)return !0;\r\n            var c = this.getOffsetTranslate(), d = b.x + c.translateX, e = b.y + c.translateY;\r\n            d *= this.scaleX, e *= this.scaleY;\r\n            var f = d + b.width * this.scaleX, g = e + b.height * this.scaleY;\r\n            return d > this.stage.canvas.width || e > this.stage.canvas.height || 0 > f || 0 > g ? !1 : !0\r\n        }, this.paintOperations = function (a, b) {\r\n            for (var c = 0; c < b.length; c++)b[c](a)\r\n        }, this.findElements = function (a) {\r\n            for (var b = [], c = 0; c < this.childs.length; c++)1 == a(this.childs[c]) && b.push(this.childs[c]);\r\n            return b\r\n        }, this.getElementsByClass = function (a) {\r\n            return this.findElements(function (b) {\r\n                return b instanceof a\r\n            })\r\n        }, this.addOperation = function (a) {\r\n            return this.operations.push(a), this\r\n        }, this.clearOperations = function () {\r\n            return this.operations = [], this\r\n        }, this.getElementByXY = function (b, c) {\r\n            for (var d = null, e = this.zIndexArray.length - 1; e >= 0; e--)for (var f = this.zIndexArray[e], g = this.zIndexMap[f], h = g.length - 1; h >= 0; h--) {\r\n                var i = g[h];\r\n                if (i instanceof a.InteractiveElement && this.isVisiable(i) && i.isInBound(b, c))return d = i\r\n            }\r\n            return d\r\n        }, this.add = function (a) {\r\n            this.childs.push(a), null == this.zIndexMap[a.zIndex] && (this.zIndexMap[a.zIndex] = [], this.zIndexArray.push(a.zIndex), this.zIndexArray.sort(function (a, b) {\r\n                return a - b\r\n            })), this.zIndexMap["" + a.zIndex].push(a)\r\n        }, this.remove = function (b) {\r\n            this.childs = a.util.removeFromArray(this.childs, b);\r\n            var c = this.zIndexMap[b.zIndex];\r\n            c && (this.zIndexMap[b.zIndex] = a.util.removeFromArray(c, b)), b.removeHandler(this)\r\n        }, this.clear = function () {\r\n            var a = this;\r\n            this.childs.forEach(function (b) {\r\n                b.removeHandler(a)\r\n            }), this.childs = [], this.operations = [], this.zIndexArray = [], this.zIndexMap = {}\r\n        }, this.addToSelected = function (a) {\r\n            this.selectedElements.push(a)\r\n        }, this.cancleAllSelected = function (a) {\r\n            for (var b = 0; b < this.selectedElements.length; b++)this.selectedElements[b].unselectedHandler(a);\r\n            this.selectedElements = []\r\n        }, this.notInSelectedNodes = function (a) {\r\n            for (var b = 0; b < this.selectedElements.length; b++)if (a === this.selectedElements[b])return !1;\r\n            return !0\r\n        }, this.removeFromSelected = function (a) {\r\n            for (var b = 0; b < this.selectedElements.length; b++) {\r\n                var c = this.selectedElements[b];\r\n                a === c && (this.selectedElements = this.selectedElements.del(b))\r\n            }\r\n        }, this.toSceneEvent = function (b) {\r\n            var c = a.util.clone(b);\r\n            if (c.x /= this.scaleX, c.y /= this.scaleY, 1 == this.translate) {\r\n                var d = this.getOffsetTranslate();\r\n                c.x -= d.translateX, c.y -= d.translateY\r\n            }\r\n            return null != c.dx && (c.dx /= this.scaleX, c.dy /= this.scaleY), null != this.currentElement && (c.target = this.currentElement), c.scene = this, c\r\n        }, this.selectElement = function (a) {\r\n            var b = e.getElementByXY(a.x, a.y);\r\n            if (null != b)if (a.target = b, b.mousedownHander(a), b.selectedHandler(a), e.notInSelectedNodes(b))a.ctrlKey || e.cancleAllSelected(), e.addToSelected(b); else {\r\n                1 == a.ctrlKey && (b.unselectedHandler(), this.removeFromSelected(b));\r\n                for (var c = 0; c < this.selectedElements.length; c++) {\r\n                    var d = this.selectedElements[c];\r\n                    d.selectedHandler(a)\r\n                }\r\n            } else a.ctrlKey || e.cancleAllSelected();\r\n            this.currentElement = b\r\n        }, this.mousedownHandler = function (b) {\r\n            var c = this.toSceneEvent(b);\r\n            if (this.mouseDown = !0, this.mouseDownX = c.x, this.mouseDownY = c.y, this.mouseDownEvent = c, this.mode == a.SceneMode.normal)this.selectElement(c), (null == this.currentElement || this.currentElement instanceof a.Link) && 1 == this.translate && (this.lastTranslateX = this.translateX, this.lastTranslateY = this.translateY); else {\r\n                if (this.mode == a.SceneMode.drag && 1 == this.translate)return this.lastTranslateX = this.translateX, void(this.lastTranslateY = this.translateY);\r\n                this.mode == a.SceneMode.select ? this.selectElement(c) : this.mode == a.SceneMode.edit && (this.selectElement(c), (null == this.currentElement || this.currentElement instanceof a.Link) && 1 == this.translate && (this.lastTranslateX = this.translateX, this.lastTranslateY = this.translateY))\r\n            }\r\n            e.dispatchEvent("mousedown", c)\r\n        }, this.mouseupHandler = function (b) {\r\n            this.stage.cursor != a.MouseCursor.normal && (this.stage.cursor = a.MouseCursor.normal), e.clearOperations();\r\n            var c = this.toSceneEvent(b);\r\n            null != this.currentElement && (c.target = e.currentElement, this.currentElement.mouseupHandler(c)), this.dispatchEvent("mouseup", c), this.mouseDown = !1\r\n        }, this.dragElements = function (b) {\r\n            if (null != this.currentElement && 1 == this.currentElement.dragable)for (var c = 0; c < this.selectedElements.length; c++) {\r\n                var d = this.selectedElements[c];\r\n                if (0 != d.dragable) {\r\n                    var e = a.util.clone(b);\r\n                    e.target = d, d.mousedragHandler(e)\r\n                }\r\n            }\r\n        }, this.mousedragHandler = function (b) {\r\n            var c = this.toSceneEvent(b);\r\n            this.mode == a.SceneMode.normal ? null == this.currentElement || this.currentElement instanceof a.Link ? 1 == this.translate && (this.stage.cursor = a.MouseCursor.closed_hand, this.translateX = this.lastTranslateX + c.dx, this.translateY = this.lastTranslateY + c.dy) : this.dragElements(c) : this.mode == a.SceneMode.drag ? 1 == this.translate && (this.stage.cursor = a.MouseCursor.closed_hand, this.translateX = this.lastTranslateX + c.dx, this.translateY = this.lastTranslateY + c.dy) : this.mode == a.SceneMode.select ? null != this.currentElement ? 1 == this.currentElement.dragable && this.dragElements(c) : 1 == this.areaSelect && this.areaSelectHandle(c) : this.mode == a.SceneMode.edit && (null == this.currentElement || this.currentElement instanceof a.Link ? 1 == this.translate && (this.stage.cursor = a.MouseCursor.closed_hand, this.translateX = this.lastTranslateX + c.dx, this.translateY = this.lastTranslateY + c.dy) : this.dragElements(c)), this.dispatchEvent("mousedrag", c)\r\n        }, this.areaSelectHandle = function (a) {\r\n            var b = a.offsetLeft, c = a.offsetTop, f = this.mouseDownEvent.offsetLeft, g = this.mouseDownEvent.offsetTop, h = b >= f ? f : b, i = c >= g ? g : c, j = Math.abs(a.dx) * this.scaleX, k = Math.abs(a.dy) * this.scaleY, l = new d(h, i, j, k);\r\n            e.clearOperations().addOperation(l), b = a.x, c = a.y, f = this.mouseDownEvent.x, g = this.mouseDownEvent.y, h = b >= f ? f : b, i = c >= g ? g : c, j = Math.abs(a.dx), k = Math.abs(a.dy);\r\n            for (var m = h + j, n = i + k, o = 0; o < e.childs.length; o++) {\r\n                var p = e.childs[o];\r\n                p.x > h && p.x + p.width < m && p.y > i && p.y + p.height < n && e.notInSelectedNodes(p) && (p.selectedHandler(a), e.addToSelected(p))\r\n            }\r\n        }, this.mousemoveHandler = function (b) {\r\n            this.mousecoord = {x: b.x, y: b.y};\r\n            var c = this.toSceneEvent(b);\r\n            if (this.mode == a.SceneMode.drag)return void(this.stage.cursor = a.MouseCursor.open_hand);\r\n            this.mode == a.SceneMode.normal ? this.stage.cursor = a.MouseCursor.normal : this.mode == a.SceneMode.select && (this.stage.cursor = a.MouseCursor.normal);\r\n            var d = e.getElementByXY(c.x, c.y);\r\n            null != d ? (e.mouseOverelement && e.mouseOverelement !== d && (c.target = d, e.mouseOverelement.mouseoutHandler(c)), e.mouseOverelement = d, 0 == d.isMouseOver ? (c.target = d, d.mouseoverHandler(c), e.dispatchEvent("mouseover", c)) : (c.target = d, d.mousemoveHandler(c), e.dispatchEvent("mousemove", c))) : e.mouseOverelement ? (c.target = d, e.mouseOverelement.mouseoutHandler(c), e.mouseOverelement = null, e.dispatchEvent("mouseout", c)) : (c.target = null, e.dispatchEvent("mousemove", c))\r\n        }, this.mouseoverHandler = function (a) {\r\n            var b = this.toSceneEvent(a);\r\n            this.dispatchEvent("mouseover", b)\r\n        }, this.mouseoutHandler = function (a) {\r\n            var b = this.toSceneEvent(a);\r\n            this.dispatchEvent("mouseout", b)\r\n        }, this.clickHandler = function (a) {\r\n            var b = this.toSceneEvent(a);\r\n            this.currentElement && (b.target = this.currentElement, this.currentElement.clickHandler(b)), this.dispatchEvent("click", b)\r\n        }, this.dbclickHandler = function (a) {\r\n            var b = this.toSceneEvent(a);\r\n            this.currentElement ? (b.target = this.currentElement, this.currentElement.dbclickHandler(b)) : e.cancleAllSelected(), this.dispatchEvent("dbclick", b)\r\n        }, this.mousewheelHandler = function (a) {\r\n            var b = this.toSceneEvent(a);\r\n            this.dispatchEvent("mousewheel", b)\r\n        }, this.touchstart = this.mousedownHander, this.touchmove = this.mousedragHandler, this.touchend = this.mousedownHander, this.keydownHandler = function (a) {\r\n            this.dispatchEvent("keydown", a)\r\n        }, this.keyupHandler = function (a) {\r\n            this.dispatchEvent("keyup", a)\r\n        }, this.addEventListener = function (a, b) {\r\n            var c = this, d = function (a) {\r\n                b.call(c, a)\r\n            };\r\n            return this.messageBus.subscribe(a, d), this\r\n        }, this.removeEventListener = function (a) {\r\n            this.messageBus.unsubscribe(a)\r\n        }, this.removeAllEventListener = function () {\r\n            this.messageBus = new a.util.MessageBus\r\n        }, this.dispatchEvent = function (a, b) {\r\n            return this.messageBus.publish(a, b), this\r\n        };\r\n        var f = "click,dbclick,mousedown,mouseup,mouseover,mouseout,mousemove,mousedrag,mousewheel,touchstart,touchmove,touchend,keydown,keyup".split(","), g = this;\r\n        return f.forEach(function (a) {\r\n            g[a] = function (b) {\r\n                null != b ? this.addEventListener(a, b) : this.dispatchEvent(a)\r\n            }\r\n        }), this.zoom = function (a, b) {\r\n            null != a && 0 != a && (this.scaleX = a), null != b && 0 != b && (this.scaleY = b)\r\n        }, this.zoomOut = function (a) {\r\n            0 != a && (null == a && (a = .8), this.scaleX /= a, this.scaleY /= a)\r\n        }, this.zoomIn = function (a) {\r\n            0 != a && (null == a && (a = .8), this.scaleX *= a, this.scaleY *= a)\r\n        }, this.getBound = function () {\r\n            return {left: 0, top: 0, right: this.stage.canvas.width, bottom: this.stage.canvas.height, width: this.stage.canvas.width, height: this.stage.canvas.height}\r\n        }, this.getElementsBound = function () {\r\n            return a.util.getElementsBound(this.childs)\r\n        }, this.translateToCenter = function (a) {\r\n            var b = this.getElementsBound(), c = this.stage.canvas.width / 2 - (b.left + b.right) / 2, d = this.stage.canvas.height / 2 - (b.top + b.bottom) / 2;\r\n            a && (c = a.canvas.width / 2 - (b.left + b.right) / 2, d = a.canvas.height / 2 - (b.top + b.bottom) / 2), this.translateX = c, this.translateY = d\r\n        }, this.setCenter = function (a, b) {\r\n            var c = a - this.stage.canvas.width / 2, d = b - this.stage.canvas.height / 2;\r\n            this.translateX = -c, this.translateY = -d\r\n        }, this.centerAndZoom = function (a, b, c) {\r\n            if (this.translateToCenter(c), null == a || null == b) {\r\n                var d = this.getElementsBound(), e = d.right - d.left, f = d.bottom - d.top, g = this.stage.canvas.width / e, h = this.stage.canvas.height / f;\r\n                c && (g = c.canvas.width / e, h = c.canvas.height / f);\r\n                var i = Math.min(g, h);\r\n                if (i > 1)return;\r\n                this.zoom(i, i)\r\n            }\r\n            this.zoom(a, b)\r\n        }, this.getCenterLocation = function () {\r\n            return {x: e.stage.canvas.width / 2, y: e.stage.canvas.height / 2}\r\n        }, this.doLayout = function (a) {\r\n            a && a(this, this.childs)\r\n        }, this.toJson = function () {\r\n            {\r\n                var a = this, b = "{";\r\n                this.serializedProperties.length\r\n            }\r\n            this.serializedProperties.forEach(function (c) {\r\n                var d = a[c];\r\n                "background" == c && (d = a._background.src), "string" == typeof d && (d = \'"\' + d + \'"\'), b += \'"\' + c + \'":\' + d + ","\r\n            }), b += \'"childs":[\';\r\n            var c = this.childs.length;\r\n            return this.childs.forEach(function (a, d) {\r\n                b += a.toJson(), c > d + 1 && (b += ",")\r\n            }), b += "]", b += "}"\r\n        }, e\r\n    }\r\n\r\n    b.prototype = new a.Element;\r\n    var c = {};\r\n    Object.defineProperties(b.prototype, {\r\n        background: {\r\n            get: function () {\r\n                return this._background\r\n            }, set: function (a) {\r\n                if ("string" == typeof a) {\r\n                    var b = c[a];\r\n                    null == b && (b = new Image, b.src = a, b.onload = function () {\r\n                        c[a] = b\r\n                    }), this._background = b\r\n                } else this._background = a\r\n            }\r\n        }\r\n    }), a.Scene = b\r\n}(JTopo), function (a) {\r\n    function b() {\r\n        this.initialize = function () {\r\n            b.prototype.initialize.apply(this, arguments), this.elementType = "displayElement", this.x = 0, this.y = 0, this.width = 32, this.height = 32, this.visible = !0, this.alpha = 1, this.rotate = 0, this.scaleX = 1, this.scaleY = 1, this.strokeColor = "22,124,255", this.borderColor = "22,124,255", this.fillColor = "22,124,255", this.shadow = !1, this.shadowBlur = 5, this.shadowColor = "rgba(0,0,0,0.5)", this.shadowOffsetX = 3, this.shadowOffsetY = 6, this.transformAble = !1, this.zIndex = 0;\r\n            var a = "x,y,width,height,visible,alpha,rotate,scaleX,scaleY,strokeColor,fillColor,shadow,shadowColor,shadowOffsetX,shadowOffsetY,transformAble,zIndex".split(",");\r\n            this.serializedProperties = this.serializedProperties.concat(a)\r\n        }, this.initialize(), this.paint = function (a) {\r\n            a.beginPath(), a.fillStyle = "rgba(" + this.fillColor + "," + this.alpha + ")", a.rect(-this.width / 2, -this.height / 2, this.width, this.height), a.fill(), a.stroke(), a.closePath()\r\n        }, this.getLocation = function () {\r\n            return {x: this.x, y: this.y}\r\n        }, this.setLocation = function (a, b) {\r\n            return this.x = a, this.y = b, this\r\n        }, this.getCenterLocation = function () {\r\n            return {x: this.x + this.width / 2, y: this.y + this.height / 2}\r\n        }, this.setCenterLocation = function (a, b) {\r\n            return this.x = a - this.width / 2, this.y = b - this.height / 2, this\r\n        }, this.getSize = function () {\r\n            return {width: this.width, height: this.heith}\r\n        }, this.setSize = function (a, b) {\r\n            return this.width = a, this.height = b, this\r\n        }, this.getBound = function () {\r\n            return {left: this.x, top: this.y, right: this.x + this.width, bottom: this.y + this.height, width: this.width, height: this.height}\r\n        }, this.setBound = function (a, b, c, d) {\r\n            return this.setLocation(a, b), this.setSize(c, d), this\r\n        }, this.getDisplayBound = function () {\r\n            return {left: this.x, top: this.y, right: this.x + this.width * this.scaleX, bottom: this.y + this.height * this.scaleY}\r\n        }, this.getDisplaySize = function () {\r\n            return {width: this.width * this.scaleX, height: this.height * this.scaleY}\r\n        }, this.getPosition = function (a) {\r\n            var b, c = this.getBound();\r\n            return "Top_Left" == a ? b = {x: c.left, y: c.top} : "Top_Center" == a ? b = {x: this.cx, y: c.top} : "Top_Right" == a ? b = {x: c.right, y: c.top} : "Middle_Left" == a ? b = {\r\n                x: c.left,\r\n                y: this.cy\r\n            } : "Middle_Center" == a ? b = {x: this.cx, y: this.cy} : "Middle_Right" == a ? b = {x: c.right, y: this.cy} : "Bottom_Left" == a ? b = {\r\n                x: c.left,\r\n                y: c.bottom\r\n            } : "Bottom_Center" == a ? b = {x: this.cx, y: c.bottom} : "Bottom_Right" == a && (b = {x: c.right, y: c.bottom}), b\r\n        }\r\n    }\r\n\r\n    function c() {\r\n        this.initialize = function () {\r\n            c.prototype.initialize.apply(this, arguments), this.elementType = "interactiveElement", this.dragable = !1, this.selected = !1, this.showSelected = !0, this.selectedLocation = null, this.isMouseOver = !1;\r\n            var a = "dragable,selected,showSelected,isMouseOver".split(",");\r\n            this.serializedProperties = this.serializedProperties.concat(a)\r\n        }, this.initialize(), this.paintSelected = function (a) {\r\n            0 != this.showSelected && (a.save(), a.beginPath(), a.strokeStyle = "rgba(168,202,255, 0.9)", a.fillStyle = "rgba(168,202,236,0.7)", a.rect(-this.width / 2 - 3, -this.height / 2 - 3, this.width + 6, this.height + 6), a.fill(), a.stroke(), a.closePath(), a.restore())\r\n        }, this.paintMouseover = function (a) {\r\n            return this.paintSelected(a)\r\n        }, this.isInBound = function (a, b) {\r\n            return a > this.x && a < this.x + this.width * Math.abs(this.scaleX) && b > this.y && b < this.y + this.height * Math.abs(this.scaleY)\r\n        }, this.selectedHandler = function () {\r\n            this.selected = !0, this.selectedLocation = {x: this.x, y: this.y}\r\n        }, this.unselectedHandler = function () {\r\n            this.selected = !1, this.selectedLocation = null\r\n        }, this.dbclickHandler = function (a) {\r\n            this.dispatchEvent("dbclick", a)\r\n        }, this.clickHandler = function (a) {\r\n            this.dispatchEvent("click", a)\r\n        }, this.mousedownHander = function (a) {\r\n            this.dispatchEvent("mousedown", a)\r\n        }, this.mouseupHandler = function (a) {\r\n            this.dispatchEvent("mouseup", a)\r\n        }, this.mouseoverHandler = function (a) {\r\n            this.isMouseOver = !0, this.dispatchEvent("mouseover", a)\r\n        }, this.mousemoveHandler = function (a) {\r\n            this.dispatchEvent("mousemove", a)\r\n        }, this.mouseoutHandler = function (a) {\r\n            this.isMouseOver = !1, this.dispatchEvent("mouseout", a)\r\n        }, this.mousedragHandler = function (a) {\r\n            var b = this.selectedLocation.x + a.dx, c = this.selectedLocation.y + a.dy;\r\n            this.setLocation(b, c), this.dispatchEvent("mousedrag", a)\r\n        }, this.addEventListener = function (b, c) {\r\n            var d = this, e = function (a) {\r\n                c.call(d, a)\r\n            };\r\n            return this.messageBus || (this.messageBus = new a.util.MessageBus), this.messageBus.subscribe(b, e), this\r\n        }, this.dispatchEvent = function (a, b) {\r\n            return this.messageBus ? (this.messageBus.publish(a, b), this) : null\r\n        }, this.removeEventListener = function (a) {\r\n            this.messageBus.unsubscribe(a)\r\n        }, this.removeAllEventListener = function () {\r\n            this.messageBus = new a.util.MessageBus\r\n        };\r\n        var b = "click,dbclick,mousedown,mouseup,mouseover,mouseout,mousemove,mousedrag,touchstart,touchmove,touchend".split(","), d = this;\r\n        b.forEach(function (a) {\r\n            d[a] = function (b) {\r\n                null != b ? this.addEventListener(a, b) : this.dispatchEvent(a)\r\n            }\r\n        })\r\n    }\r\n\r\n    function d() {\r\n        this.initialize = function () {\r\n            d.prototype.initialize.apply(this, arguments), this.editAble = !1, this.selectedPoint = null\r\n        }, this.getCtrlPosition = function (a) {\r\n            var b = 5, c = 5, d = this.getPosition(a);\r\n            return {left: d.x - b, top: d.y - c, right: d.x + b, bottom: d.y + c}\r\n        }, this.selectedHandler = function (b) {\r\n            d.prototype.selectedHandler.apply(this, arguments), this.selectedSize = {width: this.width, height: this.height}, b.scene.mode == a.SceneMode.edit && (this.editAble = !0)\r\n        }, this.unselectedHandler = function () {\r\n            d.prototype.unselectedHandler.apply(this, arguments), this.selectedSize = null, this.editAble = !1\r\n        };\r\n        var b = ["Top_Left", "Top_Center", "Top_Right", "Middle_Left", "Middle_Right", "Bottom_Left", "Bottom_Center", "Bottom_Right"];\r\n        this.paintCtrl = function (a) {\r\n            if (0 != this.editAble) {\r\n                a.save();\r\n                for (var c = 0; c < b.length; c++) {\r\n                    var d = this.getCtrlPosition(b[c]);\r\n                    d.left -= this.cx, d.right -= this.cx, d.top -= this.cy, d.bottom -= this.cy;\r\n                    var e = d.right - d.left, f = d.bottom - d.top;\r\n                    a.beginPath(), a.strokeStyle = "rgba(0,0,0,0.8)", a.rect(d.left, d.top, e, f), a.stroke(), a.closePath(), a.beginPath(), a.strokeStyle = "rgba(255,255,255,0.3)", a.rect(d.left + 1, d.top + 1, e - 2, f - 2), a.stroke(), a.closePath()\r\n                }\r\n                a.restore()\r\n            }\r\n        }, this.isInBound = function (a, c) {\r\n            if (this.selectedPoint = null, 1 == this.editAble)for (var e = 0; e < b.length; e++) {\r\n                var f = this.getCtrlPosition(b[e]);\r\n                if (a > f.left && a < f.right && c > f.top && c < f.bottom)return this.selectedPoint = b[e], !0\r\n            }\r\n            return d.prototype.isInBound.apply(this, arguments)\r\n        }, this.mousedragHandler = function (a) {\r\n            if (null == this.selectedPoint) {\r\n                var b = this.selectedLocation.x + a.dx, c = this.selectedLocation.y + a.dy;\r\n                this.setLocation(b, c), this.dispatchEvent("mousedrag", a)\r\n            } else {\r\n                if ("Top_Left" == this.selectedPoint) {\r\n                    var d = this.selectedSize.width - a.dx, e = this.selectedSize.height - a.dy, b = this.selectedLocation.x + a.dx, c = this.selectedLocation.y + a.dy;\r\n                    b < this.x + this.width && (this.x = b, this.width = d), c < this.y + this.height && (this.y = c, this.height = e)\r\n                } else if ("Top_Center" == this.selectedPoint) {\r\n                    var e = this.selectedSize.height - a.dy, c = this.selectedLocation.y + a.dy;\r\n                    c < this.y + this.height && (this.y = c, this.height = e)\r\n                } else if ("Top_Right" == this.selectedPoint) {\r\n                    var d = this.selectedSize.width + a.dx, c = this.selectedLocation.y + a.dy;\r\n                    c < this.y + this.height && (this.y = c, this.height = this.selectedSize.height - a.dy), d > 1 && (this.width = d)\r\n                } else if ("Middle_Left" == this.selectedPoint) {\r\n                    var d = this.selectedSize.width - a.dx, b = this.selectedLocation.x + a.dx;\r\n                    b < this.x + this.width && (this.x = b), d > 1 && (this.width = d)\r\n                } else if ("Middle_Right" == this.selectedPoint) {\r\n                    var d = this.selectedSize.width + a.dx;\r\n                    d > 1 && (this.width = d)\r\n                } else if ("Bottom_Left" == this.selectedPoint) {\r\n                    var d = this.selectedSize.width - a.dx, b = this.selectedLocation.x + a.dx;\r\n                    d > 1 && (this.x = b, this.width = d);\r\n                    var e = this.selectedSize.height + a.dy;\r\n                    e > 1 && (this.height = e)\r\n                } else if ("Bottom_Center" == this.selectedPoint) {\r\n                    var e = this.selectedSize.height + a.dy;\r\n                    e > 1 && (this.height = e)\r\n                } else if ("Bottom_Right" == this.selectedPoint) {\r\n                    var d = this.selectedSize.width + a.dx;\r\n                    d > 1 && (this.width = d);\r\n                    var e = this.selectedSize.height + a.dy;\r\n                    e > 1 && (this.height = e)\r\n                }\r\n                this.dispatchEvent("resize", a)\r\n            }\r\n        }\r\n    }\r\n\r\n    b.prototype = new a.Element, Object.defineProperties(b.prototype, {\r\n        cx: {\r\n            get: function () {\r\n                return this.x + this.width / 2\r\n            }, set: function (a) {\r\n                this.x = a - this.width / 2\r\n            }\r\n        }, cy: {\r\n            get: function () {\r\n                return this.y + this.height / 2\r\n            }, set: function (a) {\r\n                this.y = a - this.height / 2\r\n            }\r\n        }\r\n    }), c.prototype = new b, d.prototype = new c, a.DisplayElement = b, a.InteractiveElement = c, a.EditableElement = d\r\n}(JTopo), function (a) {\r\n    function b(c) {\r\n        this.initialize = function (c) {\r\n            b.prototype.initialize.apply(this, arguments), this.elementType = "node", this.zIndex = a.zIndex_Node, this.text = c, this.font = "12px Consolas", this.fontColor = "255,255,255", this.borderWidth = 0, this.borderColor = "255,255,255", this.borderRadius = null, this.dragable = !0, this.textPosition = "Bottom_Center", this.textOffsetX = 0, this.textOffsetY = 0, this.transformAble = !0, this.inLinks = null, this.outLinks = null;\r\n            var d = "text,font,fontColor,textPosition,textOffsetX,textOffsetY,borderRadius".split(",");\r\n            this.serializedProperties = this.serializedProperties.concat(d)\r\n        }, this.initialize(c), this.paint = function (a) {\r\n            if (this.image) {\r\n                var b = a.globalAlpha;\r\n                a.globalAlpha = this.alpha, null != this.alarmImage && null != this.alarm ? a.drawImage(this.alarmImage, -this.width / 2, -this.height / 2, this.width, this.height) : a.drawImage(this.image, -this.width / 2, -this.height / 2, this.width, this.height), a.globalAlpha = b\r\n            } else a.beginPath(), a.fillStyle = "rgba(" + this.fillColor + "," + this.alpha + ")", null == this.borderRadius || 0 == this.borderRadius ? a.rect(-this.width / 2, -this.height / 2, this.width, this.height) : a.JTopoRoundRect(-this.width / 2, -this.height / 2, this.width, this.height, this.borderRadius), a.fill(), a.closePath();\r\n            this.paintText(a), this.paintBorder(a), this.paintCtrl(a), this.paintAlarmText(a)\r\n        }, this.paintAlarmText = function (a) {\r\n            if (null != this.alarm && "" != this.alarm) {\r\n                var b = this.alarmColor || "255,0,0", c = this.alarmAlpha || .5;\r\n                a.beginPath(), a.font = this.alarmFont || "10px 微软雅黑";\r\n                var d = a.measureText(this.alarm).width + 6, e = a.measureText("田").width + 6, f = this.width / 2 - d / 2, g = -this.height / 2 - e - 8;\r\n                a.strokeStyle = "rgba(" + b + ", " + c + ")", a.fillStyle = "rgba(" + b + ", " + c + ")", a.lineCap = "round", a.lineWidth = 1, a.moveTo(f, g), a.lineTo(f + d, g), a.lineTo(f + d, g + e), a.lineTo(f + d / 2 + 6, g + e), a.lineTo(f + d / 2, g + e + 8), a.lineTo(f + d / 2 - 6, g + e), a.lineTo(f, g + e), a.lineTo(f, g), a.fill(), a.stroke(), a.closePath(), a.beginPath(), a.strokeStyle = "rgba(" + this.fontColor + ", " + this.alpha + ")", a.fillStyle = "rgba(" + this.fontColor + ", " + this.alpha + ")", a.fillText(this.alarm, f + 2, g + e - 4), a.closePath()\r\n            }\r\n        }, this.paintText = function (a) {\r\n            var b = this.text;\r\n            if (null != b && "" != b) {\r\n                a.beginPath(), a.font = this.font;\r\n                var c = a.measureText(b).width, d = a.measureText("田").width;\r\n                a.fillStyle = "rgba(" + this.fontColor + ", " + this.alpha + ")";\r\n                var e = this.getTextPostion(this.textPosition, c, d);\r\n                a.fillText(b, e.x, e.y), a.closePath()\r\n            }\r\n        }, this.paintBorder = function (a) {\r\n            if (0 != this.borderWidth) {\r\n                a.beginPath(), a.lineWidth = this.borderWidth, a.strokeStyle = "rgba(" + this.borderColor + "," + this.alpha + ")";\r\n                var b = this.borderWidth / 2;\r\n                null == this.borderRadius || 0 == this.borderRadius ? a.rect(-this.width / 2 - b, -this.height / 2 - b, this.width + this.borderWidth, this.height + this.borderWidth) : a.JTopoRoundRect(-this.width / 2 - b, -this.height / 2 - b, this.width + this.borderWidth, this.height + this.borderWidth, this.borderRadius), a.stroke(), a.closePath()\r\n            }\r\n        }, this.getTextPostion = function (a, b, c) {\r\n            var d = null;\r\n            return null == a || "Bottom_Center" == a ? d = {x: -this.width / 2 + (this.width - b) / 2, y: this.height / 2 + c} : "Top_Center" == a ? d = {\r\n                x: -this.width / 2 + (this.width - b) / 2,\r\n                y: -this.height / 2 - c / 2\r\n            } : "Top_Right" == a ? d = {x: this.width / 2, y: -this.height / 2 - c / 2} : "Top_Left" == a ? d = {\r\n                x: -this.width / 2 - b,\r\n                y: -this.height / 2 - c / 2\r\n            } : "Bottom_Right" == a ? d = {x: this.width / 2, y: this.height / 2 + c} : "Bottom_Left" == a ? d = {\r\n                x: -this.width / 2 - b,\r\n                y: this.height / 2 + c\r\n            } : "Middle_Center" == a ? d = {x: -this.width / 2 + (this.width - b) / 2, y: c / 2} : "Middle_Right" == a ? d = {\r\n                x: this.width / 2,\r\n                y: c / 2\r\n            } : "Middle_Left" == a && (d = {x: -this.width / 2 - b, y: c / 2}), null != this.textOffsetX && (d.x += this.textOffsetX), null != this.textOffsetY && (d.y += this.textOffsetY), d\r\n        }, this.setImage = function (a, b) {\r\n            if (null == a)throw new Error("Node.setImage(): 参数Image对象为空!");\r\n            var c = this;\r\n            if ("string" == typeof a) {\r\n                var d = j[a];\r\n                null == d ? (d = new Image, d.src = a, d.onload = function () {\r\n                    j[a] = d, 1 == b && c.setSize(d.width, d.height), c.image = d, c.alarmColor = null == c.alarmColor ? "255,0,0" : c.alarmColor\r\n                }) : (b && this.setSize(d.width, d.height), c.image = d, c.alarmColor = null == c.alarmColor ? "255,0,0" : c.alarmColor)\r\n            } else this.image = a, c.alarmColor = null == c.alarmColor ? "255,0,0" : c.alarmColor, 1 == b && this.setSize(a.width, a.height)\r\n        }, this.removeHandler = function (a) {\r\n            var b = this;\r\n            this.outLinks && (this.outLinks.forEach(function (c) {\r\n                c.nodeA === b && a.remove(c)\r\n            }), this.outLinks = null), this.inLinks && (this.inLinks.forEach(function (c) {\r\n                c.nodeZ === b && a.remove(c)\r\n            }), this.inLinks = null)\r\n        }\r\n    }\r\n\r\n    function c() {\r\n        c.prototype.initialize.apply(this, arguments)\r\n    }\r\n\r\n    function d(a) {\r\n        this.initialize(), this.text = a, this.elementType = "TextNode", this.paint = function (a) {\r\n            a.beginPath(), a.font = this.font, this.width = a.measureText(this.text).width, this.height = a.measureText("田").width, a.strokeStyle = "rgba(" + this.fontColor + ", " + this.alpha + ")", a.fillStyle = "rgba(" + this.fontColor + ", " + this.alpha + ")", a.fillText(this.text, -this.width / 2, this.height / 2), a.closePath(), this.paintBorder(a), this.paintCtrl(a), this.paintAlarmText(a)\r\n        }\r\n    }\r\n\r\n    function e(a, b, c) {\r\n        this.initialize(), this.text = a, this.href = b, this.target = c, this.elementType = "LinkNode", this.isVisited = !1, this.visitedColor = null, this.paint = function (a) {\r\n            a.beginPath(), a.font = this.font, this.width = a.measureText(this.text).width, this.height = a.measureText("田").width, this.isVisited && null != this.visitedColor ? (a.strokeStyle = "rgba(" + this.visitedColor + ", " + this.alpha + ")", a.fillStyle = "rgba(" + this.visitedColor + ", " + this.alpha + ")") : (a.strokeStyle = "rgba(" + this.fontColor + ", " + this.alpha + ")", a.fillStyle = "rgba(" + this.fontColor + ", " + this.alpha + ")"), a.fillText(this.text, -this.width / 2, this.height / 2), this.isMouseOver && (a.moveTo(-this.width / 2, this.height), a.lineTo(this.width / 2, this.height), a.stroke()), a.closePath(), this.paintBorder(a), this.paintCtrl(a), this.paintAlarmText(a)\r\n        }, this.mousemove(function () {\r\n            var a = document.getElementsByTagName("canvas");\r\n            if (a && a.length > 0)for (var b = 0; b < a.length; b++)a[b].style.cursor = "pointer"\r\n        }), this.mouseout(function () {\r\n            var a = document.getElementsByTagName("canvas");\r\n            if (a && a.length > 0)for (var b = 0; b < a.length; b++)a[b].style.cursor = "default"\r\n        }), this.click(function () {\r\n            "_blank" == this.target ? window.open(this.href) : location = this.href, this.isVisited = !0\r\n        })\r\n    }\r\n\r\n    function f(a) {\r\n        this.initialize(arguments), this._radius = 20, this.beginDegree = 0, this.endDegree = 2 * Math.PI, this.text = a, this.paint = function (a) {\r\n            a.save(), a.beginPath(), a.fillStyle = "rgba(" + this.fillColor + "," + this.alpha + ")", a.arc(0, 0, this.radius, this.beginDegree, this.endDegree, !0), a.fill(), a.closePath(), a.restore(), this.paintText(a), this.paintBorder(a), this.paintCtrl(a), this.paintAlarmText(a)\r\n        }, this.paintSelected = function (a) {\r\n            a.save(), a.beginPath(), a.strokeStyle = "rgba(168,202,255, 0.9)", a.fillStyle = "rgba(168,202,236,0.7)", a.arc(0, 0, this.radius + 3, this.beginDegree, this.endDegree, !0), a.fill(), a.stroke(), a.closePath(), a.restore()\r\n        }\r\n    }\r\n\r\n    function g(a, b, c) {\r\n        this.initialize(), this.frameImages = a || [], this.frameIndex = 0, this.isStop = !0;\r\n        var d = b || 1e3;\r\n        this.repeatPlay = !1;\r\n        var e = this;\r\n        this.nextFrame = function () {\r\n            if (!this.isStop && null != this.frameImages.length) {\r\n                if (this.frameIndex++, this.frameIndex >= this.frameImages.length) {\r\n                    if (!this.repeatPlay)return;\r\n                    this.frameIndex = 0\r\n                }\r\n                this.setImage(this.frameImages[this.frameIndex], c), setTimeout(function () {\r\n                    e.nextFrame()\r\n                }, d / a.length)\r\n            }\r\n        }\r\n    }\r\n\r\n    function h(a, b, c, d, e) {\r\n        this.initialize();\r\n        var f = this;\r\n        this.setImage(a), this.frameIndex = 0, this.isPause = !0, this.repeatPlay = !1;\r\n        var g = d || 1e3;\r\n        e = e || 0, this.paint = function (a) {\r\n            if (this.image) {\r\n                var b = this.width, d = this.height;\r\n                a.save(), a.beginPath(), a.fillStyle = "rgba(" + this.fillColor + "," + this.alpha + ")";\r\n                var f = (Math.floor(this.frameIndex / c) + e) * d, g = Math.floor(this.frameIndex % c) * b;\r\n                a.drawImage(this.image, g, f, b, d, -b / 2, -d / 2, b, d), a.fill(), a.closePath(), a.restore(), this.paintText(a), this.paintBorder(a), this.paintCtrl(a), this.paintAlarmText(a)\r\n            }\r\n        }, this.nextFrame = function () {\r\n            if (!this.isStop) {\r\n                if (this.frameIndex++, this.frameIndex >= b * c) {\r\n                    if (!this.repeatPlay)return;\r\n                    this.frameIndex = 0\r\n                }\r\n                setTimeout(function () {\r\n                    f.isStop || f.nextFrame()\r\n                }, g / (b * c))\r\n            }\r\n        }\r\n    }\r\n\r\n    function i() {\r\n        var a = null;\r\n        return a = arguments.length <= 3 ? new g(arguments[0], arguments[1], arguments[2]) : new h(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4], arguments[5]), a.stop = function () {\r\n            a.isStop = !0\r\n        }, a.play = function () {\r\n            a.isStop = !1, a.frameIndex = 0, a.nextFrame()\r\n        }, a\r\n    }\r\n\r\n    var j = {};\r\n    b.prototype = new a.EditableElement, c.prototype = new b, Object.defineProperties(c.prototype, {\r\n        alarmColor: {\r\n            get: function () {\r\n                return this._alarmColor\r\n            }, set: function (b) {\r\n                if (this._alarmColor = b, null != this.image) {\r\n                    var c = a.util.genImageAlarm(this.image, b);\r\n                    c && (this.alarmImage = c)\r\n                }\r\n            }\r\n        }\r\n    }), d.prototype = new c, e.prototype = new d, f.prototype = new c, Object.defineProperties(f.prototype, {\r\n        radius: {\r\n            get: function () {\r\n                return this._radius\r\n            }, set: function (a) {\r\n                this._radius = a;\r\n                var b = 2 * this.radius, c = 2 * this.radius;\r\n                this.width = b, this.height = c\r\n            }\r\n        }, width: {\r\n            get: function () {\r\n                return this._width\r\n            }, set: function (a) {\r\n                this._radius = a / 2, this._width = a\r\n            }\r\n        }, height: {\r\n            get: function () {\r\n                return this._height\r\n            }, set: function (a) {\r\n                this._radius = a / 2, this._height = a\r\n            }\r\n        }\r\n    }), g.prototype = new c, h.prototype = new c, i.prototype = new c, a.Node = c, a.TextNode = d, a.LinkNode = e, a.CircleNode = f, a.AnimateNode = i\r\n}(JTopo), function (a) {\r\n    function b(a, b) {\r\n        var c = [];\r\n        if (null == a || null == b)return c;\r\n        if (a && b && a.outLinks && b.inLinks)for (var d = 0; d < a.outLinks.length; d++)for (var e = a.outLinks[d], f = 0; f < b.inLinks.length; f++) {\r\n            var g = b.inLinks[f];\r\n            e === g && c.push(g)\r\n        }\r\n        return c\r\n    }\r\n\r\n    function c(a, c) {\r\n        var d = b(a, c), e = b(c, a), f = d.concat(e);\r\n        return f\r\n    }\r\n\r\n    function d(a) {\r\n        var b = c(a.nodeA, a.nodeZ);\r\n        return b = b.filter(function (b) {\r\n            return a !== b\r\n        })\r\n    }\r\n\r\n    function e(a, b) {\r\n        return c(a, b).length\r\n    }\r\n\r\n    function f(b, c, g) {\r\n        function h(b, c) {\r\n            var d = a.util.lineF(b.cx, b.cy, c.cx, c.cy), e = b.getBound(), f = a.util.intersectionLineBound(d, e);\r\n            return f\r\n        }\r\n\r\n        this.initialize = function (b, c, d) {\r\n            if (f.prototype.initialize.apply(this, arguments), this.elementType = "link", this.zIndex = a.zIndex_Link, 0 != arguments.length) {\r\n                this.text = d, this.nodeA = b, this.nodeZ = c, this.nodeA && null == this.nodeA.outLinks && (this.nodeA.outLinks = []), this.nodeA && null == this.nodeA.inLinks && (this.nodeA.inLinks = []), this.nodeZ && null == this.nodeZ.inLinks && (this.nodeZ.inLinks = []), this.nodeZ && null == this.nodeZ.outLinks && (this.nodeZ.outLinks = []), null != this.nodeA && this.nodeA.outLinks.push(this), null != this.nodeZ && this.nodeZ.inLinks.push(this), this.caculateIndex(), this.font = "12px Consolas", this.fontColor = "255,255,255", this.lineWidth = 2, this.lineJoin = "miter", this.transformAble = !1, this.bundleOffset = 20, this.bundleGap = 12, this.textOffsetX = 0, this.textOffsetY = 0, this.arrowsRadius = null, this.arrowsOffset = 0, this.dashedPattern = null, this.path = [];\r\n                var e = "text,font,fontColor,lineWidth,lineJoin".split(",");\r\n                this.serializedProperties = this.serializedProperties.concat(e)\r\n            }\r\n        }, this.caculateIndex = function () {\r\n            var a = e(this.nodeA, this.nodeZ);\r\n            a > 0 && (this.nodeIndex = a - 1)\r\n        }, this.initialize(b, c, g), this.removeHandler = function () {\r\n            var a = this;\r\n            this.nodeA && this.nodeA.outLinks && (this.nodeA.outLinks = this.nodeA.outLinks.filter(function (b) {\r\n                return b !== a\r\n            })), this.nodeZ && this.nodeZ.inLinks && (this.nodeZ.inLinks = this.nodeZ.inLinks.filter(function (b) {\r\n                return b !== a\r\n            }));\r\n            var b = d(this);\r\n            b.forEach(function (a, b) {\r\n                a.nodeIndex = b\r\n            })\r\n        }, this.getStartPosition = function () {\r\n            var a = {x: this.nodeA.cx, y: this.nodeA.cy};\r\n            return a\r\n        }, this.getEndPosition = function () {\r\n            var a;\r\n            return null != this.arrowsRadius && (a = h(this.nodeZ, this.nodeA)), null == a && (a = {x: this.nodeZ.cx, y: this.nodeZ.cy}), a\r\n        }, this.getPath = function () {\r\n            var a = [], b = this.getStartPosition(), c = this.getEndPosition();\r\n            if (this.nodeA === this.nodeZ)return [b, c];\r\n            var d = e(this.nodeA, this.nodeZ);\r\n            if (1 == d)return [b, c];\r\n            var f = Math.atan2(c.y - b.y, c.x - b.x), g = {x: b.x + this.bundleOffset * Math.cos(f), y: b.y + this.bundleOffset * Math.sin(f)}, h = {\r\n                x: c.x + this.bundleOffset * Math.cos(f - Math.PI),\r\n                y: c.y + this.bundleOffset * Math.sin(f - Math.PI)\r\n            }, i = f - Math.PI / 2, j = f - Math.PI / 2, k = d * this.bundleGap / 2 - this.bundleGap / 2, l = this.bundleGap * this.nodeIndex, m = {\r\n                x: g.x + l * Math.cos(i),\r\n                y: g.y + l * Math.sin(i)\r\n            }, n = {x: h.x + l * Math.cos(j), y: h.y + l * Math.sin(j)};\r\n            return m = {x: m.x + k * Math.cos(i - Math.PI), y: m.y + k * Math.sin(i - Math.PI)}, n = {x: n.x + k * Math.cos(j - Math.PI), y: n.y + k * Math.sin(j - Math.PI)}, a.push({\r\n                x: b.x,\r\n                y: b.y\r\n            }), a.push({x: m.x, y: m.y}), a.push({x: n.x, y: n.y}), a.push({x: c.x, y: c.y}), a\r\n        }, this.paintPath = function (a, b) {\r\n            if (this.nodeA === this.nodeZ)return void this.paintLoop(a);\r\n            a.beginPath(), a.moveTo(b[0].x, b[0].y);\r\n            for (var c = 1; c < b.length; c++)null == this.dashedPattern ? a.lineTo(b[c].x, b[c].y) : a.JTopoDashedLineTo(b[c - 1].x, b[c - 1].y, b[c].x, b[c].y, this.dashedPattern);\r\n            if (a.stroke(), a.closePath(), null != this.arrowsRadius) {\r\n                var d = b[b.length - 2], e = b[b.length - 1];\r\n                this.paintArrow(a, d, e)\r\n            }\r\n        }, this.paintLoop = function (a) {\r\n            a.beginPath();\r\n            {\r\n                var b = this.bundleGap * (this.nodeIndex + 1) / 2;\r\n                Math.PI + Math.PI / 2\r\n            }\r\n            a.arc(this.nodeA.x, this.nodeA.y, b, Math.PI / 2, 2 * Math.PI), a.stroke(), a.closePath()\r\n        }, this.paintArrow = function (b, c, d) {\r\n            var e = this.arrowsOffset, f = this.arrowsRadius / 2, g = c, h = d, i = Math.atan2(h.y - g.y, h.x - g.x), j = a.util.getDistance(g, h) - this.arrowsRadius, k = g.x + (j + e) * Math.cos(i), l = g.y + (j + e) * Math.sin(i), m = h.x + e * Math.cos(i), n = h.y + e * Math.sin(i);\r\n            i -= Math.PI / 2;\r\n            var o = {x: k + f * Math.cos(i), y: l + f * Math.sin(i)}, p = {x: k + f * Math.cos(i - Math.PI), y: l + f * Math.sin(i - Math.PI)};\r\n            b.beginPath(), b.fillStyle = "rgba(" + this.strokeColor + "," + this.alpha + ")", b.moveTo(o.x, o.y), b.lineTo(m, n), b.lineTo(p.x, p.y), b.stroke(), b.closePath()\r\n        }, this.paint = function (a) {\r\n            if (null != this.nodeA && null != !this.nodeZ) {\r\n                var b = this.getPath(this.nodeIndex);\r\n                this.path = b, a.strokeStyle = "rgba(" + this.strokeColor + "," + this.alpha + ")", a.lineWidth = this.lineWidth, this.paintPath(a, b), b && b.length > 0 && this.paintText(a, b)\r\n            }\r\n        };\r\n        var i = -(Math.PI / 2 + Math.PI / 4);\r\n        this.paintText = function (a, b) {\r\n            var c = b[0], d = b[b.length - 1];\r\n            if (4 == b.length && (c = b[1], d = b[2]), this.text && this.text.length > 0) {\r\n                var e = (d.x + c.x) / 2 + this.textOffsetX, f = (d.y + c.y) / 2 + this.textOffsetY;\r\n                a.save(), a.beginPath(), a.font = this.font;\r\n                var g = a.measureText(this.text).width, h = a.measureText("田").width;\r\n                if (a.fillStyle = "rgba(" + this.fontColor + ", " + this.alpha + ")", this.nodeA === this.nodeZ) {\r\n                    var j = this.bundleGap * (this.nodeIndex + 1) / 2, e = this.nodeA.x + j * Math.cos(i), f = this.nodeA.y + j * Math.sin(i);\r\n                    a.fillText(this.text, e, f)\r\n                } else a.fillText(this.text, e - g / 2, f - h / 2);\r\n                a.stroke(), a.closePath(), a.restore()\r\n            }\r\n        }, this.paintSelected = function (a) {\r\n            a.shadowBlur = 10, a.shadowColor = "rgba(0,0,0,1)", a.shadowOffsetX = 0, a.shadowOffsetY = 0\r\n        }, this.isInBound = function (b, c) {\r\n            if (this.nodeA === this.nodeZ) {\r\n                var d = this.bundleGap * (this.nodeIndex + 1) / 2, e = a.util.getDistance(this.nodeA, {x: b, y: c}) - d;\r\n                return Math.abs(e) <= 3\r\n            }\r\n            for (var f = !1, g = 1; g < this.path.length; g++) {\r\n                var h = this.path[g - 1], i = this.path[g];\r\n                if (1 == a.util.isPointInLine({x: b, y: c}, h, i)) {\r\n                    f = !0;\r\n                    break\r\n                }\r\n            }\r\n            return f\r\n        }\r\n    }\r\n\r\n    function g(a, b, c) {\r\n        this.initialize = function () {\r\n            g.prototype.initialize.apply(this, arguments), this.direction = "horizontal"\r\n        }, this.initialize(a, b, c), this.getStartPosition = function () {\r\n            var a = {x: this.nodeA.cx, y: this.nodeA.cy};\r\n            return "horizontal" == this.direction ? this.nodeZ.cx > a.x ? a.x += this.nodeA.width / 2 : a.x -= this.nodeA.width / 2 : this.nodeZ.cy > a.y ? a.y += this.nodeA.height / 2 : a.y -= this.nodeA.height / 2, a\r\n        }, this.getEndPosition = function () {\r\n            var a = {x: this.nodeZ.cx, y: this.nodeZ.cy};\r\n            return "horizontal" == this.direction ? this.nodeA.cy < a.y ? a.y -= this.nodeZ.height / 2 : a.y += this.nodeZ.height / 2 : a.x = this.nodeA.cx < a.x ? this.nodeZ.x : this.nodeZ.x + this.nodeZ.width, a\r\n        }, this.getPath = function (a) {\r\n            var b = [], c = this.getStartPosition(), d = this.getEndPosition();\r\n            if (this.nodeA === this.nodeZ)return [c, d];\r\n            var f, g, h = e(this.nodeA, this.nodeZ), i = (h - 1) * this.bundleGap, j = this.bundleGap * a - i / 2;\r\n            return "horizontal" == this.direction ? (f = d.x + j, g = c.y - j, b.push({x: c.x, y: g}), b.push({x: f, y: g}), b.push({x: f, y: d.y})) : (f = c.x + j, g = d.y - j, b.push({\r\n                x: f,\r\n                y: c.y\r\n            }), b.push({x: f, y: g}), b.push({x: d.x, y: g})), b\r\n        }, this.paintText = function (a, b) {\r\n            if (this.text && this.text.length > 0) {\r\n                var c = b[1], d = c.x + this.textOffsetX, e = c.y + this.textOffsetY;\r\n                a.save(), a.beginPath(), a.font = this.font;\r\n                var f = a.measureText(this.text).width, g = a.measureText("田").width;\r\n                a.fillStyle = "rgba(" + this.fontColor + ", " + this.alpha + ")", a.fillText(this.text, d - f / 2, e - g / 2), a.stroke(), a.closePath(), a.restore()\r\n            }\r\n        }\r\n    }\r\n\r\n    function h(a, b, c) {\r\n        this.initialize = function () {\r\n            h.prototype.initialize.apply(this, arguments), this.direction = "vertical", this.offsetGap = 44\r\n        }, this.initialize(a, b, c), this.getStartPosition = function () {\r\n            var a = {x: this.nodeA.cx, y: this.nodeA.cy};\r\n            return "horizontal" == this.direction ? a.x = this.nodeZ.cx < a.x ? this.nodeA.x : this.nodeA.x + this.nodeA.width : a.y = this.nodeZ.cy < a.y ? this.nodeA.y : this.nodeA.y + this.nodeA.height, a\r\n        }, this.getEndPosition = function () {\r\n            var a = {x: this.nodeZ.cx, y: this.nodeZ.cy};\r\n            return "horizontal" == this.direction ? a.x = this.nodeA.cx < a.x ? this.nodeZ.x : this.nodeZ.x + this.nodeZ.width : a.y = this.nodeA.cy < a.y ? this.nodeZ.y : this.nodeZ.y + this.nodeZ.height, a\r\n        }, this.getPath = function (a) {\r\n            var b = this.getStartPosition(), c = this.getEndPosition();\r\n            if (this.nodeA === this.nodeZ)return [b, c];\r\n            var d = [], f = e(this.nodeA, this.nodeZ), g = (f - 1) * this.bundleGap, h = this.bundleGap * a - g / 2, i = this.offsetGap;\r\n            return "horizontal" == this.direction ? (this.nodeA.cx > this.nodeZ.cx && (i = -i), d.push({x: b.x, y: b.y + h}), d.push({x: b.x + i, y: b.y + h}), d.push({\r\n                x: c.x - i,\r\n                y: c.y + h\r\n            }), d.push({x: c.x, y: c.y + h})) : (this.nodeA.cy > this.nodeZ.cy && (i = -i), d.push({x: b.x + h, y: b.y}), d.push({x: b.x + h, y: b.y + i}), d.push({\r\n                x: c.x + h,\r\n                y: c.y - i\r\n            }), d.push({x: c.x + h, y: c.y})), d\r\n        }\r\n    }\r\n\r\n    function i(a, b, c) {\r\n        this.initialize = function () {\r\n            i.prototype.initialize.apply(this, arguments)\r\n        }, this.initialize(a, b, c), this.paintPath = function (a, b) {\r\n            if (this.nodeA === this.nodeZ)return void this.paintLoop(a);\r\n            a.beginPath(), a.moveTo(b[0].x, b[0].y);\r\n            for (var c = 1; c < b.length; c++) {\r\n                var d = b[c - 1], e = b[c], f = (d.x + e.x) / 2, g = (d.y + e.y) / 2;\r\n                g += (e.y - d.y) / 2, a.strokeStyle = "rgba(" + this.strokeColor + "," + this.alpha + ")", a.lineWidth = this.lineWidth, a.moveTo(d.x, d.cy), a.quadraticCurveTo(f, g, e.x, e.y), a.stroke()\r\n            }\r\n            if (a.stroke(), a.closePath(), null != this.arrowsRadius) {\r\n                var h = b[b.length - 2], i = b[b.length - 1];\r\n                this.paintArrow(a, h, i)\r\n            }\r\n        }\r\n    }\r\n\r\n    f.prototype = new a.InteractiveElement, g.prototype = new f, h.prototype = new f, i.prototype = new f, a.Link = f, a.FoldLink = g, a.FlexionalLink = h, a.CurveLink = i\r\n}(JTopo), function (a) {\r\n    function b(c) {\r\n        this.initialize = function (c) {\r\n            b.prototype.initialize.apply(this, null), this.elementType = "container", this.zIndex = a.zIndex_Container, this.width = 100, this.height = 100, this.childs = [], this.alpha = .5, this.dragable = !0, this.childDragble = !0, this.visible = !0, this.fillColor = "10,100,80", this.borderWidth = 0, this.borderColor = "255,255,255", this.borderRadius = null, this.font = "12px Consolas", this.fontColor = "255,255,255", this.text = c, this.textPosition = "Bottom_Center", this.textOffsetX = 0, this.textOffsetY = 0, this.layout = new a.layout.AutoBoundLayout\r\n        }, this.initialize(c), this.add = function (a) {\r\n            this.childs.push(a), a.dragable = this.childDragble\r\n        }, this.remove = function (a) {\r\n            for (var b = 0; b < this.childs.length; b++)if (this.childs[b] === a) {\r\n                a.parentContainer = null, this.childs = this.childs.del(b), a.lastParentContainer = this;\r\n                break\r\n            }\r\n        }, this.removeAll = function () {\r\n            this.childs = []\r\n        }, this.setLocation = function (a, b) {\r\n            var c = a - this.x, d = b - this.y;\r\n            this.x = a, this.y = b;\r\n            for (var e = 0; e < this.childs.length; e++) {\r\n                var f = this.childs[e];\r\n                f.setLocation(f.x + c, f.y + d)\r\n            }\r\n        }, this.doLayout = function (a) {\r\n            a && a(this, this.childs)\r\n        }, this.paint = function (a) {\r\n            this.visible && (this.layout && this.layout(this, this.childs), a.beginPath(), a.fillStyle = "rgba(" + this.fillColor + "," + this.alpha + ")", null == this.borderRadius || 0 == this.borderRadius ? a.rect(this.x, this.y, this.width, this.height) : a.JTopoRoundRect(this.x, this.y, this.width, this.height, this.borderRadius), a.fill(), a.closePath(), this.paintText(a), this.paintBorder(a))\r\n        }, this.paintBorder = function (a) {\r\n            if (0 != this.borderWidth) {\r\n                a.beginPath(), a.lineWidth = this.borderWidth, a.strokeStyle = "rgba(" + this.borderColor + "," + this.alpha + ")";\r\n                var b = this.borderWidth / 2;\r\n                null == this.borderRadius || 0 == this.borderRadius ? a.rect(this.x - b, this.y - b, this.width + this.borderWidth, this.height + this.borderWidth) : a.JTopoRoundRect(this.x - b, this.y - b, this.width + this.borderWidth, this.height + this.borderWidth, this.borderRadius), a.stroke(), a.closePath()\r\n            }\r\n        }, this.paintText = function (a) {\r\n            var b = this.text;\r\n            if (null != b && "" != b) {\r\n                a.beginPath(), a.font = this.font;\r\n                var c = a.measureText(b).width, d = a.measureText("田").width;\r\n                a.fillStyle = "rgba(" + this.fontColor + ", " + this.alpha + ")";\r\n                var e = this.getTextPostion(this.textPosition, c, d);\r\n                a.fillText(b, e.x, e.y), a.closePath()\r\n            }\r\n        }, this.getTextPostion = function (a, b, c) {\r\n            var d = null;\r\n            return null == a || "Bottom_Center" == a ? d = {x: this.x + this.width / 2 - b / 2, y: this.y + this.height + c} : "Top_Center" == a ? d = {\r\n                x: this.x + this.width / 2 - b / 2,\r\n                y: this.y - c / 2\r\n            } : "Top_Right" == a ? d = {x: this.x + this.width - b, y: this.y - c / 2} : "Top_Left" == a ? d = {x: this.x, y: this.y - c / 2} : "Bottom_Right" == a ? d = {\r\n                x: this.x + this.width - b,\r\n                y: this.y + this.height + c\r\n            } : "Bottom_Left" == a ? d = {x: this.x, y: this.y + this.height + c} : "Middle_Center" == a ? d = {\r\n                x: this.x + this.width / 2 - b / 2,\r\n                y: this.y + this.height / 2 + c / 2\r\n            } : "Middle_Right" == a ? d = {x: this.x + this.width - b, y: this.y + this.height / 2 + c / 2} : "Middle_Left" == a && (d = {\r\n                x: this.x,\r\n                y: this.y + this.height / 2 + c / 2\r\n            }), null != this.textOffsetX && (d.x += this.textOffsetX), null != this.textOffsetY && (d.y += this.textOffsetY), d\r\n        }, this.paintMouseover = function () {\r\n        }, this.paintSelected = function (a) {\r\n            a.shadowBlur = 10, a.shadowColor = "rgba(0,0,0,1)", a.shadowOffsetX = 0, a.shadowOffsetY = 0\r\n        }\r\n    }\r\n\r\n    b.prototype = new a.InteractiveElement, a.Container = b\r\n}(JTopo), function (a) {\r\n    function b(a) {\r\n        var b = 0, c = 0;\r\n        a.forEach(function (a) {\r\n            b += a.cx, c += a.cy\r\n        });\r\n        var d = {x: b / a.length, y: c / a.length};\r\n        return d\r\n    }\r\n\r\n    function c(c, d) {\r\n        null == d && (d = {});\r\n        {\r\n            var e = d.cx, f = d.cy, g = d.minRadius, h = d.nodeDiameter, i = d.hScale || 1, j = d.vScale || 1;\r\n            d.beginAngle || 0, d.endAngle || 2 * Math.PI\r\n        }\r\n        if (null == e || null == f) {\r\n            var k = b(c);\r\n            e = k.x, f = k.y\r\n        }\r\n        var l = 0, m = [], n = [];\r\n        c.forEach(function (a) {\r\n            null == d.nodeDiameter ? (a.diameter && (h = a.diameter), h = a.radius ? 2 * a.radius : Math.sqrt(2 * a.width * a.height), n.push(h)) : n.push(h), l += h\r\n        }), c.forEach(function (a, b) {\r\n            var c = n[b] / l;\r\n            m.push(Math.PI * c)\r\n        });\r\n        var o = (c.length, m[0] + m[1]), p = n[0] / 2 + n[1] / 2, q = p / 2 / Math.sin(o / 2);\r\n        null != g && g > q && (q = g);\r\n        var r = q * i, s = q * j, t = d.animate;\r\n        if (t) {\r\n            var u = t.time || 1e3, v = 0;\r\n            c.forEach(function (b, c) {\r\n                v += 0 == c ? m[c] : m[c - 1] + m[c];\r\n                var d = e + Math.cos(v) * r, g = f + Math.sin(v) * s;\r\n                a.Animate.stepByStep(b, {x: d - b.width / 2, y: g - b.height / 2}, u).start()\r\n            })\r\n        } else {\r\n            var v = 0;\r\n            c.forEach(function (a, b) {\r\n                v += 0 == b ? m[b] : m[b - 1] + m[b];\r\n                var c = e + Math.cos(v) * r, d = f + Math.sin(v) * s;\r\n                a.cx = c, a.cy = d\r\n            })\r\n        }\r\n        return {cx: e, cy: f, radius: r, radiusA: r, radiusB: s}\r\n    }\r\n\r\n    function d(a, b) {\r\n        return function (c) {\r\n            var d = c.childs;\r\n            if (!(d.length <= 0))for (var e = c.getBound(), f = d[0], g = (e.width - f.width) / b, h = (e.height - f.height) / a, i = (d.length, 0), j = 0; a > j; j++)for (var k = 0; b > k; k++) {\r\n                var l = d[i++], m = e.left + g / 2 + k * g, n = e.top + h / 2 + j * h;\r\n                if (l.setLocation(m, n), i >= d.length)return\r\n            }\r\n        }\r\n    }\r\n\r\n    function e(a, b) {\r\n        return null == a && (a = 0), null == b && (b = 0), function (c) {\r\n            var d = c.childs;\r\n            if (!(d.length <= 0))for (var e = c.getBound(), f = e.left, g = e.top, h = 0; h < d.length; h++) {\r\n                var i = d[h];\r\n                f + i.width >= e.right && (f = e.left, g += b + i.height), i.setLocation(f, g), f += a + i.width\r\n            }\r\n        }\r\n    }\r\n\r\n    function f() {\r\n        return function (a, b) {\r\n            if (b.length > 0) {\r\n                for (var c = 1e7, d = -1e7, e = 1e7, f = -1e7, g = d - c, h = f - e, i = 0; i < b.length; i++) {\r\n                    var j = b[i];\r\n                    j.x <= c && (c = j.x), j.x >= d && (d = j.x), j.y <= e && (e = j.y), j.y >= f && (f = j.y), g = d - c + j.width, h = f - e + j.height\r\n                }\r\n                a.x = c, a.y = e, a.width = g, a.height = h\r\n            }\r\n        }\r\n    }\r\n\r\n    function g(b) {\r\n        var c = [], d = b.filter(function (b) {\r\n            return b instanceof a.Link ? !0 : (c.push(b), !1)\r\n        });\r\n        return b = c.filter(function (a) {\r\n            for (var b = 0; b < d.length; b++)if (d[b].nodeZ === a)return !1;\r\n            return !0\r\n        }), b = b.filter(function (a) {\r\n            for (var b = 0; b < d.length; b++)if (d[b].nodeA === a)return !0;\r\n            return !1\r\n        })\r\n    }\r\n\r\n    function h(a) {\r\n        var b = 0, c = 0;\r\n        return a.forEach(function (a) {\r\n            b += a.width, c += a.height\r\n        }), {width: b / a.length, height: c / a.length}\r\n    }\r\n\r\n    function i(a, b, c, d) {\r\n        b.x += c, b.y += d;\r\n        for (var e = q(a, b), f = 0; f < e.length; f++)i(a, e[f], c, d)\r\n    }\r\n\r\n    function j(a, b) {\r\n        function c(b, e) {\r\n            var f = q(a, b);\r\n            null == d[e] && (d[e] = {}, d[e].nodes = [], d[e].childs = []), d[e].nodes.push(b), d[e].childs.push(f);\r\n            for (var g = 0; g < f.length; g++)c(f[g], e + 1), f[g].parent = b\r\n        }\r\n\r\n        var d = [];\r\n        return c(b, 0), d\r\n    }\r\n\r\n    function k(b, c, d) {\r\n        return function (e) {\r\n            function f(f, g) {\r\n                for (var h = a.layout.getTreeDeep(f, g), k = j(f, g), l = k["" + h].nodes, m = 0; m < l.length; m++) {\r\n                    var n = l[m], o = (m + 1) * (c + 10), p = h * d;\r\n                    "down" == b || ("up" == b ? p = -p : "left" == b ? (o = -h * d, p = (m + 1) * (c + 10)) : "right" == b && (o = h * d, p = (m + 1) * (c + 10))), n.setLocation(o, p)\r\n                }\r\n                for (var q = h - 1; q >= 0; q--)for (var r = k["" + q].nodes, s = k["" + q].childs, m = 0; m < r.length; m++) {\r\n                    var t = r[m], u = s[m];\r\n                    if ("down" == b ? t.y = q * d : "up" == b ? t.y = -q * d : "left" == b ? t.x = -q * d : "right" == b && (t.x = q * d), u.length > 0 ? "down" == b || "up" == b ? t.x = (u[0].x + u[u.length - 1].x) / 2 : ("left" == b || "right" == b) && (t.y = (u[0].y + u[u.length - 1].y) / 2) : m > 0 && ("down" == b || "up" == b ? t.x = r[m - 1].x + r[m - 1].width + c : ("left" == b || "right" == b) && (t.y = r[m - 1].y + r[m - 1].height + c)), m > 0)if ("down" == b || "up" == b) {\r\n                        if (t.x < r[m - 1].x + r[m - 1].width)for (var v = r[m - 1].x + r[m - 1].width + c, w = Math.abs(v - t.x), x = m; x < r.length; x++)i(e.childs, r[x], w, 0)\r\n                    } else if (("left" == b || "right" == b) && t.y < r[m - 1].y + r[m - 1].height)for (var y = r[m - 1].y + r[m - 1].height + c, z = Math.abs(y - t.y), x = m; x < r.length; x++)i(e.childs, r[x], 0, z)\r\n                }\r\n            }\r\n\r\n            var g = null;\r\n            null == c && (g = h(e.childs), c = g.width, ("left" == b || "right" == b) && (c = g.width + 10)), null == d && (null == g && (g = h(e.childs)), d = 2 * g.height), null == b && (b = "down");\r\n            var k = a.layout.getRootNodes(e.childs);\r\n            if (k.length > 0) {\r\n                f(e.childs, k[0]);\r\n                var l = a.util.getElementsBound(e.childs), m = e.getCenterLocation(), n = m.x - (l.left + l.right) / 2, o = m.y - (l.top + l.bottom) / 2;\r\n                e.childs.forEach(function (b) {\r\n                    b instanceof a.Node && (b.x += n, b.y += o)\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    function l(b) {\r\n        return function (c) {\r\n            function d(a, c, e) {\r\n                var f = q(a, c);\r\n                if (0 != f.length) {\r\n                    null == e && (e = b);\r\n                    var g = 2 * Math.PI / f.length;\r\n                    f.forEach(function (b, f) {\r\n                        var h = c.x + e * Math.cos(g * f), i = c.y + e * Math.sin(g * f);\r\n                        b.setLocation(h, i);\r\n                        var j = e / 2;\r\n                        d(a, b, j)\r\n                    })\r\n                }\r\n            }\r\n\r\n            var e = a.layout.getRootNodes(c.childs);\r\n            if (e.length > 0) {\r\n                d(c.childs, e[0]);\r\n                var f = a.util.getElementsBound(c.childs), g = c.getCenterLocation(), h = g.x - (f.left + f.right) / 2, i = g.y - (f.top + f.bottom) / 2;\r\n                c.childs.forEach(function (b) {\r\n                    b instanceof a.Node && (b.x += h, b.y += i)\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    function m(a, b, c, d, e, f) {\r\n        for (var g = [], h = 0; c > h; h++)for (var i = 0; d > i; i++)g.push({x: a + i * e, y: b + h * f});\r\n        return g\r\n    }\r\n\r\n    function n(a, b, c, d, e, f) {\r\n        var g = e ? e : 0, h = f ? f : 2 * Math.PI, i = h - g, j = i / c, k = [];\r\n        g += j / 2;\r\n        for (var l = g; h >= l; l += j) {\r\n            var m = a + Math.cos(l) * d, n = b + Math.sin(l) * d;\r\n            k.push({x: m, y: n})\r\n        }\r\n        return k\r\n    }\r\n\r\n    function o(a, b, c, d, e, f) {\r\n        var g = f || "bottom", h = [];\r\n        if ("bottom" == g)for (var i = a - c / 2 * d + d / 2, j = 0; c >= j; j++)h.push({\r\n            x: i + j * d,\r\n            y: b + e\r\n        }); else if ("top" == g)for (var i = a - c / 2 * d + d / 2, j = 0; c >= j; j++)h.push({\r\n            x: i + j * d,\r\n            y: b - e\r\n        }); else if ("right" == g)for (var i = b - c / 2 * d + d / 2, j = 0; c >= j; j++)h.push({\r\n            x: a + e,\r\n            y: i + j * d\r\n        }); else if ("left" == g)for (var i = b - c / 2 * d + d / 2, j = 0; c >= j; j++)h.push({x: a - e, y: i + j * d});\r\n        return h\r\n    }\r\n\r\n    function m(a, b, c, d, e, f) {\r\n        for (var g = [], h = 0; c > h; h++)for (var i = 0; d > i; i++)g.push({x: a + i * e, y: b + h * f});\r\n        return g\r\n    }\r\n\r\n    function p(a, b) {\r\n        if (a.layout) {\r\n            var c = a.layout, d = c.type, e = null;\r\n            if ("circle" == d) {\r\n                var f = c.radius || Math.max(a.width, a.height);\r\n                e = n(a.cx, a.cy, b.length, f, a.layout.beginAngle, a.layout.endAngle)\r\n            } else if ("tree" == d) {\r\n                var g = c.width || 50, h = c.height || 50, i = c.direction;\r\n                e = o(a.cx, a.cy, b.length, g, h, i)\r\n            } else {\r\n                if ("grid" != d)return;\r\n                e = m(a.x, a.y, c.rows, c.cols, c.horizontal || 0, c.vertical || 0)\r\n            }\r\n            for (var j = 0; j < b.length; j++)b[j].setCenterLocation(e[j].x, e[j].y)\r\n        }\r\n    }\r\n\r\n    function q(b, c) {\r\n        for (var d = [], e = 0; e < b.length; e++)b[e] instanceof a.Link && b[e].nodeA === c && d.push(b[e].nodeZ);\r\n        return d\r\n    }\r\n\r\n    function r(a, b, c) {\r\n        var d = q(a.childs, b);\r\n        if (0 == d.length)return null;\r\n        if (p(b, d), 1 == c)for (var e = 0; e < d.length; e++)r(a, d[e], c);\r\n        return null\r\n    }\r\n\r\n    function s(b, c) {\r\n        function d(a, b) {\r\n            var c = a.x - b.x, d = a.y - b.y;\r\n            i += c * f, j += d * f, i *= g, j *= g, j += h, b.x += i, b.y += j\r\n        }\r\n\r\n        function e() {\r\n            if (!(++k > 150)) {\r\n                for (var a = 0; a < l.length; a++)l[a] != b && d(b, l[a], l);\r\n                setTimeout(e, 1e3 / 24)\r\n            }\r\n        }\r\n\r\n        var f = .01, g = .95, h = -5, i = 0, j = 0, k = 0, l = c.getElementsByClass(a.Node);\r\n        e()\r\n    }\r\n\r\n    function t(a, b) {\r\n        function c(a, b, e) {\r\n            var f = q(a, b);\r\n            e > d && (d = e);\r\n            for (var g = 0; g < f.length; g++)c(a, f[g], e + 1)\r\n        }\r\n\r\n        var d = 0;\r\n        return c(a, b, 0), d\r\n    }\r\n\r\n    a.layout = a.Layout = {\r\n        layoutNode: r,\r\n        getNodeChilds: q,\r\n        adjustPosition: p,\r\n        springLayout: s,\r\n        getTreeDeep: t,\r\n        getRootNodes: g,\r\n        GridLayout: d,\r\n        FlowLayout: e,\r\n        AutoBoundLayout: f,\r\n        CircleLayout: l,\r\n        TreeLayout: k,\r\n        getNodesCenter: b,\r\n        circleLayoutNodes: c\r\n    }\r\n}(JTopo), function (a) {\r\n    function b() {\r\n        var b = new a.CircleNode;\r\n        return b.radius = 150, b.colors = ["#3666B0", "#2CA8E0", "#77D1F6"], b.datas = [.3, .3, .4], b.titles = ["A", "B", "C"], b.paint = function (a) {\r\n            var c = 2 * b.radius, d = 2 * b.radius;\r\n            b.width = c, b.height = d;\r\n            for (var e = 0, f = 0; f < this.datas.length; f++) {\r\n                var g = this.datas[f] * Math.PI * 2;\r\n                a.save(), a.beginPath(), a.fillStyle = b.colors[f], a.moveTo(0, 0), a.arc(0, 0, this.radius, e, e + g, !1), a.fill(), a.closePath(), a.restore(), a.beginPath(), a.font = this.font;\r\n                var h = this.titles[f] + ": " + (100 * this.datas[f]).toFixed(2) + "%", i = a.measureText(h).width, j = (a.measureText("田").width, (e + e + g) / 2), k = this.radius * Math.cos(j), l = this.radius * Math.sin(j);\r\n                j > Math.PI / 2 && j <= Math.PI ? k -= i : j > Math.PI && j < 2 * Math.PI * 3 / 4 ? k -= i : j > 2 * Math.PI * .75, a.fillStyle = "#FFFFFF", a.fillText(h, k, l), a.moveTo(this.radius * Math.cos(j), this.radius * Math.sin(j)), j > Math.PI / 2 && j < 2 * Math.PI * 3 / 4 && (k -= i), j > Math.PI, a.fill(), a.stroke(), a.closePath(), e += g\r\n            }\r\n        }, b\r\n    }\r\n\r\n    function c() {\r\n        var b = new a.Node;\r\n        return b.showSelected = !1, b.width = 250, b.height = 180, b.colors = ["#3666B0", "#2CA8E0", "#77D1F6"], b.datas = [.3, .3, .4], b.titles = ["A", "B", "C"], b.paint = function (a) {\r\n            var c = 3, d = (this.width - c) / this.datas.length;\r\n            a.save(), a.beginPath(), a.fillStyle = "#FFFFFF", a.strokeStyle = "#FFFFFF", a.moveTo(-this.width / 2 - 1, -this.height / 2), a.lineTo(-this.width / 2 - 1, this.height / 2 + 3), a.lineTo(this.width / 2 + c + 1, this.height / 2 + 3), a.stroke(), a.closePath(), a.restore();\r\n            for (var e = 0; e < this.datas.length; e++) {\r\n                a.save(), a.beginPath(), a.fillStyle = b.colors[e];\r\n                var f = this.datas[e], g = e * (d + c) - this.width / 2, h = this.height - f - this.height / 2;\r\n                a.fillRect(g, h, d, f);\r\n                var i = "" + parseInt(this.datas[e]), j = a.measureText(i).width, k = a.measureText("田").width;\r\n                a.fillStyle = "#FFFFFF", a.fillText(i, g + (d - j) / 2, h - k), a.fillText(this.titles[e], g + (d - j) / 2, this.height / 2 + k), a.fill(), a.closePath(), a.restore()\r\n            }\r\n        }, b\r\n    }\r\n\r\n    a.BarChartNode = c, a.PieChartNode = b\r\n}(JTopo), function (a) {\r\n    function b(b, c) {\r\n        var d, e = null;\r\n        return {\r\n            stop: function () {\r\n                return d ? (window.clearInterval(d), e && e.publish("stop"), this) : this\r\n            }, start: function () {\r\n                var a = this;\r\n                return d = setInterval(function () {\r\n                    b.call(a)\r\n                }, c), this\r\n            }, onStop: function (b) {\r\n                return null == e && (e = new a.util.MessageBus), e.subscribe("stop", b), this\r\n            }\r\n        }\r\n    }\r\n\r\n    function c(a, c) {\r\n        c = c || {};\r\n        var d = c.gravity || .1, e = c.dx || 0, f = c.dy || 5, g = c.stop, h = c.interval || 30, i = new b(function () {\r\n            g && g() ? (f = .5, this.stop()) : (f += d, a.setLocation(a.x + e, a.y + f))\r\n        }, h);\r\n        return i\r\n    }\r\n\r\n    function d(a, c, d, e, f) {\r\n        var g = 1e3 / 24, h = {};\r\n        for (var i in c) {\r\n            var j = c[i], k = j - a[i];\r\n            h[i] = {\r\n                oldValue: a[i], targetValue: j, step: k / d * g, isDone: function (b) {\r\n                    var c = this.step > 0 && a[b] >= this.targetValue || this.step < 0 && a[b] <= this.targetValue;\r\n                    return c\r\n                }\r\n            }\r\n        }\r\n        var l = new b(function () {\r\n            var b = !0;\r\n            for (var d in c)h[d].isDone(d) || (a[d] += h[d].step, b = !1);\r\n            if (b) {\r\n                if (!e)return this.stop();\r\n                for (var d in c)if (f) {\r\n                    var g = h[d].targetValue;\r\n                    h[d].targetValue = h[d].oldValue, h[d].oldValue = g, h[d].step = -h[d].step\r\n                } else a[d] = h[d].oldValue\r\n            }\r\n            return this\r\n        }, g);\r\n        return l\r\n    }\r\n\r\n    function e(a) {\r\n        null == a && (a = {});\r\n        var b = a.spring || .1, c = a.friction || .8, d = a.grivity || 0, e = (a.wind || 0, a.minLength || 0);\r\n        return {\r\n            items: [], timer: null, isPause: !1, addNode: function (a, b) {\r\n                var c = {node: a, target: b, vx: 0, vy: 0};\r\n                return this.items.push(c), this\r\n            }, play: function (a) {\r\n                this.stop(), a = null == a ? 1e3 / 24 : a;\r\n                var b = this;\r\n                this.timer = setInterval(function () {\r\n                    b.nextFrame()\r\n                }, a)\r\n            }, stop: function () {\r\n                null != this.timer && window.clearInterval(this.timer)\r\n            }, nextFrame: function () {\r\n                for (var a = 0; a < this.items.length; a++) {\r\n                    var f = this.items[a], g = f.node, h = f.target, i = f.vx, j = f.vy, k = h.x - g.x, l = h.y - g.y, m = Math.atan2(l, k);\r\n                    if (0 != e) {\r\n                        var n = h.x - Math.cos(m) * e, o = h.y - Math.sin(m) * e;\r\n                        i += (n - g.x) * b, j += (o - g.y) * b\r\n                    } else i += k * b, j += l * b;\r\n                    i *= c, j *= c, j += d, g.x += i, g.y += j, f.vx = i, f.vy = j\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function f(a, b) {\r\n        function c() {\r\n            return e = setInterval(function () {\r\n                return o ? void f.stop() : (a.rotate += g || .2, void(a.rotate > 2 * Math.PI && (a.rotate = 0)))\r\n            }, 100), f\r\n        }\r\n\r\n        function d() {\r\n            return window.clearInterval(e), f.onStop && f.onStop(a), f\r\n        }\r\n\r\n        var e = (b.context, null), f = {}, g = b.v;\r\n        return f.run = c, f.stop = d, f.onStop = function (a) {\r\n            return f.onStop = a, f\r\n        }, f\r\n    }\r\n\r\n    function g(a, b) {\r\n        function c() {\r\n            return window.clearInterval(g), h.onStop && h.onStop(a), h\r\n        }\r\n\r\n        function d() {\r\n            var d = b.dx || 0, i = b.dy || 2;\r\n            return g = setInterval(function () {\r\n                return o ? void h.stop() : (i += f, void(a.y + a.height < e.stage.canvas.height ? a.setLocation(a.x + d, a.y + i) : (i = 0, c())))\r\n            }, 20), h\r\n        }\r\n\r\n        var e = b.context, f = b.gravity || .1, g = null, h = {};\r\n        return h.run = d, h.stop = c, h.onStop = function (a) {\r\n            return h.onStop = a, h\r\n        }, h\r\n    }\r\n\r\n    function h(b, c) {\r\n        function d(c, d, e, f, g) {\r\n            var h = new a.Node;\r\n            return h.setImage(b.image), h.setSize(b.width, b.height), h.setLocation(c, d), h.showSelected = !1, h.dragable = !1, h.paint = function (a) {\r\n                a.save(), a.arc(0, 0, e, f, g), a.clip(), a.beginPath(), null != this.image ? a.drawImage(this.image, -this.width / 2, -this.height / 2) : (a.fillStyle = "rgba(" + this.style.fillStyle + "," + this.alpha + ")", a.rect(-this.width / 2, -this.height / 2, this.width / 2, this.height / 2), a.fill()), a.closePath(), a.restore()\r\n            }, h\r\n        }\r\n\r\n        function e(c, e) {\r\n            var f = c, g = c + Math.PI, h = d(b.x, b.y, b.width, f, g), j = d(b.x - 2 + 4 * Math.random(), b.y, b.width, f + Math.PI, f);\r\n            b.visible = !1, e.add(h), e.add(j), a.Animate.gravity(h, {context: e, dx: .3}).run().onStop(function () {\r\n                e.remove(h), e.remove(j), i.stop()\r\n            }), a.Animate.gravity(j, {context: e, dx: -.2}).run()\r\n        }\r\n\r\n        function f() {\r\n            return e(c.angle, h), i\r\n        }\r\n\r\n        function g() {\r\n            return i.onStop && i.onStop(b), i\r\n        }\r\n\r\n        var h = c.context, i = (b.style, {});\r\n        return i.onStop = function (a) {\r\n            return i.onStop = a, i\r\n        }, i.run = f, i.stop = g, i\r\n    }\r\n\r\n    function i(a, b) {\r\n        function c(a) {\r\n            a.visible = !0, a.rotate = Math.random();\r\n            var b = g.stage.canvas.width / 2;\r\n            a.x = b + Math.random() * (b - 100) - Math.random() * (b - 100), a.y = g.stage.canvas.height, a.vx = 5 * Math.random() - 5 * Math.random(), a.vy = -25\r\n        }\r\n\r\n        function d() {\r\n            return c(a), h = setInterval(function () {\r\n                return o ? void i.stop() : (a.vy += f, a.x += a.vx, a.y += a.vy, void((a.x < 0 || a.x > g.stage.canvas.width || a.y > g.stage.canvas.height) && (i.onStop && i.onStop(a), c(a))))\r\n            }, 50), i\r\n        }\r\n\r\n        function e() {\r\n            window.clearInterval(h)\r\n        }\r\n\r\n        var f = .8, g = b.context, h = null, i = {};\r\n        return i.onStop = function (a) {\r\n            return i.onStop = a, i\r\n        }, i.run = d, i.stop = e, i\r\n    }\r\n\r\n    function j() {\r\n        o = !0\r\n    }\r\n\r\n    function k() {\r\n        o = !1\r\n    }\r\n\r\n    function l(b, c) {\r\n        function d() {\r\n            return n = setInterval(function () {\r\n                if (o)return void m.stop();\r\n                var a = f.y + h + Math.sin(k) * j;\r\n                b.setLocation(b.x, a), k += l\r\n            }, 100), m\r\n        }\r\n\r\n        function e() {\r\n            window.clearInterval(n)\r\n        }\r\n\r\n        var f = c.p1, g = c.p2, h = (c.context, f.x + (g.x - f.x) / 2), i = f.y + (g.y - f.y) / 2, j = a.util.getDistance(f, g) / 2, k = Math.atan2(i, h), l = c.speed || .2, m = {}, n = null;\r\n        return m.run = d, m.stop = e, m\r\n    }\r\n\r\n    function m(a, b) {\r\n        function c() {\r\n            return h = setInterval(function () {\r\n                if (o)return void g.stop();\r\n                var b = e.x - a.x, c = e.y - a.y, h = b * f, i = c * f;\r\n                a.x += h, a.y += i, .01 > h && .1 > i && d()\r\n            }, 100), g\r\n        }\r\n\r\n        function d() {\r\n            window.clearInterval(h)\r\n        }\r\n\r\n        var e = b.position, f = (b.context, b.easing || .2), g = {}, h = null;\r\n        return g.onStop = function (a) {\r\n            return g.onStop = a, g\r\n        }, g.run = c, g.stop = d, g\r\n    }\r\n\r\n    function n(a, b) {\r\n        function c() {\r\n            return j = setInterval(function () {\r\n                a.scaleX += f, a.scaleY += f, a.scaleX >= e && d()\r\n            }, 100), i\r\n        }\r\n\r\n        function d() {\r\n            i.onStop && i.onStop(a), a.scaleX = g, a.scaleY = h, window.clearInterval(j)\r\n        }\r\n\r\n        var e = (b.position, b.context, b.scale || 1), f = .06, g = a.scaleX, h = a.scaleY, i = {}, j = null;\r\n        return i.onStop = function (a) {\r\n            return i.onStop = a, i\r\n        }, i.run = c, i.stop = d, i\r\n    }\r\n\r\n    a.Animate = {}, a.Effect = {};\r\n    var o = !1;\r\n    a.Effect.spring = e, a.Effect.gravity = c, a.Animate.stepByStep = d, a.Animate.rotate = f, a.Animate.scale = n, a.Animate.move = m, a.Animate.cycle = l, a.Animate.repeatThrow = i, a.Animate.dividedTwoPiece = h, a.Animate.gravity = g, a.Animate.startAll = k, a.Animate.stopAll = j\r\n}(JTopo), function (a) {\r\n    function b(a, b) {\r\n        var c = [];\r\n        if (0 == a.length)return c;\r\n        var d = b.match(/^\\s*(\\w+)\\s*$/);\r\n        if (null != d) {\r\n            var e = a.filter(function (a) {\r\n                return a.elementType == d[1]\r\n            });\r\n            null != e && e.length > 0 && (c = c.concat(e))\r\n        } else {\r\n            var f = !1;\r\n            if (d = b.match(/\\s*(\\w+)\\s*\\[\\s*(\\w+)\\s*([>=<])\\s*[\'"](\\S+)[\'"]\\s*\\]\\s*/), (null == d || d.length < 5) && (d = b.match(/\\s*(\\w+)\\s*\\[\\s*(\\w+)\\s*([>=<])\\s*(\\d+(\\.\\d+)?)\\s*\\]\\s*/), f = !0), null != d && d.length >= 5) {\r\n                var g = d[1], h = d[2], i = d[3], j = d[4];\r\n                e = a.filter(function (a) {\r\n                    if (a.elementType != g)return !1;\r\n                    var b = a[h];\r\n                    return 1 == f && (b = parseInt(b)), "=" == i ? b == j : ">" == i ? b > j : "<" == i ? j > b : "<=" == i ? j >= b : ">=" == i ? b >= j : "!=" == i ? b != j : !1\r\n                }), null != e && e.length > 0 && (c = c.concat(e))\r\n            }\r\n        }\r\n        return c\r\n    }\r\n\r\n    function c(a) {\r\n        if (a.find = function (a) {\r\n                return d.call(this, a)\r\n            }, e.forEach(function (b) {\r\n                a[b] = function (a) {\r\n                    for (var c = 0; c < this.length; c++)this[c][b](a);\r\n                    return this\r\n                }\r\n            }), a.length > 0) {\r\n            var b = a[0];\r\n            for (var c in b) {\r\n                var f = b[c];\r\n                "function" == typeof f && !function (b) {\r\n                    a[c] = function () {\r\n                        for (var c = [], d = 0; d < a.length; d++)c.push(b.apply(a[d], arguments));\r\n                        return c\r\n                    }\r\n                }(f)\r\n            }\r\n        }\r\n        return a.attr = function (a, b) {\r\n            if (null != a && null != b)for (var c = 0; c < this.length; c++)this[c][a] = b; else {\r\n                if (null != a && "string" == typeof a) {\r\n                    for (var d = [], c = 0; c < this.length; c++)d.push(this[c][a]);\r\n                    return d\r\n                }\r\n                if (null != a)for (var c = 0; c < this.length; c++)for (var e in a)this[c][e] = a[e]\r\n            }\r\n            return this\r\n        }, a\r\n    }\r\n\r\n    function d(d) {\r\n        var e = [], f = [];\r\n        this instanceof a.Stage ? (e = this.childs, f = f.concat(e)) : this instanceof a.Scene ? e = [this] : f = this, e.forEach(function (a) {\r\n            f = f.concat(a.childs)\r\n        });\r\n        var g = null;\r\n        return g = "function" == typeof d ? f.filter(d) : b(f, d), g = c(g)\r\n    }\r\n\r\n    var e = "click,mousedown,mouseup,mouseover,mouseout,mousedrag,keydown,keyup".split(",");\r\n    a.Stage.prototype.find = d, a.Scene.prototype.find = d\r\n}(JTopo), function (a) {\r\n    function b(a, b) {\r\n        this.x = a, this.y = b\r\n    }\r\n\r\n    function c(a) {\r\n        this.p = new b(0, 0), this.w = new b(1, 0), this.paint = a\r\n    }\r\n\r\n    function d(a, b, c) {\r\n        return function (d) {\r\n            for (var e = 0; b > e; e++)a(), c && d.turn(c), d.move(3)\r\n        }\r\n    }\r\n\r\n    function e(a, b) {\r\n        var c = 2 * Math.PI;\r\n        return function (d) {\r\n            for (var e = 0; b > e; e++)a(), d.turn(c / b)\r\n        }\r\n    }\r\n\r\n    function f(a, b, c) {\r\n        return function (d) {\r\n            for (var e = 0; b > e; e++)a(), d.resize(c)\r\n        }\r\n    }\r\n\r\n    function g(a) {\r\n        var b = 2 * Math.PI;\r\n        return function (c) {\r\n            for (var d = 0; a > d; d++)c.forward(1), c.turn(b / a)\r\n        }\r\n    }\r\n\r\n    function h(a) {\r\n        var b = 4 * Math.PI;\r\n        return function (c) {\r\n            for (var d = 0; a > d; d++)c.forward(1), c.turn(b / a)\r\n        }\r\n    }\r\n\r\n    function i(a, b, c, d) {\r\n        return function (e) {\r\n            for (var f = 0; b > f; f++)a(), e.forward(1), e.turn(c), e.resize(d)\r\n        }\r\n    }\r\n\r\n    var j = {};\r\n    c.prototype.forward = function (a) {\r\n        var b = this.p, c = this.w;\r\n        return b.x = b.x + a * c.x, b.y = b.y + a * c.y, this.paint && this.paint(b.x, b.y), this\r\n    }, c.prototype.move = function (a) {\r\n        var b = this.p, c = this.w;\r\n        return b.x = b.x + a * c.x, b.y = b.y + a * c.y, this\r\n    }, c.prototype.moveTo = function (a, b) {\r\n        return this.p.x = a, this.p.y = b, this\r\n    }, c.prototype.turn = function (a) {\r\n        var b = (this.p, this.w), c = Math.cos(a) * b.x - Math.sin(a) * b.y, d = Math.sin(a) * b.x + Math.cos(a) * b.y;\r\n        return b.x = c, b.y = d, this\r\n    }, c.prototype.resize = function (a) {\r\n        var b = this.w;\r\n        return b.x = b.x * a, b.y = b.y * a, this\r\n    }, c.prototype.save = function () {\r\n        return null == this._stack && (this._stack = []), this._stack.push([this.p, this.w]), this\r\n    }, c.prototype.restore = function () {\r\n        if (null != this._stack && this._stack.length > 0) {\r\n            var a = this._stack.pop();\r\n            this.p = a[0], this.w = a[1]\r\n        }\r\n        return this\r\n    }, j.Tortoise = c, j.shift = d, j.spin = e, j.polygon = g, j.spiral = i, j.star = h, j.scale = f, a.Logo = j\r\n}(window);//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kZXZlbG9wL2NvcmUvbGliL2p0b3BvLW1pbi5qcz80MzYxIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULFNBQVM7QUFDVCxTQUFTO0FBQ1QsbURBQW1EO0FBQ25EO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxTQUFTO0FBQ1QsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBLGFBQWEsVUFBVTtBQUN2QjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLE9BQU87QUFDOUI7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsK0RBQStEO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQSxLQUFLO0FBQ0wsQ0FBQztBQUNEO0FBQ0E7QUFDQSwyQ0FBMkM7QUFDM0M7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EseUNBQXlDLGNBQWM7QUFDdkQ7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHNCQUFzQixpR0FBaUcsUUFBUSxjQUFjO0FBQzdJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCOztBQUVBO0FB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsQ0FBQyIsImZpbGUiOiIxLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIWZ1bmN0aW9uICh3aW5kb3cpIHtcclxuICAgIGZ1bmN0aW9uIEVsZW1lbnQoKSB7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRUeXBlID0gXCJlbGVtZW50XCIsIHRoaXMuc2VyaWFsaXplZFByb3BlcnRpZXMgPSBbXCJlbGVtZW50VHlwZVwiXSwgdGhpcy5wcm9wZXJ0aWVzU3RhY2sgPSBbXSwgdGhpcy5faWQgPSBcIlwiICsgKG5ldyBEYXRlKS5nZXRUaW1lKClcclxuICAgICAgICB9LCB0aGlzLmRpc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgfSwgdGhpcy5yZW1vdmVIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIH0sIHRoaXMuYXR0ciA9IGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgIGlmIChudWxsICE9IGEgJiYgbnVsbCAhPSBiKXRoaXNbYV0gPSBiOyBlbHNlIGlmIChudWxsICE9IGEpcmV0dXJuIHRoaXNbYV07XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzXHJcbiAgICAgICAgfSwgdGhpcy5zYXZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgYSA9IHRoaXMsIGIgPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5zZXJpYWxpemVkUHJvcGVydGllcy5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7XHJcbiAgICAgICAgICAgICAgICBiW2NdID0gYVtjXVxyXG4gICAgICAgICAgICB9KSwgdGhpcy5wcm9wZXJ0aWVzU3RhY2sucHVzaChiKVxyXG4gICAgICAgIH0sIHRoaXMucmVzdG9yZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gdGhpcy5wcm9wZXJ0aWVzU3RhY2sgJiYgMCAhPSB0aGlzLnByb3BlcnRpZXNTdGFjay5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBhID0gdGhpcywgYiA9IHRoaXMucHJvcGVydGllc1N0YWNrLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXJpYWxpemVkUHJvcGVydGllcy5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYVtjXSA9IGJbY11cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCB0aGlzLnRvSnNvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGEgPSB0aGlzLCBiID0gXCJ7XCIsIGMgPSB0aGlzLnNlcmlhbGl6ZWRQcm9wZXJ0aWVzLmxlbmd0aDtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VyaWFsaXplZFByb3BlcnRpZXMuZm9yRWFjaChmdW5jdGlvbiAoZCwgZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSBhW2RdO1xyXG4gICAgICAgICAgICAgICAgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZiAmJiAoZiA9ICdcIicgKyBmICsgJ1wiJyksIGIgKz0gJ1wiJyArIGQgKyAnXCI6JyArIGYsIGMgPiBlICsgMSAmJiAoYiArPSBcIixcIilcclxuICAgICAgICAgICAgfSksIGIgKz0gXCJ9XCJcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELnByb3RvdHlwZS5KVG9wb1JvdW5kUmVjdCA9IGZ1bmN0aW9uIChhLCBiLCBjLCBkLCBlKSB7XHJcbiAgICAgICAgXCJ1bmRlZmluZWRcIiA9PSB0eXBlb2YgZSAmJiAoZSA9IDUpLCB0aGlzLmJlZ2luUGF0aCgpLCB0aGlzLm1vdmVUbyhhICsgZSwgYiksIHRoaXMubGluZVRvKGEgKyBjIC0gZSwgYiksIHRoaXMucXVhZHJhdGljQ3VydmVUbyhhICsgYywgYiwgYSArIGMsIGIgKyBlKSwgdGhpcy5saW5lVG8oYSArIGMsIGIgKyBkIC0gZSksIHRoaXMucXVhZHJhdGljQ3VydmVUbyhhICsgYywgYiArIGQsIGEgKyBjIC0gZSwgYiArIGQpLCB0aGlzLmxpbmVUbyhhICsgZSwgYiArIGQpLCB0aGlzLnF1YWRyYXRpY0N1cnZlVG8oYSwgYiArIGQsIGEsIGIgKyBkIC0gZSksIHRoaXMubGluZVRvKGEsIGIgKyBlKSwgdGhpcy5xdWFkcmF0aWNDdXJ2ZVRvKGEsIGIsIGEgKyBlLCBiKSwgdGhpcy5jbG9zZVBhdGgoKVxyXG4gICAgfSwgQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELnByb3RvdHlwZS5KVG9wb0Rhc2hlZExpbmVUbyA9IGZ1bmN0aW9uIChhLCBiLCBjLCBkLCBlKSB7XHJcbiAgICAgICAgXCJ1bmRlZmluZWRcIiA9PSB0eXBlb2YgZSAmJiAoZSA9IDUpO1xyXG4gICAgICAgIHZhciBmID0gYyAtIGEsIGcgPSBkIC0gYiwgaCA9IE1hdGguZmxvb3IoTWF0aC5zcXJ0KGYgKiBmICsgZyAqIGcpKSwgaSA9IDAgPj0gZSA/IGggOiBoIC8gZSwgaiA9IGcgLyBoICogZSwgayA9IGYgLyBoICogZTtcclxuICAgICAgICB0aGlzLmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGZvciAodmFyIGwgPSAwOyBpID4gbDsgbCsrKWwgJSAyID8gdGhpcy5saW5lVG8oYSArIGwgKiBrLCBiICsgbCAqIGopIDogdGhpcy5tb3ZlVG8oYSArIGwgKiBrLCBiICsgbCAqIGopO1xyXG4gICAgICAgIHRoaXMuc3Ryb2tlKClcclxuICAgIH0sIEpUb3BvID0ge1xyXG4gICAgICAgIHZlcnNpb246IFwiMC40LjhfMDFcIixcclxuICAgICAgICB6SW5kZXhfQ29udGFpbmVyOiAxLFxyXG4gICAgICAgIHpJbmRleF9MaW5rOiAyLFxyXG4gICAgICAgIHpJbmRleF9Ob2RlOiAzLFxyXG4gICAgICAgIFNjZW5lTW9kZToge25vcm1hbDogXCJub3JtYWxcIiwgZHJhZzogXCJkcmFnXCIsIGVkaXQ6IFwiZWRpdFwiLCBzZWxlY3Q6IFwic2VsZWN0XCJ9LFxyXG4gICAgICAgIE1vdXNlQ3Vyc29yOiB7XHJcbiAgICAgICAgICAgIG5vcm1hbDogXCJkZWZhdWx0XCIsXHJcbiAgICAgICAgICAgIHBvaW50ZXI6IFwicG9pbnRlclwiLFxyXG4gICAgICAgICAgICB0b3BfbGVmdDogXCJudy1yZXNpemVcIixcclxuICAgICAgICAgICAgdG9wX2NlbnRlcjogXCJuLXJlc2l6ZVwiLFxyXG4gICAgICAgICAgICB0b3BfcmlnaHQ6IFwibmUtcmVzaXplXCIsXHJcbiAgICAgICAgICAgIG1pZGRsZV9sZWZ0OiBcImUtcmVzaXplXCIsXHJcbiAgICAgICAgICAgIG1pZGRsZV9yaWdodDogXCJlLXJlc2l6ZVwiLFxyXG4gICAgICAgICAgICBib3R0b21fbGVmdDogXCJuZS1yZXNpemVcIixcclxuICAgICAgICAgICAgYm90dG9tX2NlbnRlcjogXCJuLXJlc2l6ZVwiLFxyXG4gICAgICAgICAgICBib3R0b21fcmlnaHQ6IFwibnctcmVzaXplXCIsXHJcbiAgICAgICAgICAgIG1vdmU6IFwibW92ZVwiLFxyXG4gICAgICAgICAgICBvcGVuX2hhbmQ6IFwidXJsKC4vaW1nL2N1ci9vcGVuaGFuZC5jdXIpIDggOCwgZGVmYXVsdFwiLFxyXG4gICAgICAgICAgICBjbG9zZWRfaGFuZDogXCJ1cmwoLi9pbWcvY3VyL2Nsb3NlZGhhbmQuY3VyKSA4IDgsIGRlZmF1bHRcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY3JlYXRlU3RhZ2VGcm9tSnNvbjogZnVuY3Rpb24gKGpzb25TdHIsIGNhbnZhcykge1xyXG4gICAgICAgICAgICBldmFsKFwidmFyIGpzb25PYmogPSBcIiArIGpzb25TdHIpO1xyXG4gICAgICAgICAgICB2YXIgc3RhZ2UgPSBuZXcgSlRvcG8uU3RhZ2UoY2FudmFzKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgayBpbiBqc29uT2JqKVwiY2hpbGRzXCIgIT0gayAmJiAoc3RhZ2Vba10gPSBqc29uT2JqW2tdKTtcclxuICAgICAgICAgICAgdmFyIHNjZW5lcyA9IGpzb25PYmouY2hpbGRzO1xyXG4gICAgICAgICAgICByZXR1cm4gc2NlbmVzLmZvckVhY2goZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgIHZhciBiID0gbmV3IEpUb3BvLlNjZW5lKHN0YWdlKTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGMgaW4gYSlcImNoaWxkc1wiICE9IGMgJiYgKGJbY10gPSBhW2NdKSwgXCJiYWNrZ3JvdW5kXCIgPT0gYyAmJiAoYi5iYWNrZ3JvdW5kID0gYVtjXSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZCA9IGEuY2hpbGRzO1xyXG4gICAgICAgICAgICAgICAgZC5mb3JFYWNoKGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBudWxsLCBkID0gYS5lbGVtZW50VHlwZTtcclxuICAgICAgICAgICAgICAgICAgICBcIm5vZGVcIiA9PSBkID8gYyA9IG5ldyBKVG9wby5Ob2RlIDogXCJDaXJjbGVOb2RlXCIgPT0gZCAmJiAoYyA9IG5ldyBKVG9wby5DaXJjbGVOb2RlKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBlIGluIGEpY1tlXSA9IGFbZV07XHJcbiAgICAgICAgICAgICAgICAgICAgYi5hZGQoYylcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pLCBzdGFnZVxyXG4gICAgICAgIH1cclxuICAgIH0sIEpUb3BvLkVsZW1lbnQgPSBFbGVtZW50LCB3aW5kb3cuSlRvcG8gPSBKVG9wb1xyXG59KHdpbmRvdyksIGZ1bmN0aW9uIChKVG9wbykge1xyXG4gICAgZnVuY3Rpb24gTWVzc2FnZUJ1cyhhKSB7XHJcbiAgICAgICAgdmFyIGIgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMubmFtZSA9IGEsIHRoaXMubWVzc2FnZU1hcCA9IHt9LCB0aGlzLm1lc3NhZ2VDb3VudCA9IDAsIHRoaXMuc3Vic2NyaWJlID0gZnVuY3Rpb24gKGEsIGMpIHtcclxuICAgICAgICAgICAgdmFyIGQgPSBiLm1lc3NhZ2VNYXBbYV07XHJcbiAgICAgICAgICAgIG51bGwgPT0gZCAmJiAoYi5tZXNzYWdlTWFwW2FdID0gW10pLCBiLm1lc3NhZ2VNYXBbYV0ucHVzaChjKSwgYi5tZXNzYWdlQ291bnQrK1xyXG4gICAgICAgIH0sIHRoaXMudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICB2YXIgYyA9IGIubWVzc2FnZU1hcFthXTtcclxuICAgICAgICAgICAgbnVsbCAhPSBjICYmIChiLm1lc3NhZ2VNYXBbYV0gPSBudWxsLCBkZWxldGUgYi5tZXNzYWdlTWFwW2FdLCBiLm1lc3NhZ2VDb3VudC0tKVxyXG4gICAgICAgIH0sIHRoaXMucHVibGlzaCA9IGZ1bmN0aW9uIChhLCBjLCBkKSB7XHJcbiAgICAgICAgICAgIHZhciBlID0gYi5tZXNzYWdlTWFwW2FdO1xyXG4gICAgICAgICAgICBpZiAobnVsbCAhPSBlKWZvciAodmFyIGYgPSAwOyBmIDwgZS5sZW5ndGg7IGYrKylkID8gIWZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBhKGIpXHJcbiAgICAgICAgICAgICAgICB9LCAxMClcclxuICAgICAgICAgICAgfShlW2ZdLCBjKSA6IGVbZl0oYylcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0RGlzdGFuY2UoYSwgYiwgYywgZCkge1xyXG4gICAgICAgIHZhciBlLCBmO1xyXG4gICAgICAgIHJldHVybiBudWxsID09IGMgJiYgbnVsbCA9PSBkID8gKGUgPSBiLnggLSBhLngsIGYgPSBiLnkgLSBhLnkpIDogKGUgPSBjIC0gYSwgZiA9IGQgLSBiKSwgTWF0aC5zcXJ0KGUgKiBlICsgZiAqIGYpXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0RWxlbWVudHNCb3VuZChhKSB7XHJcbiAgICAgICAgZm9yICh2YXIgYiA9IHtsZWZ0OiBOdW1iZXIuTUFYX1ZBTFVFLCByaWdodDogTnVtYmVyLk1JTl9WQUxVRSwgdG9wOiBOdW1iZXIuTUFYX1ZBTFVFLCBib3R0b206IE51bWJlci5NSU5fVkFMVUV9LCBjID0gMDsgYyA8IGEubGVuZ3RoOyBjKyspIHtcclxuICAgICAgICAgICAgdmFyIGQgPSBhW2NdO1xyXG4gICAgICAgICAgICBkIGluc3RhbmNlb2YgSlRvcG8uTGluayB8fCAoYi5sZWZ0ID4gZC54ICYmIChiLmxlZnQgPSBkLngsIGIubGVmdE5vZGUgPSBkKSwgYi5yaWdodCA8IGQueCArIGQud2lkdGggJiYgKGIucmlnaHQgPSBkLnggKyBkLndpZHRoLCBiLnJpZ2h0Tm9kZSA9IGQpLCBiLnRvcCA+IGQueSAmJiAoYi50b3AgPSBkLnksIGIudG9wTm9kZSA9IGQpLCBiLmJvdHRvbSA8IGQueSArIGQuaGVpZ2h0ICYmIChiLmJvdHRvbSA9IGQueSArIGQuaGVpZ2h0LCBiLmJvdHRvbU5vZGUgPSBkKSlcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGIud2lkdGggPSBiLnJpZ2h0IC0gYi5sZWZ0LCBiLmhlaWdodCA9IGIuYm90dG9tIC0gYi50b3AsIGJcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBtb3VzZUNvb3JkcyhhKSB7XHJcbiAgICAgICAgcmV0dXJuIGEgPSBjbG9uZUV2ZW50KGEpLCBhLnBhZ2VYIHx8IChhLnBhZ2VYID0gYS5jbGllbnRYICsgZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0IC0gZG9jdW1lbnQuYm9keS5jbGllbnRMZWZ0LCBhLnBhZ2VZID0gYS5jbGllbnRZICsgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgLSBkb2N1bWVudC5ib2R5LmNsaWVudFRvcCksIGFcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRFdmVudFBvc2l0aW9uKGEpIHtcclxuICAgICAgICByZXR1cm4gYSA9IG1vdXNlQ29vcmRzKGEpXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcm90YXRlUG9pbnQoYSwgYiwgYywgZCwgZSkge1xyXG4gICAgICAgIHZhciBmID0gYyAtIGEsIGcgPSBkIC0gYiwgaCA9IE1hdGguc3FydChmICogZiArIGcgKiBnKSwgaSA9IE1hdGguYXRhbjIoZywgZikgKyBlO1xyXG4gICAgICAgIHJldHVybiB7eDogYSArIE1hdGguY29zKGkpICogaCwgeTogYiArIE1hdGguc2luKGkpICogaH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiByb3RhdGVQb2ludHMoYSwgYiwgYykge1xyXG4gICAgICAgIGZvciAodmFyIGQgPSBbXSwgZSA9IDA7IGUgPCBiLmxlbmd0aDsgZSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBmID0gcm90YXRlUG9pbnQoYS54LCBhLnksIGJbZV0ueCwgYltlXS55LCBjKTtcclxuICAgICAgICAgICAgZC5wdXNoKGYpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gJGZvcmVhY2goYSwgYiwgYykge1xyXG4gICAgICAgIGZ1bmN0aW9uIGQoZSkge1xyXG4gICAgICAgICAgICBlICE9IGEubGVuZ3RoICYmIChiKGFbZV0pLCBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGQoKytlKVxyXG4gICAgICAgICAgICB9LCBjKSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICgwICE9IGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHZhciBlID0gMDtcclxuICAgICAgICAgICAgZChlKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiAkZm9yKGEsIGIsIGMsIGQpIHtcclxuICAgICAgICBmdW5jdGlvbiBlKGEpIHtcclxuICAgICAgICAgICAgYSAhPSBiICYmIChjKGIpLCBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGUoKythKVxyXG4gICAgICAgICAgICB9LCBkKSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghKGEgPiBiKSkge1xyXG4gICAgICAgICAgICB2YXIgZiA9IDA7XHJcbiAgICAgICAgICAgIGUoZilcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY2xvbmVFdmVudChhKSB7XHJcbiAgICAgICAgdmFyIGIgPSB7fTtcclxuICAgICAgICBmb3IgKHZhciBjIGluIGEpXCJyZXR1cm5WYWx1ZVwiICE9IGMgJiYgXCJrZXlMb2NhdGlvblwiICE9IGMgJiYgKGJbY10gPSBhW2NdKTtcclxuICAgICAgICByZXR1cm4gYlxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNsb25lKGEpIHtcclxuICAgICAgICB2YXIgYiA9IHt9O1xyXG4gICAgICAgIGZvciAodmFyIGMgaW4gYSliW2NdID0gYVtjXTtcclxuICAgICAgICByZXR1cm4gYlxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGlzUG9pbnRJblJlY3QoYSwgYikge1xyXG4gICAgICAgIHZhciBjID0gYi54LCBkID0gYi55LCBlID0gYi53aWR0aCwgZiA9IGIuaGVpZ2h0O1xyXG4gICAgICAgIHJldHVybiBhLnggPiBjICYmIGEueCA8IGMgKyBlICYmIGEueSA+IGQgJiYgYS55IDwgZCArIGZcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBpc1BvaW50SW5MaW5lKGEsIGIsIGMpIHtcclxuICAgICAgICB2YXIgZCA9IEpUb3BvLnV0aWwuZ2V0RGlzdGFuY2UoYiwgYyksIGUgPSBKVG9wby51dGlsLmdldERpc3RhbmNlKGIsIGEpLCBmID0gSlRvcG8udXRpbC5nZXREaXN0YW5jZShjLCBhKSwgZyA9IE1hdGguYWJzKGUgKyBmIC0gZCkgPD0gLjU7XHJcbiAgICAgICAgcmV0dXJuIGdcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiByZW1vdmVGcm9tQXJyYXkoYSwgYikge1xyXG4gICAgICAgIGZvciAodmFyIGMgPSAwOyBjIDwgYS5sZW5ndGg7IGMrKykge1xyXG4gICAgICAgICAgICB2YXIgZCA9IGFbY107XHJcbiAgICAgICAgICAgIGlmIChkID09PSBiKSB7XHJcbiAgICAgICAgICAgICAgICBhID0gYS5kZWwoYyk7XHJcbiAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcmFuZG9tQ29sb3IoKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoMjU1ICogTWF0aC5yYW5kb20oKSkgKyBcIixcIiArIE1hdGguZmxvb3IoMjU1ICogTWF0aC5yYW5kb20oKSkgKyBcIixcIiArIE1hdGguZmxvb3IoMjU1ICogTWF0aC5yYW5kb20oKSlcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBpc0ludHNlY3QoKSB7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0UHJvcGVydGllcyhhLCBiKSB7XHJcbiAgICAgICAgZm9yICh2YXIgYyA9IFwiXCIsIGQgPSAwOyBkIDwgYi5sZW5ndGg7IGQrKykge1xyXG4gICAgICAgICAgICBkID4gMCAmJiAoYyArPSBcIixcIik7XHJcbiAgICAgICAgICAgIHZhciBlID0gYVtiW2RdXTtcclxuICAgICAgICAgICAgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSA/IGUgPSAnXCInICsgZSArICdcIicgOiB2b2lkIDAgPT0gZSAmJiAoZSA9IG51bGwpLCBjICs9IGJbZF0gKyBcIjpcIiArIGVcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBsb2FkU3RhZ2VGcm9tSnNvbihqc29uLCBjYW52YXMpIHtcclxuICAgICAgICB2YXIgb2JqID0gZXZhbChqc29uKSwgc3RhZ2UgPSBuZXcgSlRvcG8uU3RhZ2UoY2FudmFzKTtcclxuICAgICAgICBmb3IgKHZhciBrIGluIHN0YWdlT2JqKWlmIChcInNjZW5lc1wiICE9IGspc3RhZ2Vba10gPSBvYmpba107IGVsc2UgZm9yICh2YXIgc2NlbmVzID0gb2JqLnNjZW5lcywgaSA9IDA7IGkgPCBzY2VuZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIHNjZW5lT2JqID0gc2NlbmVzW2ldLCBzY2VuZSA9IG5ldyBKVG9wby5TY2VuZShzdGFnZSk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gc2NlbmVPYmopaWYgKFwiZWxlbWVudHNcIiAhPSBwKXNjZW5lW3BdID0gc2NlbmVPYmpbcF07IGVsc2UgZm9yICh2YXIgbm9kZU1hcCA9IHt9LCBlbGVtZW50cyA9IHNjZW5lT2JqLmVsZW1lbnRzLCBtID0gMDsgbSA8IGVsZW1lbnRzLmxlbmd0aDsgbSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudE9iaiA9IGVsZW1lbnRzW21dLCB0eXBlID0gZWxlbWVudE9iai5lbGVtZW50VHlwZSwgZWxlbWVudDtcclxuICAgICAgICAgICAgICAgIFwiTm9kZVwiID09IHR5cGUgJiYgKGVsZW1lbnQgPSBuZXcgSlRvcG8uTm9kZSk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBtayBpbiBlbGVtZW50T2JqKWVsZW1lbnRbbWtdID0gZWxlbWVudE9ialtta107XHJcbiAgICAgICAgICAgICAgICBub2RlTWFwW2VsZW1lbnQudGV4dF0gPSBlbGVtZW50LCBzY2VuZS5hZGQoZWxlbWVudClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY29uc29sZS5sb2coc3RhZ2UpLCBzdGFnZVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHRvSnNvbihhKSB7XHJcbiAgICAgICAgdmFyIGIgPSBcImJhY2tncm91bmRDb2xvcix2aXNpYmxlLG1vZGUscm90YXRlLGFscGhhLHNjYWxlWCxzY2FsZVksc2hhZG93LHRyYW5zbGF0ZVgsdHJhbnNsYXRlWSxhcmVhU2VsZWN0LHBhaW50QWxsXCIuc3BsaXQoXCIsXCIpLCBjID0gXCJ0ZXh0LGVsZW1lbnRUeXBlLHgseSx3aWR0aCxoZWlnaHQsdmlzaWJsZSxhbHBoYSxyb3RhdGUsc2NhbGVYLHNjYWxlWSxmaWxsQ29sb3Isc2hhZG93LHRyYW5zZm9ybUFibGUsekluZGV4LGRyYWdhYmxlLHNlbGVjdGVkLHNob3dTZWxlY3RlZCxmb250LGZvbnRDb2xvcix0ZXh0UG9zaXRpb24sdGV4dE9mZnNldFgsdGV4dE9mZnNldFlcIi5zcGxpdChcIixcIiksIGQgPSBcIntcIjtcclxuICAgICAgICBkICs9IFwiZnJhbWVzOlwiICsgYS5mcmFtZXMsIGQgKz0gXCIsIHNjZW5lczpbXCI7XHJcbiAgICAgICAgZm9yICh2YXIgZSA9IDA7IGUgPCBhLmNoaWxkcy5sZW5ndGg7IGUrKykge1xyXG4gICAgICAgICAgICB2YXIgZiA9IGEuY2hpbGRzW2VdO1xyXG4gICAgICAgICAgICBkICs9IFwie1wiLCBkICs9IGdldFByb3BlcnRpZXMoZiwgYiksIGQgKz0gXCIsIGVsZW1lbnRzOltcIjtcclxuICAgICAgICAgICAgZm9yICh2YXIgZyA9IDA7IGcgPCBmLmNoaWxkcy5sZW5ndGg7IGcrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGggPSBmLmNoaWxkc1tnXTtcclxuICAgICAgICAgICAgICAgIGcgPiAwICYmIChkICs9IFwiLFwiKSwgZCArPSBcIntcIiwgZCArPSBnZXRQcm9wZXJ0aWVzKGgsIGMpLCBkICs9IFwifVwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZCArPSBcIl19XCJcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGQgKz0gXCJdXCIsIGQgKz0gXCJ9XCJcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjaGFuZ2VDb2xvcihhLCBiLCBjKSB7XHJcbiAgICAgICAgdmFyIGQgPSBjLnNwbGl0KFwiLFwiKSwgZSA9IHBhcnNlSW50KGRbMF0pLCBmID0gcGFyc2VJbnQoZFsxXSksIGcgPSBwYXJzZUludChkWzJdKSwgaCA9IGNhbnZhcy53aWR0aCA9IGIud2lkdGgsIGkgPSBjYW52YXMuaGVpZ2h0ID0gYi5oZWlnaHQ7XHJcbiAgICAgICAgYS5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KSwgYS5kcmF3SW1hZ2UoYiwgMCwgMCk7XHJcbiAgICAgICAgZm9yICh2YXIgaiA9IGEuZ2V0SW1hZ2VEYXRhKDAsIDAsIGIud2lkdGgsIGIuaGVpZ2h0KSwgayA9IGouZGF0YSwgbCA9IDA7IGggPiBsOyBsKyspZm9yICh2YXIgbSA9IDA7IGkgPiBtOyBtKyspIHtcclxuICAgICAgICAgICAgdmFyIG4gPSA0ICogKGwgKyBtICogaCk7XHJcbiAgICAgICAgICAgIDAgIT0ga1tuICsgM10gJiYgKG51bGwgIT0gZSAmJiAoa1tuICsgMF0gKz0gZSksIG51bGwgIT0gZiAmJiAoa1tuICsgMV0gKz0gZiksIG51bGwgIT0gZyAmJiAoa1tuICsgMl0gKz0gZykpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGEucHV0SW1hZ2VEYXRhKGosIDAsIDAsIDAsIDAsIGIud2lkdGgsIGIuaGVpZ2h0KTtcclxuICAgICAgICB2YXIgbyA9IGNhbnZhcy50b0RhdGFVUkwoKTtcclxuICAgICAgICByZXR1cm4gb1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdlbkltYWdlQWxhcm0oYSwgYikge1xyXG4gICAgICAgIHZhciBjID0gYS5zcmMgKyBiO1xyXG4gICAgICAgIGlmIChhbGFybUltYWdlQ2FjaGVbY10pcmV0dXJuIGFsYXJtSW1hZ2VDYWNoZVtjXTtcclxuICAgICAgICB2YXIgZCA9IG5ldyBJbWFnZTtcclxuICAgICAgICByZXR1cm4gZC5zcmMgPSBjaGFuZ2VDb2xvcihncmFwaGljcywgYSwgYiksIGFsYXJtSW1hZ2VDYWNoZVtjXSA9IGQsIGRcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRPZmZzZXRQb3NpdGlvbihhKSB7XHJcbiAgICAgICAgaWYgKCFhKXJldHVybiB7bGVmdDogMCwgdG9wOiAwfTtcclxuICAgICAgICB2YXIgYiA9IDAsIGMgPSAwO1xyXG4gICAgICAgIGlmIChcImdldEJvdW5kaW5nQ2xpZW50UmVjdFwiIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCl2YXIgZCA9IGEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIGUgPSBhLm93bmVyRG9jdW1lbnQsIGYgPSBlLmJvZHksIGcgPSBlLmRvY3VtZW50RWxlbWVudCwgaCA9IGcuY2xpZW50VG9wIHx8IGYuY2xpZW50VG9wIHx8IDAsIGkgPSBnLmNsaWVudExlZnQgfHwgZi5jbGllbnRMZWZ0IHx8IDAsIGIgPSBkLnRvcCArIChzZWxmLnBhZ2VZT2Zmc2V0IHx8IGcgJiYgZy5zY3JvbGxUb3AgfHwgZi5zY3JvbGxUb3ApIC0gaCwgYyA9IGQubGVmdCArIChzZWxmLnBhZ2VYT2Zmc2V0IHx8IGcgJiYgZy5zY3JvbGxMZWZ0IHx8IGYuc2Nyb2xsTGVmdCkgLSBpOyBlbHNlIGRvIGIgKz0gYS5vZmZzZXRUb3AgfHwgMCwgYyArPSBhLm9mZnNldExlZnQgfHwgMCwgYSA9IGEub2Zmc2V0UGFyZW50OyB3aGlsZSAoYSk7XHJcbiAgICAgICAgcmV0dXJuIHtsZWZ0OiBjLCB0b3A6IGJ9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbGluZUYoYSwgYiwgYywgZCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGUoYSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYSAqIGYgKyBnXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZiA9IChkIC0gYikgLyAoYyAtIGEpLCBnID0gYiAtIGEgKiBmO1xyXG4gICAgICAgIHJldHVybiBlLmsgPSBmLCBlLmIgPSBnLCBlLngxID0gYSwgZS54MiA9IGMsIGUueTEgPSBiLCBlLnkyID0gZCwgZVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGluUmFuZ2UoYSwgYiwgYykge1xyXG4gICAgICAgIHZhciBkID0gTWF0aC5hYnMoYiAtIGMpLCBlID0gTWF0aC5hYnMoYiAtIGEpLCBmID0gTWF0aC5hYnMoYyAtIGEpLCBnID0gTWF0aC5hYnMoZCAtIChlICsgZikpO1xyXG4gICAgICAgIHJldHVybiAxZS02ID4gZyA/ICEwIDogITFcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBpc1BvaW50SW5MaW5lU2VnKGEsIGIsIGMpIHtcclxuICAgICAgICByZXR1cm4gaW5SYW5nZShhLCBjLngxLCBjLngyKSAmJiBpblJhbmdlKGIsIGMueTEsIGMueTIpXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaW50ZXJzZWN0aW9uKGEsIGIpIHtcclxuICAgICAgICB2YXIgYywgZDtcclxuICAgICAgICByZXR1cm4gYS5rID09IGIuayA/IG51bGwgOiAoMSAvIDAgPT0gYS5rIHx8IGEuayA9PSAtMSAvIDAgPyAoYyA9IGEueDEsIGQgPSBiKGEueDEpKSA6IDEgLyAwID09IGIuayB8fCBiLmsgPT0gLTEgLyAwID8gKGMgPSBiLngxLCBkID0gYShiLngxKSkgOiAoYyA9IChiLmIgLSBhLmIpIC8gKGEuayAtIGIuayksIGQgPSBhKGMpKSwgMCA9PSBpc1BvaW50SW5MaW5lU2VnKGMsIGQsIGEpID8gbnVsbCA6IDAgPT0gaXNQb2ludEluTGluZVNlZyhjLCBkLCBiKSA/IG51bGwgOiB7XHJcbiAgICAgICAgICAgIHg6IGMsXHJcbiAgICAgICAgICAgIHk6IGRcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGludGVyc2VjdGlvbkxpbmVCb3VuZChhLCBiKSB7XHJcbiAgICAgICAgdmFyIGMgPSBKVG9wby51dGlsLmxpbmVGKGIubGVmdCwgYi50b3AsIGIubGVmdCwgYi5ib3R0b20pLCBkID0gSlRvcG8udXRpbC5pbnRlcnNlY3Rpb24oYSwgYyk7XHJcbiAgICAgICAgcmV0dXJuIG51bGwgPT0gZCAmJiAoYyA9IEpUb3BvLnV0aWwubGluZUYoYi5sZWZ0LCBiLnRvcCwgYi5yaWdodCwgYi50b3ApLCBkID0gSlRvcG8udXRpbC5pbnRlcnNlY3Rpb24oYSwgYyksIG51bGwgPT0gZCAmJiAoYyA9IEpUb3BvLnV0aWwubGluZUYoYi5yaWdodCwgYi50b3AsIGIucmlnaHQsIGIuYm90dG9tKSwgZCA9IEpUb3BvLnV0aWwuaW50ZXJzZWN0aW9uKGEsIGMpLCBudWxsID09IGQgJiYgKGMgPSBKVG9wby51dGlsLmxpbmVGKGIubGVmdCwgYi5ib3R0b20sIGIucmlnaHQsIGIuYm90dG9tKSwgZCA9IEpUb3BvLnV0aWwuaW50ZXJzZWN0aW9uKGEsIGMpKSkpLCBkXHJcbiAgICB9XHJcblxyXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93Lm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy5vUmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoYSwgMWUzIC8gMjQpXHJcbiAgICAgICAgfSwgQXJyYXkucHJvdG90eXBlLmRlbCA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgaWYgKFwibnVtYmVyXCIgIT0gdHlwZW9mIGEpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgYiA9IDA7IGIgPCB0aGlzLmxlbmd0aDsgYisrKWlmICh0aGlzW2JdID09PSBhKXJldHVybiB0aGlzLnNsaWNlKDAsIGIpLmNvbmNhdCh0aGlzLnNsaWNlKGIgKyAxLCB0aGlzLmxlbmd0aCkpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpc1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gMCA+IGEgPyB0aGlzIDogdGhpcy5zbGljZSgwLCBhKS5jb25jYXQodGhpcy5zbGljZShhICsgMSwgdGhpcy5sZW5ndGgpKVxyXG4gICAgfSwgW10uaW5kZXhPZiB8fCAoQXJyYXkucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgIGZvciAodmFyIGIgPSAwOyBiIDwgdGhpcy5sZW5ndGg7IGIrKylpZiAodGhpc1tiXSA9PT0gYSlyZXR1cm4gYjtcclxuICAgICAgICByZXR1cm4gLTFcclxuICAgIH0pLCB3aW5kb3cuY29uc29sZSB8fCAod2luZG93LmNvbnNvbGUgPSB7XHJcbiAgICAgICAgbG9nOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgfSwgaW5mbzogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIH0sIGRlYnVnOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgfSwgd2FybjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIH0sIGVycm9yOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSwgZ3JhcGhpY3MgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpLCBhbGFybUltYWdlQ2FjaGUgPSB7fTtcclxuICAgIEpUb3BvLnV0aWwgPSB7XHJcbiAgICAgICAgcm90YXRlUG9pbnQ6IHJvdGF0ZVBvaW50LFxyXG4gICAgICAgIHJvdGF0ZVBvaW50czogcm90YXRlUG9pbnRzLFxyXG4gICAgICAgIGdldERpc3RhbmNlOiBnZXREaXN0YW5jZSxcclxuICAgICAgICBnZXRFdmVudFBvc2l0aW9uOiBnZXRFdmVudFBvc2l0aW9uLFxyXG4gICAgICAgIG1vdXNlQ29vcmRzOiBtb3VzZUNvb3JkcyxcclxuICAgICAgICBNZXNzYWdlQnVzOiBNZXNzYWdlQnVzLFxyXG4gICAgICAgIGlzRmlyZWZveDogbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiRmlyZWZveFwiKSA+IDAsXHJcbiAgICAgICAgaXNJRTogISghd2luZG93LmF0dGFjaEV2ZW50IHx8IC0xICE9PSBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCJPcGVyYVwiKSksXHJcbiAgICAgICAgaXNDaHJvbWU6IG51bGwgIT0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC9jaHJvbWUvKSxcclxuICAgICAgICBjbG9uZTogY2xvbmUsXHJcbiAgICAgICAgaXNQb2ludEluUmVjdDogaXNQb2ludEluUmVjdCxcclxuICAgICAgICBpc1BvaW50SW5MaW5lOiBpc1BvaW50SW5MaW5lLFxyXG4gICAgICAgIHJlbW92ZUZyb21BcnJheTogcmVtb3ZlRnJvbUFycmF5LFxyXG4gICAgICAgIGNsb25lRXZlbnQ6IGNsb25lRXZlbnQsXHJcbiAgICAgICAgcmFuZG9tQ29sb3I6IHJhbmRvbUNvbG9yLFxyXG4gICAgICAgIGlzSW50c2VjdDogaXNJbnRzZWN0LFxyXG4gICAgICAgIHRvSnNvbjogdG9Kc29uLFxyXG4gICAgICAgIGxvYWRTdGFnZUZyb21Kc29uOiBsb2FkU3RhZ2VGcm9tSnNvbixcclxuICAgICAgICBnZXRFbGVtZW50c0JvdW5kOiBnZXRFbGVtZW50c0JvdW5kLFxyXG4gICAgICAgIGdlbkltYWdlQWxhcm06IGdlbkltYWdlQWxhcm0sXHJcbiAgICAgICAgZ2V0T2Zmc2V0UG9zaXRpb246IGdldE9mZnNldFBvc2l0aW9uLFxyXG4gICAgICAgIGxpbmVGOiBsaW5lRixcclxuICAgICAgICBpbnRlcnNlY3Rpb246IGludGVyc2VjdGlvbixcclxuICAgICAgICBpbnRlcnNlY3Rpb25MaW5lQm91bmQ6IGludGVyc2VjdGlvbkxpbmVCb3VuZFxyXG4gICAgfSwgd2luZG93LiRmb3IgPSAkZm9yLCB3aW5kb3cuJGZvcmVhY2ggPSAkZm9yZWFjaFxyXG59KEpUb3BvKSwgZnVuY3Rpb24gKGEpIHtcclxuICAgIGZ1bmN0aW9uIGIoYSkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGhnYXA6IDE2LCB2aXNpYmxlOiAhMSwgZXhwb3J0Q2FudmFzOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLCBnZXRJbWFnZTogZnVuY3Rpb24gKGIsIGMpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkID0gYS5nZXRCb3VuZCgpLCBlID0gMSwgZiA9IDE7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV4cG9ydENhbnZhcy53aWR0aCA9IGEuY2FudmFzLndpZHRoLCB0aGlzLmV4cG9ydENhbnZhcy5oZWlnaHQgPSBhLmNhbnZhcy5oZWlnaHQsIG51bGwgIT0gYiAmJiBudWxsICE9IGMgPyAodGhpcy5leHBvcnRDYW52YXMud2lkdGggPSBiLCB0aGlzLmV4cG9ydENhbnZhcy5oZWlnaHQgPSBjLCBlID0gYiAvIGQud2lkdGgsIGYgPSBjIC8gZC5oZWlnaHQpIDogKGQud2lkdGggPiBhLmNhbnZhcy53aWR0aCAmJiAodGhpcy5leHBvcnRDYW52YXMud2lkdGggPSBkLndpZHRoKSwgZC5oZWlnaHQgPiBhLmNhbnZhcy5oZWlnaHQgJiYgKHRoaXMuZXhwb3J0Q2FudmFzLmhlaWdodCA9IGQuaGVpZ2h0KSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZyA9IHRoaXMuZXhwb3J0Q2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhLmNoaWxkcy5sZW5ndGggPiAwICYmIChnLnNhdmUoKSwgZy5jbGVhclJlY3QoMCwgMCwgdGhpcy5leHBvcnRDYW52YXMud2lkdGgsIHRoaXMuZXhwb3J0Q2FudmFzLmhlaWdodCksIGEuY2hpbGRzLmZvckVhY2goZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAxID09IGEudmlzaWJsZSAmJiAoYS5zYXZlKCksIGEudHJhbnNsYXRlWCA9IDAsIGEudHJhbnNsYXRlWSA9IDAsIGEuc2NhbGVYID0gMSwgYS5zY2FsZVkgPSAxLCBnLnNjYWxlKGUsIGYpLCBkLmxlZnQgPCAwICYmIChhLnRyYW5zbGF0ZVggPSBNYXRoLmFicyhkLmxlZnQpKSwgZC50b3AgPCAwICYmIChhLnRyYW5zbGF0ZVkgPSBNYXRoLmFicyhkLnRvcCkpLCBhLnBhaW50QWxsID0gITAsIGEucmVwYWludChnKSwgYS5wYWludEFsbCA9ICExLCBhLnJlc3RvcmUoKSlcclxuICAgICAgICAgICAgICAgIH0pLCBnLnJlc3RvcmUoKSksIHRoaXMuZXhwb3J0Q2FudmFzLnRvRGF0YVVSTChcImltYWdlL3BuZ1wiKVxyXG4gICAgICAgICAgICB9LCBjYW52YXM6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksIHVwZGF0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lYWdsZUltYWdlRGF0YXMgPSB0aGlzLmdldERhdGEoYSlcclxuICAgICAgICAgICAgfSwgc2V0U2l6ZTogZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMud2lkdGggPSB0aGlzLmNhbnZhcy53aWR0aCA9IGEsIHRoaXMuaGVpZ2h0ID0gdGhpcy5jYW52YXMuaGVpZ2h0ID0gYlxyXG4gICAgICAgICAgICB9LCBnZXREYXRhOiBmdW5jdGlvbiAoYiwgYykge1xyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZChhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBhLnN0YWdlLmNhbnZhcy53aWR0aCwgYyA9IGEuc3RhZ2UuY2FudmFzLmhlaWdodCwgZCA9IGIgLyBhLnNjYWxlWCAvIDIsIGUgPSBjIC8gYS5zY2FsZVkgLyAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7dHJhbnNsYXRlWDogYS50cmFuc2xhdGVYICsgZCAtIGQgKiBhLnNjYWxlWCwgdHJhbnNsYXRlWTogYS50cmFuc2xhdGVZICsgZSAtIGUgKiBhLnNjYWxlWX1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBudWxsICE9IGogJiYgbnVsbCAhPSBrID8gdGhpcy5zZXRTaXplKGIsIGMpIDogdGhpcy5zZXRTaXplKDIwMCwgMTYwKTtcclxuICAgICAgICAgICAgICAgIHZhciBlID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGEuY2hpbGRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBlLnNhdmUoKSwgZS5jbGVhclJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCksIGEuY2hpbGRzLmZvckVhY2goZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgMSA9PSBhLnZpc2libGUgJiYgKGEuc2F2ZSgpLCBhLmNlbnRlckFuZFpvb20obnVsbCwgbnVsbCwgZSksIGEucmVwYWludChlKSwgYS5yZXN0b3JlKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSBkKGEuY2hpbGRzWzBdKSwgZyA9IGYudHJhbnNsYXRlWCAqICh0aGlzLmNhbnZhcy53aWR0aCAvIGEuY2FudmFzLndpZHRoKSAqIGEuY2hpbGRzWzBdLnNjYWxlWCwgaCA9IGYudHJhbnNsYXRlWSAqICh0aGlzLmNhbnZhcy5oZWlnaHQgLyBhLmNhbnZhcy5oZWlnaHQpICogYS5jaGlsZHNbMF0uc2NhbGVZLCBpID0gYS5nZXRCb3VuZCgpLCBqID0gYS5jYW52YXMud2lkdGggLyBhLmNoaWxkc1swXS5zY2FsZVggLyBpLndpZHRoLCBrID0gYS5jYW52YXMuaGVpZ2h0IC8gYS5jaGlsZHNbMF0uc2NhbGVZIC8gaS5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaiA+IDEgJiYgKGogPSAxKSwgayA+IDEgJiYgKGogPSAxKSwgZyAqPSBqLCBoICo9IGssIGkubGVmdCA8IDAgJiYgKGcgLT0gTWF0aC5hYnMoaS5sZWZ0KSAqICh0aGlzLndpZHRoIC8gaS53aWR0aCkpLCBpLnRvcCA8IDAgJiYgKGggLT0gTWF0aC5hYnMoaS50b3ApICogKHRoaXMuaGVpZ2h0IC8gaS5oZWlnaHQpKSwgZS5zYXZlKCksIGUubGluZVdpZHRoID0gMSwgZS5zdHJva2VTdHlsZSA9IFwicmdiYSgyNTUsMCwwLDEpXCIsIGUuc3Ryb2tlUmVjdCgtZywgLWgsIGUuY2FudmFzLndpZHRoICogaiwgZS5jYW52YXMuaGVpZ2h0ICogayksIGUucmVzdG9yZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsID0gZS5nZXRJbWFnZURhdGEoMCwgMCwgZS5jYW52YXMud2lkdGgsIGUuY2FudmFzLmhlaWdodClcclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbFxyXG4gICAgICAgICAgICB9LCBwYWludDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gdGhpcy5lYWdsZUltYWdlRGF0YXMpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IGEuZ3JhcGhpY3M7XHJcbiAgICAgICAgICAgICAgICAgICAgYi5zYXZlKCksIGIuZmlsbFN0eWxlID0gXCJyZ2JhKDIxMSwyMTEsMjExLDAuMylcIiwgYi5maWxsUmVjdChhLmNhbnZhcy53aWR0aCAtIHRoaXMuY2FudmFzLndpZHRoIC0gMiAqIHRoaXMuaGdhcCwgYS5jYW52YXMuaGVpZ2h0IC0gdGhpcy5jYW52YXMuaGVpZ2h0IC0gMSwgYS5jYW52YXMud2lkdGggLSB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0ICsgMSksIGIuZmlsbCgpLCBiLnNhdmUoKSwgYi5saW5lV2lkdGggPSAxLCBiLnN0cm9rZVN0eWxlID0gXCJyZ2JhKDAsMCwwLDEpXCIsIGIucmVjdChhLmNhbnZhcy53aWR0aCAtIHRoaXMuY2FudmFzLndpZHRoIC0gMiAqIHRoaXMuaGdhcCwgYS5jYW52YXMuaGVpZ2h0IC0gdGhpcy5jYW52YXMuaGVpZ2h0IC0gMSwgYS5jYW52YXMud2lkdGggLSB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0ICsgMSksIGIuc3Ryb2tlKCksIGIucmVzdG9yZSgpLCBiLnB1dEltYWdlRGF0YSh0aGlzLmVhZ2xlSW1hZ2VEYXRhcywgYS5jYW52YXMud2lkdGggLSB0aGlzLmNhbnZhcy53aWR0aCAtIHRoaXMuaGdhcCwgYS5jYW52YXMuaGVpZ2h0IC0gdGhpcy5jYW52YXMuaGVpZ2h0KSwgYi5yZXN0b3JlKClcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB0aGlzLmVhZ2xlSW1hZ2VEYXRhcyA9IHRoaXMuZ2V0RGF0YShhKVxyXG4gICAgICAgICAgICB9LCBldmVudEhhbmRsZXI6IGZ1bmN0aW9uIChhLCBiLCBjKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZCA9IGIueCwgZSA9IGIueTtcclxuICAgICAgICAgICAgICAgIGlmIChkID4gYy5jYW52YXMud2lkdGggLSB0aGlzLmNhbnZhcy53aWR0aCAmJiBlID4gYy5jYW52YXMuaGVpZ2h0IC0gdGhpcy5jYW52YXMuaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGQgPSBiLnggLSB0aGlzLmNhbnZhcy53aWR0aCwgZSA9IGIueSAtIHRoaXMuY2FudmFzLmhlaWdodCwgXCJtb3VzZWRvd25cIiA9PSBhICYmICh0aGlzLmxhc3RUcmFuc2xhdGVYID0gYy5jaGlsZHNbMF0udHJhbnNsYXRlWCwgdGhpcy5sYXN0VHJhbnNsYXRlWSA9IGMuY2hpbGRzWzBdLnRyYW5zbGF0ZVkpLCBcIm1vdXNlZHJhZ1wiID09IGEgJiYgYy5jaGlsZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IGIuZHgsIGcgPSBiLmR5LCBoID0gYy5nZXRCb3VuZCgpLCBpID0gdGhpcy5jYW52YXMud2lkdGggLyBjLmNoaWxkc1swXS5zY2FsZVggLyBoLndpZHRoLCBqID0gdGhpcy5jYW52YXMuaGVpZ2h0IC8gYy5jaGlsZHNbMF0uc2NhbGVZIC8gaC5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGMuY2hpbGRzWzBdLnRyYW5zbGF0ZVggPSB0aGlzLmxhc3RUcmFuc2xhdGVYIC0gZiAvIGksIGMuY2hpbGRzWzBdLnRyYW5zbGF0ZVkgPSB0aGlzLmxhc3RUcmFuc2xhdGVZIC0gZyAvIGpcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYyhjKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZChiKSB7XHJcbiAgICAgICAgICAgIHZhciBjID0gYS51dGlsLmdldEV2ZW50UG9zaXRpb24oYiksIGQgPSBhLnV0aWwuZ2V0T2Zmc2V0UG9zaXRpb24obi5jYW52YXMpO1xyXG4gICAgICAgICAgICByZXR1cm4gYy5vZmZzZXRMZWZ0ID0gYy5wYWdlWCAtIGQubGVmdCwgYy5vZmZzZXRUb3AgPSBjLnBhZ2VZIC0gZC50b3AsIGMueCA9IGMub2Zmc2V0TGVmdCwgYy55ID0gYy5vZmZzZXRUb3AsIGMudGFyZ2V0ID0gbnVsbCwgY1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZShhKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50Lm9uc2VsZWN0c3RhcnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gITFcclxuICAgICAgICAgICAgfSwgdGhpcy5tb3VzZU92ZXIgPSAhMDtcclxuICAgICAgICAgICAgdmFyIGIgPSBkKGEpO1xyXG4gICAgICAgICAgICBuLmRpc3BhdGNoRXZlbnRUb1NjZW5lcyhcIm1vdXNlb3ZlclwiLCBiKSwgbi5kaXNwYXRjaEV2ZW50KFwibW91c2VvdmVyXCIsIGIpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBmKGEpIHtcclxuICAgICAgICAgICAgcCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgbyA9ICEwXHJcbiAgICAgICAgICAgIH0sIDUwMCksIGRvY3VtZW50Lm9uc2VsZWN0c3RhcnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gITBcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdmFyIGIgPSBkKGEpO1xyXG4gICAgICAgICAgICBuLmRpc3BhdGNoRXZlbnRUb1NjZW5lcyhcIm1vdXNlb3V0XCIsIGIpLCBuLmRpc3BhdGNoRXZlbnQoXCJtb3VzZW91dFwiLCBiKSwgbi5uZWVkUmVwYWludCA9IDAgPT0gbi5hbmltYXRlID8gITEgOiAhMFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZyhhKSB7XHJcbiAgICAgICAgICAgIHZhciBiID0gZChhKTtcclxuICAgICAgICAgICAgbi5tb3VzZURvd24gPSAhMCwgbi5tb3VzZURvd25YID0gYi54LCBuLm1vdXNlRG93blkgPSBiLnksIG4uZGlzcGF0Y2hFdmVudFRvU2NlbmVzKFwibW91c2Vkb3duXCIsIGIpLCBuLmRpc3BhdGNoRXZlbnQoXCJtb3VzZWRvd25cIiwgYilcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGgoYSkge1xyXG4gICAgICAgICAgICB2YXIgYiA9IGQoYSk7XHJcbiAgICAgICAgICAgIG4uZGlzcGF0Y2hFdmVudFRvU2NlbmVzKFwibW91c2V1cFwiLCBiKSwgbi5kaXNwYXRjaEV2ZW50KFwibW91c2V1cFwiLCBiKSwgbi5tb3VzZURvd24gPSAhMSwgbi5uZWVkUmVwYWludCA9IDAgPT0gbi5hbmltYXRlID8gITEgOiAhMFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaShhKSB7XHJcbiAgICAgICAgICAgIHAgJiYgKHdpbmRvdy5jbGVhclRpbWVvdXQocCksIHAgPSBudWxsKSwgbyA9ICExO1xyXG4gICAgICAgICAgICB2YXIgYiA9IGQoYSk7XHJcbiAgICAgICAgICAgIG4ubW91c2VEb3duID8gMCA9PSBhLmJ1dHRvbiAmJiAoYi5keCA9IGIueCAtIG4ubW91c2VEb3duWCwgYi5keSA9IGIueSAtIG4ubW91c2VEb3duWSwgbi5kaXNwYXRjaEV2ZW50VG9TY2VuZXMoXCJtb3VzZWRyYWdcIiwgYiksIG4uZGlzcGF0Y2hFdmVudChcIm1vdXNlZHJhZ1wiLCBiKSwgMSA9PSBuLmVhZ2xlRXllLnZpc2libGUgJiYgbi5lYWdsZUV5ZS51cGRhdGUoKSkgOiAobi5kaXNwYXRjaEV2ZW50VG9TY2VuZXMoXCJtb3VzZW1vdmVcIiwgYiksIG4uZGlzcGF0Y2hFdmVudChcIm1vdXNlbW92ZVwiLCBiKSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGooYSkge1xyXG4gICAgICAgICAgICB2YXIgYiA9IGQoYSk7XHJcbiAgICAgICAgICAgIG4uZGlzcGF0Y2hFdmVudFRvU2NlbmVzKFwiY2xpY2tcIiwgYiksIG4uZGlzcGF0Y2hFdmVudChcImNsaWNrXCIsIGIpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBrKGEpIHtcclxuICAgICAgICAgICAgdmFyIGIgPSBkKGEpO1xyXG4gICAgICAgICAgICBuLmRpc3BhdGNoRXZlbnRUb1NjZW5lcyhcImRiY2xpY2tcIiwgYiksIG4uZGlzcGF0Y2hFdmVudChcImRiY2xpY2tcIiwgYilcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGwoYSkge1xyXG4gICAgICAgICAgICB2YXIgYiA9IGQoYSk7XHJcbiAgICAgICAgICAgIG4uZGlzcGF0Y2hFdmVudFRvU2NlbmVzKFwibW91c2V3aGVlbFwiLCBiKSwgbi5kaXNwYXRjaEV2ZW50KFwibW91c2V3aGVlbFwiLCBiKSwgbnVsbCAhPSBuLndoZWVsWm9vbSAmJiAoYS5wcmV2ZW50RGVmYXVsdCA/IGEucHJldmVudERlZmF1bHQoKSA6IChhID0gYSB8fCB3aW5kb3cuZXZlbnQsIGEucmV0dXJuVmFsdWUgPSAhMSksIDEgPT0gbi5lYWdsZUV5ZS52aXNpYmxlICYmIG4uZWFnbGVFeWUudXBkYXRlKCkpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBtKGIpIHtcclxuICAgICAgICAgICAgYS51dGlsLmlzSUUgfHwgIXdpbmRvdy5hZGRFdmVudExpc3RlbmVyID8gKGIub25tb3VzZW91dCA9IGYsIGIub25tb3VzZW92ZXIgPSBlLCBiLm9ubW91c2Vkb3duID0gZywgYi5vbm1vdXNldXAgPSBoLCBiLm9ubW91c2Vtb3ZlID0gaSwgYi5vbmNsaWNrID0gaiwgYi5vbmRibGNsaWNrID0gaywgYi5vbm1vdXNld2hlZWwgPSBsLCBiLnRvdWNoc3RhcnQgPSBnLCBiLnRvdWNobW92ZSA9IGksIGIudG91Y2hlbmQgPSBoKSA6IChiLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCBmKSwgYi5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsIGUpLCBiLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgZyksIGIuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgaCksIGIuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBpKSwgYi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaiksIGIuYWRkRXZlbnRMaXN0ZW5lcihcImRibGNsaWNrXCIsIGspLCBhLnV0aWwuaXNGaXJlZm94ID8gYi5hZGRFdmVudExpc3RlbmVyKFwiRE9NTW91c2VTY3JvbGxcIiwgbCkgOiBiLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXdoZWVsXCIsIGwpKSwgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgJiYgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBmdW5jdGlvbiAoYikge1xyXG4gICAgICAgICAgICAgICAgbi5kaXNwYXRjaEV2ZW50VG9TY2VuZXMoXCJrZXlkb3duXCIsIGEudXRpbC5jbG9uZUV2ZW50KGIpKTtcclxuICAgICAgICAgICAgICAgIHZhciBjID0gYi5rZXlDb2RlO1xyXG4gICAgICAgICAgICAgICAgKDM3ID09IGMgfHwgMzggPT0gYyB8fCAzOSA9PSBjIHx8IDQwID09IGMpICYmIChiLnByZXZlbnREZWZhdWx0ID8gYi5wcmV2ZW50RGVmYXVsdCgpIDogKGIgPSBiIHx8IHdpbmRvdy5ldmVudCwgYi5yZXR1cm5WYWx1ZSA9ICExKSlcclxuICAgICAgICAgICAgfSwgITApLCB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIGZ1bmN0aW9uIChiKSB7XHJcbiAgICAgICAgICAgICAgICBuLmRpc3BhdGNoRXZlbnRUb1NjZW5lcyhcImtleXVwXCIsIGEudXRpbC5jbG9uZUV2ZW50KGIpKTtcclxuICAgICAgICAgICAgICAgIHZhciBjID0gYi5rZXlDb2RlO1xyXG4gICAgICAgICAgICAgICAgKDM3ID09IGMgfHwgMzggPT0gYyB8fCAzOSA9PSBjIHx8IDQwID09IGMpICYmIChiLnByZXZlbnREZWZhdWx0ID8gYi5wcmV2ZW50RGVmYXVsdCgpIDogKGIgPSBiIHx8IHdpbmRvdy5ldmVudCwgYi5yZXR1cm5WYWx1ZSA9ICExKSlcclxuICAgICAgICAgICAgfSwgITApKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYS5zdGFnZSA9IHRoaXM7XHJcbiAgICAgICAgdmFyIG4gPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uIChjKSB7XHJcbiAgICAgICAgICAgIG0oYyksIHRoaXMuY2FudmFzID0gYywgdGhpcy5ncmFwaGljcyA9IGMuZ2V0Q29udGV4dChcIjJkXCIpLCB0aGlzLmNoaWxkcyA9IFtdLCB0aGlzLmZyYW1lcyA9IDI0LCB0aGlzLm1lc3NhZ2VCdXMgPSBuZXcgYS51dGlsLk1lc3NhZ2VCdXMsIHRoaXMuZWFnbGVFeWUgPSBiKHRoaXMpLCB0aGlzLndoZWVsWm9vbSA9IG51bGwsIHRoaXMubW91c2VEb3duWCA9IDAsIHRoaXMubW91c2VEb3duWSA9IDAsIHRoaXMubW91c2VEb3duID0gITEsIHRoaXMubW91c2VPdmVyID0gITEsIHRoaXMubmVlZFJlcGFpbnQgPSAhMCwgdGhpcy5zZXJpYWxpemVkUHJvcGVydGllcyA9IFtcImZyYW1lc1wiLCBcIndoZWVsWm9vbVwiXVxyXG4gICAgICAgIH0sIG51bGwgIT0gYyAmJiB0aGlzLmluaXRpYWxpemUoYyk7XHJcbiAgICAgICAgdmFyIG8gPSAhMCwgcCA9IG51bGw7XHJcbiAgICAgICAgZG9jdW1lbnQub25jb250ZXh0bWVudSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG9cclxuICAgICAgICB9LCB0aGlzLmRpc3BhdGNoRXZlbnRUb1NjZW5lcyA9IGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgIGlmICgwICE9IHRoaXMuZnJhbWVzICYmICh0aGlzLm5lZWRSZXBhaW50ID0gITApLCAxID09IHRoaXMuZWFnbGVFeWUudmlzaWJsZSAmJiAtMSAhPSBhLmluZGV4T2YoXCJtb3VzZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGMgPSBiLngsIGQgPSBiLnk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYyA+IHRoaXMud2lkdGggLSB0aGlzLmVhZ2xlRXllLndpZHRoICYmIGQgPiB0aGlzLmhlaWdodCAtIHRoaXMuZWFnbGVFeWUuaGVpZ2h0KXJldHVybiB2b2lkIHRoaXMuZWFnbGVFeWUuZXZlbnRIYW5kbGVyKGEsIGIsIHRoaXMpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5jaGlsZHMuZm9yRWFjaChmdW5jdGlvbiAoYykge1xyXG4gICAgICAgICAgICAgICAgaWYgKDEgPT0gYy52aXNpYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSBjW2EgKyBcIkhhbmRsZXJcIl07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gZCl0aHJvdyBuZXcgRXJyb3IoXCJGdW5jdGlvbiBub3QgZm91bmQ6XCIgKyBhICsgXCJIYW5kbGVyXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGQuY2FsbChjLCBiKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0sIHRoaXMuYWRkID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgYiA9IDA7IGIgPCB0aGlzLmNoaWxkcy5sZW5ndGg7IGIrKylpZiAodGhpcy5jaGlsZHNbYl0gPT09IGEpcmV0dXJuO1xyXG4gICAgICAgICAgICBhLmFkZFRvKHRoaXMpLCB0aGlzLmNoaWxkcy5wdXNoKGEpXHJcbiAgICAgICAgfSwgdGhpcy5yZW1vdmUgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSBhKXRocm93IG5ldyBFcnJvcihcIlN0YWdlLnJlbW92ZeWHuumUmTog5Y+C5pWw5Li6bnVsbCFcIik7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGIgPSAwOyBiIDwgdGhpcy5jaGlsZHMubGVuZ3RoOyBiKyspaWYgKHRoaXMuY2hpbGRzW2JdID09PSBhKXJldHVybiBhLnN0YWdlID0gbnVsbCwgdGhpcy5jaGlsZHMgPSB0aGlzLmNoaWxkcy5kZWwoYiksIHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzXHJcbiAgICAgICAgfSwgdGhpcy5jbGVhciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGlsZHMgPSBbXVxyXG4gICAgICAgIH0sIHRoaXMuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgIHZhciBjID0gdGhpcywgZCA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICBiLmNhbGwoYywgYSlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWVzc2FnZUJ1cy5zdWJzY3JpYmUoYSwgZCksIHRoaXNcclxuICAgICAgICB9LCB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VCdXMudW5zdWJzY3JpYmUoYSlcclxuICAgICAgICB9LCB0aGlzLnJlbW92ZUFsbEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZUJ1cyA9IG5ldyBhLnV0aWwuTWVzc2FnZUJ1c1xyXG4gICAgICAgIH0sIHRoaXMuZGlzcGF0Y2hFdmVudCA9IGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1lc3NhZ2VCdXMucHVibGlzaChhLCBiKSwgdGhpc1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHEgPSBcImNsaWNrLGRiY2xpY2ssbW91c2Vkb3duLG1vdXNldXAsbW91c2VvdmVyLG1vdXNlb3V0LG1vdXNlbW92ZSxtb3VzZWRyYWcsbW91c2V3aGVlbCx0b3VjaHN0YXJ0LHRvdWNobW92ZSx0b3VjaGVuZCxrZXlkb3duLGtleXVwXCIuc3BsaXQoXCIsXCIpLCByID0gdGhpcztcclxuICAgICAgICBxLmZvckVhY2goZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgclthXSA9IGZ1bmN0aW9uIChiKSB7XHJcbiAgICAgICAgICAgICAgICBudWxsICE9IGIgPyB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoYSwgYikgOiB0aGlzLmRpc3BhdGNoRXZlbnQoYSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLCB0aGlzLnNhdmVJbWFnZUluZm8gPSBmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgICAgICB2YXIgYyA9IHRoaXMuZWFnbGVFeWUuZ2V0SW1hZ2UoYSwgYiksIGQgPSB3aW5kb3cub3BlbihcImFib3V0OmJsYW5rXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gZC5kb2N1bWVudC53cml0ZShcIjxpbWcgc3JjPSdcIiArIGMgKyBcIicgYWx0PSdmcm9tIGNhbnZhcycvPlwiKSwgdGhpc1xyXG4gICAgICAgIH0sIHRoaXMuc2F2ZUFzTG9jYWxJbWFnZSA9IGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgIHZhciBjID0gdGhpcy5lYWdsZUV5ZS5nZXRJbWFnZShhLCBiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGMucmVwbGFjZShcImltYWdlL3BuZ1wiLCBcImltYWdlL29jdGV0LXN0cmVhbVwiKSwgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBjLCB0aGlzXHJcbiAgICAgICAgfSwgdGhpcy5wYWludCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgbnVsbCAhPSB0aGlzLmNhbnZhcyAmJiAodGhpcy5ncmFwaGljcy5zYXZlKCksIHRoaXMuZ3JhcGhpY3MuY2xlYXJSZWN0KDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KSwgdGhpcy5jaGlsZHMuZm9yRWFjaChmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICAgICAgMSA9PSBhLnZpc2libGUgJiYgYS5yZXBhaW50KG4uZ3JhcGhpY3MpXHJcbiAgICAgICAgICAgIH0pLCAxID09IHRoaXMuZWFnbGVFeWUudmlzaWJsZSAmJiB0aGlzLmVhZ2xlRXllLnBhaW50KHRoaXMpLCB0aGlzLmdyYXBoaWNzLnJlc3RvcmUoKSlcclxuICAgICAgICB9LCB0aGlzLnJlcGFpbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIDAgIT0gdGhpcy5mcmFtZXMgJiYgKHRoaXMuZnJhbWVzIDwgMCAmJiAwID09IHRoaXMubmVlZFJlcGFpbnQgfHwgKHRoaXMucGFpbnQoKSwgdGhpcy5mcmFtZXMgPCAwICYmICh0aGlzLm5lZWRSZXBhaW50ID0gITEpKSlcclxuICAgICAgICB9LCB0aGlzLnpvb20gPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICB0aGlzLmNoaWxkcy5mb3JFYWNoKGZ1bmN0aW9uIChiKSB7XHJcbiAgICAgICAgICAgICAgICAwICE9IGIudmlzaWJsZSAmJiBiLnpvb20oYSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9LCB0aGlzLnpvb21PdXQgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICB0aGlzLmNoaWxkcy5mb3JFYWNoKGZ1bmN0aW9uIChiKSB7XHJcbiAgICAgICAgICAgICAgICAwICE9IGIudmlzaWJsZSAmJiBiLnpvb21PdXQoYSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9LCB0aGlzLnpvb21JbiA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hpbGRzLmZvckVhY2goZnVuY3Rpb24gKGIpIHtcclxuICAgICAgICAgICAgICAgIDAgIT0gYi52aXNpYmxlICYmIGIuem9vbUluKGEpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSwgdGhpcy5jZW50ZXJBbmRab29tID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aGlzLmNoaWxkcy5mb3JFYWNoKGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICAwICE9IGEudmlzaWJsZSAmJiBhLmNlbnRlckFuZFpvb20oKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0sIHRoaXMuc2V0Q2VudGVyID0gZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgdmFyIGMgPSB0aGlzO1xyXG4gICAgICAgICAgICB0aGlzLmNoaWxkcy5mb3JFYWNoKGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZSA9IGEgLSBjLmNhbnZhcy53aWR0aCAvIDIsIGYgPSBiIC0gYy5jYW52YXMuaGVpZ2h0IC8gMjtcclxuICAgICAgICAgICAgICAgIGQudHJhbnNsYXRlWCA9IC1lLCBkLnRyYW5zbGF0ZVkgPSAtZlxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0sIHRoaXMuZ2V0Qm91bmQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBhID0ge2xlZnQ6IE51bWJlci5NQVhfVkFMVUUsIHJpZ2h0OiBOdW1iZXIuTUlOX1ZBTFVFLCB0b3A6IE51bWJlci5NQVhfVkFMVUUsIGJvdHRvbTogTnVtYmVyLk1JTl9WQUxVRX07XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNoaWxkcy5mb3JFYWNoKGZ1bmN0aW9uIChiKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYyA9IGIuZ2V0RWxlbWVudHNCb3VuZCgpO1xyXG4gICAgICAgICAgICAgICAgYy5sZWZ0IDwgYS5sZWZ0ICYmIChhLmxlZnQgPSBjLmxlZnQsIGEubGVmdE5vZGUgPSBjLmxlZnROb2RlKSwgYy50b3AgPCBhLnRvcCAmJiAoYS50b3AgPSBjLnRvcCwgYS50b3BOb2RlID0gYy50b3BOb2RlKSwgYy5yaWdodCA+IGEucmlnaHQgJiYgKGEucmlnaHQgPSBjLnJpZ2h0LCBhLnJpZ2h0Tm9kZSA9IGMucmlnaHROb2RlKSwgYy5ib3R0b20gPiBhLmJvdHRvbSAmJiAoYS5ib3R0b20gPSBjLmJvdHRvbSwgYS5ib3R0b21Ob2RlID0gYy5ib3R0b21Ob2RlKVxyXG4gICAgICAgICAgICB9KSwgYS53aWR0aCA9IGEucmlnaHQgLSBhLmxlZnQsIGEuaGVpZ2h0ID0gYS5ib3R0b20gLSBhLnRvcCwgYVxyXG4gICAgICAgIH0sIHRoaXMudG9Kc29uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYiA9IHRoaXMsIGMgPSAne1widmVyc2lvblwiOlwiJyArIGEudmVyc2lvbiArICdcIiwnO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXJpYWxpemVkUHJvcGVydGllcy5sZW5ndGhcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZXJpYWxpemVkUHJvcGVydGllcy5mb3JFYWNoKGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZCA9IGJbYV07XHJcbiAgICAgICAgICAgICAgICBcInN0cmluZ1wiID09IHR5cGVvZiBkICYmIChkID0gJ1wiJyArIGQgKyAnXCInKSwgYyArPSAnXCInICsgYSArICdcIjonICsgZCArIFwiLFwiXHJcbiAgICAgICAgICAgIH0pLCBjICs9ICdcImNoaWxkc1wiOlsnLCB0aGlzLmNoaWxkcy5mb3JFYWNoKGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICBjICs9IGEudG9Kc29uKClcclxuICAgICAgICAgICAgfSksIGMgKz0gXCJdXCIsIGMgKz0gXCJ9XCJcclxuICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIDAgPT0gbi5mcmFtZXMgPyBzZXRUaW1lb3V0KGFyZ3VtZW50cy5jYWxsZWUsIDEwMCkgOiBuLmZyYW1lcyA8IDAgPyAobi5yZXBhaW50KCksIHNldFRpbWVvdXQoYXJndW1lbnRzLmNhbGxlZSwgMWUzIC8gLW4uZnJhbWVzKSkgOiAobi5yZXBhaW50KCksIHNldFRpbWVvdXQoYXJndW1lbnRzLmNhbGxlZSwgMWUzIC8gbi5mcmFtZXMpKVxyXG4gICAgICAgIH0oKSwgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIG4ubW91c2V3aGVlbChmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGIgPSBudWxsID09IGEud2hlZWxEZWx0YSA/IGEuZGV0YWlsIDogYS53aGVlbERlbHRhO1xyXG4gICAgICAgICAgICAgICAgbnVsbCAhPSB0aGlzLndoZWVsWm9vbSAmJiAoYiA+IDAgPyB0aGlzLnpvb21Jbih0aGlzLndoZWVsWm9vbSkgOiB0aGlzLnpvb21PdXQodGhpcy53aGVlbFpvb20pKVxyXG4gICAgICAgICAgICB9KSwgbi5wYWludCgpXHJcbiAgICAgICAgfSwgMzAwKSwgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIG4ucGFpbnQoKVxyXG4gICAgICAgIH0sIDFlMyksIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBuLnBhaW50KClcclxuICAgICAgICB9LCAzZTMpXHJcbiAgICB9XHJcblxyXG4gICAgYy5wcm90b3R5cGUgPSB7XHJcbiAgICAgICAgZ2V0IHdpZHRoKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYW52YXMud2lkdGhcclxuICAgICAgICB9LCBnZXQgaGVpZ2h0KCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYW52YXMuaGVpZ2h0XHJcbiAgICAgICAgfSwgc2V0IGN1cnNvcihhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLnN0eWxlLmN1cnNvciA9IGFcclxuICAgICAgICB9LCBnZXQgY3Vyc29yKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYW52YXMuc3R5bGUuY3Vyc29yXHJcbiAgICAgICAgfSwgc2V0IG1vZGUoYSkge1xyXG4gICAgICAgICAgICB0aGlzLmNoaWxkcy5mb3JFYWNoKGZ1bmN0aW9uIChiKSB7XHJcbiAgICAgICAgICAgICAgICBiLm1vZGUgPSBhXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfSwgYS5TdGFnZSA9IGNcclxufShKVG9wbyksIGZ1bmN0aW9uIChhKSB7XHJcbiAgICBmdW5jdGlvbiBiKGMpIHtcclxuICAgICAgICBmdW5jdGlvbiBkKGEsIGIsIGMsIGQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICBlLmJlZ2luUGF0aCgpLCBlLnN0cm9rZVN0eWxlID0gXCJyZ2JhKDAsMCwyMzYsMC41KVwiLCBlLmZpbGxTdHlsZSA9IFwicmdiYSgwLDAsMjM2LDAuMSlcIiwgZS5yZWN0KGEsIGIsIGMsIGQpLCBlLmZpbGwoKSwgZS5zdHJva2UoKSwgZS5jbG9zZVBhdGgoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZSA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBiLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksIHRoaXMubWVzc2FnZUJ1cyA9IG5ldyBhLnV0aWwuTWVzc2FnZUJ1cywgdGhpcy5lbGVtZW50VHlwZSA9IFwic2NlbmVcIiwgdGhpcy5jaGlsZHMgPSBbXSwgdGhpcy56SW5kZXhNYXAgPSB7fSwgdGhpcy56SW5kZXhBcnJheSA9IFtdLCB0aGlzLmJhY2tncm91bmRDb2xvciA9IFwiMjU1LDI1NSwyNTVcIiwgdGhpcy52aXNpYmxlID0gITAsIHRoaXMuYWxwaGEgPSAwLCB0aGlzLnNjYWxlWCA9IDEsIHRoaXMuc2NhbGVZID0gMSwgdGhpcy5tb2RlID0gYS5TY2VuZU1vZGUubm9ybWFsLCB0aGlzLnRyYW5zbGF0ZSA9ICEwLCB0aGlzLnRyYW5zbGF0ZVggPSAwLCB0aGlzLnRyYW5zbGF0ZVkgPSAwLCB0aGlzLmxhc3RUcmFuc2xhdGVYID0gMCwgdGhpcy5sYXN0VHJhbnNsYXRlWSA9IDAsIHRoaXMubW91c2VEb3duID0gITEsIHRoaXMubW91c2VEb3duWCA9IG51bGwsIHRoaXMubW91c2VEb3duWSA9IG51bGwsIHRoaXMubW91c2VEb3duRXZlbnQgPSBudWxsLCB0aGlzLmFyZWFTZWxlY3QgPSAhMCwgdGhpcy5vcGVyYXRpb25zID0gW10sIHRoaXMuc2VsZWN0ZWRFbGVtZW50cyA9IFtdLCB0aGlzLnBhaW50QWxsID0gITE7XHJcbiAgICAgICAgICAgIHZhciBjID0gXCJiYWNrZ3JvdW5kLGJhY2tncm91bmRDb2xvcixtb2RlLHBhaW50QWxsLGFyZWFTZWxlY3QsdHJhbnNsYXRlLHRyYW5zbGF0ZVgsdHJhbnNsYXRlWSxsYXN0VHJhbnNsYXRlZFgsbGFzdFRyYW5zbGF0ZWRZLGFscGhhLHZpc2libGUsc2NhbGVYLHNjYWxlWVwiLnNwbGl0KFwiLFwiKTtcclxuICAgICAgICAgICAgdGhpcy5zZXJpYWxpemVkUHJvcGVydGllcyA9IHRoaXMuc2VyaWFsaXplZFByb3BlcnRpZXMuY29uY2F0KGMpXHJcbiAgICAgICAgfSwgdGhpcy5pbml0aWFsaXplKCksIHRoaXMuc2V0QmFja2dyb3VuZCA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmFja2dyb3VuZCA9IGFcclxuICAgICAgICB9LCB0aGlzLmFkZFRvID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgdGhpcy5zdGFnZSAhPT0gYSAmJiBudWxsICE9IGEgJiYgKHRoaXMuc3RhZ2UgPSBhKVxyXG4gICAgICAgIH0sIG51bGwgIT0gYyAmJiAoYy5hZGQodGhpcyksIHRoaXMuYWRkVG8oYykpLCB0aGlzLnNob3cgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZSA9ICEwXHJcbiAgICAgICAgfSwgdGhpcy5oaWRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aGlzLnZpc2libGUgPSAhMVxyXG4gICAgICAgIH0sIHRoaXMucGFpbnQgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICBpZiAoMCAhPSB0aGlzLnZpc2libGUgJiYgbnVsbCAhPSB0aGlzLnN0YWdlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYS5zYXZlKCksIHRoaXMucGFpbnRCYWNrZ3JvdWQoYSksIGEucmVzdG9yZSgpLCBhLnNhdmUoKSwgYS5zY2FsZSh0aGlzLnNjYWxlWCwgdGhpcy5zY2FsZVkpLCAxID09IHRoaXMudHJhbnNsYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSB0aGlzLmdldE9mZnNldFRyYW5zbGF0ZShhKTtcclxuICAgICAgICAgICAgICAgICAgICBhLnRyYW5zbGF0ZShiLnRyYW5zbGF0ZVgsIGIudHJhbnNsYXRlWSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMucGFpbnRDaGlsZHMoYSksIGEucmVzdG9yZSgpLCBhLnNhdmUoKSwgdGhpcy5wYWludE9wZXJhdGlvbnMoYSwgdGhpcy5vcGVyYXRpb25zKSwgYS5yZXN0b3JlKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIHRoaXMucmVwYWludCA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIDAgIT0gdGhpcy52aXNpYmxlICYmIHRoaXMucGFpbnQoYSlcclxuICAgICAgICB9LCB0aGlzLnBhaW50QmFja2dyb3VkID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgbnVsbCAhPSB0aGlzLmJhY2tncm91bmQgPyBhLmRyYXdJbWFnZSh0aGlzLmJhY2tncm91bmQsIDAsIDAsIGEuY2FudmFzLndpZHRoLCBhLmNhbnZhcy5oZWlnaHQpIDogKGEuYmVnaW5QYXRoKCksIGEuZmlsbFN0eWxlID0gXCJyZ2JhKFwiICsgdGhpcy5iYWNrZ3JvdW5kQ29sb3IgKyBcIixcIiArIHRoaXMuYWxwaGEgKyBcIilcIiwgYS5maWxsUmVjdCgwLCAwLCBhLmNhbnZhcy53aWR0aCwgYS5jYW52YXMuaGVpZ2h0KSwgYS5jbG9zZVBhdGgoKSlcclxuICAgICAgICB9LCB0aGlzLmdldERpc3BsYXllZEVsZW1lbnRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBhID0gW10sIGIgPSAwOyBiIDwgdGhpcy56SW5kZXhBcnJheS5sZW5ndGg7IGIrKylmb3IgKHZhciBjID0gdGhpcy56SW5kZXhBcnJheVtiXSwgZCA9IHRoaXMuekluZGV4TWFwW2NdLCBlID0gMDsgZSA8IGQubGVuZ3RoOyBlKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBmID0gZFtlXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNWaXNpYWJsZShmKSAmJiBhLnB1c2goZilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gYVxyXG4gICAgICAgIH0sIHRoaXMuZ2V0RGlzcGxheWVkTm9kZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGIgPSBbXSwgYyA9IDA7IGMgPCB0aGlzLmNoaWxkcy5sZW5ndGg7IGMrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGQgPSB0aGlzLmNoaWxkc1tjXTtcclxuICAgICAgICAgICAgICAgIGQgaW5zdGFuY2VvZiBhLk5vZGUgJiYgdGhpcy5pc1Zpc2lhYmxlKGQpICYmIGIucHVzaChkKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBiXHJcbiAgICAgICAgfSwgdGhpcy5wYWludENoaWxkcyA9IGZ1bmN0aW9uIChiKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGMgPSAwOyBjIDwgdGhpcy56SW5kZXhBcnJheS5sZW5ndGg7IGMrKylmb3IgKHZhciBkID0gdGhpcy56SW5kZXhBcnJheVtjXSwgZSA9IHRoaXMuekluZGV4TWFwW2RdLCBmID0gMDsgZiA8IGUubGVuZ3RoOyBmKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBnID0gZVtmXTtcclxuICAgICAgICAgICAgICAgIGlmICgxID09IHRoaXMucGFpbnRBbGwgfHwgdGhpcy5pc1Zpc2lhYmxlKGcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGIuc2F2ZSgpLCAxID09IGcudHJhbnNmb3JtQWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaCA9IGcuZ2V0Q2VudGVyTG9jYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYi50cmFuc2xhdGUoaC54LCBoLnkpLCBnLnJvdGF0ZSAmJiBiLnJvdGF0ZShnLnJvdGF0ZSksIGcuc2NhbGVYICYmIGcuc2NhbGVZID8gYi5zY2FsZShnLnNjYWxlWCwgZy5zY2FsZVkpIDogZy5zY2FsZVggPyBiLnNjYWxlKGcuc2NhbGVYLCAxKSA6IGcuc2NhbGVZICYmIGIuc2NhbGUoMSwgZy5zY2FsZVkpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8v5rqQ56CB5L+u5pS5XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZy5hbGFybUZsYXNoKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZy5hbGFybUZsYXNoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIDEgPT0gZy5zaGFkb3cgJiYgKGIuc2hhZG93Qmx1ciA9IGcuc2hhZG93Qmx1ciwgYi5zaGFkb3dDb2xvciA9IGcuc2hhZG93Q29sb3IsIGIuc2hhZG93T2Zmc2V0WCA9IGcuc2hhZG93T2Zmc2V0WCwgYi5zaGFkb3dPZmZzZXRZID0gZy5zaGFkb3dPZmZzZXRZKSwgZyBpbnN0YW5jZW9mIGEuSW50ZXJhY3RpdmVFbGVtZW50ICYmIChnLnNlbGVjdGVkICYmIDEgPT0gZy5zaG93U2VsZWN0ZWQgJiYgZy5wYWludFNlbGVjdGVkKGIpLCAxID09IGcuaXNNb3VzZU92ZXIgJiYgZy5wYWludE1vdXNlb3ZlcihiKSksIGcucGFpbnQoYiksIGIucmVzdG9yZSgpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCB0aGlzLmdldE9mZnNldFRyYW5zbGF0ZSA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHZhciBiID0gdGhpcy5zdGFnZS5jYW52YXMud2lkdGgsIGMgPSB0aGlzLnN0YWdlLmNhbnZhcy5oZWlnaHQ7XHJcbiAgICAgICAgICAgIG51bGwgIT0gYSAmJiBcIm1vdmVcIiAhPSBhICYmIChiID0gYS5jYW52YXMud2lkdGgsIGMgPSBhLmNhbnZhcy5oZWlnaHQpO1xyXG4gICAgICAgICAgICB2YXIgZCA9IGIgLyB0aGlzLnNjYWxlWCAvIDIsIGUgPSBjIC8gdGhpcy5zY2FsZVkgLyAyLCBmID0ge3RyYW5zbGF0ZVg6IHRoaXMudHJhbnNsYXRlWCArIChkIC0gZCAqIHRoaXMuc2NhbGVYKSwgdHJhbnNsYXRlWTogdGhpcy50cmFuc2xhdGVZICsgKGUgLSBlICogdGhpcy5zY2FsZVkpfTtcclxuICAgICAgICAgICAgcmV0dXJuIGZcclxuICAgICAgICB9LCB0aGlzLmlzVmlzaWFibGUgPSBmdW5jdGlvbiAoYikge1xyXG4gICAgICAgICAgICBpZiAoMSAhPSBiLnZpc2libGUpcmV0dXJuICExO1xyXG4gICAgICAgICAgICBpZiAoYiBpbnN0YW5jZW9mIGEuTGluaylyZXR1cm4gITA7XHJcbiAgICAgICAgICAgIHZhciBjID0gdGhpcy5nZXRPZmZzZXRUcmFuc2xhdGUoKSwgZCA9IGIueCArIGMudHJhbnNsYXRlWCwgZSA9IGIueSArIGMudHJhbnNsYXRlWTtcclxuICAgICAgICAgICAgZCAqPSB0aGlzLnNjYWxlWCwgZSAqPSB0aGlzLnNjYWxlWTtcclxuICAgICAgICAgICAgdmFyIGYgPSBkICsgYi53aWR0aCAqIHRoaXMuc2NhbGVYLCBnID0gZSArIGIuaGVpZ2h0ICogdGhpcy5zY2FsZVk7XHJcbiAgICAgICAgICAgIHJldHVybiBkID4gdGhpcy5zdGFnZS5jYW52YXMud2lkdGggfHwgZSA+IHRoaXMuc3RhZ2UuY2FudmFzLmhlaWdodCB8fCAwID4gZiB8fCAwID4gZyA/ICExIDogITBcclxuICAgICAgICB9LCB0aGlzLnBhaW50T3BlcmF0aW9ucyA9IGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGMgPSAwOyBjIDwgYi5sZW5ndGg7IGMrKyliW2NdKGEpXHJcbiAgICAgICAgfSwgdGhpcy5maW5kRWxlbWVudHMgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBiID0gW10sIGMgPSAwOyBjIDwgdGhpcy5jaGlsZHMubGVuZ3RoOyBjKyspMSA9PSBhKHRoaXMuY2hpbGRzW2NdKSAmJiBiLnB1c2godGhpcy5jaGlsZHNbY10pO1xyXG4gICAgICAgICAgICByZXR1cm4gYlxyXG4gICAgICAgIH0sIHRoaXMuZ2V0RWxlbWVudHNCeUNsYXNzID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmluZEVsZW1lbnRzKGZ1bmN0aW9uIChiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYiBpbnN0YW5jZW9mIGFcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9LCB0aGlzLmFkZE9wZXJhdGlvbiA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9wZXJhdGlvbnMucHVzaChhKSwgdGhpc1xyXG4gICAgICAgIH0sIHRoaXMuY2xlYXJPcGVyYXRpb25zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcGVyYXRpb25zID0gW10sIHRoaXNcclxuICAgICAgICB9LCB0aGlzLmdldEVsZW1lbnRCeVhZID0gZnVuY3Rpb24gKGIsIGMpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgZCA9IG51bGwsIGUgPSB0aGlzLnpJbmRleEFycmF5Lmxlbmd0aCAtIDE7IGUgPj0gMDsgZS0tKWZvciAodmFyIGYgPSB0aGlzLnpJbmRleEFycmF5W2VdLCBnID0gdGhpcy56SW5kZXhNYXBbZl0sIGggPSBnLmxlbmd0aCAtIDE7IGggPj0gMDsgaC0tKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaSA9IGdbaF07XHJcbiAgICAgICAgICAgICAgICBpZiAoaSBpbnN0YW5jZW9mIGEuSW50ZXJhY3RpdmVFbGVtZW50ICYmIHRoaXMuaXNWaXNpYWJsZShpKSAmJiBpLmlzSW5Cb3VuZChiLCBjKSlyZXR1cm4gZCA9IGlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZFxyXG4gICAgICAgIH0sIHRoaXMuYWRkID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGlsZHMucHVzaChhKSwgbnVsbCA9PSB0aGlzLnpJbmRleE1hcFthLnpJbmRleF0gJiYgKHRoaXMuekluZGV4TWFwW2EuekluZGV4XSA9IFtdLCB0aGlzLnpJbmRleEFycmF5LnB1c2goYS56SW5kZXgpLCB0aGlzLnpJbmRleEFycmF5LnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhIC0gYlxyXG4gICAgICAgICAgICB9KSksIHRoaXMuekluZGV4TWFwW1wiXCIgKyBhLnpJbmRleF0ucHVzaChhKVxyXG4gICAgICAgIH0sIHRoaXMucmVtb3ZlID0gZnVuY3Rpb24gKGIpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGlsZHMgPSBhLnV0aWwucmVtb3ZlRnJvbUFycmF5KHRoaXMuY2hpbGRzLCBiKTtcclxuICAgICAgICAgICAgdmFyIGMgPSB0aGlzLnpJbmRleE1hcFtiLnpJbmRleF07XHJcbiAgICAgICAgICAgIGMgJiYgKHRoaXMuekluZGV4TWFwW2IuekluZGV4XSA9IGEudXRpbC5yZW1vdmVGcm9tQXJyYXkoYywgYikpLCBiLnJlbW92ZUhhbmRsZXIodGhpcylcclxuICAgICAgICB9LCB0aGlzLmNsZWFyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgYSA9IHRoaXM7XHJcbiAgICAgICAgICAgIHRoaXMuY2hpbGRzLmZvckVhY2goZnVuY3Rpb24gKGIpIHtcclxuICAgICAgICAgICAgICAgIGIucmVtb3ZlSGFuZGxlcihhKVxyXG4gICAgICAgICAgICB9KSwgdGhpcy5jaGlsZHMgPSBbXSwgdGhpcy5vcGVyYXRpb25zID0gW10sIHRoaXMuekluZGV4QXJyYXkgPSBbXSwgdGhpcy56SW5kZXhNYXAgPSB7fVxyXG4gICAgICAgIH0sIHRoaXMuYWRkVG9TZWxlY3RlZCA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRFbGVtZW50cy5wdXNoKGEpXHJcbiAgICAgICAgfSwgdGhpcy5jYW5jbGVBbGxTZWxlY3RlZCA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGIgPSAwOyBiIDwgdGhpcy5zZWxlY3RlZEVsZW1lbnRzLmxlbmd0aDsgYisrKXRoaXMuc2VsZWN0ZWRFbGVtZW50c1tiXS51bnNlbGVjdGVkSGFuZGxlcihhKTtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEVsZW1lbnRzID0gW11cclxuICAgICAgICB9LCB0aGlzLm5vdEluU2VsZWN0ZWROb2RlcyA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGIgPSAwOyBiIDwgdGhpcy5zZWxlY3RlZEVsZW1lbnRzLmxlbmd0aDsgYisrKWlmIChhID09PSB0aGlzLnNlbGVjdGVkRWxlbWVudHNbYl0pcmV0dXJuICExO1xyXG4gICAgICAgICAgICByZXR1cm4gITBcclxuICAgICAgICB9LCB0aGlzLnJlbW92ZUZyb21TZWxlY3RlZCA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGIgPSAwOyBiIDwgdGhpcy5zZWxlY3RlZEVsZW1lbnRzLmxlbmd0aDsgYisrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYyA9IHRoaXMuc2VsZWN0ZWRFbGVtZW50c1tiXTtcclxuICAgICAgICAgICAgICAgIGEgPT09IGMgJiYgKHRoaXMuc2VsZWN0ZWRFbGVtZW50cyA9IHRoaXMuc2VsZWN0ZWRFbGVtZW50cy5kZWwoYikpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCB0aGlzLnRvU2NlbmVFdmVudCA9IGZ1bmN0aW9uIChiKSB7XHJcbiAgICAgICAgICAgIHZhciBjID0gYS51dGlsLmNsb25lKGIpO1xyXG4gICAgICAgICAgICBpZiAoYy54IC89IHRoaXMuc2NhbGVYLCBjLnkgLz0gdGhpcy5zY2FsZVksIDEgPT0gdGhpcy50cmFuc2xhdGUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkID0gdGhpcy5nZXRPZmZzZXRUcmFuc2xhdGUoKTtcclxuICAgICAgICAgICAgICAgIGMueCAtPSBkLnRyYW5zbGF0ZVgsIGMueSAtPSBkLnRyYW5zbGF0ZVlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbCAhPSBjLmR4ICYmIChjLmR4IC89IHRoaXMuc2NhbGVYLCBjLmR5IC89IHRoaXMuc2NhbGVZKSwgbnVsbCAhPSB0aGlzLmN1cnJlbnRFbGVtZW50ICYmIChjLnRhcmdldCA9IHRoaXMuY3VycmVudEVsZW1lbnQpLCBjLnNjZW5lID0gdGhpcywgY1xyXG4gICAgICAgIH0sIHRoaXMuc2VsZWN0RWxlbWVudCA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHZhciBiID0gZS5nZXRFbGVtZW50QnlYWShhLngsIGEueSk7XHJcbiAgICAgICAgICAgIGlmIChudWxsICE9IGIpaWYgKGEudGFyZ2V0ID0gYiwgYi5tb3VzZWRvd25IYW5kZXIoYSksIGIuc2VsZWN0ZWRIYW5kbGVyKGEpLCBlLm5vdEluU2VsZWN0ZWROb2RlcyhiKSlhLmN0cmxLZXkgfHwgZS5jYW5jbGVBbGxTZWxlY3RlZCgpLCBlLmFkZFRvU2VsZWN0ZWQoYik7IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgMSA9PSBhLmN0cmxLZXkgJiYgKGIudW5zZWxlY3RlZEhhbmRsZXIoKSwgdGhpcy5yZW1vdmVGcm9tU2VsZWN0ZWQoYikpO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgYyA9IDA7IGMgPCB0aGlzLnNlbGVjdGVkRWxlbWVudHMubGVuZ3RoOyBjKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IHRoaXMuc2VsZWN0ZWRFbGVtZW50c1tjXTtcclxuICAgICAgICAgICAgICAgICAgICBkLnNlbGVjdGVkSGFuZGxlcihhKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgYS5jdHJsS2V5IHx8IGUuY2FuY2xlQWxsU2VsZWN0ZWQoKTtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50RWxlbWVudCA9IGJcclxuICAgICAgICB9LCB0aGlzLm1vdXNlZG93bkhhbmRsZXIgPSBmdW5jdGlvbiAoYikge1xyXG4gICAgICAgICAgICB2YXIgYyA9IHRoaXMudG9TY2VuZUV2ZW50KGIpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5tb3VzZURvd24gPSAhMCwgdGhpcy5tb3VzZURvd25YID0gYy54LCB0aGlzLm1vdXNlRG93blkgPSBjLnksIHRoaXMubW91c2VEb3duRXZlbnQgPSBjLCB0aGlzLm1vZGUgPT0gYS5TY2VuZU1vZGUubm9ybWFsKXRoaXMuc2VsZWN0RWxlbWVudChjKSwgKG51bGwgPT0gdGhpcy5jdXJyZW50RWxlbWVudCB8fCB0aGlzLmN1cnJlbnRFbGVtZW50IGluc3RhbmNlb2YgYS5MaW5rKSAmJiAxID09IHRoaXMudHJhbnNsYXRlICYmICh0aGlzLmxhc3RUcmFuc2xhdGVYID0gdGhpcy50cmFuc2xhdGVYLCB0aGlzLmxhc3RUcmFuc2xhdGVZID0gdGhpcy50cmFuc2xhdGVZKTsgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tb2RlID09IGEuU2NlbmVNb2RlLmRyYWcgJiYgMSA9PSB0aGlzLnRyYW5zbGF0ZSlyZXR1cm4gdGhpcy5sYXN0VHJhbnNsYXRlWCA9IHRoaXMudHJhbnNsYXRlWCwgdm9pZCh0aGlzLmxhc3RUcmFuc2xhdGVZID0gdGhpcy50cmFuc2xhdGVZKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubW9kZSA9PSBhLlNjZW5lTW9kZS5zZWxlY3QgPyB0aGlzLnNlbGVjdEVsZW1lbnQoYykgOiB0aGlzLm1vZGUgPT0gYS5TY2VuZU1vZGUuZWRpdCAmJiAodGhpcy5zZWxlY3RFbGVtZW50KGMpLCAobnVsbCA9PSB0aGlzLmN1cnJlbnRFbGVtZW50IHx8IHRoaXMuY3VycmVudEVsZW1lbnQgaW5zdGFuY2VvZiBhLkxpbmspICYmIDEgPT0gdGhpcy50cmFuc2xhdGUgJiYgKHRoaXMubGFzdFRyYW5zbGF0ZVggPSB0aGlzLnRyYW5zbGF0ZVgsIHRoaXMubGFzdFRyYW5zbGF0ZVkgPSB0aGlzLnRyYW5zbGF0ZVkpKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGUuZGlzcGF0Y2hFdmVudChcIm1vdXNlZG93blwiLCBjKVxyXG4gICAgICAgIH0sIHRoaXMubW91c2V1cEhhbmRsZXIgPSBmdW5jdGlvbiAoYikge1xyXG4gICAgICAgICAgICB0aGlzLnN0YWdlLmN1cnNvciAhPSBhLk1vdXNlQ3Vyc29yLm5vcm1hbCAmJiAodGhpcy5zdGFnZS5jdXJzb3IgPSBhLk1vdXNlQ3Vyc29yLm5vcm1hbCksIGUuY2xlYXJPcGVyYXRpb25zKCk7XHJcbiAgICAgICAgICAgIHZhciBjID0gdGhpcy50b1NjZW5lRXZlbnQoYik7XHJcbiAgICAgICAgICAgIG51bGwgIT0gdGhpcy5jdXJyZW50RWxlbWVudCAmJiAoYy50YXJnZXQgPSBlLmN1cnJlbnRFbGVtZW50LCB0aGlzLmN1cnJlbnRFbGVtZW50Lm1vdXNldXBIYW5kbGVyKGMpKSwgdGhpcy5kaXNwYXRjaEV2ZW50KFwibW91c2V1cFwiLCBjKSwgdGhpcy5tb3VzZURvd24gPSAhMVxyXG4gICAgICAgIH0sIHRoaXMuZHJhZ0VsZW1lbnRzID0gZnVuY3Rpb24gKGIpIHtcclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gdGhpcy5jdXJyZW50RWxlbWVudCAmJiAxID09IHRoaXMuY3VycmVudEVsZW1lbnQuZHJhZ2FibGUpZm9yICh2YXIgYyA9IDA7IGMgPCB0aGlzLnNlbGVjdGVkRWxlbWVudHMubGVuZ3RoOyBjKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBkID0gdGhpcy5zZWxlY3RlZEVsZW1lbnRzW2NdO1xyXG4gICAgICAgICAgICAgICAgaWYgKDAgIT0gZC5kcmFnYWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlID0gYS51dGlsLmNsb25lKGIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0ID0gZCwgZC5tb3VzZWRyYWdIYW5kbGVyKGUpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCB0aGlzLm1vdXNlZHJhZ0hhbmRsZXIgPSBmdW5jdGlvbiAoYikge1xyXG4gICAgICAgICAgICB2YXIgYyA9IHRoaXMudG9TY2VuZUV2ZW50KGIpO1xyXG4gICAgICAgICAgICB0aGlzLm1vZGUgPT0gYS5TY2VuZU1vZGUubm9ybWFsID8gbnVsbCA9PSB0aGlzLmN1cnJlbnRFbGVtZW50IHx8IHRoaXMuY3VycmVudEVsZW1lbnQgaW5zdGFuY2VvZiBhLkxpbmsgPyAxID09IHRoaXMudHJhbnNsYXRlICYmICh0aGlzLnN0YWdlLmN1cnNvciA9IGEuTW91c2VDdXJzb3IuY2xvc2VkX2hhbmQsIHRoaXMudHJhbnNsYXRlWCA9IHRoaXMubGFzdFRyYW5zbGF0ZVggKyBjLmR4LCB0aGlzLnRyYW5zbGF0ZVkgPSB0aGlzLmxhc3RUcmFuc2xhdGVZICsgYy5keSkgOiB0aGlzLmRyYWdFbGVtZW50cyhjKSA6IHRoaXMubW9kZSA9PSBhLlNjZW5lTW9kZS5kcmFnID8gMSA9PSB0aGlzLnRyYW5zbGF0ZSAmJiAodGhpcy5zdGFnZS5jdXJzb3IgPSBhLk1vdXNlQ3Vyc29yLmNsb3NlZF9oYW5kLCB0aGlzLnRyYW5zbGF0ZVggPSB0aGlzLmxhc3RUcmFuc2xhdGVYICsgYy5keCwgdGhpcy50cmFuc2xhdGVZID0gdGhpcy5sYXN0VHJhbnNsYXRlWSArIGMuZHkpIDogdGhpcy5tb2RlID09IGEuU2NlbmVNb2RlLnNlbGVjdCA/IG51bGwgIT0gdGhpcy5jdXJyZW50RWxlbWVudCA/IDEgPT0gdGhpcy5jdXJyZW50RWxlbWVudC5kcmFnYWJsZSAmJiB0aGlzLmRyYWdFbGVtZW50cyhjKSA6IDEgPT0gdGhpcy5hcmVhU2VsZWN0ICYmIHRoaXMuYXJlYVNlbGVjdEhhbmRsZShjKSA6IHRoaXMubW9kZSA9PSBhLlNjZW5lTW9kZS5lZGl0ICYmIChudWxsID09IHRoaXMuY3VycmVudEVsZW1lbnQgfHwgdGhpcy5jdXJyZW50RWxlbWVudCBpbnN0YW5jZW9mIGEuTGluayA/IDEgPT0gdGhpcy50cmFuc2xhdGUgJiYgKHRoaXMuc3RhZ2UuY3Vyc29yID0gYS5Nb3VzZUN1cnNvci5jbG9zZWRfaGFuZCwgdGhpcy50cmFuc2xhdGVYID0gdGhpcy5sYXN0VHJhbnNsYXRlWCArIGMuZHgsIHRoaXMudHJhbnNsYXRlWSA9IHRoaXMubGFzdFRyYW5zbGF0ZVkgKyBjLmR5KSA6IHRoaXMuZHJhZ0VsZW1lbnRzKGMpKSwgdGhpcy5kaXNwYXRjaEV2ZW50KFwibW91c2VkcmFnXCIsIGMpXHJcbiAgICAgICAgfSwgdGhpcy5hcmVhU2VsZWN0SGFuZGxlID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgdmFyIGIgPSBhLm9mZnNldExlZnQsIGMgPSBhLm9mZnNldFRvcCwgZiA9IHRoaXMubW91c2VEb3duRXZlbnQub2Zmc2V0TGVmdCwgZyA9IHRoaXMubW91c2VEb3duRXZlbnQub2Zmc2V0VG9wLCBoID0gYiA+PSBmID8gZiA6IGIsIGkgPSBjID49IGcgPyBnIDogYywgaiA9IE1hdGguYWJzKGEuZHgpICogdGhpcy5zY2FsZVgsIGsgPSBNYXRoLmFicyhhLmR5KSAqIHRoaXMuc2NhbGVZLCBsID0gbmV3IGQoaCwgaSwgaiwgayk7XHJcbiAgICAgICAgICAgIGUuY2xlYXJPcGVyYXRpb25zKCkuYWRkT3BlcmF0aW9uKGwpLCBiID0gYS54LCBjID0gYS55LCBmID0gdGhpcy5tb3VzZURvd25FdmVudC54LCBnID0gdGhpcy5tb3VzZURvd25FdmVudC55LCBoID0gYiA+PSBmID8gZiA6IGIsIGkgPSBjID49IGcgPyBnIDogYywgaiA9IE1hdGguYWJzKGEuZHgpLCBrID0gTWF0aC5hYnMoYS5keSk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIG0gPSBoICsgaiwgbiA9IGkgKyBrLCBvID0gMDsgbyA8IGUuY2hpbGRzLmxlbmd0aDsgbysrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcCA9IGUuY2hpbGRzW29dO1xyXG4gICAgICAgICAgICAgICAgcC54ID4gaCAmJiBwLnggKyBwLndpZHRoIDwgbSAmJiBwLnkgPiBpICYmIHAueSArIHAuaGVpZ2h0IDwgbiAmJiBlLm5vdEluU2VsZWN0ZWROb2RlcyhwKSAmJiAocC5zZWxlY3RlZEhhbmRsZXIoYSksIGUuYWRkVG9TZWxlY3RlZChwKSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIHRoaXMubW91c2Vtb3ZlSGFuZGxlciA9IGZ1bmN0aW9uIChiKSB7XHJcbiAgICAgICAgICAgIHRoaXMubW91c2Vjb29yZCA9IHt4OiBiLngsIHk6IGIueX07XHJcbiAgICAgICAgICAgIHZhciBjID0gdGhpcy50b1NjZW5lRXZlbnQoYik7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1vZGUgPT0gYS5TY2VuZU1vZGUuZHJhZylyZXR1cm4gdm9pZCh0aGlzLnN0YWdlLmN1cnNvciA9IGEuTW91c2VDdXJzb3Iub3Blbl9oYW5kKTtcclxuICAgICAgICAgICAgdGhpcy5tb2RlID09IGEuU2NlbmVNb2RlLm5vcm1hbCA/IHRoaXMuc3RhZ2UuY3Vyc29yID0gYS5Nb3VzZUN1cnNvci5ub3JtYWwgOiB0aGlzLm1vZGUgPT0gYS5TY2VuZU1vZGUuc2VsZWN0ICYmICh0aGlzLnN0YWdlLmN1cnNvciA9IGEuTW91c2VDdXJzb3Iubm9ybWFsKTtcclxuICAgICAgICAgICAgdmFyIGQgPSBlLmdldEVsZW1lbnRCeVhZKGMueCwgYy55KTtcclxuICAgICAgICAgICAgbnVsbCAhPSBkID8gKGUubW91c2VPdmVyZWxlbWVudCAmJiBlLm1vdXNlT3ZlcmVsZW1lbnQgIT09IGQgJiYgKGMudGFyZ2V0ID0gZCwgZS5tb3VzZU92ZXJlbGVtZW50Lm1vdXNlb3V0SGFuZGxlcihjKSksIGUubW91c2VPdmVyZWxlbWVudCA9IGQsIDAgPT0gZC5pc01vdXNlT3ZlciA/IChjLnRhcmdldCA9IGQsIGQubW91c2VvdmVySGFuZGxlcihjKSwgZS5kaXNwYXRjaEV2ZW50KFwibW91c2VvdmVyXCIsIGMpKSA6IChjLnRhcmdldCA9IGQsIGQubW91c2Vtb3ZlSGFuZGxlcihjKSwgZS5kaXNwYXRjaEV2ZW50KFwibW91c2Vtb3ZlXCIsIGMpKSkgOiBlLm1vdXNlT3ZlcmVsZW1lbnQgPyAoYy50YXJnZXQgPSBkLCBlLm1vdXNlT3ZlcmVsZW1lbnQubW91c2VvdXRIYW5kbGVyKGMpLCBlLm1vdXNlT3ZlcmVsZW1lbnQgPSBudWxsLCBlLmRpc3BhdGNoRXZlbnQoXCJtb3VzZW91dFwiLCBjKSkgOiAoYy50YXJnZXQgPSBudWxsLCBlLmRpc3BhdGNoRXZlbnQoXCJtb3VzZW1vdmVcIiwgYykpXHJcbiAgICAgICAgfSwgdGhpcy5tb3VzZW92ZXJIYW5kbGVyID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgdmFyIGIgPSB0aGlzLnRvU2NlbmVFdmVudChhKTtcclxuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KFwibW91c2VvdmVyXCIsIGIpXHJcbiAgICAgICAgfSwgdGhpcy5tb3VzZW91dEhhbmRsZXIgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICB2YXIgYiA9IHRoaXMudG9TY2VuZUV2ZW50KGEpO1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoXCJtb3VzZW91dFwiLCBiKVxyXG4gICAgICAgIH0sIHRoaXMuY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgdmFyIGIgPSB0aGlzLnRvU2NlbmVFdmVudChhKTtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50RWxlbWVudCAmJiAoYi50YXJnZXQgPSB0aGlzLmN1cnJlbnRFbGVtZW50LCB0aGlzLmN1cnJlbnRFbGVtZW50LmNsaWNrSGFuZGxlcihiKSksIHRoaXMuZGlzcGF0Y2hFdmVudChcImNsaWNrXCIsIGIpXHJcbiAgICAgICAgfSwgdGhpcy5kYmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHZhciBiID0gdGhpcy50b1NjZW5lRXZlbnQoYSk7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEVsZW1lbnQgPyAoYi50YXJnZXQgPSB0aGlzLmN1cnJlbnRFbGVtZW50LCB0aGlzLmN1cnJlbnRFbGVtZW50LmRiY2xpY2tIYW5kbGVyKGIpKSA6IGUuY2FuY2xlQWxsU2VsZWN0ZWQoKSwgdGhpcy5kaXNwYXRjaEV2ZW50KFwiZGJjbGlja1wiLCBiKVxyXG4gICAgICAgIH0sIHRoaXMubW91c2V3aGVlbEhhbmRsZXIgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICB2YXIgYiA9IHRoaXMudG9TY2VuZUV2ZW50KGEpO1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoXCJtb3VzZXdoZWVsXCIsIGIpXHJcbiAgICAgICAgfSwgdGhpcy50b3VjaHN0YXJ0ID0gdGhpcy5tb3VzZWRvd25IYW5kZXIsIHRoaXMudG91Y2htb3ZlID0gdGhpcy5tb3VzZWRyYWdIYW5kbGVyLCB0aGlzLnRvdWNoZW5kID0gdGhpcy5tb3VzZWRvd25IYW5kZXIsIHRoaXMua2V5ZG93bkhhbmRsZXIgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoXCJrZXlkb3duXCIsIGEpXHJcbiAgICAgICAgfSwgdGhpcy5rZXl1cEhhbmRsZXIgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoXCJrZXl1cFwiLCBhKVxyXG4gICAgICAgIH0sIHRoaXMuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgIHZhciBjID0gdGhpcywgZCA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICBiLmNhbGwoYywgYSlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWVzc2FnZUJ1cy5zdWJzY3JpYmUoYSwgZCksIHRoaXNcclxuICAgICAgICB9LCB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VCdXMudW5zdWJzY3JpYmUoYSlcclxuICAgICAgICB9LCB0aGlzLnJlbW92ZUFsbEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZUJ1cyA9IG5ldyBhLnV0aWwuTWVzc2FnZUJ1c1xyXG4gICAgICAgIH0sIHRoaXMuZGlzcGF0Y2hFdmVudCA9IGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1lc3NhZ2VCdXMucHVibGlzaChhLCBiKSwgdGhpc1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIGYgPSBcImNsaWNrLGRiY2xpY2ssbW91c2Vkb3duLG1vdXNldXAsbW91c2VvdmVyLG1vdXNlb3V0LG1vdXNlbW92ZSxtb3VzZWRyYWcsbW91c2V3aGVlbCx0b3VjaHN0YXJ0LHRvdWNobW92ZSx0b3VjaGVuZCxrZXlkb3duLGtleXVwXCIuc3BsaXQoXCIsXCIpLCBnID0gdGhpcztcclxuICAgICAgICByZXR1cm4gZi5mb3JFYWNoKGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIGdbYV0gPSBmdW5jdGlvbiAoYikge1xyXG4gICAgICAgICAgICAgICAgbnVsbCAhPSBiID8gdGhpcy5hZGRFdmVudExpc3RlbmVyKGEsIGIpIDogdGhpcy5kaXNwYXRjaEV2ZW50KGEpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KSwgdGhpcy56b29tID0gZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgbnVsbCAhPSBhICYmIDAgIT0gYSAmJiAodGhpcy5zY2FsZVggPSBhKSwgbnVsbCAhPSBiICYmIDAgIT0gYiAmJiAodGhpcy5zY2FsZVkgPSBiKVxyXG4gICAgICAgIH0sIHRoaXMuem9vbU91dCA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIDAgIT0gYSAmJiAobnVsbCA9PSBhICYmIChhID0gLjgpLCB0aGlzLnNjYWxlWCAvPSBhLCB0aGlzLnNjYWxlWSAvPSBhKVxyXG4gICAgICAgIH0sIHRoaXMuem9vbUluID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgMCAhPSBhICYmIChudWxsID09IGEgJiYgKGEgPSAuOCksIHRoaXMuc2NhbGVYICo9IGEsIHRoaXMuc2NhbGVZICo9IGEpXHJcbiAgICAgICAgfSwgdGhpcy5nZXRCb3VuZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtsZWZ0OiAwLCB0b3A6IDAsIHJpZ2h0OiB0aGlzLnN0YWdlLmNhbnZhcy53aWR0aCwgYm90dG9tOiB0aGlzLnN0YWdlLmNhbnZhcy5oZWlnaHQsIHdpZHRoOiB0aGlzLnN0YWdlLmNhbnZhcy53aWR0aCwgaGVpZ2h0OiB0aGlzLnN0YWdlLmNhbnZhcy5oZWlnaHR9XHJcbiAgICAgICAgfSwgdGhpcy5nZXRFbGVtZW50c0JvdW5kID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gYS51dGlsLmdldEVsZW1lbnRzQm91bmQodGhpcy5jaGlsZHMpXHJcbiAgICAgICAgfSwgdGhpcy50cmFuc2xhdGVUb0NlbnRlciA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHZhciBiID0gdGhpcy5nZXRFbGVtZW50c0JvdW5kKCksIGMgPSB0aGlzLnN0YWdlLmNhbnZhcy53aWR0aCAvIDIgLSAoYi5sZWZ0ICsgYi5yaWdodCkgLyAyLCBkID0gdGhpcy5zdGFnZS5jYW52YXMuaGVpZ2h0IC8gMiAtIChiLnRvcCArIGIuYm90dG9tKSAvIDI7XHJcbiAgICAgICAgICAgIGEgJiYgKGMgPSBhLmNhbnZhcy53aWR0aCAvIDIgLSAoYi5sZWZ0ICsgYi5yaWdodCkgLyAyLCBkID0gYS5jYW52YXMuaGVpZ2h0IC8gMiAtIChiLnRvcCArIGIuYm90dG9tKSAvIDIpLCB0aGlzLnRyYW5zbGF0ZVggPSBjLCB0aGlzLnRyYW5zbGF0ZVkgPSBkXHJcbiAgICAgICAgfSwgdGhpcy5zZXRDZW50ZXIgPSBmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgICAgICB2YXIgYyA9IGEgLSB0aGlzLnN0YWdlLmNhbnZhcy53aWR0aCAvIDIsIGQgPSBiIC0gdGhpcy5zdGFnZS5jYW52YXMuaGVpZ2h0IC8gMjtcclxuICAgICAgICAgICAgdGhpcy50cmFuc2xhdGVYID0gLWMsIHRoaXMudHJhbnNsYXRlWSA9IC1kXHJcbiAgICAgICAgfSwgdGhpcy5jZW50ZXJBbmRab29tID0gZnVuY3Rpb24gKGEsIGIsIGMpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMudHJhbnNsYXRlVG9DZW50ZXIoYyksIG51bGwgPT0gYSB8fCBudWxsID09IGIpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkID0gdGhpcy5nZXRFbGVtZW50c0JvdW5kKCksIGUgPSBkLnJpZ2h0IC0gZC5sZWZ0LCBmID0gZC5ib3R0b20gLSBkLnRvcCwgZyA9IHRoaXMuc3RhZ2UuY2FudmFzLndpZHRoIC8gZSwgaCA9IHRoaXMuc3RhZ2UuY2FudmFzLmhlaWdodCAvIGY7XHJcbiAgICAgICAgICAgICAgICBjICYmIChnID0gYy5jYW52YXMud2lkdGggLyBlLCBoID0gYy5jYW52YXMuaGVpZ2h0IC8gZik7XHJcbiAgICAgICAgICAgICAgICB2YXIgaSA9IE1hdGgubWluKGcsIGgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPiAxKXJldHVybjtcclxuICAgICAgICAgICAgICAgIHRoaXMuem9vbShpLCBpKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuem9vbShhLCBiKVxyXG4gICAgICAgIH0sIHRoaXMuZ2V0Q2VudGVyTG9jYXRpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7eDogZS5zdGFnZS5jYW52YXMud2lkdGggLyAyLCB5OiBlLnN0YWdlLmNhbnZhcy5oZWlnaHQgLyAyfVxyXG4gICAgICAgIH0sIHRoaXMuZG9MYXlvdXQgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICBhICYmIGEodGhpcywgdGhpcy5jaGlsZHMpXHJcbiAgICAgICAgfSwgdGhpcy50b0pzb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBhID0gdGhpcywgYiA9IFwie1wiO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXJpYWxpemVkUHJvcGVydGllcy5sZW5ndGhcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnNlcmlhbGl6ZWRQcm9wZXJ0aWVzLmZvckVhY2goZnVuY3Rpb24gKGMpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkID0gYVtjXTtcclxuICAgICAgICAgICAgICAgIFwiYmFja2dyb3VuZFwiID09IGMgJiYgKGQgPSBhLl9iYWNrZ3JvdW5kLnNyYyksIFwic3RyaW5nXCIgPT0gdHlwZW9mIGQgJiYgKGQgPSAnXCInICsgZCArICdcIicpLCBiICs9ICdcIicgKyBjICsgJ1wiOicgKyBkICsgXCIsXCJcclxuICAgICAgICAgICAgfSksIGIgKz0gJ1wiY2hpbGRzXCI6Wyc7XHJcbiAgICAgICAgICAgIHZhciBjID0gdGhpcy5jaGlsZHMubGVuZ3RoO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jaGlsZHMuZm9yRWFjaChmdW5jdGlvbiAoYSwgZCkge1xyXG4gICAgICAgICAgICAgICAgYiArPSBhLnRvSnNvbigpLCBjID4gZCArIDEgJiYgKGIgKz0gXCIsXCIpXHJcbiAgICAgICAgICAgIH0pLCBiICs9IFwiXVwiLCBiICs9IFwifVwiXHJcbiAgICAgICAgfSwgZVxyXG4gICAgfVxyXG5cclxuICAgIGIucHJvdG90eXBlID0gbmV3IGEuRWxlbWVudDtcclxuICAgIHZhciBjID0ge307XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhiLnByb3RvdHlwZSwge1xyXG4gICAgICAgIGJhY2tncm91bmQ6IHtcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fYmFja2dyb3VuZFxyXG4gICAgICAgICAgICB9LCBzZXQ6IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBiID0gY1thXTtcclxuICAgICAgICAgICAgICAgICAgICBudWxsID09IGIgJiYgKGIgPSBuZXcgSW1hZ2UsIGIuc3JjID0gYSwgYi5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNbYV0gPSBiXHJcbiAgICAgICAgICAgICAgICAgICAgfSksIHRoaXMuX2JhY2tncm91bmQgPSBiXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgdGhpcy5fYmFja2dyb3VuZCA9IGFcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pLCBhLlNjZW5lID0gYlxyXG59KEpUb3BvKSwgZnVuY3Rpb24gKGEpIHtcclxuICAgIGZ1bmN0aW9uIGIoKSB7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBiLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksIHRoaXMuZWxlbWVudFR5cGUgPSBcImRpc3BsYXlFbGVtZW50XCIsIHRoaXMueCA9IDAsIHRoaXMueSA9IDAsIHRoaXMud2lkdGggPSAzMiwgdGhpcy5oZWlnaHQgPSAzMiwgdGhpcy52aXNpYmxlID0gITAsIHRoaXMuYWxwaGEgPSAxLCB0aGlzLnJvdGF0ZSA9IDAsIHRoaXMuc2NhbGVYID0gMSwgdGhpcy5zY2FsZVkgPSAxLCB0aGlzLnN0cm9rZUNvbG9yID0gXCIyMiwxMjQsMjU1XCIsIHRoaXMuYm9yZGVyQ29sb3IgPSBcIjIyLDEyNCwyNTVcIiwgdGhpcy5maWxsQ29sb3IgPSBcIjIyLDEyNCwyNTVcIiwgdGhpcy5zaGFkb3cgPSAhMSwgdGhpcy5zaGFkb3dCbHVyID0gNSwgdGhpcy5zaGFkb3dDb2xvciA9IFwicmdiYSgwLDAsMCwwLjUpXCIsIHRoaXMuc2hhZG93T2Zmc2V0WCA9IDMsIHRoaXMuc2hhZG93T2Zmc2V0WSA9IDYsIHRoaXMudHJhbnNmb3JtQWJsZSA9ICExLCB0aGlzLnpJbmRleCA9IDA7XHJcbiAgICAgICAgICAgIHZhciBhID0gXCJ4LHksd2lkdGgsaGVpZ2h0LHZpc2libGUsYWxwaGEscm90YXRlLHNjYWxlWCxzY2FsZVksc3Ryb2tlQ29sb3IsZmlsbENvbG9yLHNoYWRvdyxzaGFkb3dDb2xvcixzaGFkb3dPZmZzZXRYLHNoYWRvd09mZnNldFksdHJhbnNmb3JtQWJsZSx6SW5kZXhcIi5zcGxpdChcIixcIik7XHJcbiAgICAgICAgICAgIHRoaXMuc2VyaWFsaXplZFByb3BlcnRpZXMgPSB0aGlzLnNlcmlhbGl6ZWRQcm9wZXJ0aWVzLmNvbmNhdChhKVxyXG4gICAgICAgIH0sIHRoaXMuaW5pdGlhbGl6ZSgpLCB0aGlzLnBhaW50ID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgYS5iZWdpblBhdGgoKSwgYS5maWxsU3R5bGUgPSBcInJnYmEoXCIgKyB0aGlzLmZpbGxDb2xvciArIFwiLFwiICsgdGhpcy5hbHBoYSArIFwiKVwiLCBhLnJlY3QoLXRoaXMud2lkdGggLyAyLCAtdGhpcy5oZWlnaHQgLyAyLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCksIGEuZmlsbCgpLCBhLnN0cm9rZSgpLCBhLmNsb3NlUGF0aCgpXHJcbiAgICAgICAgfSwgdGhpcy5nZXRMb2NhdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHt4OiB0aGlzLngsIHk6IHRoaXMueX1cclxuICAgICAgICB9LCB0aGlzLnNldExvY2F0aW9uID0gZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMueCA9IGEsIHRoaXMueSA9IGIsIHRoaXNcclxuICAgICAgICB9LCB0aGlzLmdldENlbnRlckxvY2F0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge3g6IHRoaXMueCArIHRoaXMud2lkdGggLyAyLCB5OiB0aGlzLnkgKyB0aGlzLmhlaWdodCAvIDJ9XHJcbiAgICAgICAgfSwgdGhpcy5zZXRDZW50ZXJMb2NhdGlvbiA9IGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnggPSBhIC0gdGhpcy53aWR0aCAvIDIsIHRoaXMueSA9IGIgLSB0aGlzLmhlaWdodCAvIDIsIHRoaXNcclxuICAgICAgICB9LCB0aGlzLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7d2lkdGg6IHRoaXMud2lkdGgsIGhlaWdodDogdGhpcy5oZWl0aH1cclxuICAgICAgICB9LCB0aGlzLnNldFNpemUgPSBmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy53aWR0aCA9IGEsIHRoaXMuaGVpZ2h0ID0gYiwgdGhpc1xyXG4gICAgICAgIH0sIHRoaXMuZ2V0Qm91bmQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7bGVmdDogdGhpcy54LCB0b3A6IHRoaXMueSwgcmlnaHQ6IHRoaXMueCArIHRoaXMud2lkdGgsIGJvdHRvbTogdGhpcy55ICsgdGhpcy5oZWlnaHQsIHdpZHRoOiB0aGlzLndpZHRoLCBoZWlnaHQ6IHRoaXMuaGVpZ2h0fVxyXG4gICAgICAgIH0sIHRoaXMuc2V0Qm91bmQgPSBmdW5jdGlvbiAoYSwgYiwgYywgZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRMb2NhdGlvbihhLCBiKSwgdGhpcy5zZXRTaXplKGMsIGQpLCB0aGlzXHJcbiAgICAgICAgfSwgdGhpcy5nZXREaXNwbGF5Qm91bmQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7bGVmdDogdGhpcy54LCB0b3A6IHRoaXMueSwgcmlnaHQ6IHRoaXMueCArIHRoaXMud2lkdGggKiB0aGlzLnNjYWxlWCwgYm90dG9tOiB0aGlzLnkgKyB0aGlzLmhlaWdodCAqIHRoaXMuc2NhbGVZfVxyXG4gICAgICAgIH0sIHRoaXMuZ2V0RGlzcGxheVNpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7d2lkdGg6IHRoaXMud2lkdGggKiB0aGlzLnNjYWxlWCwgaGVpZ2h0OiB0aGlzLmhlaWdodCAqIHRoaXMuc2NhbGVZfVxyXG4gICAgICAgIH0sIHRoaXMuZ2V0UG9zaXRpb24gPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICB2YXIgYiwgYyA9IHRoaXMuZ2V0Qm91bmQoKTtcclxuICAgICAgICAgICAgcmV0dXJuIFwiVG9wX0xlZnRcIiA9PSBhID8gYiA9IHt4OiBjLmxlZnQsIHk6IGMudG9wfSA6IFwiVG9wX0NlbnRlclwiID09IGEgPyBiID0ge3g6IHRoaXMuY3gsIHk6IGMudG9wfSA6IFwiVG9wX1JpZ2h0XCIgPT0gYSA/IGIgPSB7eDogYy5yaWdodCwgeTogYy50b3B9IDogXCJNaWRkbGVfTGVmdFwiID09IGEgPyBiID0ge1xyXG4gICAgICAgICAgICAgICAgeDogYy5sZWZ0LFxyXG4gICAgICAgICAgICAgICAgeTogdGhpcy5jeVxyXG4gICAgICAgICAgICB9IDogXCJNaWRkbGVfQ2VudGVyXCIgPT0gYSA/IGIgPSB7eDogdGhpcy5jeCwgeTogdGhpcy5jeX0gOiBcIk1pZGRsZV9SaWdodFwiID09IGEgPyBiID0ge3g6IGMucmlnaHQsIHk6IHRoaXMuY3l9IDogXCJCb3R0b21fTGVmdFwiID09IGEgPyBiID0ge1xyXG4gICAgICAgICAgICAgICAgeDogYy5sZWZ0LFxyXG4gICAgICAgICAgICAgICAgeTogYy5ib3R0b21cclxuICAgICAgICAgICAgfSA6IFwiQm90dG9tX0NlbnRlclwiID09IGEgPyBiID0ge3g6IHRoaXMuY3gsIHk6IGMuYm90dG9tfSA6IFwiQm90dG9tX1JpZ2h0XCIgPT0gYSAmJiAoYiA9IHt4OiBjLnJpZ2h0LCB5OiBjLmJvdHRvbX0pLCBiXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGMoKSB7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksIHRoaXMuZWxlbWVudFR5cGUgPSBcImludGVyYWN0aXZlRWxlbWVudFwiLCB0aGlzLmRyYWdhYmxlID0gITEsIHRoaXMuc2VsZWN0ZWQgPSAhMSwgdGhpcy5zaG93U2VsZWN0ZWQgPSAhMCwgdGhpcy5zZWxlY3RlZExvY2F0aW9uID0gbnVsbCwgdGhpcy5pc01vdXNlT3ZlciA9ICExO1xyXG4gICAgICAgICAgICB2YXIgYSA9IFwiZHJhZ2FibGUsc2VsZWN0ZWQsc2hvd1NlbGVjdGVkLGlzTW91c2VPdmVyXCIuc3BsaXQoXCIsXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnNlcmlhbGl6ZWRQcm9wZXJ0aWVzID0gdGhpcy5zZXJpYWxpemVkUHJvcGVydGllcy5jb25jYXQoYSlcclxuICAgICAgICB9LCB0aGlzLmluaXRpYWxpemUoKSwgdGhpcy5wYWludFNlbGVjdGVkID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgMCAhPSB0aGlzLnNob3dTZWxlY3RlZCAmJiAoYS5zYXZlKCksIGEuYmVnaW5QYXRoKCksIGEuc3Ryb2tlU3R5bGUgPSBcInJnYmEoMTY4LDIwMiwyNTUsIDAuOSlcIiwgYS5maWxsU3R5bGUgPSBcInJnYmEoMTY4LDIwMiwyMzYsMC43KVwiLCBhLnJlY3QoLXRoaXMud2lkdGggLyAyIC0gMywgLXRoaXMuaGVpZ2h0IC8gMiAtIDMsIHRoaXMud2lkdGggKyA2LCB0aGlzLmhlaWdodCArIDYpLCBhLmZpbGwoKSwgYS5zdHJva2UoKSwgYS5jbG9zZVBhdGgoKSwgYS5yZXN0b3JlKCkpXHJcbiAgICAgICAgfSwgdGhpcy5wYWludE1vdXNlb3ZlciA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhaW50U2VsZWN0ZWQoYSlcclxuICAgICAgICB9LCB0aGlzLmlzSW5Cb3VuZCA9IGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhID4gdGhpcy54ICYmIGEgPCB0aGlzLnggKyB0aGlzLndpZHRoICogTWF0aC5hYnModGhpcy5zY2FsZVgpICYmIGIgPiB0aGlzLnkgJiYgYiA8IHRoaXMueSArIHRoaXMuaGVpZ2h0ICogTWF0aC5hYnModGhpcy5zY2FsZVkpXHJcbiAgICAgICAgfSwgdGhpcy5zZWxlY3RlZEhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWQgPSAhMCwgdGhpcy5zZWxlY3RlZExvY2F0aW9uID0ge3g6IHRoaXMueCwgeTogdGhpcy55fVxyXG4gICAgICAgIH0sIHRoaXMudW5zZWxlY3RlZEhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWQgPSAhMSwgdGhpcy5zZWxlY3RlZExvY2F0aW9uID0gbnVsbFxyXG4gICAgICAgIH0sIHRoaXMuZGJjbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoXCJkYmNsaWNrXCIsIGEpXHJcbiAgICAgICAgfSwgdGhpcy5jbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoXCJjbGlja1wiLCBhKVxyXG4gICAgICAgIH0sIHRoaXMubW91c2Vkb3duSGFuZGVyID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KFwibW91c2Vkb3duXCIsIGEpXHJcbiAgICAgICAgfSwgdGhpcy5tb3VzZXVwSGFuZGxlciA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChcIm1vdXNldXBcIiwgYSlcclxuICAgICAgICB9LCB0aGlzLm1vdXNlb3ZlckhhbmRsZXIgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICB0aGlzLmlzTW91c2VPdmVyID0gITAsIHRoaXMuZGlzcGF0Y2hFdmVudChcIm1vdXNlb3ZlclwiLCBhKVxyXG4gICAgICAgIH0sIHRoaXMubW91c2Vtb3ZlSGFuZGxlciA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChcIm1vdXNlbW92ZVwiLCBhKVxyXG4gICAgICAgIH0sIHRoaXMubW91c2VvdXRIYW5kbGVyID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgdGhpcy5pc01vdXNlT3ZlciA9ICExLCB0aGlzLmRpc3BhdGNoRXZlbnQoXCJtb3VzZW91dFwiLCBhKVxyXG4gICAgICAgIH0sIHRoaXMubW91c2VkcmFnSGFuZGxlciA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHZhciBiID0gdGhpcy5zZWxlY3RlZExvY2F0aW9uLnggKyBhLmR4LCBjID0gdGhpcy5zZWxlY3RlZExvY2F0aW9uLnkgKyBhLmR5O1xyXG4gICAgICAgICAgICB0aGlzLnNldExvY2F0aW9uKGIsIGMpLCB0aGlzLmRpc3BhdGNoRXZlbnQoXCJtb3VzZWRyYWdcIiwgYSlcclxuICAgICAgICB9LCB0aGlzLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoYiwgYykge1xyXG4gICAgICAgICAgICB2YXIgZCA9IHRoaXMsIGUgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICAgICAgYy5jYWxsKGQsIGEpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1lc3NhZ2VCdXMgfHwgKHRoaXMubWVzc2FnZUJ1cyA9IG5ldyBhLnV0aWwuTWVzc2FnZUJ1cyksIHRoaXMubWVzc2FnZUJ1cy5zdWJzY3JpYmUoYiwgZSksIHRoaXNcclxuICAgICAgICB9LCB0aGlzLmRpc3BhdGNoRXZlbnQgPSBmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlQnVzID8gKHRoaXMubWVzc2FnZUJ1cy5wdWJsaXNoKGEsIGIpLCB0aGlzKSA6IG51bGxcclxuICAgICAgICB9LCB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VCdXMudW5zdWJzY3JpYmUoYSlcclxuICAgICAgICB9LCB0aGlzLnJlbW92ZUFsbEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZUJ1cyA9IG5ldyBhLnV0aWwuTWVzc2FnZUJ1c1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIGIgPSBcImNsaWNrLGRiY2xpY2ssbW91c2Vkb3duLG1vdXNldXAsbW91c2VvdmVyLG1vdXNlb3V0LG1vdXNlbW92ZSxtb3VzZWRyYWcsdG91Y2hzdGFydCx0b3VjaG1vdmUsdG91Y2hlbmRcIi5zcGxpdChcIixcIiksIGQgPSB0aGlzO1xyXG4gICAgICAgIGIuZm9yRWFjaChmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICBkW2FdID0gZnVuY3Rpb24gKGIpIHtcclxuICAgICAgICAgICAgICAgIG51bGwgIT0gYiA/IHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihhLCBiKSA6IHRoaXMuZGlzcGF0Y2hFdmVudChhKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBkKCkge1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpLCB0aGlzLmVkaXRBYmxlID0gITEsIHRoaXMuc2VsZWN0ZWRQb2ludCA9IG51bGxcclxuICAgICAgICB9LCB0aGlzLmdldEN0cmxQb3NpdGlvbiA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHZhciBiID0gNSwgYyA9IDUsIGQgPSB0aGlzLmdldFBvc2l0aW9uKGEpO1xyXG4gICAgICAgICAgICByZXR1cm4ge2xlZnQ6IGQueCAtIGIsIHRvcDogZC55IC0gYywgcmlnaHQ6IGQueCArIGIsIGJvdHRvbTogZC55ICsgY31cclxuICAgICAgICB9LCB0aGlzLnNlbGVjdGVkSGFuZGxlciA9IGZ1bmN0aW9uIChiKSB7XHJcbiAgICAgICAgICAgIGQucHJvdG90eXBlLnNlbGVjdGVkSGFuZGxlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpLCB0aGlzLnNlbGVjdGVkU2l6ZSA9IHt3aWR0aDogdGhpcy53aWR0aCwgaGVpZ2h0OiB0aGlzLmhlaWdodH0sIGIuc2NlbmUubW9kZSA9PSBhLlNjZW5lTW9kZS5lZGl0ICYmICh0aGlzLmVkaXRBYmxlID0gITApXHJcbiAgICAgICAgfSwgdGhpcy51bnNlbGVjdGVkSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZC5wcm90b3R5cGUudW5zZWxlY3RlZEhhbmRsZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSwgdGhpcy5zZWxlY3RlZFNpemUgPSBudWxsLCB0aGlzLmVkaXRBYmxlID0gITFcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBiID0gW1wiVG9wX0xlZnRcIiwgXCJUb3BfQ2VudGVyXCIsIFwiVG9wX1JpZ2h0XCIsIFwiTWlkZGxlX0xlZnRcIiwgXCJNaWRkbGVfUmlnaHRcIiwgXCJCb3R0b21fTGVmdFwiLCBcIkJvdHRvbV9DZW50ZXJcIiwgXCJCb3R0b21fUmlnaHRcIl07XHJcbiAgICAgICAgdGhpcy5wYWludEN0cmwgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICBpZiAoMCAhPSB0aGlzLmVkaXRBYmxlKSB7XHJcbiAgICAgICAgICAgICAgICBhLnNhdmUoKTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGMgPSAwOyBjIDwgYi5sZW5ndGg7IGMrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkID0gdGhpcy5nZXRDdHJsUG9zaXRpb24oYltjXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZC5sZWZ0IC09IHRoaXMuY3gsIGQucmlnaHQgLT0gdGhpcy5jeCwgZC50b3AgLT0gdGhpcy5jeSwgZC5ib3R0b20gLT0gdGhpcy5jeTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IGQucmlnaHQgLSBkLmxlZnQsIGYgPSBkLmJvdHRvbSAtIGQudG9wO1xyXG4gICAgICAgICAgICAgICAgICAgIGEuYmVnaW5QYXRoKCksIGEuc3Ryb2tlU3R5bGUgPSBcInJnYmEoMCwwLDAsMC44KVwiLCBhLnJlY3QoZC5sZWZ0LCBkLnRvcCwgZSwgZiksIGEuc3Ryb2tlKCksIGEuY2xvc2VQYXRoKCksIGEuYmVnaW5QYXRoKCksIGEuc3Ryb2tlU3R5bGUgPSBcInJnYmEoMjU1LDI1NSwyNTUsMC4zKVwiLCBhLnJlY3QoZC5sZWZ0ICsgMSwgZC50b3AgKyAxLCBlIC0gMiwgZiAtIDIpLCBhLnN0cm9rZSgpLCBhLmNsb3NlUGF0aCgpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBhLnJlc3RvcmUoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgdGhpcy5pc0luQm91bmQgPSBmdW5jdGlvbiAoYSwgYykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFBvaW50ID0gbnVsbCwgMSA9PSB0aGlzLmVkaXRBYmxlKWZvciAodmFyIGUgPSAwOyBlIDwgYi5sZW5ndGg7IGUrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSB0aGlzLmdldEN0cmxQb3NpdGlvbihiW2VdKTtcclxuICAgICAgICAgICAgICAgIGlmIChhID4gZi5sZWZ0ICYmIGEgPCBmLnJpZ2h0ICYmIGMgPiBmLnRvcCAmJiBjIDwgZi5ib3R0b20pcmV0dXJuIHRoaXMuc2VsZWN0ZWRQb2ludCA9IGJbZV0sICEwXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGQucHJvdG90eXBlLmlzSW5Cb3VuZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpXHJcbiAgICAgICAgfSwgdGhpcy5tb3VzZWRyYWdIYW5kbGVyID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgaWYgKG51bGwgPT0gdGhpcy5zZWxlY3RlZFBvaW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYiA9IHRoaXMuc2VsZWN0ZWRMb2NhdGlvbi54ICsgYS5keCwgYyA9IHRoaXMuc2VsZWN0ZWRMb2NhdGlvbi55ICsgYS5keTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0TG9jYXRpb24oYiwgYyksIHRoaXMuZGlzcGF0Y2hFdmVudChcIm1vdXNlZHJhZ1wiLCBhKVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKFwiVG9wX0xlZnRcIiA9PSB0aGlzLnNlbGVjdGVkUG9pbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IHRoaXMuc2VsZWN0ZWRTaXplLndpZHRoIC0gYS5keCwgZSA9IHRoaXMuc2VsZWN0ZWRTaXplLmhlaWdodCAtIGEuZHksIGIgPSB0aGlzLnNlbGVjdGVkTG9jYXRpb24ueCArIGEuZHgsIGMgPSB0aGlzLnNlbGVjdGVkTG9jYXRpb24ueSArIGEuZHk7XHJcbiAgICAgICAgICAgICAgICAgICAgYiA8IHRoaXMueCArIHRoaXMud2lkdGggJiYgKHRoaXMueCA9IGIsIHRoaXMud2lkdGggPSBkKSwgYyA8IHRoaXMueSArIHRoaXMuaGVpZ2h0ICYmICh0aGlzLnkgPSBjLCB0aGlzLmhlaWdodCA9IGUpXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFwiVG9wX0NlbnRlclwiID09IHRoaXMuc2VsZWN0ZWRQb2ludCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlID0gdGhpcy5zZWxlY3RlZFNpemUuaGVpZ2h0IC0gYS5keSwgYyA9IHRoaXMuc2VsZWN0ZWRMb2NhdGlvbi55ICsgYS5keTtcclxuICAgICAgICAgICAgICAgICAgICBjIDwgdGhpcy55ICsgdGhpcy5oZWlnaHQgJiYgKHRoaXMueSA9IGMsIHRoaXMuaGVpZ2h0ID0gZSlcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXCJUb3BfUmlnaHRcIiA9PSB0aGlzLnNlbGVjdGVkUG9pbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IHRoaXMuc2VsZWN0ZWRTaXplLndpZHRoICsgYS5keCwgYyA9IHRoaXMuc2VsZWN0ZWRMb2NhdGlvbi55ICsgYS5keTtcclxuICAgICAgICAgICAgICAgICAgICBjIDwgdGhpcy55ICsgdGhpcy5oZWlnaHQgJiYgKHRoaXMueSA9IGMsIHRoaXMuaGVpZ2h0ID0gdGhpcy5zZWxlY3RlZFNpemUuaGVpZ2h0IC0gYS5keSksIGQgPiAxICYmICh0aGlzLndpZHRoID0gZClcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXCJNaWRkbGVfTGVmdFwiID09IHRoaXMuc2VsZWN0ZWRQb2ludCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkID0gdGhpcy5zZWxlY3RlZFNpemUud2lkdGggLSBhLmR4LCBiID0gdGhpcy5zZWxlY3RlZExvY2F0aW9uLnggKyBhLmR4O1xyXG4gICAgICAgICAgICAgICAgICAgIGIgPCB0aGlzLnggKyB0aGlzLndpZHRoICYmICh0aGlzLnggPSBiKSwgZCA+IDEgJiYgKHRoaXMud2lkdGggPSBkKVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcIk1pZGRsZV9SaWdodFwiID09IHRoaXMuc2VsZWN0ZWRQb2ludCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkID0gdGhpcy5zZWxlY3RlZFNpemUud2lkdGggKyBhLmR4O1xyXG4gICAgICAgICAgICAgICAgICAgIGQgPiAxICYmICh0aGlzLndpZHRoID0gZClcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXCJCb3R0b21fTGVmdFwiID09IHRoaXMuc2VsZWN0ZWRQb2ludCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkID0gdGhpcy5zZWxlY3RlZFNpemUud2lkdGggLSBhLmR4LCBiID0gdGhpcy5zZWxlY3RlZExvY2F0aW9uLnggKyBhLmR4O1xyXG4gICAgICAgICAgICAgICAgICAgIGQgPiAxICYmICh0aGlzLnggPSBiLCB0aGlzLndpZHRoID0gZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0aGlzLnNlbGVjdGVkU2l6ZS5oZWlnaHQgKyBhLmR5O1xyXG4gICAgICAgICAgICAgICAgICAgIGUgPiAxICYmICh0aGlzLmhlaWdodCA9IGUpXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFwiQm90dG9tX0NlbnRlclwiID09IHRoaXMuc2VsZWN0ZWRQb2ludCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlID0gdGhpcy5zZWxlY3RlZFNpemUuaGVpZ2h0ICsgYS5keTtcclxuICAgICAgICAgICAgICAgICAgICBlID4gMSAmJiAodGhpcy5oZWlnaHQgPSBlKVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcIkJvdHRvbV9SaWdodFwiID09IHRoaXMuc2VsZWN0ZWRQb2ludCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkID0gdGhpcy5zZWxlY3RlZFNpemUud2lkdGggKyBhLmR4O1xyXG4gICAgICAgICAgICAgICAgICAgIGQgPiAxICYmICh0aGlzLndpZHRoID0gZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0aGlzLnNlbGVjdGVkU2l6ZS5oZWlnaHQgKyBhLmR5O1xyXG4gICAgICAgICAgICAgICAgICAgIGUgPiAxICYmICh0aGlzLmhlaWdodCA9IGUpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoXCJyZXNpemVcIiwgYSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBiLnByb3RvdHlwZSA9IG5ldyBhLkVsZW1lbnQsIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGIucHJvdG90eXBlLCB7XHJcbiAgICAgICAgY3g6IHtcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy54ICsgdGhpcy53aWR0aCAvIDJcclxuICAgICAgICAgICAgfSwgc2V0OiBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy54ID0gYSAtIHRoaXMud2lkdGggLyAyXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBjeToge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnkgKyB0aGlzLmhlaWdodCAvIDJcclxuICAgICAgICAgICAgfSwgc2V0OiBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy55ID0gYSAtIHRoaXMuaGVpZ2h0IC8gMlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSksIGMucHJvdG90eXBlID0gbmV3IGIsIGQucHJvdG90eXBlID0gbmV3IGMsIGEuRGlzcGxheUVsZW1lbnQgPSBiLCBhLkludGVyYWN0aXZlRWxlbWVudCA9IGMsIGEuRWRpdGFibGVFbGVtZW50ID0gZFxyXG59KEpUb3BvKSwgZnVuY3Rpb24gKGEpIHtcclxuICAgIGZ1bmN0aW9uIGIoYykge1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uIChjKSB7XHJcbiAgICAgICAgICAgIGIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKSwgdGhpcy5lbGVtZW50VHlwZSA9IFwibm9kZVwiLCB0aGlzLnpJbmRleCA9IGEuekluZGV4X05vZGUsIHRoaXMudGV4dCA9IGMsIHRoaXMuZm9udCA9IFwiMTJweCBDb25zb2xhc1wiLCB0aGlzLmZvbnRDb2xvciA9IFwiMjU1LDI1NSwyNTVcIiwgdGhpcy5ib3JkZXJXaWR0aCA9IDAsIHRoaXMuYm9yZGVyQ29sb3IgPSBcIjI1NSwyNTUsMjU1XCIsIHRoaXMuYm9yZGVyUmFkaXVzID0gbnVsbCwgdGhpcy5kcmFnYWJsZSA9ICEwLCB0aGlzLnRleHRQb3NpdGlvbiA9IFwiQm90dG9tX0NlbnRlclwiLCB0aGlzLnRleHRPZmZzZXRYID0gMCwgdGhpcy50ZXh0T2Zmc2V0WSA9IDAsIHRoaXMudHJhbnNmb3JtQWJsZSA9ICEwLCB0aGlzLmluTGlua3MgPSBudWxsLCB0aGlzLm91dExpbmtzID0gbnVsbDtcclxuICAgICAgICAgICAgdmFyIGQgPSBcInRleHQsZm9udCxmb250Q29sb3IsdGV4dFBvc2l0aW9uLHRleHRPZmZzZXRYLHRleHRPZmZzZXRZLGJvcmRlclJhZGl1c1wiLnNwbGl0KFwiLFwiKTtcclxuICAgICAgICAgICAgdGhpcy5zZXJpYWxpemVkUHJvcGVydGllcyA9IHRoaXMuc2VyaWFsaXplZFByb3BlcnRpZXMuY29uY2F0KGQpXHJcbiAgICAgICAgfSwgdGhpcy5pbml0aWFsaXplKGMpLCB0aGlzLnBhaW50ID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaW1hZ2UpIHtcclxuICAgICAgICAgICAgICAgIHZhciBiID0gYS5nbG9iYWxBbHBoYTtcclxuICAgICAgICAgICAgICAgIGEuZ2xvYmFsQWxwaGEgPSB0aGlzLmFscGhhLCBudWxsICE9IHRoaXMuYWxhcm1JbWFnZSAmJiBudWxsICE9IHRoaXMuYWxhcm0gPyBhLmRyYXdJbWFnZSh0aGlzLmFsYXJtSW1hZ2UsIC10aGlzLndpZHRoIC8gMiwgLXRoaXMuaGVpZ2h0IC8gMiwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpIDogYS5kcmF3SW1hZ2UodGhpcy5pbWFnZSwgLXRoaXMud2lkdGggLyAyLCAtdGhpcy5oZWlnaHQgLyAyLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCksIGEuZ2xvYmFsQWxwaGEgPSBiXHJcbiAgICAgICAgICAgIH0gZWxzZSBhLmJlZ2luUGF0aCgpLCBhLmZpbGxTdHlsZSA9IFwicmdiYShcIiArIHRoaXMuZmlsbENvbG9yICsgXCIsXCIgKyB0aGlzLmFscGhhICsgXCIpXCIsIG51bGwgPT0gdGhpcy5ib3JkZXJSYWRpdXMgfHwgMCA9PSB0aGlzLmJvcmRlclJhZGl1cyA/IGEucmVjdCgtdGhpcy53aWR0aCAvIDIsIC10aGlzLmhlaWdodCAvIDIsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KSA6IGEuSlRvcG9Sb3VuZFJlY3QoLXRoaXMud2lkdGggLyAyLCAtdGhpcy5oZWlnaHQgLyAyLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCwgdGhpcy5ib3JkZXJSYWRpdXMpLCBhLmZpbGwoKSwgYS5jbG9zZVBhdGgoKTtcclxuICAgICAgICAgICAgdGhpcy5wYWludFRleHQoYSksIHRoaXMucGFpbnRCb3JkZXIoYSksIHRoaXMucGFpbnRDdHJsKGEpLCB0aGlzLnBhaW50QWxhcm1UZXh0KGEpXHJcbiAgICAgICAgfSwgdGhpcy5wYWludEFsYXJtVGV4dCA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIGlmIChudWxsICE9IHRoaXMuYWxhcm0gJiYgXCJcIiAhPSB0aGlzLmFsYXJtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYiA9IHRoaXMuYWxhcm1Db2xvciB8fCBcIjI1NSwwLDBcIiwgYyA9IHRoaXMuYWxhcm1BbHBoYSB8fCAuNTtcclxuICAgICAgICAgICAgICAgIGEuYmVnaW5QYXRoKCksIGEuZm9udCA9IHRoaXMuYWxhcm1Gb250IHx8IFwiMTBweCDlvq7ova/pm4Xpu5FcIjtcclxuICAgICAgICAgICAgICAgIHZhciBkID0gYS5tZWFzdXJlVGV4dCh0aGlzLmFsYXJtKS53aWR0aCArIDYsIGUgPSBhLm1lYXN1cmVUZXh0KFwi55SwXCIpLndpZHRoICsgNiwgZiA9IHRoaXMud2lkdGggLyAyIC0gZCAvIDIsIGcgPSAtdGhpcy5oZWlnaHQgLyAyIC0gZSAtIDg7XHJcbiAgICAgICAgICAgICAgICBhLnN0cm9rZVN0eWxlID0gXCJyZ2JhKFwiICsgYiArIFwiLCBcIiArIGMgKyBcIilcIiwgYS5maWxsU3R5bGUgPSBcInJnYmEoXCIgKyBiICsgXCIsIFwiICsgYyArIFwiKVwiLCBhLmxpbmVDYXAgPSBcInJvdW5kXCIsIGEubGluZVdpZHRoID0gMSwgYS5tb3ZlVG8oZiwgZyksIGEubGluZVRvKGYgKyBkLCBnKSwgYS5saW5lVG8oZiArIGQsIGcgKyBlKSwgYS5saW5lVG8oZiArIGQgLyAyICsgNiwgZyArIGUpLCBhLmxpbmVUbyhmICsgZCAvIDIsIGcgKyBlICsgOCksIGEubGluZVRvKGYgKyBkIC8gMiAtIDYsIGcgKyBlKSwgYS5saW5lVG8oZiwgZyArIGUpLCBhLmxpbmVUbyhmLCBnKSwgYS5maWxsKCksIGEuc3Ryb2tlKCksIGEuY2xvc2VQYXRoKCksIGEuYmVnaW5QYXRoKCksIGEuc3Ryb2tlU3R5bGUgPSBcInJnYmEoXCIgKyB0aGlzLmZvbnRDb2xvciArIFwiLCBcIiArIHRoaXMuYWxwaGEgKyBcIilcIiwgYS5maWxsU3R5bGUgPSBcInJnYmEoXCIgKyB0aGlzLmZvbnRDb2xvciArIFwiLCBcIiArIHRoaXMuYWxwaGEgKyBcIilcIiwgYS5maWxsVGV4dCh0aGlzLmFsYXJtLCBmICsgMiwgZyArIGUgLSA0KSwgYS5jbG9zZVBhdGgoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgdGhpcy5wYWludFRleHQgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICB2YXIgYiA9IHRoaXMudGV4dDtcclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gYiAmJiBcIlwiICE9IGIpIHtcclxuICAgICAgICAgICAgICAgIGEuYmVnaW5QYXRoKCksIGEuZm9udCA9IHRoaXMuZm9udDtcclxuICAgICAgICAgICAgICAgIHZhciBjID0gYS5tZWFzdXJlVGV4dChiKS53aWR0aCwgZCA9IGEubWVhc3VyZVRleHQoXCLnlLBcIikud2lkdGg7XHJcbiAgICAgICAgICAgICAgICBhLmZpbGxTdHlsZSA9IFwicmdiYShcIiArIHRoaXMuZm9udENvbG9yICsgXCIsIFwiICsgdGhpcy5hbHBoYSArIFwiKVwiO1xyXG4gICAgICAgICAgICAgICAgdmFyIGUgPSB0aGlzLmdldFRleHRQb3N0aW9uKHRoaXMudGV4dFBvc2l0aW9uLCBjLCBkKTtcclxuICAgICAgICAgICAgICAgIGEuZmlsbFRleHQoYiwgZS54LCBlLnkpLCBhLmNsb3NlUGF0aCgpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCB0aGlzLnBhaW50Qm9yZGVyID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgaWYgKDAgIT0gdGhpcy5ib3JkZXJXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgYS5iZWdpblBhdGgoKSwgYS5saW5lV2lkdGggPSB0aGlzLmJvcmRlcldpZHRoLCBhLnN0cm9rZVN0eWxlID0gXCJyZ2JhKFwiICsgdGhpcy5ib3JkZXJDb2xvciArIFwiLFwiICsgdGhpcy5hbHBoYSArIFwiKVwiO1xyXG4gICAgICAgICAgICAgICAgdmFyIGIgPSB0aGlzLmJvcmRlcldpZHRoIC8gMjtcclxuICAgICAgICAgICAgICAgIG51bGwgPT0gdGhpcy5ib3JkZXJSYWRpdXMgfHwgMCA9PSB0aGlzLmJvcmRlclJhZGl1cyA/IGEucmVjdCgtdGhpcy53aWR0aCAvIDIgLSBiLCAtdGhpcy5oZWlnaHQgLyAyIC0gYiwgdGhpcy53aWR0aCArIHRoaXMuYm9yZGVyV2lkdGgsIHRoaXMuaGVpZ2h0ICsgdGhpcy5ib3JkZXJXaWR0aCkgOiBhLkpUb3BvUm91bmRSZWN0KC10aGlzLndpZHRoIC8gMiAtIGIsIC10aGlzLmhlaWdodCAvIDIgLSBiLCB0aGlzLndpZHRoICsgdGhpcy5ib3JkZXJXaWR0aCwgdGhpcy5oZWlnaHQgKyB0aGlzLmJvcmRlcldpZHRoLCB0aGlzLmJvcmRlclJhZGl1cyksIGEuc3Ryb2tlKCksIGEuY2xvc2VQYXRoKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIHRoaXMuZ2V0VGV4dFBvc3Rpb24gPSBmdW5jdGlvbiAoYSwgYiwgYykge1xyXG4gICAgICAgICAgICB2YXIgZCA9IG51bGw7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsID09IGEgfHwgXCJCb3R0b21fQ2VudGVyXCIgPT0gYSA/IGQgPSB7eDogLXRoaXMud2lkdGggLyAyICsgKHRoaXMud2lkdGggLSBiKSAvIDIsIHk6IHRoaXMuaGVpZ2h0IC8gMiArIGN9IDogXCJUb3BfQ2VudGVyXCIgPT0gYSA/IGQgPSB7XHJcbiAgICAgICAgICAgICAgICB4OiAtdGhpcy53aWR0aCAvIDIgKyAodGhpcy53aWR0aCAtIGIpIC8gMixcclxuICAgICAgICAgICAgICAgIHk6IC10aGlzLmhlaWdodCAvIDIgLSBjIC8gMlxyXG4gICAgICAgICAgICB9IDogXCJUb3BfUmlnaHRcIiA9PSBhID8gZCA9IHt4OiB0aGlzLndpZHRoIC8gMiwgeTogLXRoaXMuaGVpZ2h0IC8gMiAtIGMgLyAyfSA6IFwiVG9wX0xlZnRcIiA9PSBhID8gZCA9IHtcclxuICAgICAgICAgICAgICAgIHg6IC10aGlzLndpZHRoIC8gMiAtIGIsXHJcbiAgICAgICAgICAgICAgICB5OiAtdGhpcy5oZWlnaHQgLyAyIC0gYyAvIDJcclxuICAgICAgICAgICAgfSA6IFwiQm90dG9tX1JpZ2h0XCIgPT0gYSA/IGQgPSB7eDogdGhpcy53aWR0aCAvIDIsIHk6IHRoaXMuaGVpZ2h0IC8gMiArIGN9IDogXCJCb3R0b21fTGVmdFwiID09IGEgPyBkID0ge1xyXG4gICAgICAgICAgICAgICAgeDogLXRoaXMud2lkdGggLyAyIC0gYixcclxuICAgICAgICAgICAgICAgIHk6IHRoaXMuaGVpZ2h0IC8gMiArIGNcclxuICAgICAgICAgICAgfSA6IFwiTWlkZGxlX0NlbnRlclwiID09IGEgPyBkID0ge3g6IC10aGlzLndpZHRoIC8gMiArICh0aGlzLndpZHRoIC0gYikgLyAyLCB5OiBjIC8gMn0gOiBcIk1pZGRsZV9SaWdodFwiID09IGEgPyBkID0ge1xyXG4gICAgICAgICAgICAgICAgeDogdGhpcy53aWR0aCAvIDIsXHJcbiAgICAgICAgICAgICAgICB5OiBjIC8gMlxyXG4gICAgICAgICAgICB9IDogXCJNaWRkbGVfTGVmdFwiID09IGEgJiYgKGQgPSB7eDogLXRoaXMud2lkdGggLyAyIC0gYiwgeTogYyAvIDJ9KSwgbnVsbCAhPSB0aGlzLnRleHRPZmZzZXRYICYmIChkLnggKz0gdGhpcy50ZXh0T2Zmc2V0WCksIG51bGwgIT0gdGhpcy50ZXh0T2Zmc2V0WSAmJiAoZC55ICs9IHRoaXMudGV4dE9mZnNldFkpLCBkXHJcbiAgICAgICAgfSwgdGhpcy5zZXRJbWFnZSA9IGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgIGlmIChudWxsID09IGEpdGhyb3cgbmV3IEVycm9yKFwiTm9kZS5zZXRJbWFnZSgpOiDlj4LmlbBJbWFnZeWvueixoeS4uuepuiFcIik7XHJcbiAgICAgICAgICAgIHZhciBjID0gdGhpcztcclxuICAgICAgICAgICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIGEpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkID0galthXTtcclxuICAgICAgICAgICAgICAgIG51bGwgPT0gZCA/IChkID0gbmV3IEltYWdlLCBkLnNyYyA9IGEsIGQub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGpbYV0gPSBkLCAxID09IGIgJiYgYy5zZXRTaXplKGQud2lkdGgsIGQuaGVpZ2h0KSwgYy5pbWFnZSA9IGQsIGMuYWxhcm1Db2xvciA9IG51bGwgPT0gYy5hbGFybUNvbG9yID8gXCIyNTUsMCwwXCIgOiBjLmFsYXJtQ29sb3JcclxuICAgICAgICAgICAgICAgIH0pIDogKGIgJiYgdGhpcy5zZXRTaXplKGQud2lkdGgsIGQuaGVpZ2h0KSwgYy5pbWFnZSA9IGQsIGMuYWxhcm1Db2xvciA9IG51bGwgPT0gYy5hbGFybUNvbG9yID8gXCIyNTUsMCwwXCIgOiBjLmFsYXJtQ29sb3IpXHJcbiAgICAgICAgICAgIH0gZWxzZSB0aGlzLmltYWdlID0gYSwgYy5hbGFybUNvbG9yID0gbnVsbCA9PSBjLmFsYXJtQ29sb3IgPyBcIjI1NSwwLDBcIiA6IGMuYWxhcm1Db2xvciwgMSA9PSBiICYmIHRoaXMuc2V0U2l6ZShhLndpZHRoLCBhLmhlaWdodClcclxuICAgICAgICB9LCB0aGlzLnJlbW92ZUhhbmRsZXIgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICB2YXIgYiA9IHRoaXM7XHJcbiAgICAgICAgICAgIHRoaXMub3V0TGlua3MgJiYgKHRoaXMub3V0TGlua3MuZm9yRWFjaChmdW5jdGlvbiAoYykge1xyXG4gICAgICAgICAgICAgICAgYy5ub2RlQSA9PT0gYiAmJiBhLnJlbW92ZShjKVxyXG4gICAgICAgICAgICB9KSwgdGhpcy5vdXRMaW5rcyA9IG51bGwpLCB0aGlzLmluTGlua3MgJiYgKHRoaXMuaW5MaW5rcy5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7XHJcbiAgICAgICAgICAgICAgICBjLm5vZGVaID09PSBiICYmIGEucmVtb3ZlKGMpXHJcbiAgICAgICAgICAgIH0pLCB0aGlzLmluTGlua3MgPSBudWxsKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjKCkge1xyXG4gICAgICAgIGMucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGQoYSkge1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpLCB0aGlzLnRleHQgPSBhLCB0aGlzLmVsZW1lbnRUeXBlID0gXCJUZXh0Tm9kZVwiLCB0aGlzLnBhaW50ID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgYS5iZWdpblBhdGgoKSwgYS5mb250ID0gdGhpcy5mb250LCB0aGlzLndpZHRoID0gYS5tZWFzdXJlVGV4dCh0aGlzLnRleHQpLndpZHRoLCB0aGlzLmhlaWdodCA9IGEubWVhc3VyZVRleHQoXCLnlLBcIikud2lkdGgsIGEuc3Ryb2tlU3R5bGUgPSBcInJnYmEoXCIgKyB0aGlzLmZvbnRDb2xvciArIFwiLCBcIiArIHRoaXMuYWxwaGEgKyBcIilcIiwgYS5maWxsU3R5bGUgPSBcInJnYmEoXCIgKyB0aGlzLmZvbnRDb2xvciArIFwiLCBcIiArIHRoaXMuYWxwaGEgKyBcIilcIiwgYS5maWxsVGV4dCh0aGlzLnRleHQsIC10aGlzLndpZHRoIC8gMiwgdGhpcy5oZWlnaHQgLyAyKSwgYS5jbG9zZVBhdGgoKSwgdGhpcy5wYWludEJvcmRlcihhKSwgdGhpcy5wYWludEN0cmwoYSksIHRoaXMucGFpbnRBbGFybVRleHQoYSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZShhLCBiLCBjKSB7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXplKCksIHRoaXMudGV4dCA9IGEsIHRoaXMuaHJlZiA9IGIsIHRoaXMudGFyZ2V0ID0gYywgdGhpcy5lbGVtZW50VHlwZSA9IFwiTGlua05vZGVcIiwgdGhpcy5pc1Zpc2l0ZWQgPSAhMSwgdGhpcy52aXNpdGVkQ29sb3IgPSBudWxsLCB0aGlzLnBhaW50ID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgYS5iZWdpblBhdGgoKSwgYS5mb250ID0gdGhpcy5mb250LCB0aGlzLndpZHRoID0gYS5tZWFzdXJlVGV4dCh0aGlzLnRleHQpLndpZHRoLCB0aGlzLmhlaWdodCA9IGEubWVhc3VyZVRleHQoXCLnlLBcIikud2lkdGgsIHRoaXMuaXNWaXNpdGVkICYmIG51bGwgIT0gdGhpcy52aXNpdGVkQ29sb3IgPyAoYS5zdHJva2VTdHlsZSA9IFwicmdiYShcIiArIHRoaXMudmlzaXRlZENvbG9yICsgXCIsIFwiICsgdGhpcy5hbHBoYSArIFwiKVwiLCBhLmZpbGxTdHlsZSA9IFwicmdiYShcIiArIHRoaXMudmlzaXRlZENvbG9yICsgXCIsIFwiICsgdGhpcy5hbHBoYSArIFwiKVwiKSA6IChhLnN0cm9rZVN0eWxlID0gXCJyZ2JhKFwiICsgdGhpcy5mb250Q29sb3IgKyBcIiwgXCIgKyB0aGlzLmFscGhhICsgXCIpXCIsIGEuZmlsbFN0eWxlID0gXCJyZ2JhKFwiICsgdGhpcy5mb250Q29sb3IgKyBcIiwgXCIgKyB0aGlzLmFscGhhICsgXCIpXCIpLCBhLmZpbGxUZXh0KHRoaXMudGV4dCwgLXRoaXMud2lkdGggLyAyLCB0aGlzLmhlaWdodCAvIDIpLCB0aGlzLmlzTW91c2VPdmVyICYmIChhLm1vdmVUbygtdGhpcy53aWR0aCAvIDIsIHRoaXMuaGVpZ2h0KSwgYS5saW5lVG8odGhpcy53aWR0aCAvIDIsIHRoaXMuaGVpZ2h0KSwgYS5zdHJva2UoKSksIGEuY2xvc2VQYXRoKCksIHRoaXMucGFpbnRCb3JkZXIoYSksIHRoaXMucGFpbnRDdHJsKGEpLCB0aGlzLnBhaW50QWxhcm1UZXh0KGEpXHJcbiAgICAgICAgfSwgdGhpcy5tb3VzZW1vdmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgYSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiY2FudmFzXCIpO1xyXG4gICAgICAgICAgICBpZiAoYSAmJiBhLmxlbmd0aCA+IDApZm9yICh2YXIgYiA9IDA7IGIgPCBhLmxlbmd0aDsgYisrKWFbYl0uc3R5bGUuY3Vyc29yID0gXCJwb2ludGVyXCJcclxuICAgICAgICB9KSwgdGhpcy5tb3VzZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBhID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJjYW52YXNcIik7XHJcbiAgICAgICAgICAgIGlmIChhICYmIGEubGVuZ3RoID4gMClmb3IgKHZhciBiID0gMDsgYiA8IGEubGVuZ3RoOyBiKyspYVtiXS5zdHlsZS5jdXJzb3IgPSBcImRlZmF1bHRcIlxyXG4gICAgICAgIH0pLCB0aGlzLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgXCJfYmxhbmtcIiA9PSB0aGlzLnRhcmdldCA/IHdpbmRvdy5vcGVuKHRoaXMuaHJlZikgOiBsb2NhdGlvbiA9IHRoaXMuaHJlZiwgdGhpcy5pc1Zpc2l0ZWQgPSAhMFxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZihhKSB7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXplKGFyZ3VtZW50cyksIHRoaXMuX3JhZGl1cyA9IDIwLCB0aGlzLmJlZ2luRGVncmVlID0gMCwgdGhpcy5lbmREZWdyZWUgPSAyICogTWF0aC5QSSwgdGhpcy50ZXh0ID0gYSwgdGhpcy5wYWludCA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIGEuc2F2ZSgpLCBhLmJlZ2luUGF0aCgpLCBhLmZpbGxTdHlsZSA9IFwicmdiYShcIiArIHRoaXMuZmlsbENvbG9yICsgXCIsXCIgKyB0aGlzLmFscGhhICsgXCIpXCIsIGEuYXJjKDAsIDAsIHRoaXMucmFkaXVzLCB0aGlzLmJlZ2luRGVncmVlLCB0aGlzLmVuZERlZ3JlZSwgITApLCBhLmZpbGwoKSwgYS5jbG9zZVBhdGgoKSwgYS5yZXN0b3JlKCksIHRoaXMucGFpbnRUZXh0KGEpLCB0aGlzLnBhaW50Qm9yZGVyKGEpLCB0aGlzLnBhaW50Q3RybChhKSwgdGhpcy5wYWludEFsYXJtVGV4dChhKVxyXG4gICAgICAgIH0sIHRoaXMucGFpbnRTZWxlY3RlZCA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIGEuc2F2ZSgpLCBhLmJlZ2luUGF0aCgpLCBhLnN0cm9rZVN0eWxlID0gXCJyZ2JhKDE2OCwyMDIsMjU1LCAwLjkpXCIsIGEuZmlsbFN0eWxlID0gXCJyZ2JhKDE2OCwyMDIsMjM2LDAuNylcIiwgYS5hcmMoMCwgMCwgdGhpcy5yYWRpdXMgKyAzLCB0aGlzLmJlZ2luRGVncmVlLCB0aGlzLmVuZERlZ3JlZSwgITApLCBhLmZpbGwoKSwgYS5zdHJva2UoKSwgYS5jbG9zZVBhdGgoKSwgYS5yZXN0b3JlKClcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZyhhLCBiLCBjKSB7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXplKCksIHRoaXMuZnJhbWVJbWFnZXMgPSBhIHx8IFtdLCB0aGlzLmZyYW1lSW5kZXggPSAwLCB0aGlzLmlzU3RvcCA9ICEwO1xyXG4gICAgICAgIHZhciBkID0gYiB8fCAxZTM7XHJcbiAgICAgICAgdGhpcy5yZXBlYXRQbGF5ID0gITE7XHJcbiAgICAgICAgdmFyIGUgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMubmV4dEZyYW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNTdG9wICYmIG51bGwgIT0gdGhpcy5mcmFtZUltYWdlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZyYW1lSW5kZXgrKywgdGhpcy5mcmFtZUluZGV4ID49IHRoaXMuZnJhbWVJbWFnZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnJlcGVhdFBsYXkpcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZnJhbWVJbmRleCA9IDBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0SW1hZ2UodGhpcy5mcmFtZUltYWdlc1t0aGlzLmZyYW1lSW5kZXhdLCBjKSwgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5uZXh0RnJhbWUoKVxyXG4gICAgICAgICAgICAgICAgfSwgZCAvIGEubGVuZ3RoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGgoYSwgYiwgYywgZCwgZSkge1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgIHZhciBmID0gdGhpcztcclxuICAgICAgICB0aGlzLnNldEltYWdlKGEpLCB0aGlzLmZyYW1lSW5kZXggPSAwLCB0aGlzLmlzUGF1c2UgPSAhMCwgdGhpcy5yZXBlYXRQbGF5ID0gITE7XHJcbiAgICAgICAgdmFyIGcgPSBkIHx8IDFlMztcclxuICAgICAgICBlID0gZSB8fCAwLCB0aGlzLnBhaW50ID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaW1hZ2UpIHtcclxuICAgICAgICAgICAgICAgIHZhciBiID0gdGhpcy53aWR0aCwgZCA9IHRoaXMuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgYS5zYXZlKCksIGEuYmVnaW5QYXRoKCksIGEuZmlsbFN0eWxlID0gXCJyZ2JhKFwiICsgdGhpcy5maWxsQ29sb3IgKyBcIixcIiArIHRoaXMuYWxwaGEgKyBcIilcIjtcclxuICAgICAgICAgICAgICAgIHZhciBmID0gKE1hdGguZmxvb3IodGhpcy5mcmFtZUluZGV4IC8gYykgKyBlKSAqIGQsIGcgPSBNYXRoLmZsb29yKHRoaXMuZnJhbWVJbmRleCAlIGMpICogYjtcclxuICAgICAgICAgICAgICAgIGEuZHJhd0ltYWdlKHRoaXMuaW1hZ2UsIGcsIGYsIGIsIGQsIC1iIC8gMiwgLWQgLyAyLCBiLCBkKSwgYS5maWxsKCksIGEuY2xvc2VQYXRoKCksIGEucmVzdG9yZSgpLCB0aGlzLnBhaW50VGV4dChhKSwgdGhpcy5wYWludEJvcmRlcihhKSwgdGhpcy5wYWludEN0cmwoYSksIHRoaXMucGFpbnRBbGFybVRleHQoYSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIHRoaXMubmV4dEZyYW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNTdG9wKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5mcmFtZUluZGV4KyssIHRoaXMuZnJhbWVJbmRleCA+PSBiICogYykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5yZXBlYXRQbGF5KXJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZyYW1lSW5kZXggPSAwXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBmLmlzU3RvcCB8fCBmLm5leHRGcmFtZSgpXHJcbiAgICAgICAgICAgICAgICB9LCBnIC8gKGIgKiBjKSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBpKCkge1xyXG4gICAgICAgIHZhciBhID0gbnVsbDtcclxuICAgICAgICByZXR1cm4gYSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMyA/IG5ldyBnKGFyZ3VtZW50c1swXSwgYXJndW1lbnRzWzFdLCBhcmd1bWVudHNbMl0pIDogbmV3IGgoYXJndW1lbnRzWzBdLCBhcmd1bWVudHNbMV0sIGFyZ3VtZW50c1syXSwgYXJndW1lbnRzWzNdLCBhcmd1bWVudHNbNF0sIGFyZ3VtZW50c1s1XSksIGEuc3RvcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgYS5pc1N0b3AgPSAhMFxyXG4gICAgICAgIH0sIGEucGxheSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgYS5pc1N0b3AgPSAhMSwgYS5mcmFtZUluZGV4ID0gMCwgYS5uZXh0RnJhbWUoKVxyXG4gICAgICAgIH0sIGFcclxuICAgIH1cclxuXHJcbiAgICB2YXIgaiA9IHt9O1xyXG4gICAgYi5wcm90b3R5cGUgPSBuZXcgYS5FZGl0YWJsZUVsZW1lbnQsIGMucHJvdG90eXBlID0gbmV3IGIsIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGMucHJvdG90eXBlLCB7XHJcbiAgICAgICAgYWxhcm1Db2xvcjoge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9hbGFybUNvbG9yXHJcbiAgICAgICAgICAgIH0sIHNldDogZnVuY3Rpb24gKGIpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9hbGFybUNvbG9yID0gYiwgbnVsbCAhPSB0aGlzLmltYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBhLnV0aWwuZ2VuSW1hZ2VBbGFybSh0aGlzLmltYWdlLCBiKTtcclxuICAgICAgICAgICAgICAgICAgICBjICYmICh0aGlzLmFsYXJtSW1hZ2UgPSBjKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSksIGQucHJvdG90eXBlID0gbmV3IGMsIGUucHJvdG90eXBlID0gbmV3IGQsIGYucHJvdG90eXBlID0gbmV3IGMsIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGYucHJvdG90eXBlLCB7XHJcbiAgICAgICAgcmFkaXVzOiB7XHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JhZGl1c1xyXG4gICAgICAgICAgICB9LCBzZXQ6IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yYWRpdXMgPSBhO1xyXG4gICAgICAgICAgICAgICAgdmFyIGIgPSAyICogdGhpcy5yYWRpdXMsIGMgPSAyICogdGhpcy5yYWRpdXM7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndpZHRoID0gYiwgdGhpcy5oZWlnaHQgPSBjXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCB3aWR0aDoge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl93aWR0aFxyXG4gICAgICAgICAgICB9LCBzZXQ6IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yYWRpdXMgPSBhIC8gMiwgdGhpcy5fd2lkdGggPSBhXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBoZWlnaHQ6IHtcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5faGVpZ2h0XHJcbiAgICAgICAgICAgIH0sIHNldDogZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JhZGl1cyA9IGEgLyAyLCB0aGlzLl9oZWlnaHQgPSBhXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KSwgZy5wcm90b3R5cGUgPSBuZXcgYywgaC5wcm90b3R5cGUgPSBuZXcgYywgaS5wcm90b3R5cGUgPSBuZXcgYywgYS5Ob2RlID0gYywgYS5UZXh0Tm9kZSA9IGQsIGEuTGlua05vZGUgPSBlLCBhLkNpcmNsZU5vZGUgPSBmLCBhLkFuaW1hdGVOb2RlID0gaVxyXG59KEpUb3BvKSwgZnVuY3Rpb24gKGEpIHtcclxuICAgIGZ1bmN0aW9uIGIoYSwgYikge1xyXG4gICAgICAgIHZhciBjID0gW107XHJcbiAgICAgICAgaWYgKG51bGwgPT0gYSB8fCBudWxsID09IGIpcmV0dXJuIGM7XHJcbiAgICAgICAgaWYgKGEgJiYgYiAmJiBhLm91dExpbmtzICYmIGIuaW5MaW5rcylmb3IgKHZhciBkID0gMDsgZCA8IGEub3V0TGlua3MubGVuZ3RoOyBkKyspZm9yICh2YXIgZSA9IGEub3V0TGlua3NbZF0sIGYgPSAwOyBmIDwgYi5pbkxpbmtzLmxlbmd0aDsgZisrKSB7XHJcbiAgICAgICAgICAgIHZhciBnID0gYi5pbkxpbmtzW2ZdO1xyXG4gICAgICAgICAgICBlID09PSBnICYmIGMucHVzaChnKVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGMoYSwgYykge1xyXG4gICAgICAgIHZhciBkID0gYihhLCBjKSwgZSA9IGIoYywgYSksIGYgPSBkLmNvbmNhdChlKTtcclxuICAgICAgICByZXR1cm4gZlxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGQoYSkge1xyXG4gICAgICAgIHZhciBiID0gYyhhLm5vZGVBLCBhLm5vZGVaKTtcclxuICAgICAgICByZXR1cm4gYiA9IGIuZmlsdGVyKGZ1bmN0aW9uIChiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhICE9PSBiXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBlKGEsIGIpIHtcclxuICAgICAgICByZXR1cm4gYyhhLCBiKS5sZW5ndGhcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBmKGIsIGMsIGcpIHtcclxuICAgICAgICBmdW5jdGlvbiBoKGIsIGMpIHtcclxuICAgICAgICAgICAgdmFyIGQgPSBhLnV0aWwubGluZUYoYi5jeCwgYi5jeSwgYy5jeCwgYy5jeSksIGUgPSBiLmdldEJvdW5kKCksIGYgPSBhLnV0aWwuaW50ZXJzZWN0aW9uTGluZUJvdW5kKGQsIGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gZlxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXplID0gZnVuY3Rpb24gKGIsIGMsIGQpIHtcclxuICAgICAgICAgICAgaWYgKGYucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKSwgdGhpcy5lbGVtZW50VHlwZSA9IFwibGlua1wiLCB0aGlzLnpJbmRleCA9IGEuekluZGV4X0xpbmssIDAgIT0gYXJndW1lbnRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0ID0gZCwgdGhpcy5ub2RlQSA9IGIsIHRoaXMubm9kZVogPSBjLCB0aGlzLm5vZGVBICYmIG51bGwgPT0gdGhpcy5ub2RlQS5vdXRMaW5rcyAmJiAodGhpcy5ub2RlQS5vdXRMaW5rcyA9IFtdKSwgdGhpcy5ub2RlQSAmJiBudWxsID09IHRoaXMubm9kZUEuaW5MaW5rcyAmJiAodGhpcy5ub2RlQS5pbkxpbmtzID0gW10pLCB0aGlzLm5vZGVaICYmIG51bGwgPT0gdGhpcy5ub2RlWi5pbkxpbmtzICYmICh0aGlzLm5vZGVaLmluTGlua3MgPSBbXSksIHRoaXMubm9kZVogJiYgbnVsbCA9PSB0aGlzLm5vZGVaLm91dExpbmtzICYmICh0aGlzLm5vZGVaLm91dExpbmtzID0gW10pLCBudWxsICE9IHRoaXMubm9kZUEgJiYgdGhpcy5ub2RlQS5vdXRMaW5rcy5wdXNoKHRoaXMpLCBudWxsICE9IHRoaXMubm9kZVogJiYgdGhpcy5ub2RlWi5pbkxpbmtzLnB1c2godGhpcyksIHRoaXMuY2FjdWxhdGVJbmRleCgpLCB0aGlzLmZvbnQgPSBcIjEycHggQ29uc29sYXNcIiwgdGhpcy5mb250Q29sb3IgPSBcIjI1NSwyNTUsMjU1XCIsIHRoaXMubGluZVdpZHRoID0gMiwgdGhpcy5saW5lSm9pbiA9IFwibWl0ZXJcIiwgdGhpcy50cmFuc2Zvcm1BYmxlID0gITEsIHRoaXMuYnVuZGxlT2Zmc2V0ID0gMjAsIHRoaXMuYnVuZGxlR2FwID0gMTIsIHRoaXMudGV4dE9mZnNldFggPSAwLCB0aGlzLnRleHRPZmZzZXRZID0gMCwgdGhpcy5hcnJvd3NSYWRpdXMgPSBudWxsLCB0aGlzLmFycm93c09mZnNldCA9IDAsIHRoaXMuZGFzaGVkUGF0dGVybiA9IG51bGwsIHRoaXMucGF0aCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGUgPSBcInRleHQsZm9udCxmb250Q29sb3IsbGluZVdpZHRoLGxpbmVKb2luXCIuc3BsaXQoXCIsXCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXJpYWxpemVkUHJvcGVydGllcyA9IHRoaXMuc2VyaWFsaXplZFByb3BlcnRpZXMuY29uY2F0KGUpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCB0aGlzLmNhY3VsYXRlSW5kZXggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBhID0gZSh0aGlzLm5vZGVBLCB0aGlzLm5vZGVaKTtcclxuICAgICAgICAgICAgYSA+IDAgJiYgKHRoaXMubm9kZUluZGV4ID0gYSAtIDEpXHJcbiAgICAgICAgfSwgdGhpcy5pbml0aWFsaXplKGIsIGMsIGcpLCB0aGlzLnJlbW92ZUhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBhID0gdGhpcztcclxuICAgICAgICAgICAgdGhpcy5ub2RlQSAmJiB0aGlzLm5vZGVBLm91dExpbmtzICYmICh0aGlzLm5vZGVBLm91dExpbmtzID0gdGhpcy5ub2RlQS5vdXRMaW5rcy5maWx0ZXIoZnVuY3Rpb24gKGIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBiICE9PSBhXHJcbiAgICAgICAgICAgIH0pKSwgdGhpcy5ub2RlWiAmJiB0aGlzLm5vZGVaLmluTGlua3MgJiYgKHRoaXMubm9kZVouaW5MaW5rcyA9IHRoaXMubm9kZVouaW5MaW5rcy5maWx0ZXIoZnVuY3Rpb24gKGIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBiICE9PSBhXHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgdmFyIGIgPSBkKHRoaXMpO1xyXG4gICAgICAgICAgICBiLmZvckVhY2goZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgICAgIGEubm9kZUluZGV4ID0gYlxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0sIHRoaXMuZ2V0U3RhcnRQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGEgPSB7eDogdGhpcy5ub2RlQS5jeCwgeTogdGhpcy5ub2RlQS5jeX07XHJcbiAgICAgICAgICAgIHJldHVybiBhXHJcbiAgICAgICAgfSwgdGhpcy5nZXRFbmRQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGE7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsICE9IHRoaXMuYXJyb3dzUmFkaXVzICYmIChhID0gaCh0aGlzLm5vZGVaLCB0aGlzLm5vZGVBKSksIG51bGwgPT0gYSAmJiAoYSA9IHt4OiB0aGlzLm5vZGVaLmN4LCB5OiB0aGlzLm5vZGVaLmN5fSksIGFcclxuICAgICAgICB9LCB0aGlzLmdldFBhdGggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBhID0gW10sIGIgPSB0aGlzLmdldFN0YXJ0UG9zaXRpb24oKSwgYyA9IHRoaXMuZ2V0RW5kUG9zaXRpb24oKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMubm9kZUEgPT09IHRoaXMubm9kZVopcmV0dXJuIFtiLCBjXTtcclxuICAgICAgICAgICAgdmFyIGQgPSBlKHRoaXMubm9kZUEsIHRoaXMubm9kZVopO1xyXG4gICAgICAgICAgICBpZiAoMSA9PSBkKXJldHVybiBbYiwgY107XHJcbiAgICAgICAgICAgIHZhciBmID0gTWF0aC5hdGFuMihjLnkgLSBiLnksIGMueCAtIGIueCksIGcgPSB7eDogYi54ICsgdGhpcy5idW5kbGVPZmZzZXQgKiBNYXRoLmNvcyhmKSwgeTogYi55ICsgdGhpcy5idW5kbGVPZmZzZXQgKiBNYXRoLnNpbihmKX0sIGggPSB7XHJcbiAgICAgICAgICAgICAgICB4OiBjLnggKyB0aGlzLmJ1bmRsZU9mZnNldCAqIE1hdGguY29zKGYgLSBNYXRoLlBJKSxcclxuICAgICAgICAgICAgICAgIHk6IGMueSArIHRoaXMuYnVuZGxlT2Zmc2V0ICogTWF0aC5zaW4oZiAtIE1hdGguUEkpXHJcbiAgICAgICAgICAgIH0sIGkgPSBmIC0gTWF0aC5QSSAvIDIsIGogPSBmIC0gTWF0aC5QSSAvIDIsIGsgPSBkICogdGhpcy5idW5kbGVHYXAgLyAyIC0gdGhpcy5idW5kbGVHYXAgLyAyLCBsID0gdGhpcy5idW5kbGVHYXAgKiB0aGlzLm5vZGVJbmRleCwgbSA9IHtcclxuICAgICAgICAgICAgICAgIHg6IGcueCArIGwgKiBNYXRoLmNvcyhpKSxcclxuICAgICAgICAgICAgICAgIHk6IGcueSArIGwgKiBNYXRoLnNpbihpKVxyXG4gICAgICAgICAgICB9LCBuID0ge3g6IGgueCArIGwgKiBNYXRoLmNvcyhqKSwgeTogaC55ICsgbCAqIE1hdGguc2luKGopfTtcclxuICAgICAgICAgICAgcmV0dXJuIG0gPSB7eDogbS54ICsgayAqIE1hdGguY29zKGkgLSBNYXRoLlBJKSwgeTogbS55ICsgayAqIE1hdGguc2luKGkgLSBNYXRoLlBJKX0sIG4gPSB7eDogbi54ICsgayAqIE1hdGguY29zKGogLSBNYXRoLlBJKSwgeTogbi55ICsgayAqIE1hdGguc2luKGogLSBNYXRoLlBJKX0sIGEucHVzaCh7XHJcbiAgICAgICAgICAgICAgICB4OiBiLngsXHJcbiAgICAgICAgICAgICAgICB5OiBiLnlcclxuICAgICAgICAgICAgfSksIGEucHVzaCh7eDogbS54LCB5OiBtLnl9KSwgYS5wdXNoKHt4OiBuLngsIHk6IG4ueX0pLCBhLnB1c2goe3g6IGMueCwgeTogYy55fSksIGFcclxuICAgICAgICB9LCB0aGlzLnBhaW50UGF0aCA9IGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm5vZGVBID09PSB0aGlzLm5vZGVaKXJldHVybiB2b2lkIHRoaXMucGFpbnRMb29wKGEpO1xyXG4gICAgICAgICAgICBhLmJlZ2luUGF0aCgpLCBhLm1vdmVUbyhiWzBdLngsIGJbMF0ueSk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGMgPSAxOyBjIDwgYi5sZW5ndGg7IGMrKyludWxsID09IHRoaXMuZGFzaGVkUGF0dGVybiA/IGEubGluZVRvKGJbY10ueCwgYltjXS55KSA6IGEuSlRvcG9EYXNoZWRMaW5lVG8oYltjIC0gMV0ueCwgYltjIC0gMV0ueSwgYltjXS54LCBiW2NdLnksIHRoaXMuZGFzaGVkUGF0dGVybik7XHJcbiAgICAgICAgICAgIGlmIChhLnN0cm9rZSgpLCBhLmNsb3NlUGF0aCgpLCBudWxsICE9IHRoaXMuYXJyb3dzUmFkaXVzKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZCA9IGJbYi5sZW5ndGggLSAyXSwgZSA9IGJbYi5sZW5ndGggLSAxXTtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFpbnRBcnJvdyhhLCBkLCBlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgdGhpcy5wYWludExvb3AgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICBhLmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYiA9IHRoaXMuYnVuZGxlR2FwICogKHRoaXMubm9kZUluZGV4ICsgMSkgLyAyO1xyXG4gICAgICAgICAgICAgICAgTWF0aC5QSSArIE1hdGguUEkgLyAyXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYS5hcmModGhpcy5ub2RlQS54LCB0aGlzLm5vZGVBLnksIGIsIE1hdGguUEkgLyAyLCAyICogTWF0aC5QSSksIGEuc3Ryb2tlKCksIGEuY2xvc2VQYXRoKClcclxuICAgICAgICB9LCB0aGlzLnBhaW50QXJyb3cgPSBmdW5jdGlvbiAoYiwgYywgZCkge1xyXG4gICAgICAgICAgICB2YXIgZSA9IHRoaXMuYXJyb3dzT2Zmc2V0LCBmID0gdGhpcy5hcnJvd3NSYWRpdXMgLyAyLCBnID0gYywgaCA9IGQsIGkgPSBNYXRoLmF0YW4yKGgueSAtIGcueSwgaC54IC0gZy54KSwgaiA9IGEudXRpbC5nZXREaXN0YW5jZShnLCBoKSAtIHRoaXMuYXJyb3dzUmFkaXVzLCBrID0gZy54ICsgKGogKyBlKSAqIE1hdGguY29zKGkpLCBsID0gZy55ICsgKGogKyBlKSAqIE1hdGguc2luKGkpLCBtID0gaC54ICsgZSAqIE1hdGguY29zKGkpLCBuID0gaC55ICsgZSAqIE1hdGguc2luKGkpO1xyXG4gICAgICAgICAgICBpIC09IE1hdGguUEkgLyAyO1xyXG4gICAgICAgICAgICB2YXIgbyA9IHt4OiBrICsgZiAqIE1hdGguY29zKGkpLCB5OiBsICsgZiAqIE1hdGguc2luKGkpfSwgcCA9IHt4OiBrICsgZiAqIE1hdGguY29zKGkgLSBNYXRoLlBJKSwgeTogbCArIGYgKiBNYXRoLnNpbihpIC0gTWF0aC5QSSl9O1xyXG4gICAgICAgICAgICBiLmJlZ2luUGF0aCgpLCBiLmZpbGxTdHlsZSA9IFwicmdiYShcIiArIHRoaXMuc3Ryb2tlQ29sb3IgKyBcIixcIiArIHRoaXMuYWxwaGEgKyBcIilcIiwgYi5tb3ZlVG8oby54LCBvLnkpLCBiLmxpbmVUbyhtLCBuKSwgYi5saW5lVG8ocC54LCBwLnkpLCBiLnN0cm9rZSgpLCBiLmNsb3NlUGF0aCgpXHJcbiAgICAgICAgfSwgdGhpcy5wYWludCA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIGlmIChudWxsICE9IHRoaXMubm9kZUEgJiYgbnVsbCAhPSAhdGhpcy5ub2RlWikge1xyXG4gICAgICAgICAgICAgICAgdmFyIGIgPSB0aGlzLmdldFBhdGgodGhpcy5ub2RlSW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wYXRoID0gYiwgYS5zdHJva2VTdHlsZSA9IFwicmdiYShcIiArIHRoaXMuc3Ryb2tlQ29sb3IgKyBcIixcIiArIHRoaXMuYWxwaGEgKyBcIilcIiwgYS5saW5lV2lkdGggPSB0aGlzLmxpbmVXaWR0aCwgdGhpcy5wYWludFBhdGgoYSwgYiksIGIgJiYgYi5sZW5ndGggPiAwICYmIHRoaXMucGFpbnRUZXh0KGEsIGIpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBpID0gLShNYXRoLlBJIC8gMiArIE1hdGguUEkgLyA0KTtcclxuICAgICAgICB0aGlzLnBhaW50VGV4dCA9IGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgIHZhciBjID0gYlswXSwgZCA9IGJbYi5sZW5ndGggLSAxXTtcclxuICAgICAgICAgICAgaWYgKDQgPT0gYi5sZW5ndGggJiYgKGMgPSBiWzFdLCBkID0gYlsyXSksIHRoaXMudGV4dCAmJiB0aGlzLnRleHQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGUgPSAoZC54ICsgYy54KSAvIDIgKyB0aGlzLnRleHRPZmZzZXRYLCBmID0gKGQueSArIGMueSkgLyAyICsgdGhpcy50ZXh0T2Zmc2V0WTtcclxuICAgICAgICAgICAgICAgIGEuc2F2ZSgpLCBhLmJlZ2luUGF0aCgpLCBhLmZvbnQgPSB0aGlzLmZvbnQ7XHJcbiAgICAgICAgICAgICAgICB2YXIgZyA9IGEubWVhc3VyZVRleHQodGhpcy50ZXh0KS53aWR0aCwgaCA9IGEubWVhc3VyZVRleHQoXCLnlLBcIikud2lkdGg7XHJcbiAgICAgICAgICAgICAgICBpZiAoYS5maWxsU3R5bGUgPSBcInJnYmEoXCIgKyB0aGlzLmZvbnRDb2xvciArIFwiLCBcIiArIHRoaXMuYWxwaGEgKyBcIilcIiwgdGhpcy5ub2RlQSA9PT0gdGhpcy5ub2RlWikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBqID0gdGhpcy5idW5kbGVHYXAgKiAodGhpcy5ub2RlSW5kZXggKyAxKSAvIDIsIGUgPSB0aGlzLm5vZGVBLnggKyBqICogTWF0aC5jb3MoaSksIGYgPSB0aGlzLm5vZGVBLnkgKyBqICogTWF0aC5zaW4oaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYS5maWxsVGV4dCh0aGlzLnRleHQsIGUsIGYpXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgYS5maWxsVGV4dCh0aGlzLnRleHQsIGUgLSBnIC8gMiwgZiAtIGggLyAyKTtcclxuICAgICAgICAgICAgICAgIGEuc3Ryb2tlKCksIGEuY2xvc2VQYXRoKCksIGEucmVzdG9yZSgpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCB0aGlzLnBhaW50U2VsZWN0ZWQgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICBhLnNoYWRvd0JsdXIgPSAxMCwgYS5zaGFkb3dDb2xvciA9IFwicmdiYSgwLDAsMCwxKVwiLCBhLnNoYWRvd09mZnNldFggPSAwLCBhLnNoYWRvd09mZnNldFkgPSAwXHJcbiAgICAgICAgfSwgdGhpcy5pc0luQm91bmQgPSBmdW5jdGlvbiAoYiwgYykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5ub2RlQSA9PT0gdGhpcy5ub2RlWikge1xyXG4gICAgICAgICAgICAgICAgdmFyIGQgPSB0aGlzLmJ1bmRsZUdhcCAqICh0aGlzLm5vZGVJbmRleCArIDEpIC8gMiwgZSA9IGEudXRpbC5nZXREaXN0YW5jZSh0aGlzLm5vZGVBLCB7eDogYiwgeTogY30pIC0gZDtcclxuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLmFicyhlKSA8PSAzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yICh2YXIgZiA9ICExLCBnID0gMTsgZyA8IHRoaXMucGF0aC5sZW5ndGg7IGcrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGggPSB0aGlzLnBhdGhbZyAtIDFdLCBpID0gdGhpcy5wYXRoW2ddO1xyXG4gICAgICAgICAgICAgICAgaWYgKDEgPT0gYS51dGlsLmlzUG9pbnRJbkxpbmUoe3g6IGIsIHk6IGN9LCBoLCBpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSAhMDtcclxuICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGcoYSwgYiwgYykge1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZy5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpLCB0aGlzLmRpcmVjdGlvbiA9IFwiaG9yaXpvbnRhbFwiXHJcbiAgICAgICAgfSwgdGhpcy5pbml0aWFsaXplKGEsIGIsIGMpLCB0aGlzLmdldFN0YXJ0UG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBhID0ge3g6IHRoaXMubm9kZUEuY3gsIHk6IHRoaXMubm9kZUEuY3l9O1xyXG4gICAgICAgICAgICByZXR1cm4gXCJob3Jpem9udGFsXCIgPT0gdGhpcy5kaXJlY3Rpb24gPyB0aGlzLm5vZGVaLmN4ID4gYS54ID8gYS54ICs9IHRoaXMubm9kZUEud2lkdGggLyAyIDogYS54IC09IHRoaXMubm9kZUEud2lkdGggLyAyIDogdGhpcy5ub2RlWi5jeSA+IGEueSA/IGEueSArPSB0aGlzLm5vZGVBLmhlaWdodCAvIDIgOiBhLnkgLT0gdGhpcy5ub2RlQS5oZWlnaHQgLyAyLCBhXHJcbiAgICAgICAgfSwgdGhpcy5nZXRFbmRQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGEgPSB7eDogdGhpcy5ub2RlWi5jeCwgeTogdGhpcy5ub2RlWi5jeX07XHJcbiAgICAgICAgICAgIHJldHVybiBcImhvcml6b250YWxcIiA9PSB0aGlzLmRpcmVjdGlvbiA/IHRoaXMubm9kZUEuY3kgPCBhLnkgPyBhLnkgLT0gdGhpcy5ub2RlWi5oZWlnaHQgLyAyIDogYS55ICs9IHRoaXMubm9kZVouaGVpZ2h0IC8gMiA6IGEueCA9IHRoaXMubm9kZUEuY3ggPCBhLnggPyB0aGlzLm5vZGVaLnggOiB0aGlzLm5vZGVaLnggKyB0aGlzLm5vZGVaLndpZHRoLCBhXHJcbiAgICAgICAgfSwgdGhpcy5nZXRQYXRoID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgdmFyIGIgPSBbXSwgYyA9IHRoaXMuZ2V0U3RhcnRQb3NpdGlvbigpLCBkID0gdGhpcy5nZXRFbmRQb3NpdGlvbigpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5ub2RlQSA9PT0gdGhpcy5ub2RlWilyZXR1cm4gW2MsIGRdO1xyXG4gICAgICAgICAgICB2YXIgZiwgZywgaCA9IGUodGhpcy5ub2RlQSwgdGhpcy5ub2RlWiksIGkgPSAoaCAtIDEpICogdGhpcy5idW5kbGVHYXAsIGogPSB0aGlzLmJ1bmRsZUdhcCAqIGEgLSBpIC8gMjtcclxuICAgICAgICAgICAgcmV0dXJuIFwiaG9yaXpvbnRhbFwiID09IHRoaXMuZGlyZWN0aW9uID8gKGYgPSBkLnggKyBqLCBnID0gYy55IC0gaiwgYi5wdXNoKHt4OiBjLngsIHk6IGd9KSwgYi5wdXNoKHt4OiBmLCB5OiBnfSksIGIucHVzaCh7eDogZiwgeTogZC55fSkpIDogKGYgPSBjLnggKyBqLCBnID0gZC55IC0gaiwgYi5wdXNoKHtcclxuICAgICAgICAgICAgICAgIHg6IGYsXHJcbiAgICAgICAgICAgICAgICB5OiBjLnlcclxuICAgICAgICAgICAgfSksIGIucHVzaCh7eDogZiwgeTogZ30pLCBiLnB1c2goe3g6IGQueCwgeTogZ30pKSwgYlxyXG4gICAgICAgIH0sIHRoaXMucGFpbnRUZXh0ID0gZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMudGV4dCAmJiB0aGlzLnRleHQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGMgPSBiWzFdLCBkID0gYy54ICsgdGhpcy50ZXh0T2Zmc2V0WCwgZSA9IGMueSArIHRoaXMudGV4dE9mZnNldFk7XHJcbiAgICAgICAgICAgICAgICBhLnNhdmUoKSwgYS5iZWdpblBhdGgoKSwgYS5mb250ID0gdGhpcy5mb250O1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSBhLm1lYXN1cmVUZXh0KHRoaXMudGV4dCkud2lkdGgsIGcgPSBhLm1lYXN1cmVUZXh0KFwi55SwXCIpLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgYS5maWxsU3R5bGUgPSBcInJnYmEoXCIgKyB0aGlzLmZvbnRDb2xvciArIFwiLCBcIiArIHRoaXMuYWxwaGEgKyBcIilcIiwgYS5maWxsVGV4dCh0aGlzLnRleHQsIGQgLSBmIC8gMiwgZSAtIGcgLyAyKSwgYS5zdHJva2UoKSwgYS5jbG9zZVBhdGgoKSwgYS5yZXN0b3JlKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBoKGEsIGIsIGMpIHtcclxuICAgICAgICB0aGlzLmluaXRpYWxpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGgucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKSwgdGhpcy5kaXJlY3Rpb24gPSBcInZlcnRpY2FsXCIsIHRoaXMub2Zmc2V0R2FwID0gNDRcclxuICAgICAgICB9LCB0aGlzLmluaXRpYWxpemUoYSwgYiwgYyksIHRoaXMuZ2V0U3RhcnRQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGEgPSB7eDogdGhpcy5ub2RlQS5jeCwgeTogdGhpcy5ub2RlQS5jeX07XHJcbiAgICAgICAgICAgIHJldHVybiBcImhvcml6b250YWxcIiA9PSB0aGlzLmRpcmVjdGlvbiA/IGEueCA9IHRoaXMubm9kZVouY3ggPCBhLnggPyB0aGlzLm5vZGVBLnggOiB0aGlzLm5vZGVBLnggKyB0aGlzLm5vZGVBLndpZHRoIDogYS55ID0gdGhpcy5ub2RlWi5jeSA8IGEueSA/IHRoaXMubm9kZUEueSA6IHRoaXMubm9kZUEueSArIHRoaXMubm9kZUEuaGVpZ2h0LCBhXHJcbiAgICAgICAgfSwgdGhpcy5nZXRFbmRQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGEgPSB7eDogdGhpcy5ub2RlWi5jeCwgeTogdGhpcy5ub2RlWi5jeX07XHJcbiAgICAgICAgICAgIHJldHVybiBcImhvcml6b250YWxcIiA9PSB0aGlzLmRpcmVjdGlvbiA/IGEueCA9IHRoaXMubm9kZUEuY3ggPCBhLnggPyB0aGlzLm5vZGVaLnggOiB0aGlzLm5vZGVaLnggKyB0aGlzLm5vZGVaLndpZHRoIDogYS55ID0gdGhpcy5ub2RlQS5jeSA8IGEueSA/IHRoaXMubm9kZVoueSA6IHRoaXMubm9kZVoueSArIHRoaXMubm9kZVouaGVpZ2h0LCBhXHJcbiAgICAgICAgfSwgdGhpcy5nZXRQYXRoID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgdmFyIGIgPSB0aGlzLmdldFN0YXJ0UG9zaXRpb24oKSwgYyA9IHRoaXMuZ2V0RW5kUG9zaXRpb24oKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMubm9kZUEgPT09IHRoaXMubm9kZVopcmV0dXJuIFtiLCBjXTtcclxuICAgICAgICAgICAgdmFyIGQgPSBbXSwgZiA9IGUodGhpcy5ub2RlQSwgdGhpcy5ub2RlWiksIGcgPSAoZiAtIDEpICogdGhpcy5idW5kbGVHYXAsIGggPSB0aGlzLmJ1bmRsZUdhcCAqIGEgLSBnIC8gMiwgaSA9IHRoaXMub2Zmc2V0R2FwO1xyXG4gICAgICAgICAgICByZXR1cm4gXCJob3Jpem9udGFsXCIgPT0gdGhpcy5kaXJlY3Rpb24gPyAodGhpcy5ub2RlQS5jeCA+IHRoaXMubm9kZVouY3ggJiYgKGkgPSAtaSksIGQucHVzaCh7eDogYi54LCB5OiBiLnkgKyBofSksIGQucHVzaCh7eDogYi54ICsgaSwgeTogYi55ICsgaH0pLCBkLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgeDogYy54IC0gaSxcclxuICAgICAgICAgICAgICAgIHk6IGMueSArIGhcclxuICAgICAgICAgICAgfSksIGQucHVzaCh7eDogYy54LCB5OiBjLnkgKyBofSkpIDogKHRoaXMubm9kZUEuY3kgPiB0aGlzLm5vZGVaLmN5ICYmIChpID0gLWkpLCBkLnB1c2goe3g6IGIueCArIGgsIHk6IGIueX0pLCBkLnB1c2goe3g6IGIueCArIGgsIHk6IGIueSArIGl9KSwgZC5wdXNoKHtcclxuICAgICAgICAgICAgICAgIHg6IGMueCArIGgsXHJcbiAgICAgICAgICAgICAgICB5OiBjLnkgLSBpXHJcbiAgICAgICAgICAgIH0pLCBkLnB1c2goe3g6IGMueCArIGgsIHk6IGMueX0pKSwgZFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBpKGEsIGIsIGMpIHtcclxuICAgICAgICB0aGlzLmluaXRpYWxpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGkucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKVxyXG4gICAgICAgIH0sIHRoaXMuaW5pdGlhbGl6ZShhLCBiLCBjKSwgdGhpcy5wYWludFBhdGggPSBmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5ub2RlQSA9PT0gdGhpcy5ub2RlWilyZXR1cm4gdm9pZCB0aGlzLnBhaW50TG9vcChhKTtcclxuICAgICAgICAgICAgYS5iZWdpblBhdGgoKSwgYS5tb3ZlVG8oYlswXS54LCBiWzBdLnkpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBjID0gMTsgYyA8IGIubGVuZ3RoOyBjKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBkID0gYltjIC0gMV0sIGUgPSBiW2NdLCBmID0gKGQueCArIGUueCkgLyAyLCBnID0gKGQueSArIGUueSkgLyAyO1xyXG4gICAgICAgICAgICAgICAgZyArPSAoZS55IC0gZC55KSAvIDIsIGEuc3Ryb2tlU3R5bGUgPSBcInJnYmEoXCIgKyB0aGlzLnN0cm9rZUNvbG9yICsgXCIsXCIgKyB0aGlzLmFscGhhICsgXCIpXCIsIGEubGluZVdpZHRoID0gdGhpcy5saW5lV2lkdGgsIGEubW92ZVRvKGQueCwgZC5jeSksIGEucXVhZHJhdGljQ3VydmVUbyhmLCBnLCBlLngsIGUueSksIGEuc3Ryb2tlKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoYS5zdHJva2UoKSwgYS5jbG9zZVBhdGgoKSwgbnVsbCAhPSB0aGlzLmFycm93c1JhZGl1cykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGggPSBiW2IubGVuZ3RoIC0gMl0sIGkgPSBiW2IubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhaW50QXJyb3coYSwgaCwgaSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmLnByb3RvdHlwZSA9IG5ldyBhLkludGVyYWN0aXZlRWxlbWVudCwgZy5wcm90b3R5cGUgPSBuZXcgZiwgaC5wcm90b3R5cGUgPSBuZXcgZiwgaS5wcm90b3R5cGUgPSBuZXcgZiwgYS5MaW5rID0gZiwgYS5Gb2xkTGluayA9IGcsIGEuRmxleGlvbmFsTGluayA9IGgsIGEuQ3VydmVMaW5rID0gaVxyXG59KEpUb3BvKSwgZnVuY3Rpb24gKGEpIHtcclxuICAgIGZ1bmN0aW9uIGIoYykge1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uIChjKSB7XHJcbiAgICAgICAgICAgIGIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcywgbnVsbCksIHRoaXMuZWxlbWVudFR5cGUgPSBcImNvbnRhaW5lclwiLCB0aGlzLnpJbmRleCA9IGEuekluZGV4X0NvbnRhaW5lciwgdGhpcy53aWR0aCA9IDEwMCwgdGhpcy5oZWlnaHQgPSAxMDAsIHRoaXMuY2hpbGRzID0gW10sIHRoaXMuYWxwaGEgPSAuNSwgdGhpcy5kcmFnYWJsZSA9ICEwLCB0aGlzLmNoaWxkRHJhZ2JsZSA9ICEwLCB0aGlzLnZpc2libGUgPSAhMCwgdGhpcy5maWxsQ29sb3IgPSBcIjEwLDEwMCw4MFwiLCB0aGlzLmJvcmRlcldpZHRoID0gMCwgdGhpcy5ib3JkZXJDb2xvciA9IFwiMjU1LDI1NSwyNTVcIiwgdGhpcy5ib3JkZXJSYWRpdXMgPSBudWxsLCB0aGlzLmZvbnQgPSBcIjEycHggQ29uc29sYXNcIiwgdGhpcy5mb250Q29sb3IgPSBcIjI1NSwyNTUsMjU1XCIsIHRoaXMudGV4dCA9IGMsIHRoaXMudGV4dFBvc2l0aW9uID0gXCJCb3R0b21fQ2VudGVyXCIsIHRoaXMudGV4dE9mZnNldFggPSAwLCB0aGlzLnRleHRPZmZzZXRZID0gMCwgdGhpcy5sYXlvdXQgPSBuZXcgYS5sYXlvdXQuQXV0b0JvdW5kTGF5b3V0XHJcbiAgICAgICAgfSwgdGhpcy5pbml0aWFsaXplKGMpLCB0aGlzLmFkZCA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hpbGRzLnB1c2goYSksIGEuZHJhZ2FibGUgPSB0aGlzLmNoaWxkRHJhZ2JsZVxyXG4gICAgICAgIH0sIHRoaXMucmVtb3ZlID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgYiA9IDA7IGIgPCB0aGlzLmNoaWxkcy5sZW5ndGg7IGIrKylpZiAodGhpcy5jaGlsZHNbYl0gPT09IGEpIHtcclxuICAgICAgICAgICAgICAgIGEucGFyZW50Q29udGFpbmVyID0gbnVsbCwgdGhpcy5jaGlsZHMgPSB0aGlzLmNoaWxkcy5kZWwoYiksIGEubGFzdFBhcmVudENvbnRhaW5lciA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgdGhpcy5yZW1vdmVBbGwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hpbGRzID0gW11cclxuICAgICAgICB9LCB0aGlzLnNldExvY2F0aW9uID0gZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgdmFyIGMgPSBhIC0gdGhpcy54LCBkID0gYiAtIHRoaXMueTtcclxuICAgICAgICAgICAgdGhpcy54ID0gYSwgdGhpcy55ID0gYjtcclxuICAgICAgICAgICAgZm9yICh2YXIgZSA9IDA7IGUgPCB0aGlzLmNoaWxkcy5sZW5ndGg7IGUrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSB0aGlzLmNoaWxkc1tlXTtcclxuICAgICAgICAgICAgICAgIGYuc2V0TG9jYXRpb24oZi54ICsgYywgZi55ICsgZClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIHRoaXMuZG9MYXlvdXQgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICBhICYmIGEodGhpcywgdGhpcy5jaGlsZHMpXHJcbiAgICAgICAgfSwgdGhpcy5wYWludCA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZSAmJiAodGhpcy5sYXlvdXQgJiYgdGhpcy5sYXlvdXQodGhpcywgdGhpcy5jaGlsZHMpLCBhLmJlZ2luUGF0aCgpLCBhLmZpbGxTdHlsZSA9IFwicmdiYShcIiArIHRoaXMuZmlsbENvbG9yICsgXCIsXCIgKyB0aGlzLmFscGhhICsgXCIpXCIsIG51bGwgPT0gdGhpcy5ib3JkZXJSYWRpdXMgfHwgMCA9PSB0aGlzLmJvcmRlclJhZGl1cyA/IGEucmVjdCh0aGlzLngsIHRoaXMueSwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpIDogYS5KVG9wb1JvdW5kUmVjdCh0aGlzLngsIHRoaXMueSwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQsIHRoaXMuYm9yZGVyUmFkaXVzKSwgYS5maWxsKCksIGEuY2xvc2VQYXRoKCksIHRoaXMucGFpbnRUZXh0KGEpLCB0aGlzLnBhaW50Qm9yZGVyKGEpKVxyXG4gICAgICAgIH0sIHRoaXMucGFpbnRCb3JkZXIgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICBpZiAoMCAhPSB0aGlzLmJvcmRlcldpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICBhLmJlZ2luUGF0aCgpLCBhLmxpbmVXaWR0aCA9IHRoaXMuYm9yZGVyV2lkdGgsIGEuc3Ryb2tlU3R5bGUgPSBcInJnYmEoXCIgKyB0aGlzLmJvcmRlckNvbG9yICsgXCIsXCIgKyB0aGlzLmFscGhhICsgXCIpXCI7XHJcbiAgICAgICAgICAgICAgICB2YXIgYiA9IHRoaXMuYm9yZGVyV2lkdGggLyAyO1xyXG4gICAgICAgICAgICAgICAgbnVsbCA9PSB0aGlzLmJvcmRlclJhZGl1cyB8fCAwID09IHRoaXMuYm9yZGVyUmFkaXVzID8gYS5yZWN0KHRoaXMueCAtIGIsIHRoaXMueSAtIGIsIHRoaXMud2lkdGggKyB0aGlzLmJvcmRlcldpZHRoLCB0aGlzLmhlaWdodCArIHRoaXMuYm9yZGVyV2lkdGgpIDogYS5KVG9wb1JvdW5kUmVjdCh0aGlzLnggLSBiLCB0aGlzLnkgLSBiLCB0aGlzLndpZHRoICsgdGhpcy5ib3JkZXJXaWR0aCwgdGhpcy5oZWlnaHQgKyB0aGlzLmJvcmRlcldpZHRoLCB0aGlzLmJvcmRlclJhZGl1cyksIGEuc3Ryb2tlKCksIGEuY2xvc2VQYXRoKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIHRoaXMucGFpbnRUZXh0ID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgdmFyIGIgPSB0aGlzLnRleHQ7XHJcbiAgICAgICAgICAgIGlmIChudWxsICE9IGIgJiYgXCJcIiAhPSBiKSB7XHJcbiAgICAgICAgICAgICAgICBhLmJlZ2luUGF0aCgpLCBhLmZvbnQgPSB0aGlzLmZvbnQ7XHJcbiAgICAgICAgICAgICAgICB2YXIgYyA9IGEubWVhc3VyZVRleHQoYikud2lkdGgsIGQgPSBhLm1lYXN1cmVUZXh0KFwi55SwXCIpLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgYS5maWxsU3R5bGUgPSBcInJnYmEoXCIgKyB0aGlzLmZvbnRDb2xvciArIFwiLCBcIiArIHRoaXMuYWxwaGEgKyBcIilcIjtcclxuICAgICAgICAgICAgICAgIHZhciBlID0gdGhpcy5nZXRUZXh0UG9zdGlvbih0aGlzLnRleHRQb3NpdGlvbiwgYywgZCk7XHJcbiAgICAgICAgICAgICAgICBhLmZpbGxUZXh0KGIsIGUueCwgZS55KSwgYS5jbG9zZVBhdGgoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgdGhpcy5nZXRUZXh0UG9zdGlvbiA9IGZ1bmN0aW9uIChhLCBiLCBjKSB7XHJcbiAgICAgICAgICAgIHZhciBkID0gbnVsbDtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gYSB8fCBcIkJvdHRvbV9DZW50ZXJcIiA9PSBhID8gZCA9IHt4OiB0aGlzLnggKyB0aGlzLndpZHRoIC8gMiAtIGIgLyAyLCB5OiB0aGlzLnkgKyB0aGlzLmhlaWdodCArIGN9IDogXCJUb3BfQ2VudGVyXCIgPT0gYSA/IGQgPSB7XHJcbiAgICAgICAgICAgICAgICB4OiB0aGlzLnggKyB0aGlzLndpZHRoIC8gMiAtIGIgLyAyLFxyXG4gICAgICAgICAgICAgICAgeTogdGhpcy55IC0gYyAvIDJcclxuICAgICAgICAgICAgfSA6IFwiVG9wX1JpZ2h0XCIgPT0gYSA/IGQgPSB7eDogdGhpcy54ICsgdGhpcy53aWR0aCAtIGIsIHk6IHRoaXMueSAtIGMgLyAyfSA6IFwiVG9wX0xlZnRcIiA9PSBhID8gZCA9IHt4OiB0aGlzLngsIHk6IHRoaXMueSAtIGMgLyAyfSA6IFwiQm90dG9tX1JpZ2h0XCIgPT0gYSA/IGQgPSB7XHJcbiAgICAgICAgICAgICAgICB4OiB0aGlzLnggKyB0aGlzLndpZHRoIC0gYixcclxuICAgICAgICAgICAgICAgIHk6IHRoaXMueSArIHRoaXMuaGVpZ2h0ICsgY1xyXG4gICAgICAgICAgICB9IDogXCJCb3R0b21fTGVmdFwiID09IGEgPyBkID0ge3g6IHRoaXMueCwgeTogdGhpcy55ICsgdGhpcy5oZWlnaHQgKyBjfSA6IFwiTWlkZGxlX0NlbnRlclwiID09IGEgPyBkID0ge1xyXG4gICAgICAgICAgICAgICAgeDogdGhpcy54ICsgdGhpcy53aWR0aCAvIDIgLSBiIC8gMixcclxuICAgICAgICAgICAgICAgIHk6IHRoaXMueSArIHRoaXMuaGVpZ2h0IC8gMiArIGMgLyAyXHJcbiAgICAgICAgICAgIH0gOiBcIk1pZGRsZV9SaWdodFwiID09IGEgPyBkID0ge3g6IHRoaXMueCArIHRoaXMud2lkdGggLSBiLCB5OiB0aGlzLnkgKyB0aGlzLmhlaWdodCAvIDIgKyBjIC8gMn0gOiBcIk1pZGRsZV9MZWZ0XCIgPT0gYSAmJiAoZCA9IHtcclxuICAgICAgICAgICAgICAgIHg6IHRoaXMueCxcclxuICAgICAgICAgICAgICAgIHk6IHRoaXMueSArIHRoaXMuaGVpZ2h0IC8gMiArIGMgLyAyXHJcbiAgICAgICAgICAgIH0pLCBudWxsICE9IHRoaXMudGV4dE9mZnNldFggJiYgKGQueCArPSB0aGlzLnRleHRPZmZzZXRYKSwgbnVsbCAhPSB0aGlzLnRleHRPZmZzZXRZICYmIChkLnkgKz0gdGhpcy50ZXh0T2Zmc2V0WSksIGRcclxuICAgICAgICB9LCB0aGlzLnBhaW50TW91c2VvdmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIH0sIHRoaXMucGFpbnRTZWxlY3RlZCA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIGEuc2hhZG93Qmx1ciA9IDEwLCBhLnNoYWRvd0NvbG9yID0gXCJyZ2JhKDAsMCwwLDEpXCIsIGEuc2hhZG93T2Zmc2V0WCA9IDAsIGEuc2hhZG93T2Zmc2V0WSA9IDBcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYi5wcm90b3R5cGUgPSBuZXcgYS5JbnRlcmFjdGl2ZUVsZW1lbnQsIGEuQ29udGFpbmVyID0gYlxyXG59KEpUb3BvKSwgZnVuY3Rpb24gKGEpIHtcclxuICAgIGZ1bmN0aW9uIGIoYSkge1xyXG4gICAgICAgIHZhciBiID0gMCwgYyA9IDA7XHJcbiAgICAgICAgYS5mb3JFYWNoKGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIGIgKz0gYS5jeCwgYyArPSBhLmN5XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIGQgPSB7eDogYiAvIGEubGVuZ3RoLCB5OiBjIC8gYS5sZW5ndGh9O1xyXG4gICAgICAgIHJldHVybiBkXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYyhjLCBkKSB7XHJcbiAgICAgICAgbnVsbCA9PSBkICYmIChkID0ge30pO1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGUgPSBkLmN4LCBmID0gZC5jeSwgZyA9IGQubWluUmFkaXVzLCBoID0gZC5ub2RlRGlhbWV0ZXIsIGkgPSBkLmhTY2FsZSB8fCAxLCBqID0gZC52U2NhbGUgfHwgMTtcclxuICAgICAgICAgICAgZC5iZWdpbkFuZ2xlIHx8IDAsIGQuZW5kQW5nbGUgfHwgMiAqIE1hdGguUElcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG51bGwgPT0gZSB8fCBudWxsID09IGYpIHtcclxuICAgICAgICAgICAgdmFyIGsgPSBiKGMpO1xyXG4gICAgICAgICAgICBlID0gay54LCBmID0gay55XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBsID0gMCwgbSA9IFtdLCBuID0gW107XHJcbiAgICAgICAgYy5mb3JFYWNoKGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIG51bGwgPT0gZC5ub2RlRGlhbWV0ZXIgPyAoYS5kaWFtZXRlciAmJiAoaCA9IGEuZGlhbWV0ZXIpLCBoID0gYS5yYWRpdXMgPyAyICogYS5yYWRpdXMgOiBNYXRoLnNxcnQoMiAqIGEud2lkdGggKiBhLmhlaWdodCksIG4ucHVzaChoKSkgOiBuLnB1c2goaCksIGwgKz0gaFxyXG4gICAgICAgIH0pLCBjLmZvckVhY2goZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgdmFyIGMgPSBuW2JdIC8gbDtcclxuICAgICAgICAgICAgbS5wdXNoKE1hdGguUEkgKiBjKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciBvID0gKGMubGVuZ3RoLCBtWzBdICsgbVsxXSksIHAgPSBuWzBdIC8gMiArIG5bMV0gLyAyLCBxID0gcCAvIDIgLyBNYXRoLnNpbihvIC8gMik7XHJcbiAgICAgICAgbnVsbCAhPSBnICYmIGcgPiBxICYmIChxID0gZyk7XHJcbiAgICAgICAgdmFyIHIgPSBxICogaSwgcyA9IHEgKiBqLCB0ID0gZC5hbmltYXRlO1xyXG4gICAgICAgIGlmICh0KSB7XHJcbiAgICAgICAgICAgIHZhciB1ID0gdC50aW1lIHx8IDFlMywgdiA9IDA7XHJcbiAgICAgICAgICAgIGMuZm9yRWFjaChmdW5jdGlvbiAoYiwgYykge1xyXG4gICAgICAgICAgICAgICAgdiArPSAwID09IGMgPyBtW2NdIDogbVtjIC0gMV0gKyBtW2NdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGQgPSBlICsgTWF0aC5jb3ModikgKiByLCBnID0gZiArIE1hdGguc2luKHYpICogcztcclxuICAgICAgICAgICAgICAgIGEuQW5pbWF0ZS5zdGVwQnlTdGVwKGIsIHt4OiBkIC0gYi53aWR0aCAvIDIsIHk6IGcgLSBiLmhlaWdodCAvIDJ9LCB1KS5zdGFydCgpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIHYgPSAwO1xyXG4gICAgICAgICAgICBjLmZvckVhY2goZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgICAgIHYgKz0gMCA9PSBiID8gbVtiXSA6IG1bYiAtIDFdICsgbVtiXTtcclxuICAgICAgICAgICAgICAgIHZhciBjID0gZSArIE1hdGguY29zKHYpICogciwgZCA9IGYgKyBNYXRoLnNpbih2KSAqIHM7XHJcbiAgICAgICAgICAgICAgICBhLmN4ID0gYywgYS5jeSA9IGRcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHtjeDogZSwgY3k6IGYsIHJhZGl1czogciwgcmFkaXVzQTogciwgcmFkaXVzQjogc31cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBkKGEsIGIpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGMpIHtcclxuICAgICAgICAgICAgdmFyIGQgPSBjLmNoaWxkcztcclxuICAgICAgICAgICAgaWYgKCEoZC5sZW5ndGggPD0gMCkpZm9yICh2YXIgZSA9IGMuZ2V0Qm91bmQoKSwgZiA9IGRbMF0sIGcgPSAoZS53aWR0aCAtIGYud2lkdGgpIC8gYiwgaCA9IChlLmhlaWdodCAtIGYuaGVpZ2h0KSAvIGEsIGkgPSAoZC5sZW5ndGgsIDApLCBqID0gMDsgYSA+IGo7IGorKylmb3IgKHZhciBrID0gMDsgYiA+IGs7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGwgPSBkW2krK10sIG0gPSBlLmxlZnQgKyBnIC8gMiArIGsgKiBnLCBuID0gZS50b3AgKyBoIC8gMiArIGogKiBoO1xyXG4gICAgICAgICAgICAgICAgaWYgKGwuc2V0TG9jYXRpb24obSwgbiksIGkgPj0gZC5sZW5ndGgpcmV0dXJuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZShhLCBiKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGwgPT0gYSAmJiAoYSA9IDApLCBudWxsID09IGIgJiYgKGIgPSAwKSwgZnVuY3Rpb24gKGMpIHtcclxuICAgICAgICAgICAgdmFyIGQgPSBjLmNoaWxkcztcclxuICAgICAgICAgICAgaWYgKCEoZC5sZW5ndGggPD0gMCkpZm9yICh2YXIgZSA9IGMuZ2V0Qm91bmQoKSwgZiA9IGUubGVmdCwgZyA9IGUudG9wLCBoID0gMDsgaCA8IGQubGVuZ3RoOyBoKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBpID0gZFtoXTtcclxuICAgICAgICAgICAgICAgIGYgKyBpLndpZHRoID49IGUucmlnaHQgJiYgKGYgPSBlLmxlZnQsIGcgKz0gYiArIGkuaGVpZ2h0KSwgaS5zZXRMb2NhdGlvbihmLCBnKSwgZiArPSBhICsgaS53aWR0aFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGYoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgIGlmIChiLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGMgPSAxZTcsIGQgPSAtMWU3LCBlID0gMWU3LCBmID0gLTFlNywgZyA9IGQgLSBjLCBoID0gZiAtIGUsIGkgPSAwOyBpIDwgYi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBqID0gYltpXTtcclxuICAgICAgICAgICAgICAgICAgICBqLnggPD0gYyAmJiAoYyA9IGoueCksIGoueCA+PSBkICYmIChkID0gai54KSwgai55IDw9IGUgJiYgKGUgPSBqLnkpLCBqLnkgPj0gZiAmJiAoZiA9IGoueSksIGcgPSBkIC0gYyArIGoud2lkdGgsIGggPSBmIC0gZSArIGouaGVpZ2h0XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBhLnggPSBjLCBhLnkgPSBlLCBhLndpZHRoID0gZywgYS5oZWlnaHQgPSBoXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZyhiKSB7XHJcbiAgICAgICAgdmFyIGMgPSBbXSwgZCA9IGIuZmlsdGVyKGZ1bmN0aW9uIChiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBiIGluc3RhbmNlb2YgYS5MaW5rID8gITAgOiAoYy5wdXNoKGIpLCAhMSlcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gYiA9IGMuZmlsdGVyKGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGIgPSAwOyBiIDwgZC5sZW5ndGg7IGIrKylpZiAoZFtiXS5ub2RlWiA9PT0gYSlyZXR1cm4gITE7XHJcbiAgICAgICAgICAgIHJldHVybiAhMFxyXG4gICAgICAgIH0pLCBiID0gYi5maWx0ZXIoZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgYiA9IDA7IGIgPCBkLmxlbmd0aDsgYisrKWlmIChkW2JdLm5vZGVBID09PSBhKXJldHVybiAhMDtcclxuICAgICAgICAgICAgcmV0dXJuICExXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBoKGEpIHtcclxuICAgICAgICB2YXIgYiA9IDAsIGMgPSAwO1xyXG4gICAgICAgIHJldHVybiBhLmZvckVhY2goZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgYiArPSBhLndpZHRoLCBjICs9IGEuaGVpZ2h0XHJcbiAgICAgICAgfSksIHt3aWR0aDogYiAvIGEubGVuZ3RoLCBoZWlnaHQ6IGMgLyBhLmxlbmd0aH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBpKGEsIGIsIGMsIGQpIHtcclxuICAgICAgICBiLnggKz0gYywgYi55ICs9IGQ7XHJcbiAgICAgICAgZm9yICh2YXIgZSA9IHEoYSwgYiksIGYgPSAwOyBmIDwgZS5sZW5ndGg7IGYrKylpKGEsIGVbZl0sIGMsIGQpXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaihhLCBiKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gYyhiLCBlKSB7XHJcbiAgICAgICAgICAgIHZhciBmID0gcShhLCBiKTtcclxuICAgICAgICAgICAgbnVsbCA9PSBkW2VdICYmIChkW2VdID0ge30sIGRbZV0ubm9kZXMgPSBbXSwgZFtlXS5jaGlsZHMgPSBbXSksIGRbZV0ubm9kZXMucHVzaChiKSwgZFtlXS5jaGlsZHMucHVzaChmKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgZyA9IDA7IGcgPCBmLmxlbmd0aDsgZysrKWMoZltnXSwgZSArIDEpLCBmW2ddLnBhcmVudCA9IGJcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBkID0gW107XHJcbiAgICAgICAgcmV0dXJuIGMoYiwgMCksIGRcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBrKGIsIGMsIGQpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZnVuY3Rpb24gZihmLCBnKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBoID0gYS5sYXlvdXQuZ2V0VHJlZURlZXAoZiwgZyksIGsgPSBqKGYsIGcpLCBsID0ga1tcIlwiICsgaF0ubm9kZXMsIG0gPSAwOyBtIDwgbC5sZW5ndGg7IG0rKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuID0gbFttXSwgbyA9IChtICsgMSkgKiAoYyArIDEwKSwgcCA9IGggKiBkO1xyXG4gICAgICAgICAgICAgICAgICAgIFwiZG93blwiID09IGIgfHwgKFwidXBcIiA9PSBiID8gcCA9IC1wIDogXCJsZWZ0XCIgPT0gYiA/IChvID0gLWggKiBkLCBwID0gKG0gKyAxKSAqIChjICsgMTApKSA6IFwicmlnaHRcIiA9PSBiICYmIChvID0gaCAqIGQsIHAgPSAobSArIDEpICogKGMgKyAxMCkpKSwgbi5zZXRMb2NhdGlvbihvLCBwKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgcSA9IGggLSAxOyBxID49IDA7IHEtLSlmb3IgKHZhciByID0ga1tcIlwiICsgcV0ubm9kZXMsIHMgPSBrW1wiXCIgKyBxXS5jaGlsZHMsIG0gPSAwOyBtIDwgci5sZW5ndGg7IG0rKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0ID0gclttXSwgdSA9IHNbbV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFwiZG93blwiID09IGIgPyB0LnkgPSBxICogZCA6IFwidXBcIiA9PSBiID8gdC55ID0gLXEgKiBkIDogXCJsZWZ0XCIgPT0gYiA/IHQueCA9IC1xICogZCA6IFwicmlnaHRcIiA9PSBiICYmICh0LnggPSBxICogZCksIHUubGVuZ3RoID4gMCA/IFwiZG93blwiID09IGIgfHwgXCJ1cFwiID09IGIgPyB0LnggPSAodVswXS54ICsgdVt1Lmxlbmd0aCAtIDFdLngpIC8gMiA6IChcImxlZnRcIiA9PSBiIHx8IFwicmlnaHRcIiA9PSBiKSAmJiAodC55ID0gKHVbMF0ueSArIHVbdS5sZW5ndGggLSAxXS55KSAvIDIpIDogbSA+IDAgJiYgKFwiZG93blwiID09IGIgfHwgXCJ1cFwiID09IGIgPyB0LnggPSByW20gLSAxXS54ICsgclttIC0gMV0ud2lkdGggKyBjIDogKFwibGVmdFwiID09IGIgfHwgXCJyaWdodFwiID09IGIpICYmICh0LnkgPSByW20gLSAxXS55ICsgclttIC0gMV0uaGVpZ2h0ICsgYykpLCBtID4gMClpZiAoXCJkb3duXCIgPT0gYiB8fCBcInVwXCIgPT0gYikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodC54IDwgclttIC0gMV0ueCArIHJbbSAtIDFdLndpZHRoKWZvciAodmFyIHYgPSByW20gLSAxXS54ICsgclttIC0gMV0ud2lkdGggKyBjLCB3ID0gTWF0aC5hYnModiAtIHQueCksIHggPSBtOyB4IDwgci5sZW5ndGg7IHgrKylpKGUuY2hpbGRzLCByW3hdLCB3LCAwKVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoKFwibGVmdFwiID09IGIgfHwgXCJyaWdodFwiID09IGIpICYmIHQueSA8IHJbbSAtIDFdLnkgKyByW20gLSAxXS5oZWlnaHQpZm9yICh2YXIgeSA9IHJbbSAtIDFdLnkgKyByW20gLSAxXS5oZWlnaHQgKyBjLCB6ID0gTWF0aC5hYnMoeSAtIHQueSksIHggPSBtOyB4IDwgci5sZW5ndGg7IHgrKylpKGUuY2hpbGRzLCByW3hdLCAwLCB6KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZyA9IG51bGw7XHJcbiAgICAgICAgICAgIG51bGwgPT0gYyAmJiAoZyA9IGgoZS5jaGlsZHMpLCBjID0gZy53aWR0aCwgKFwibGVmdFwiID09IGIgfHwgXCJyaWdodFwiID09IGIpICYmIChjID0gZy53aWR0aCArIDEwKSksIG51bGwgPT0gZCAmJiAobnVsbCA9PSBnICYmIChnID0gaChlLmNoaWxkcykpLCBkID0gMiAqIGcuaGVpZ2h0KSwgbnVsbCA9PSBiICYmIChiID0gXCJkb3duXCIpO1xyXG4gICAgICAgICAgICB2YXIgayA9IGEubGF5b3V0LmdldFJvb3ROb2RlcyhlLmNoaWxkcyk7XHJcbiAgICAgICAgICAgIGlmIChrLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGYoZS5jaGlsZHMsIGtbMF0pO1xyXG4gICAgICAgICAgICAgICAgdmFyIGwgPSBhLnV0aWwuZ2V0RWxlbWVudHNCb3VuZChlLmNoaWxkcyksIG0gPSBlLmdldENlbnRlckxvY2F0aW9uKCksIG4gPSBtLnggLSAobC5sZWZ0ICsgbC5yaWdodCkgLyAyLCBvID0gbS55IC0gKGwudG9wICsgbC5ib3R0b20pIC8gMjtcclxuICAgICAgICAgICAgICAgIGUuY2hpbGRzLmZvckVhY2goZnVuY3Rpb24gKGIpIHtcclxuICAgICAgICAgICAgICAgICAgICBiIGluc3RhbmNlb2YgYS5Ob2RlICYmIChiLnggKz0gbiwgYi55ICs9IG8pXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGwoYikge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYykge1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBkKGEsIGMsIGUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBmID0gcShhLCBjKTtcclxuICAgICAgICAgICAgICAgIGlmICgwICE9IGYubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbnVsbCA9PSBlICYmIChlID0gYik7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGcgPSAyICogTWF0aC5QSSAvIGYubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgIGYuZm9yRWFjaChmdW5jdGlvbiAoYiwgZikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaCA9IGMueCArIGUgKiBNYXRoLmNvcyhnICogZiksIGkgPSBjLnkgKyBlICogTWF0aC5zaW4oZyAqIGYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiLnNldExvY2F0aW9uKGgsIGkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaiA9IGUgLyAyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkKGEsIGIsIGopXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGUgPSBhLmxheW91dC5nZXRSb290Tm9kZXMoYy5jaGlsZHMpO1xyXG4gICAgICAgICAgICBpZiAoZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBkKGMuY2hpbGRzLCBlWzBdKTtcclxuICAgICAgICAgICAgICAgIHZhciBmID0gYS51dGlsLmdldEVsZW1lbnRzQm91bmQoYy5jaGlsZHMpLCBnID0gYy5nZXRDZW50ZXJMb2NhdGlvbigpLCBoID0gZy54IC0gKGYubGVmdCArIGYucmlnaHQpIC8gMiwgaSA9IGcueSAtIChmLnRvcCArIGYuYm90dG9tKSAvIDI7XHJcbiAgICAgICAgICAgICAgICBjLmNoaWxkcy5mb3JFYWNoKGZ1bmN0aW9uIChiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYiBpbnN0YW5jZW9mIGEuTm9kZSAmJiAoYi54ICs9IGgsIGIueSArPSBpKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBtKGEsIGIsIGMsIGQsIGUsIGYpIHtcclxuICAgICAgICBmb3IgKHZhciBnID0gW10sIGggPSAwOyBjID4gaDsgaCsrKWZvciAodmFyIGkgPSAwOyBkID4gaTsgaSsrKWcucHVzaCh7eDogYSArIGkgKiBlLCB5OiBiICsgaCAqIGZ9KTtcclxuICAgICAgICByZXR1cm4gZ1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG4oYSwgYiwgYywgZCwgZSwgZikge1xyXG4gICAgICAgIHZhciBnID0gZSA/IGUgOiAwLCBoID0gZiA/IGYgOiAyICogTWF0aC5QSSwgaSA9IGggLSBnLCBqID0gaSAvIGMsIGsgPSBbXTtcclxuICAgICAgICBnICs9IGogLyAyO1xyXG4gICAgICAgIGZvciAodmFyIGwgPSBnOyBoID49IGw7IGwgKz0gaikge1xyXG4gICAgICAgICAgICB2YXIgbSA9IGEgKyBNYXRoLmNvcyhsKSAqIGQsIG4gPSBiICsgTWF0aC5zaW4obCkgKiBkO1xyXG4gICAgICAgICAgICBrLnB1c2goe3g6IG0sIHk6IG59KVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ga1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG8oYSwgYiwgYywgZCwgZSwgZikge1xyXG4gICAgICAgIHZhciBnID0gZiB8fCBcImJvdHRvbVwiLCBoID0gW107XHJcbiAgICAgICAgaWYgKFwiYm90dG9tXCIgPT0gZylmb3IgKHZhciBpID0gYSAtIGMgLyAyICogZCArIGQgLyAyLCBqID0gMDsgYyA+PSBqOyBqKyspaC5wdXNoKHtcclxuICAgICAgICAgICAgeDogaSArIGogKiBkLFxyXG4gICAgICAgICAgICB5OiBiICsgZVxyXG4gICAgICAgIH0pOyBlbHNlIGlmIChcInRvcFwiID09IGcpZm9yICh2YXIgaSA9IGEgLSBjIC8gMiAqIGQgKyBkIC8gMiwgaiA9IDA7IGMgPj0gajsgaisrKWgucHVzaCh7XHJcbiAgICAgICAgICAgIHg6IGkgKyBqICogZCxcclxuICAgICAgICAgICAgeTogYiAtIGVcclxuICAgICAgICB9KTsgZWxzZSBpZiAoXCJyaWdodFwiID09IGcpZm9yICh2YXIgaSA9IGIgLSBjIC8gMiAqIGQgKyBkIC8gMiwgaiA9IDA7IGMgPj0gajsgaisrKWgucHVzaCh7XHJcbiAgICAgICAgICAgIHg6IGEgKyBlLFxyXG4gICAgICAgICAgICB5OiBpICsgaiAqIGRcclxuICAgICAgICB9KTsgZWxzZSBpZiAoXCJsZWZ0XCIgPT0gZylmb3IgKHZhciBpID0gYiAtIGMgLyAyICogZCArIGQgLyAyLCBqID0gMDsgYyA+PSBqOyBqKyspaC5wdXNoKHt4OiBhIC0gZSwgeTogaSArIGogKiBkfSk7XHJcbiAgICAgICAgcmV0dXJuIGhcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBtKGEsIGIsIGMsIGQsIGUsIGYpIHtcclxuICAgICAgICBmb3IgKHZhciBnID0gW10sIGggPSAwOyBjID4gaDsgaCsrKWZvciAodmFyIGkgPSAwOyBkID4gaTsgaSsrKWcucHVzaCh7eDogYSArIGkgKiBlLCB5OiBiICsgaCAqIGZ9KTtcclxuICAgICAgICByZXR1cm4gZ1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHAoYSwgYikge1xyXG4gICAgICAgIGlmIChhLmxheW91dCkge1xyXG4gICAgICAgICAgICB2YXIgYyA9IGEubGF5b3V0LCBkID0gYy50eXBlLCBlID0gbnVsbDtcclxuICAgICAgICAgICAgaWYgKFwiY2lyY2xlXCIgPT0gZCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSBjLnJhZGl1cyB8fCBNYXRoLm1heChhLndpZHRoLCBhLmhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICBlID0gbihhLmN4LCBhLmN5LCBiLmxlbmd0aCwgZiwgYS5sYXlvdXQuYmVnaW5BbmdsZSwgYS5sYXlvdXQuZW5kQW5nbGUpXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXCJ0cmVlXCIgPT0gZCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGcgPSBjLndpZHRoIHx8IDUwLCBoID0gYy5oZWlnaHQgfHwgNTAsIGkgPSBjLmRpcmVjdGlvbjtcclxuICAgICAgICAgICAgICAgIGUgPSBvKGEuY3gsIGEuY3ksIGIubGVuZ3RoLCBnLCBoLCBpKVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKFwiZ3JpZFwiICE9IGQpcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgZSA9IG0oYS54LCBhLnksIGMucm93cywgYy5jb2xzLCBjLmhvcml6b250YWwgfHwgMCwgYy52ZXJ0aWNhbCB8fCAwKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgYi5sZW5ndGg7IGorKyliW2pdLnNldENlbnRlckxvY2F0aW9uKGVbal0ueCwgZVtqXS55KVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBxKGIsIGMpIHtcclxuICAgICAgICBmb3IgKHZhciBkID0gW10sIGUgPSAwOyBlIDwgYi5sZW5ndGg7IGUrKyliW2VdIGluc3RhbmNlb2YgYS5MaW5rICYmIGJbZV0ubm9kZUEgPT09IGMgJiYgZC5wdXNoKGJbZV0ubm9kZVopO1xyXG4gICAgICAgIHJldHVybiBkXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcihhLCBiLCBjKSB7XHJcbiAgICAgICAgdmFyIGQgPSBxKGEuY2hpbGRzLCBiKTtcclxuICAgICAgICBpZiAoMCA9PSBkLmxlbmd0aClyZXR1cm4gbnVsbDtcclxuICAgICAgICBpZiAocChiLCBkKSwgMSA9PSBjKWZvciAodmFyIGUgPSAwOyBlIDwgZC5sZW5ndGg7IGUrKylyKGEsIGRbZV0sIGMpO1xyXG4gICAgICAgIHJldHVybiBudWxsXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcyhiLCBjKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZChhLCBiKSB7XHJcbiAgICAgICAgICAgIHZhciBjID0gYS54IC0gYi54LCBkID0gYS55IC0gYi55O1xyXG4gICAgICAgICAgICBpICs9IGMgKiBmLCBqICs9IGQgKiBmLCBpICo9IGcsIGogKj0gZywgaiArPSBoLCBiLnggKz0gaSwgYi55ICs9IGpcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGUoKSB7XHJcbiAgICAgICAgICAgIGlmICghKCsrayA+IDE1MCkpIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGEgPSAwOyBhIDwgbC5sZW5ndGg7IGErKylsW2FdICE9IGIgJiYgZChiLCBsW2FdLCBsKTtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZSwgMWUzIC8gMjQpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBmID0gLjAxLCBnID0gLjk1LCBoID0gLTUsIGkgPSAwLCBqID0gMCwgayA9IDAsIGwgPSBjLmdldEVsZW1lbnRzQnlDbGFzcyhhLk5vZGUpO1xyXG4gICAgICAgIGUoKVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHQoYSwgYikge1xyXG4gICAgICAgIGZ1bmN0aW9uIGMoYSwgYiwgZSkge1xyXG4gICAgICAgICAgICB2YXIgZiA9IHEoYSwgYik7XHJcbiAgICAgICAgICAgIGUgPiBkICYmIChkID0gZSk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGcgPSAwOyBnIDwgZi5sZW5ndGg7IGcrKyljKGEsIGZbZ10sIGUgKyAxKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGQgPSAwO1xyXG4gICAgICAgIHJldHVybiBjKGEsIGIsIDApLCBkXHJcbiAgICB9XHJcblxyXG4gICAgYS5sYXlvdXQgPSBhLkxheW91dCA9IHtcclxuICAgICAgICBsYXlvdXROb2RlOiByLFxyXG4gICAgICAgIGdldE5vZGVDaGlsZHM6IHEsXHJcbiAgICAgICAgYWRqdXN0UG9zaXRpb246IHAsXHJcbiAgICAgICAgc3ByaW5nTGF5b3V0OiBzLFxyXG4gICAgICAgIGdldFRyZWVEZWVwOiB0LFxyXG4gICAgICAgIGdldFJvb3ROb2RlczogZyxcclxuICAgICAgICBHcmlkTGF5b3V0OiBkLFxyXG4gICAgICAgIEZsb3dMYXlvdXQ6IGUsXHJcbiAgICAgICAgQXV0b0JvdW5kTGF5b3V0OiBmLFxyXG4gICAgICAgIENpcmNsZUxheW91dDogbCxcclxuICAgICAgICBUcmVlTGF5b3V0OiBrLFxyXG4gICAgICAgIGdldE5vZGVzQ2VudGVyOiBiLFxyXG4gICAgICAgIGNpcmNsZUxheW91dE5vZGVzOiBjXHJcbiAgICB9XHJcbn0oSlRvcG8pLCBmdW5jdGlvbiAoYSkge1xyXG4gICAgZnVuY3Rpb24gYigpIHtcclxuICAgICAgICB2YXIgYiA9IG5ldyBhLkNpcmNsZU5vZGU7XHJcbiAgICAgICAgcmV0dXJuIGIucmFkaXVzID0gMTUwLCBiLmNvbG9ycyA9IFtcIiMzNjY2QjBcIiwgXCIjMkNBOEUwXCIsIFwiIzc3RDFGNlwiXSwgYi5kYXRhcyA9IFsuMywgLjMsIC40XSwgYi50aXRsZXMgPSBbXCJBXCIsIFwiQlwiLCBcIkNcIl0sIGIucGFpbnQgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICB2YXIgYyA9IDIgKiBiLnJhZGl1cywgZCA9IDIgKiBiLnJhZGl1cztcclxuICAgICAgICAgICAgYi53aWR0aCA9IGMsIGIuaGVpZ2h0ID0gZDtcclxuICAgICAgICAgICAgZm9yICh2YXIgZSA9IDAsIGYgPSAwOyBmIDwgdGhpcy5kYXRhcy5sZW5ndGg7IGYrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGcgPSB0aGlzLmRhdGFzW2ZdICogTWF0aC5QSSAqIDI7XHJcbiAgICAgICAgICAgICAgICBhLnNhdmUoKSwgYS5iZWdpblBhdGgoKSwgYS5maWxsU3R5bGUgPSBiLmNvbG9yc1tmXSwgYS5tb3ZlVG8oMCwgMCksIGEuYXJjKDAsIDAsIHRoaXMucmFkaXVzLCBlLCBlICsgZywgITEpLCBhLmZpbGwoKSwgYS5jbG9zZVBhdGgoKSwgYS5yZXN0b3JlKCksIGEuYmVnaW5QYXRoKCksIGEuZm9udCA9IHRoaXMuZm9udDtcclxuICAgICAgICAgICAgICAgIHZhciBoID0gdGhpcy50aXRsZXNbZl0gKyBcIjogXCIgKyAoMTAwICogdGhpcy5kYXRhc1tmXSkudG9GaXhlZCgyKSArIFwiJVwiLCBpID0gYS5tZWFzdXJlVGV4dChoKS53aWR0aCwgaiA9IChhLm1lYXN1cmVUZXh0KFwi55SwXCIpLndpZHRoLCAoZSArIGUgKyBnKSAvIDIpLCBrID0gdGhpcy5yYWRpdXMgKiBNYXRoLmNvcyhqKSwgbCA9IHRoaXMucmFkaXVzICogTWF0aC5zaW4oaik7XHJcbiAgICAgICAgICAgICAgICBqID4gTWF0aC5QSSAvIDIgJiYgaiA8PSBNYXRoLlBJID8gayAtPSBpIDogaiA+IE1hdGguUEkgJiYgaiA8IDIgKiBNYXRoLlBJICogMyAvIDQgPyBrIC09IGkgOiBqID4gMiAqIE1hdGguUEkgKiAuNzUsIGEuZmlsbFN0eWxlID0gXCIjRkZGRkZGXCIsIGEuZmlsbFRleHQoaCwgaywgbCksIGEubW92ZVRvKHRoaXMucmFkaXVzICogTWF0aC5jb3MoaiksIHRoaXMucmFkaXVzICogTWF0aC5zaW4oaikpLCBqID4gTWF0aC5QSSAvIDIgJiYgaiA8IDIgKiBNYXRoLlBJICogMyAvIDQgJiYgKGsgLT0gaSksIGogPiBNYXRoLlBJLCBhLmZpbGwoKSwgYS5zdHJva2UoKSwgYS5jbG9zZVBhdGgoKSwgZSArPSBnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBiXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYygpIHtcclxuICAgICAgICB2YXIgYiA9IG5ldyBhLk5vZGU7XHJcbiAgICAgICAgcmV0dXJuIGIuc2hvd1NlbGVjdGVkID0gITEsIGIud2lkdGggPSAyNTAsIGIuaGVpZ2h0ID0gMTgwLCBiLmNvbG9ycyA9IFtcIiMzNjY2QjBcIiwgXCIjMkNBOEUwXCIsIFwiIzc3RDFGNlwiXSwgYi5kYXRhcyA9IFsuMywgLjMsIC40XSwgYi50aXRsZXMgPSBbXCJBXCIsIFwiQlwiLCBcIkNcIl0sIGIucGFpbnQgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICB2YXIgYyA9IDMsIGQgPSAodGhpcy53aWR0aCAtIGMpIC8gdGhpcy5kYXRhcy5sZW5ndGg7XHJcbiAgICAgICAgICAgIGEuc2F2ZSgpLCBhLmJlZ2luUGF0aCgpLCBhLmZpbGxTdHlsZSA9IFwiI0ZGRkZGRlwiLCBhLnN0cm9rZVN0eWxlID0gXCIjRkZGRkZGXCIsIGEubW92ZVRvKC10aGlzLndpZHRoIC8gMiAtIDEsIC10aGlzLmhlaWdodCAvIDIpLCBhLmxpbmVUbygtdGhpcy53aWR0aCAvIDIgLSAxLCB0aGlzLmhlaWdodCAvIDIgKyAzKSwgYS5saW5lVG8odGhpcy53aWR0aCAvIDIgKyBjICsgMSwgdGhpcy5oZWlnaHQgLyAyICsgMyksIGEuc3Ryb2tlKCksIGEuY2xvc2VQYXRoKCksIGEucmVzdG9yZSgpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBlID0gMDsgZSA8IHRoaXMuZGF0YXMubGVuZ3RoOyBlKyspIHtcclxuICAgICAgICAgICAgICAgIGEuc2F2ZSgpLCBhLmJlZ2luUGF0aCgpLCBhLmZpbGxTdHlsZSA9IGIuY29sb3JzW2VdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSB0aGlzLmRhdGFzW2VdLCBnID0gZSAqIChkICsgYykgLSB0aGlzLndpZHRoIC8gMiwgaCA9IHRoaXMuaGVpZ2h0IC0gZiAtIHRoaXMuaGVpZ2h0IC8gMjtcclxuICAgICAgICAgICAgICAgIGEuZmlsbFJlY3QoZywgaCwgZCwgZik7XHJcbiAgICAgICAgICAgICAgICB2YXIgaSA9IFwiXCIgKyBwYXJzZUludCh0aGlzLmRhdGFzW2VdKSwgaiA9IGEubWVhc3VyZVRleHQoaSkud2lkdGgsIGsgPSBhLm1lYXN1cmVUZXh0KFwi55SwXCIpLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgYS5maWxsU3R5bGUgPSBcIiNGRkZGRkZcIiwgYS5maWxsVGV4dChpLCBnICsgKGQgLSBqKSAvIDIsIGggLSBrKSwgYS5maWxsVGV4dCh0aGlzLnRpdGxlc1tlXSwgZyArIChkIC0gaikgLyAyLCB0aGlzLmhlaWdodCAvIDIgKyBrKSwgYS5maWxsKCksIGEuY2xvc2VQYXRoKCksIGEucmVzdG9yZSgpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBiXHJcbiAgICB9XHJcblxyXG4gICAgYS5CYXJDaGFydE5vZGUgPSBjLCBhLlBpZUNoYXJ0Tm9kZSA9IGJcclxufShKVG9wbyksIGZ1bmN0aW9uIChhKSB7XHJcbiAgICBmdW5jdGlvbiBiKGIsIGMpIHtcclxuICAgICAgICB2YXIgZCwgZSA9IG51bGw7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc3RvcDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGQgPyAod2luZG93LmNsZWFySW50ZXJ2YWwoZCksIGUgJiYgZS5wdWJsaXNoKFwic3RvcFwiKSwgdGhpcykgOiB0aGlzXHJcbiAgICAgICAgICAgIH0sIHN0YXJ0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYSA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBiLmNhbGwoYSlcclxuICAgICAgICAgICAgICAgIH0sIGMpLCB0aGlzXHJcbiAgICAgICAgICAgIH0sIG9uU3RvcDogZnVuY3Rpb24gKGIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09IGUgJiYgKGUgPSBuZXcgYS51dGlsLk1lc3NhZ2VCdXMpLCBlLnN1YnNjcmliZShcInN0b3BcIiwgYiksIHRoaXNcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjKGEsIGMpIHtcclxuICAgICAgICBjID0gYyB8fCB7fTtcclxuICAgICAgICB2YXIgZCA9IGMuZ3Jhdml0eSB8fCAuMSwgZSA9IGMuZHggfHwgMCwgZiA9IGMuZHkgfHwgNSwgZyA9IGMuc3RvcCwgaCA9IGMuaW50ZXJ2YWwgfHwgMzAsIGkgPSBuZXcgYihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGcgJiYgZygpID8gKGYgPSAuNSwgdGhpcy5zdG9wKCkpIDogKGYgKz0gZCwgYS5zZXRMb2NhdGlvbihhLnggKyBlLCBhLnkgKyBmKSlcclxuICAgICAgICB9LCBoKTtcclxuICAgICAgICByZXR1cm4gaVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGQoYSwgYywgZCwgZSwgZikge1xyXG4gICAgICAgIHZhciBnID0gMWUzIC8gMjQsIGggPSB7fTtcclxuICAgICAgICBmb3IgKHZhciBpIGluIGMpIHtcclxuICAgICAgICAgICAgdmFyIGogPSBjW2ldLCBrID0gaiAtIGFbaV07XHJcbiAgICAgICAgICAgIGhbaV0gPSB7XHJcbiAgICAgICAgICAgICAgICBvbGRWYWx1ZTogYVtpXSwgdGFyZ2V0VmFsdWU6IGosIHN0ZXA6IGsgLyBkICogZywgaXNEb25lOiBmdW5jdGlvbiAoYikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjID0gdGhpcy5zdGVwID4gMCAmJiBhW2JdID49IHRoaXMudGFyZ2V0VmFsdWUgfHwgdGhpcy5zdGVwIDwgMCAmJiBhW2JdIDw9IHRoaXMudGFyZ2V0VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbCA9IG5ldyBiKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGIgPSAhMDtcclxuICAgICAgICAgICAgZm9yICh2YXIgZCBpbiBjKWhbZF0uaXNEb25lKGQpIHx8IChhW2RdICs9IGhbZF0uc3RlcCwgYiA9ICExKTtcclxuICAgICAgICAgICAgaWYgKGIpIHtcclxuICAgICAgICAgICAgICAgIGlmICghZSlyZXR1cm4gdGhpcy5zdG9wKCk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBkIGluIGMpaWYgKGYpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZyA9IGhbZF0udGFyZ2V0VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaFtkXS50YXJnZXRWYWx1ZSA9IGhbZF0ub2xkVmFsdWUsIGhbZF0ub2xkVmFsdWUgPSBnLCBoW2RdLnN0ZXAgPSAtaFtkXS5zdGVwXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgYVtkXSA9IGhbZF0ub2xkVmFsdWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpc1xyXG4gICAgICAgIH0sIGcpO1xyXG4gICAgICAgIHJldHVybiBsXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZShhKSB7XHJcbiAgICAgICAgbnVsbCA9PSBhICYmIChhID0ge30pO1xyXG4gICAgICAgIHZhciBiID0gYS5zcHJpbmcgfHwgLjEsIGMgPSBhLmZyaWN0aW9uIHx8IC44LCBkID0gYS5ncml2aXR5IHx8IDAsIGUgPSAoYS53aW5kIHx8IDAsIGEubWluTGVuZ3RoIHx8IDApO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGl0ZW1zOiBbXSwgdGltZXI6IG51bGwsIGlzUGF1c2U6ICExLCBhZGROb2RlOiBmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgICAgICAgICAgdmFyIGMgPSB7bm9kZTogYSwgdGFyZ2V0OiBiLCB2eDogMCwgdnk6IDB9O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXMucHVzaChjKSwgdGhpc1xyXG4gICAgICAgICAgICB9LCBwbGF5OiBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdG9wKCksIGEgPSBudWxsID09IGEgPyAxZTMgLyAyNCA6IGE7XHJcbiAgICAgICAgICAgICAgICB2YXIgYiA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGIubmV4dEZyYW1lKClcclxuICAgICAgICAgICAgICAgIH0sIGEpXHJcbiAgICAgICAgICAgIH0sIHN0b3A6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIG51bGwgIT0gdGhpcy50aW1lciAmJiB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKVxyXG4gICAgICAgICAgICB9LCBuZXh0RnJhbWU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGEgPSAwOyBhIDwgdGhpcy5pdGVtcy5sZW5ndGg7IGErKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmID0gdGhpcy5pdGVtc1thXSwgZyA9IGYubm9kZSwgaCA9IGYudGFyZ2V0LCBpID0gZi52eCwgaiA9IGYudnksIGsgPSBoLnggLSBnLngsIGwgPSBoLnkgLSBnLnksIG0gPSBNYXRoLmF0YW4yKGwsIGspO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgwICE9IGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBoLnggLSBNYXRoLmNvcyhtKSAqIGUsIG8gPSBoLnkgLSBNYXRoLnNpbihtKSAqIGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gKG4gLSBnLngpICogYiwgaiArPSAobyAtIGcueSkgKiBiXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGkgKz0gayAqIGIsIGogKz0gbCAqIGI7XHJcbiAgICAgICAgICAgICAgICAgICAgaSAqPSBjLCBqICo9IGMsIGogKz0gZCwgZy54ICs9IGksIGcueSArPSBqLCBmLnZ4ID0gaSwgZi52eSA9IGpcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBmKGEsIGIpIHtcclxuICAgICAgICBmdW5jdGlvbiBjKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZSA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvID8gdm9pZCBmLnN0b3AoKSA6IChhLnJvdGF0ZSArPSBnIHx8IC4yLCB2b2lkKGEucm90YXRlID4gMiAqIE1hdGguUEkgJiYgKGEucm90YXRlID0gMCkpKVxyXG4gICAgICAgICAgICB9LCAxMDApLCBmXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBkKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gd2luZG93LmNsZWFySW50ZXJ2YWwoZSksIGYub25TdG9wICYmIGYub25TdG9wKGEpLCBmXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZSA9IChiLmNvbnRleHQsIG51bGwpLCBmID0ge30sIGcgPSBiLnY7XHJcbiAgICAgICAgcmV0dXJuIGYucnVuID0gYywgZi5zdG9wID0gZCwgZi5vblN0b3AgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZi5vblN0b3AgPSBhLCBmXHJcbiAgICAgICAgfSwgZlxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGcoYSwgYikge1xyXG4gICAgICAgIGZ1bmN0aW9uIGMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB3aW5kb3cuY2xlYXJJbnRlcnZhbChnKSwgaC5vblN0b3AgJiYgaC5vblN0b3AoYSksIGhcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGQoKSB7XHJcbiAgICAgICAgICAgIHZhciBkID0gYi5keCB8fCAwLCBpID0gYi5keSB8fCAyO1xyXG4gICAgICAgICAgICByZXR1cm4gZyA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvID8gdm9pZCBoLnN0b3AoKSA6IChpICs9IGYsIHZvaWQoYS55ICsgYS5oZWlnaHQgPCBlLnN0YWdlLmNhbnZhcy5oZWlnaHQgPyBhLnNldExvY2F0aW9uKGEueCArIGQsIGEueSArIGkpIDogKGkgPSAwLCBjKCkpKSlcclxuICAgICAgICAgICAgfSwgMjApLCBoXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZSA9IGIuY29udGV4dCwgZiA9IGIuZ3Jhdml0eSB8fCAuMSwgZyA9IG51bGwsIGggPSB7fTtcclxuICAgICAgICByZXR1cm4gaC5ydW4gPSBkLCBoLnN0b3AgPSBjLCBoLm9uU3RvcCA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBoLm9uU3RvcCA9IGEsIGhcclxuICAgICAgICB9LCBoXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaChiLCBjKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZChjLCBkLCBlLCBmLCBnKSB7XHJcbiAgICAgICAgICAgIHZhciBoID0gbmV3IGEuTm9kZTtcclxuICAgICAgICAgICAgcmV0dXJuIGguc2V0SW1hZ2UoYi5pbWFnZSksIGguc2V0U2l6ZShiLndpZHRoLCBiLmhlaWdodCksIGguc2V0TG9jYXRpb24oYywgZCksIGguc2hvd1NlbGVjdGVkID0gITEsIGguZHJhZ2FibGUgPSAhMSwgaC5wYWludCA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICBhLnNhdmUoKSwgYS5hcmMoMCwgMCwgZSwgZiwgZyksIGEuY2xpcCgpLCBhLmJlZ2luUGF0aCgpLCBudWxsICE9IHRoaXMuaW1hZ2UgPyBhLmRyYXdJbWFnZSh0aGlzLmltYWdlLCAtdGhpcy53aWR0aCAvIDIsIC10aGlzLmhlaWdodCAvIDIpIDogKGEuZmlsbFN0eWxlID0gXCJyZ2JhKFwiICsgdGhpcy5zdHlsZS5maWxsU3R5bGUgKyBcIixcIiArIHRoaXMuYWxwaGEgKyBcIilcIiwgYS5yZWN0KC10aGlzLndpZHRoIC8gMiwgLXRoaXMuaGVpZ2h0IC8gMiwgdGhpcy53aWR0aCAvIDIsIHRoaXMuaGVpZ2h0IC8gMiksIGEuZmlsbCgpKSwgYS5jbG9zZVBhdGgoKSwgYS5yZXN0b3JlKClcclxuICAgICAgICAgICAgfSwgaFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZShjLCBlKSB7XHJcbiAgICAgICAgICAgIHZhciBmID0gYywgZyA9IGMgKyBNYXRoLlBJLCBoID0gZChiLngsIGIueSwgYi53aWR0aCwgZiwgZyksIGogPSBkKGIueCAtIDIgKyA0ICogTWF0aC5yYW5kb20oKSwgYi55LCBiLndpZHRoLCBmICsgTWF0aC5QSSwgZik7XHJcbiAgICAgICAgICAgIGIudmlzaWJsZSA9ICExLCBlLmFkZChoKSwgZS5hZGQoaiksIGEuQW5pbWF0ZS5ncmF2aXR5KGgsIHtjb250ZXh0OiBlLCBkeDogLjN9KS5ydW4oKS5vblN0b3AoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZS5yZW1vdmUoaCksIGUucmVtb3ZlKGopLCBpLnN0b3AoKVxyXG4gICAgICAgICAgICB9KSwgYS5BbmltYXRlLmdyYXZpdHkoaiwge2NvbnRleHQ6IGUsIGR4OiAtLjJ9KS5ydW4oKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGUoYy5hbmdsZSwgaCksIGlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGcoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpLm9uU3RvcCAmJiBpLm9uU3RvcChiKSwgaVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGggPSBjLmNvbnRleHQsIGkgPSAoYi5zdHlsZSwge30pO1xyXG4gICAgICAgIHJldHVybiBpLm9uU3RvcCA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpLm9uU3RvcCA9IGEsIGlcclxuICAgICAgICB9LCBpLnJ1biA9IGYsIGkuc3RvcCA9IGcsIGlcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBpKGEsIGIpIHtcclxuICAgICAgICBmdW5jdGlvbiBjKGEpIHtcclxuICAgICAgICAgICAgYS52aXNpYmxlID0gITAsIGEucm90YXRlID0gTWF0aC5yYW5kb20oKTtcclxuICAgICAgICAgICAgdmFyIGIgPSBnLnN0YWdlLmNhbnZhcy53aWR0aCAvIDI7XHJcbiAgICAgICAgICAgIGEueCA9IGIgKyBNYXRoLnJhbmRvbSgpICogKGIgLSAxMDApIC0gTWF0aC5yYW5kb20oKSAqIChiIC0gMTAwKSwgYS55ID0gZy5zdGFnZS5jYW52YXMuaGVpZ2h0LCBhLnZ4ID0gNSAqIE1hdGgucmFuZG9tKCkgLSA1ICogTWF0aC5yYW5kb20oKSwgYS52eSA9IC0yNVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZCgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGMoYSksIGggPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbyA/IHZvaWQgaS5zdG9wKCkgOiAoYS52eSArPSBmLCBhLnggKz0gYS52eCwgYS55ICs9IGEudnksIHZvaWQoKGEueCA8IDAgfHwgYS54ID4gZy5zdGFnZS5jYW52YXMud2lkdGggfHwgYS55ID4gZy5zdGFnZS5jYW52YXMuaGVpZ2h0KSAmJiAoaS5vblN0b3AgJiYgaS5vblN0b3AoYSksIGMoYSkpKSlcclxuICAgICAgICAgICAgfSwgNTApLCBpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBlKCkge1xyXG4gICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbChoKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGYgPSAuOCwgZyA9IGIuY29udGV4dCwgaCA9IG51bGwsIGkgPSB7fTtcclxuICAgICAgICByZXR1cm4gaS5vblN0b3AgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICByZXR1cm4gaS5vblN0b3AgPSBhLCBpXHJcbiAgICAgICAgfSwgaS5ydW4gPSBkLCBpLnN0b3AgPSBlLCBpXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaigpIHtcclxuICAgICAgICBvID0gITBcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBrKCkge1xyXG4gICAgICAgIG8gPSAhMVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGwoYiwgYykge1xyXG4gICAgICAgIGZ1bmN0aW9uIGQoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG8pcmV0dXJuIHZvaWQgbS5zdG9wKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgYSA9IGYueSArIGggKyBNYXRoLnNpbihrKSAqIGo7XHJcbiAgICAgICAgICAgICAgICBiLnNldExvY2F0aW9uKGIueCwgYSksIGsgKz0gbFxyXG4gICAgICAgICAgICB9LCAxMDApLCBtXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBlKCkge1xyXG4gICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbChuKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGYgPSBjLnAxLCBnID0gYy5wMiwgaCA9IChjLmNvbnRleHQsIGYueCArIChnLnggLSBmLngpIC8gMiksIGkgPSBmLnkgKyAoZy55IC0gZi55KSAvIDIsIGogPSBhLnV0aWwuZ2V0RGlzdGFuY2UoZiwgZykgLyAyLCBrID0gTWF0aC5hdGFuMihpLCBoKSwgbCA9IGMuc3BlZWQgfHwgLjIsIG0gPSB7fSwgbiA9IG51bGw7XHJcbiAgICAgICAgcmV0dXJuIG0ucnVuID0gZCwgbS5zdG9wID0gZSwgbVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG0oYSwgYikge1xyXG4gICAgICAgIGZ1bmN0aW9uIGMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBoID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG8pcmV0dXJuIHZvaWQgZy5zdG9wKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgYiA9IGUueCAtIGEueCwgYyA9IGUueSAtIGEueSwgaCA9IGIgKiBmLCBpID0gYyAqIGY7XHJcbiAgICAgICAgICAgICAgICBhLnggKz0gaCwgYS55ICs9IGksIC4wMSA+IGggJiYgLjEgPiBpICYmIGQoKVxyXG4gICAgICAgICAgICB9LCAxMDApLCBnXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBkKCkge1xyXG4gICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbChoKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGUgPSBiLnBvc2l0aW9uLCBmID0gKGIuY29udGV4dCwgYi5lYXNpbmcgfHwgLjIpLCBnID0ge30sIGggPSBudWxsO1xyXG4gICAgICAgIHJldHVybiBnLm9uU3RvcCA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBnLm9uU3RvcCA9IGEsIGdcclxuICAgICAgICB9LCBnLnJ1biA9IGMsIGcuc3RvcCA9IGQsIGdcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBuKGEsIGIpIHtcclxuICAgICAgICBmdW5jdGlvbiBjKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gaiA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGEuc2NhbGVYICs9IGYsIGEuc2NhbGVZICs9IGYsIGEuc2NhbGVYID49IGUgJiYgZCgpXHJcbiAgICAgICAgICAgIH0sIDEwMCksIGlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGQoKSB7XHJcbiAgICAgICAgICAgIGkub25TdG9wICYmIGkub25TdG9wKGEpLCBhLnNjYWxlWCA9IGcsIGEuc2NhbGVZID0gaCwgd2luZG93LmNsZWFySW50ZXJ2YWwoailcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBlID0gKGIucG9zaXRpb24sIGIuY29udGV4dCwgYi5zY2FsZSB8fCAxKSwgZiA9IC4wNiwgZyA9IGEuc2NhbGVYLCBoID0gYS5zY2FsZVksIGkgPSB7fSwgaiA9IG51bGw7XHJcbiAgICAgICAgcmV0dXJuIGkub25TdG9wID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGkub25TdG9wID0gYSwgaVxyXG4gICAgICAgIH0sIGkucnVuID0gYywgaS5zdG9wID0gZCwgaVxyXG4gICAgfVxyXG5cclxuICAgIGEuQW5pbWF0ZSA9IHt9LCBhLkVmZmVjdCA9IHt9O1xyXG4gICAgdmFyIG8gPSAhMTtcclxuICAgIGEuRWZmZWN0LnNwcmluZyA9IGUsIGEuRWZmZWN0LmdyYXZpdHkgPSBjLCBhLkFuaW1hdGUuc3RlcEJ5U3RlcCA9IGQsIGEuQW5pbWF0ZS5yb3RhdGUgPSBmLCBhLkFuaW1hdGUuc2NhbGUgPSBuLCBhLkFuaW1hdGUubW92ZSA9IG0sIGEuQW5pbWF0ZS5jeWNsZSA9IGwsIGEuQW5pbWF0ZS5yZXBlYXRUaHJvdyA9IGksIGEuQW5pbWF0ZS5kaXZpZGVkVHdvUGllY2UgPSBoLCBhLkFuaW1hdGUuZ3Jhdml0eSA9IGcsIGEuQW5pbWF0ZS5zdGFydEFsbCA9IGssIGEuQW5pbWF0ZS5zdG9wQWxsID0galxyXG59KEpUb3BvKSwgZnVuY3Rpb24gKGEpIHtcclxuICAgIGZ1bmN0aW9uIGIoYSwgYikge1xyXG4gICAgICAgIHZhciBjID0gW107XHJcbiAgICAgICAgaWYgKDAgPT0gYS5sZW5ndGgpcmV0dXJuIGM7XHJcbiAgICAgICAgdmFyIGQgPSBiLm1hdGNoKC9eXFxzKihcXHcrKVxccyokLyk7XHJcbiAgICAgICAgaWYgKG51bGwgIT0gZCkge1xyXG4gICAgICAgICAgICB2YXIgZSA9IGEuZmlsdGVyKGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYS5lbGVtZW50VHlwZSA9PSBkWzFdXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBudWxsICE9IGUgJiYgZS5sZW5ndGggPiAwICYmIChjID0gYy5jb25jYXQoZSkpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIGYgPSAhMTtcclxuICAgICAgICAgICAgaWYgKGQgPSBiLm1hdGNoKC9cXHMqKFxcdyspXFxzKlxcW1xccyooXFx3KylcXHMqKFs+PTxdKVxccypbJ1wiXShcXFMrKVsnXCJdXFxzKlxcXVxccyovKSwgKG51bGwgPT0gZCB8fCBkLmxlbmd0aCA8IDUpICYmIChkID0gYi5tYXRjaCgvXFxzKihcXHcrKVxccypcXFtcXHMqKFxcdyspXFxzKihbPj08XSlcXHMqKFxcZCsoXFwuXFxkKyk/KVxccypcXF1cXHMqLyksIGYgPSAhMCksIG51bGwgIT0gZCAmJiBkLmxlbmd0aCA+PSA1KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZyA9IGRbMV0sIGggPSBkWzJdLCBpID0gZFszXSwgaiA9IGRbNF07XHJcbiAgICAgICAgICAgICAgICBlID0gYS5maWx0ZXIoZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYS5lbGVtZW50VHlwZSAhPSBnKXJldHVybiAhMTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IGFbaF07XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDEgPT0gZiAmJiAoYiA9IHBhcnNlSW50KGIpKSwgXCI9XCIgPT0gaSA/IGIgPT0gaiA6IFwiPlwiID09IGkgPyBiID4gaiA6IFwiPFwiID09IGkgPyBqID4gYiA6IFwiPD1cIiA9PSBpID8gaiA+PSBiIDogXCI+PVwiID09IGkgPyBiID49IGogOiBcIiE9XCIgPT0gaSA/IGIgIT0gaiA6ICExXHJcbiAgICAgICAgICAgICAgICB9KSwgbnVsbCAhPSBlICYmIGUubGVuZ3RoID4gMCAmJiAoYyA9IGMuY29uY2F0KGUpKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYyhhKSB7XHJcbiAgICAgICAgaWYgKGEuZmluZCA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZC5jYWxsKHRoaXMsIGEpXHJcbiAgICAgICAgICAgIH0sIGUuZm9yRWFjaChmdW5jdGlvbiAoYikge1xyXG4gICAgICAgICAgICAgICAgYVtiXSA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYyA9IDA7IGMgPCB0aGlzLmxlbmd0aDsgYysrKXRoaXNbY11bYl0oYSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSksIGEubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB2YXIgYiA9IGFbMF07XHJcbiAgICAgICAgICAgIGZvciAodmFyIGMgaW4gYikge1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSBiW2NdO1xyXG4gICAgICAgICAgICAgICAgXCJmdW5jdGlvblwiID09IHR5cGVvZiBmICYmICFmdW5jdGlvbiAoYikge1xyXG4gICAgICAgICAgICAgICAgICAgIGFbY10gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGMgPSBbXSwgZCA9IDA7IGQgPCBhLmxlbmd0aDsgZCsrKWMucHVzaChiLmFwcGx5KGFbZF0sIGFyZ3VtZW50cykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0oZilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYS5hdHRyID0gZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gYSAmJiBudWxsICE9IGIpZm9yICh2YXIgYyA9IDA7IGMgPCB0aGlzLmxlbmd0aDsgYysrKXRoaXNbY11bYV0gPSBiOyBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChudWxsICE9IGEgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2YgYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGQgPSBbXSwgYyA9IDA7IGMgPCB0aGlzLmxlbmd0aDsgYysrKWQucHVzaCh0aGlzW2NdW2FdKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gYSlmb3IgKHZhciBjID0gMDsgYyA8IHRoaXMubGVuZ3RoOyBjKyspZm9yICh2YXIgZSBpbiBhKXRoaXNbY11bZV0gPSBhW2VdXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXNcclxuICAgICAgICB9LCBhXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZChkKSB7XHJcbiAgICAgICAgdmFyIGUgPSBbXSwgZiA9IFtdO1xyXG4gICAgICAgIHRoaXMgaW5zdGFuY2VvZiBhLlN0YWdlID8gKGUgPSB0aGlzLmNoaWxkcywgZiA9IGYuY29uY2F0KGUpKSA6IHRoaXMgaW5zdGFuY2VvZiBhLlNjZW5lID8gZSA9IFt0aGlzXSA6IGYgPSB0aGlzLCBlLmZvckVhY2goZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgZiA9IGYuY29uY2F0KGEuY2hpbGRzKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciBnID0gbnVsbDtcclxuICAgICAgICByZXR1cm4gZyA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgZCA/IGYuZmlsdGVyKGQpIDogYihmLCBkKSwgZyA9IGMoZylcclxuICAgIH1cclxuXHJcbiAgICB2YXIgZSA9IFwiY2xpY2ssbW91c2Vkb3duLG1vdXNldXAsbW91c2VvdmVyLG1vdXNlb3V0LG1vdXNlZHJhZyxrZXlkb3duLGtleXVwXCIuc3BsaXQoXCIsXCIpO1xyXG4gICAgYS5TdGFnZS5wcm90b3R5cGUuZmluZCA9IGQsIGEuU2NlbmUucHJvdG90eXBlLmZpbmQgPSBkXHJcbn0oSlRvcG8pLCBmdW5jdGlvbiAoYSkge1xyXG4gICAgZnVuY3Rpb24gYihhLCBiKSB7XHJcbiAgICAgICAgdGhpcy54ID0gYSwgdGhpcy55ID0gYlxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGMoYSkge1xyXG4gICAgICAgIHRoaXMucCA9IG5ldyBiKDAsIDApLCB0aGlzLncgPSBuZXcgYigxLCAwKSwgdGhpcy5wYWludCA9IGFcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBkKGEsIGIsIGMpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgZSA9IDA7IGIgPiBlOyBlKyspYSgpLCBjICYmIGQudHVybihjKSwgZC5tb3ZlKDMpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGUoYSwgYikge1xyXG4gICAgICAgIHZhciBjID0gMiAqIE1hdGguUEk7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGUgPSAwOyBiID4gZTsgZSsrKWEoKSwgZC50dXJuKGMgLyBiKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBmKGEsIGIsIGMpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgZSA9IDA7IGIgPiBlOyBlKyspYSgpLCBkLnJlc2l6ZShjKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnKGEpIHtcclxuICAgICAgICB2YXIgYiA9IDIgKiBNYXRoLlBJO1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBkID0gMDsgYSA+IGQ7IGQrKyljLmZvcndhcmQoMSksIGMudHVybihiIC8gYSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaChhKSB7XHJcbiAgICAgICAgdmFyIGIgPSA0ICogTWF0aC5QSTtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGMpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgZCA9IDA7IGEgPiBkOyBkKyspYy5mb3J3YXJkKDEpLCBjLnR1cm4oYiAvIGEpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGkoYSwgYiwgYywgZCkge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBmID0gMDsgYiA+IGY7IGYrKylhKCksIGUuZm9yd2FyZCgxKSwgZS50dXJuKGMpLCBlLnJlc2l6ZShkKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgaiA9IHt9O1xyXG4gICAgYy5wcm90b3R5cGUuZm9yd2FyZCA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgdmFyIGIgPSB0aGlzLnAsIGMgPSB0aGlzLnc7XHJcbiAgICAgICAgcmV0dXJuIGIueCA9IGIueCArIGEgKiBjLngsIGIueSA9IGIueSArIGEgKiBjLnksIHRoaXMucGFpbnQgJiYgdGhpcy5wYWludChiLngsIGIueSksIHRoaXNcclxuICAgIH0sIGMucHJvdG90eXBlLm1vdmUgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgIHZhciBiID0gdGhpcy5wLCBjID0gdGhpcy53O1xyXG4gICAgICAgIHJldHVybiBiLnggPSBiLnggKyBhICogYy54LCBiLnkgPSBiLnkgKyBhICogYy55LCB0aGlzXHJcbiAgICB9LCBjLnByb3RvdHlwZS5tb3ZlVG8gPSBmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnAueCA9IGEsIHRoaXMucC55ID0gYiwgdGhpc1xyXG4gICAgfSwgYy5wcm90b3R5cGUudHVybiA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgdmFyIGIgPSAodGhpcy5wLCB0aGlzLncpLCBjID0gTWF0aC5jb3MoYSkgKiBiLnggLSBNYXRoLnNpbihhKSAqIGIueSwgZCA9IE1hdGguc2luKGEpICogYi54ICsgTWF0aC5jb3MoYSkgKiBiLnk7XHJcbiAgICAgICAgcmV0dXJuIGIueCA9IGMsIGIueSA9IGQsIHRoaXNcclxuICAgIH0sIGMucHJvdG90eXBlLnJlc2l6ZSA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgdmFyIGIgPSB0aGlzLnc7XHJcbiAgICAgICAgcmV0dXJuIGIueCA9IGIueCAqIGEsIGIueSA9IGIueSAqIGEsIHRoaXNcclxuICAgIH0sIGMucHJvdG90eXBlLnNhdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGwgPT0gdGhpcy5fc3RhY2sgJiYgKHRoaXMuX3N0YWNrID0gW10pLCB0aGlzLl9zdGFjay5wdXNoKFt0aGlzLnAsIHRoaXMud10pLCB0aGlzXHJcbiAgICB9LCBjLnByb3RvdHlwZS5yZXN0b3JlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChudWxsICE9IHRoaXMuX3N0YWNrICYmIHRoaXMuX3N0YWNrLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdmFyIGEgPSB0aGlzLl9zdGFjay5wb3AoKTtcclxuICAgICAgICAgICAgdGhpcy5wID0gYVswXSwgdGhpcy53ID0gYVsxXVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpc1xyXG4gICAgfSwgai5Ub3J0b2lzZSA9IGMsIGouc2hpZnQgPSBkLCBqLnNwaW4gPSBlLCBqLnBvbHlnb24gPSBnLCBqLnNwaXJhbCA9IGksIGouc3RhciA9IGgsIGouc2NhbGUgPSBmLCBhLkxvZ28gPSBqXHJcbn0od2luZG93KTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2RldmVsb3AvY29yZS9saWIvanRvcG8tbWluLmpzXG4vLyBtb2R1bGUgaWQgPSAxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=');
},function(module,exports){eval('/**\r\n * Created by qiyc on 2017/2/6.\r\n */\r\nvar ruler;\r\nvar util = {\r\n    toJson:function(json){\r\n        if (typeof json == \'string\') {\r\n            json = $.parseJSON(json.replace(/\'/g, \'"\'));\r\n        }\r\n        return json;\r\n    },\r\n    upFirst: function (string) {\r\n        return string.replace(/(^|\\s+)\\w/g, function (s) {\r\n            return s.toUpperCase();//首字母大寫\r\n        })\r\n    },\r\n    extend: function (base, config) {\r\n        try {\r\n            if (typeof base == "object" && typeof config == "object") {\r\n                deep(base, config);\r\n            }\r\n            else {\r\n                console.error("some extend error:", base, config);\r\n            }\r\n        } catch (e) {\r\n            console.error("extend error", e, base, config);\r\n        }\r\n        function deep(attr, config) {\r\n            $.each(attr, function (key, value) {\r\n                if(base.arrow&&key=="size"){\r\n                }\r\n                if (attr[key]&&typeof attr[key] == "object" && typeof config[key] == "object") {\r\n                    if ($.isArray(attr[key]) && $.isArray(config[key])) {\r\n                        attr[key] = config[key];\r\n                    } else if ($.isFunction(attr[key]) && $.isFunction(config[key])) {\r\n                        attr[key] = config[key];\r\n                    } else {\r\n                        deep(attr[key], config[key]);\r\n                    }\r\n                } else if (typeof attr[key] != "undefined" && typeof config[key] != "undefined") {\r\n                    attr[key] = config[key];\r\n                }\r\n            });\r\n        }\r\n\r\n        return base;\r\n    },\r\n    merge:function(object,config){\r\n        if(object&&config&&typeof object=="object"&&typeof config=="object"){\r\n            deep(object,config);\r\n        }\r\n        function deep(source,target){\r\n            $.each(source,function(k,v){\r\n                if(v&&typeof v=="object"){\r\n                    if(!target[k]){\r\n                        target[k]={};\r\n                        deep(v,target[k]);\r\n                    }\r\n                }else\r\n                if(!target[k]){\r\n                    target[k]=v;\r\n                }\r\n            })\r\n        }\r\n        return config;\r\n    },\r\n    getParameter: function (param) {\r\n        var query = window.location.search;//获取URL地址中？后的所有字符\r\n        var iLen = param.length;//获取你的参数名称长度\r\n        var iStart = query.indexOf(param);//获取你该参数名称的其实索引\r\n        if (iStart == -1)//-1为没有该参数\r\n            return "";\r\n        iStart += iLen + 1;\r\n        var iEnd = query.indexOf("&", iStart);//获取第二个参数的其实索引\r\n        if (iEnd == -1)//只有一个参数\r\n            return query.substring(iStart);//获取单个参数的参数值\r\n        return query.substring(iStart, iEnd);//获取第二个参数的值\r\n    },\r\n    //仅画布全屏展示\r\n    runPrefixMethod: function (element, method) {\r\n        var usablePrefixMethod;\r\n        ["webkit", "moz", "ms", "o", ""].forEach(function (prefix) {\r\n                if (usablePrefixMethod) return;\r\n                if (prefix === "") {\r\n                    // 无前缀，方法首字母小写\r\n                    method = method.slice(0, 1).toLowerCase() + method.slice(1);\r\n                }\r\n                var typePrefixMethod = typeof element[prefix + method];\r\n                if (typePrefixMethod + "" !== "undefined") {\r\n                    if (typePrefixMethod === "function") {\r\n                        usablePrefixMethod = element[prefix + method]();\r\n                    } else {\r\n                        usablePrefixMethod = element[prefix + method];\r\n                    }\r\n                }\r\n            }\r\n        );\r\n    },\r\n    //浏览器全屏展示\r\n    launchFullScreen: function (element) {\r\n        if (element.requestFullscreen) {\r\n            element.requestFullscreen();\r\n        } else if (element.mozRequestFullScreen) {\r\n            element.mozRequestFullScreen();\r\n        } else if (element.webkitRequestFullscreen) {\r\n            element.webkitRequestFullscreen();\r\n        } else if (element.msRequestFullscreen) {\r\n            element.msRequestFullscreen();\r\n        }\r\n    },\r\n    //关闭浏览器全屏\r\n    exitFullScreen: function (doc) {\r\n        if (doc.exitFullscreen) {\r\n            doc.exitFullscreen();\r\n        } else if (doc.mozCancelFullScreen) {\r\n            doc.mozCancelFullScreen();\r\n        } else if (doc.webkitExitFullscreen) {\r\n            doc.webkitExitFullscreen();\r\n        }\r\n    },\r\n    //16进制转换\r\n    transHex: function (color) {\r\n        if (color && color.length == 7 && color.charAt(0) == \'#\') {\r\n            var a = parseInt(color.substr(1, 2), 16);\r\n            var b = parseInt(color.substr(3, 2), 16);\r\n            var c = parseInt(color.substr(5, 2), 16);\r\n            return a + \',\' + b + \',\' + c;\r\n        } else {\r\n            return color;\r\n        }\r\n    },\r\n    //切换隐藏\r\n    toggleElemnts: function (arr, visiable) {\r\n        if (arr && arr instanceof Array) {\r\n            $.each(arr, function (i, v) {\r\n                if (typeof(visiable) == \'boolean\') {\r\n                    visiable ? v.show() : v.hide();\r\n                } else {\r\n                    v.visible ? v.hide() : v.show();\r\n                }\r\n            });\r\n        }\r\n    },\r\n    //如果数组中不存在则存入，否则不做操作\r\n    arrayPush: function (arr, value) {\r\n        if (arr.indexOf(value) < 0) {\r\n            arr.push(value);\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n    //如果数组中不存在则删除，否则不做操作\r\n    arrayDelete: function (arr, value) {\r\n        var i = arr.indexOf(value);\r\n        if (i >= 0) {\r\n            arr.splice(i, 1);\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n    //批量设值\r\n    setAttr: function (element, object) {\r\n        $.each(object, function (key, value) {\r\n            element.prop[key] = value;\r\n        });\r\n    }, /**\r\n     * 构造类继承关系\r\n     * @memberOf module:zrender/tool/util\r\n     * @param {Function} clazz 源类\r\n     * @param {Function} baseClazz 基类\r\n     */\r\n    inherits: function (clazz, baseClazz) {\r\n        var clazzPrototype = clazz.prototype;\r\n\r\n        function F() {\r\n        }\r\n\r\n        F.prototype = baseClazz.prototype;\r\n        clazz.prototype = new F();\r\n\r\n        for (var prop in clazzPrototype) {\r\n            clazz.prototype[prop] = clazzPrototype[prop];\r\n        }\r\n        clazz.constructor = clazz;\r\n    },\r\n    //显示名字\r\n    showName: function (element) {\r\n        element.text = element.prop.name;\r\n    },\r\n    hideName: function (element) {\r\n        element.text = \'\';\r\n    },\r\n    //深度克隆对象\r\n    deepClone: function (obj) {\r\n        var result, oClass = isClass(obj);\r\n        //确定result的类型\r\n        if (oClass === "Object") {\r\n            result = {};\r\n        } else if (oClass === "Array") {\r\n            result = [];\r\n        } else {\r\n            return obj;\r\n        }\r\n        for (key in obj) {\r\n            var copy = obj[key];\r\n            if (isClass(copy) == "Object") {\r\n                result[key] = arguments.callee(copy);//递归调用\r\n            } else if (isClass(copy) == "Array") {\r\n                result[key] = arguments.callee(copy);\r\n            } else {\r\n                result[key] = obj[key];\r\n            }\r\n        }\r\n        return result;\r\n        function isClass(o) {\r\n            if (o === null) return "Null";\r\n            if (o === undefined) return "Undefined";\r\n            return Object.prototype.toString.call(o).slice(8, -1);\r\n        }\r\n    },\r\n    //获取当前屏幕正中心\r\n    getCenterPosition: function (scene) {\r\n        return {\r\n            x: -scene.translateX + $(window).width() / 2,\r\n            y: -scene.translateY + $(window).height() / 2\r\n        }\r\n    },\r\n    //闪烁\r\n    nodeFlash: function (node, n) {\r\n        if (n == 0) {\r\n            node.selected = false;\r\n            return;\r\n        }\r\n        node.selected = !node.selected;\r\n        setTimeout(function () {\r\n            util.nodeFlash(node, n - 1);\r\n        }, 300);\r\n    },\r\n    //图层平移到节点上\r\n    nodeAsCenter: function (scene, node) {\r\n        if (node) {\r\n            var location = node.getCenterLocation();\r\n            // 查询到的节点居中显示\r\n            if (scene.childs.indexOf(node) > -1) {\r\n                scene.scaleX = 1;\r\n                scene.scaleY = 1;\r\n                scene.setCenter(location.x, location.y);\r\n                // 闪烁几下\r\n                util.nodeFlash(node, 6);\r\n            }\r\n        }\r\n    },//获取字符串长度\r\n    getStringWidth: function (text, size) {\r\n        if (!ruler) {\r\n            ruler = $("span[name=topo_get_string_Width]");\r\n        }\r\n        ruler.text(text);\r\n        if (size) {\r\n            ruler.css("fontSize", size);\r\n        } else {\r\n            ruler.css("fontSize", "14px");\r\n        }\r\n        return ruler[0].offsetWidth;\r\n    }\r\n};\r\nmodule.exports = util;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kZXZlbG9wL3V0aWwuanM/MjkyNiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsbUNBQW1DO0FBQ25DLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsYUFBYTtBQUNiOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSwyQ0FBMkM7QUFDM0MsZ0NBQWdDO0FBQ2hDLDBDQUEwQztBQUMxQztBQUNBO0FBQ0E7QUFDQSw4Q0FBOEM7QUFDOUM7QUFDQSwyQ0FBMkM7QUFDM0MsNkNBQTZDO0FBQzdDLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQSxlQUFlLFNBQVM7QUFDeEIsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQ7QUFDckQsYUFBYTtBQUNiO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiMi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHFpeWMgb24gMjAxNy8yLzYuXHJcbiAqL1xyXG52YXIgcnVsZXI7XHJcbnZhciB1dGlsID0ge1xyXG4gICAgdG9Kc29uOmZ1bmN0aW9uKGpzb24pe1xyXG4gICAgICAgIGlmICh0eXBlb2YganNvbiA9PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBqc29uID0gJC5wYXJzZUpTT04oanNvbi5yZXBsYWNlKC8nL2csICdcIicpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGpzb247XHJcbiAgICB9LFxyXG4gICAgdXBGaXJzdDogZnVuY3Rpb24gKHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvKF58XFxzKylcXHcvZywgZnVuY3Rpb24gKHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHMudG9VcHBlckNhc2UoKTsvL+mmluWtl+avjeWkp+Wvq1xyXG4gICAgICAgIH0pXHJcbiAgICB9LFxyXG4gICAgZXh0ZW5kOiBmdW5jdGlvbiAoYmFzZSwgY29uZmlnKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBiYXNlID09IFwib2JqZWN0XCIgJiYgdHlwZW9mIGNvbmZpZyA9PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgICAgICAgICAgICBkZWVwKGJhc2UsIGNvbmZpZyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwic29tZSBleHRlbmQgZXJyb3I6XCIsIGJhc2UsIGNvbmZpZyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJleHRlbmQgZXJyb3JcIiwgZSwgYmFzZSwgY29uZmlnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZnVuY3Rpb24gZGVlcChhdHRyLCBjb25maWcpIHtcclxuICAgICAgICAgICAgJC5lYWNoKGF0dHIsIGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBpZihiYXNlLmFycm93JiZrZXk9PVwic2l6ZVwiKXtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChhdHRyW2tleV0mJnR5cGVvZiBhdHRyW2tleV0gPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgY29uZmlnW2tleV0gPT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkLmlzQXJyYXkoYXR0cltrZXldKSAmJiAkLmlzQXJyYXkoY29uZmlnW2tleV0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJba2V5XSA9IGNvbmZpZ1trZXldO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJC5pc0Z1bmN0aW9uKGF0dHJba2V5XSkgJiYgJC5pc0Z1bmN0aW9uKGNvbmZpZ1trZXldKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyW2tleV0gPSBjb25maWdba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWVwKGF0dHJba2V5XSwgY29uZmlnW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGF0dHJba2V5XSAhPSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiBjb25maWdba2V5XSAhPSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXR0cltrZXldID0gY29uZmlnW2tleV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGJhc2U7XHJcbiAgICB9LFxyXG4gICAgbWVyZ2U6ZnVuY3Rpb24ob2JqZWN0LGNvbmZpZyl7XHJcbiAgICAgICAgaWYob2JqZWN0JiZjb25maWcmJnR5cGVvZiBvYmplY3Q9PVwib2JqZWN0XCImJnR5cGVvZiBjb25maWc9PVwib2JqZWN0XCIpe1xyXG4gICAgICAgICAgICBkZWVwKG9iamVjdCxjb25maWcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmdW5jdGlvbiBkZWVwKHNvdXJjZSx0YXJnZXQpe1xyXG4gICAgICAgICAgICAkLmVhY2goc291cmNlLGZ1bmN0aW9uKGssdil7XHJcbiAgICAgICAgICAgICAgICBpZih2JiZ0eXBlb2Ygdj09XCJvYmplY3RcIil7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIXRhcmdldFtrXSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFtrXT17fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVlcCh2LHRhcmdldFtrXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfWVsc2VcclxuICAgICAgICAgICAgICAgIGlmKCF0YXJnZXRba10pe1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFtrXT12O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY29uZmlnO1xyXG4gICAgfSxcclxuICAgIGdldFBhcmFtZXRlcjogZnVuY3Rpb24gKHBhcmFtKSB7XHJcbiAgICAgICAgdmFyIHF1ZXJ5ID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaDsvL+iOt+WPllVSTOWcsOWdgOS4re+8n+WQjueahOaJgOacieWtl+esplxyXG4gICAgICAgIHZhciBpTGVuID0gcGFyYW0ubGVuZ3RoOy8v6I635Y+W5L2g55qE5Y+C5pWw5ZCN56ew6ZW/5bqmXHJcbiAgICAgICAgdmFyIGlTdGFydCA9IHF1ZXJ5LmluZGV4T2YocGFyYW0pOy8v6I635Y+W5L2g6K+l5Y+C5pWw5ZCN56ew55qE5YW25a6e57Si5byVXHJcbiAgICAgICAgaWYgKGlTdGFydCA9PSAtMSkvLy0x5Li65rKh5pyJ6K+l5Y+C5pWwXHJcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgIGlTdGFydCArPSBpTGVuICsgMTtcclxuICAgICAgICB2YXIgaUVuZCA9IHF1ZXJ5LmluZGV4T2YoXCImXCIsIGlTdGFydCk7Ly/ojrflj5bnrKzkuozkuKrlj4LmlbDnmoTlhbblrp7ntKLlvJVcclxuICAgICAgICBpZiAoaUVuZCA9PSAtMSkvL+WPquacieS4gOS4quWPguaVsFxyXG4gICAgICAgICAgICByZXR1cm4gcXVlcnkuc3Vic3RyaW5nKGlTdGFydCk7Ly/ojrflj5bljZXkuKrlj4LmlbDnmoTlj4LmlbDlgLxcclxuICAgICAgICByZXR1cm4gcXVlcnkuc3Vic3RyaW5nKGlTdGFydCwgaUVuZCk7Ly/ojrflj5bnrKzkuozkuKrlj4LmlbDnmoTlgLxcclxuICAgIH0sXHJcbiAgICAvL+S7heeUu+W4g+WFqOWxj+WxleekulxyXG4gICAgcnVuUHJlZml4TWV0aG9kOiBmdW5jdGlvbiAoZWxlbWVudCwgbWV0aG9kKSB7XHJcbiAgICAgICAgdmFyIHVzYWJsZVByZWZpeE1ldGhvZDtcclxuICAgICAgICBbXCJ3ZWJraXRcIiwgXCJtb3pcIiwgXCJtc1wiLCBcIm9cIiwgXCJcIl0uZm9yRWFjaChmdW5jdGlvbiAocHJlZml4KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodXNhYmxlUHJlZml4TWV0aG9kKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBpZiAocHJlZml4ID09PSBcIlwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5peg5YmN57yA77yM5pa55rOV6aaW5a2X5q+N5bCP5YaZXHJcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kID0gbWV0aG9kLnNsaWNlKDAsIDEpLnRvTG93ZXJDYXNlKCkgKyBtZXRob2Quc2xpY2UoMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgdHlwZVByZWZpeE1ldGhvZCA9IHR5cGVvZiBlbGVtZW50W3ByZWZpeCArIG1ldGhvZF07XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZVByZWZpeE1ldGhvZCArIFwiXCIgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZVByZWZpeE1ldGhvZCA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzYWJsZVByZWZpeE1ldGhvZCA9IGVsZW1lbnRbcHJlZml4ICsgbWV0aG9kXSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzYWJsZVByZWZpeE1ldGhvZCA9IGVsZW1lbnRbcHJlZml4ICsgbWV0aG9kXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfSxcclxuICAgIC8v5rWP6KeI5Zmo5YWo5bGP5bGV56S6XHJcbiAgICBsYXVuY2hGdWxsU2NyZWVuOiBmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgIGlmIChlbGVtZW50LnJlcXVlc3RGdWxsc2NyZWVuKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQucmVxdWVzdEZ1bGxzY3JlZW4oKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnQubW96UmVxdWVzdEZ1bGxTY3JlZW4pIHtcclxuICAgICAgICAgICAgZWxlbWVudC5tb3pSZXF1ZXN0RnVsbFNjcmVlbigpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudC53ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbikge1xyXG4gICAgICAgICAgICBlbGVtZW50LndlYmtpdFJlcXVlc3RGdWxsc2NyZWVuKCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50Lm1zUmVxdWVzdEZ1bGxzY3JlZW4pIHtcclxuICAgICAgICAgICAgZWxlbWVudC5tc1JlcXVlc3RGdWxsc2NyZWVuKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8v5YWz6Zet5rWP6KeI5Zmo5YWo5bGPXHJcbiAgICBleGl0RnVsbFNjcmVlbjogZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgIGlmIChkb2MuZXhpdEZ1bGxzY3JlZW4pIHtcclxuICAgICAgICAgICAgZG9jLmV4aXRGdWxsc2NyZWVuKCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChkb2MubW96Q2FuY2VsRnVsbFNjcmVlbikge1xyXG4gICAgICAgICAgICBkb2MubW96Q2FuY2VsRnVsbFNjcmVlbigpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZG9jLndlYmtpdEV4aXRGdWxsc2NyZWVuKSB7XHJcbiAgICAgICAgICAgIGRvYy53ZWJraXRFeGl0RnVsbHNjcmVlbigpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvLzE26L+b5Yi26L2s5o2iXHJcbiAgICB0cmFuc0hleDogZnVuY3Rpb24gKGNvbG9yKSB7XHJcbiAgICAgICAgaWYgKGNvbG9yICYmIGNvbG9yLmxlbmd0aCA9PSA3ICYmIGNvbG9yLmNoYXJBdCgwKSA9PSAnIycpIHtcclxuICAgICAgICAgICAgdmFyIGEgPSBwYXJzZUludChjb2xvci5zdWJzdHIoMSwgMiksIDE2KTtcclxuICAgICAgICAgICAgdmFyIGIgPSBwYXJzZUludChjb2xvci5zdWJzdHIoMywgMiksIDE2KTtcclxuICAgICAgICAgICAgdmFyIGMgPSBwYXJzZUludChjb2xvci5zdWJzdHIoNSwgMiksIDE2KTtcclxuICAgICAgICAgICAgcmV0dXJuIGEgKyAnLCcgKyBiICsgJywnICsgYztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gY29sb3I7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8v5YiH5o2i6ZqQ6JePXHJcbiAgICB0b2dnbGVFbGVtbnRzOiBmdW5jdGlvbiAoYXJyLCB2aXNpYWJsZSkge1xyXG4gICAgICAgIGlmIChhcnIgJiYgYXJyIGluc3RhbmNlb2YgQXJyYXkpIHtcclxuICAgICAgICAgICAgJC5lYWNoKGFyciwgZnVuY3Rpb24gKGksIHYpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YodmlzaWFibGUpID09ICdib29sZWFuJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZpc2lhYmxlID8gdi5zaG93KCkgOiB2LmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdi52aXNpYmxlID8gdi5oaWRlKCkgOiB2LnNob3coKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8v5aaC5p6c5pWw57uE5Lit5LiN5a2Y5Zyo5YiZ5a2Y5YWl77yM5ZCm5YiZ5LiN5YGa5pON5L2cXHJcbiAgICBhcnJheVB1c2g6IGZ1bmN0aW9uIChhcnIsIHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKGFyci5pbmRleE9mKHZhbHVlKSA8IDApIHtcclxuICAgICAgICAgICAgYXJyLnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSxcclxuICAgIC8v5aaC5p6c5pWw57uE5Lit5LiN5a2Y5Zyo5YiZ5Yig6Zmk77yM5ZCm5YiZ5LiN5YGa5pON5L2cXHJcbiAgICBhcnJheURlbGV0ZTogZnVuY3Rpb24gKGFyciwgdmFsdWUpIHtcclxuICAgICAgICB2YXIgaSA9IGFyci5pbmRleE9mKHZhbHVlKTtcclxuICAgICAgICBpZiAoaSA+PSAwKSB7XHJcbiAgICAgICAgICAgIGFyci5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9LFxyXG4gICAgLy/mibnph4/orr7lgLxcclxuICAgIHNldEF0dHI6IGZ1bmN0aW9uIChlbGVtZW50LCBvYmplY3QpIHtcclxuICAgICAgICAkLmVhY2gob2JqZWN0LCBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICBlbGVtZW50LnByb3Bba2V5XSA9IHZhbHVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSwgLyoqXHJcbiAgICAgKiDmnoTpgKDnsbvnu6fmib/lhbPns7tcclxuICAgICAqIEBtZW1iZXJPZiBtb2R1bGU6enJlbmRlci90b29sL3V0aWxcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNsYXp6IOa6kOexu1xyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gYmFzZUNsYXp6IOWfuuexu1xyXG4gICAgICovXHJcbiAgICBpbmhlcml0czogZnVuY3Rpb24gKGNsYXp6LCBiYXNlQ2xhenopIHtcclxuICAgICAgICB2YXIgY2xhenpQcm90b3R5cGUgPSBjbGF6ei5wcm90b3R5cGU7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIEYoKSB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBGLnByb3RvdHlwZSA9IGJhc2VDbGF6ei5wcm90b3R5cGU7XHJcbiAgICAgICAgY2xhenoucHJvdG90eXBlID0gbmV3IEYoKTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBjbGF6elByb3RvdHlwZSkge1xyXG4gICAgICAgICAgICBjbGF6ei5wcm90b3R5cGVbcHJvcF0gPSBjbGF6elByb3RvdHlwZVtwcm9wXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2xhenouY29uc3RydWN0b3IgPSBjbGF6ejtcclxuICAgIH0sXHJcbiAgICAvL+aYvuekuuWQjeWtl1xyXG4gICAgc2hvd05hbWU6IGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgZWxlbWVudC50ZXh0ID0gZWxlbWVudC5wcm9wLm5hbWU7XHJcbiAgICB9LFxyXG4gICAgaGlkZU5hbWU6IGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgZWxlbWVudC50ZXh0ID0gJyc7XHJcbiAgICB9LFxyXG4gICAgLy/mt7HluqblhYvpmoblr7nosaFcclxuICAgIGRlZXBDbG9uZTogZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgIHZhciByZXN1bHQsIG9DbGFzcyA9IGlzQ2xhc3Mob2JqKTtcclxuICAgICAgICAvL+ehruWumnJlc3VsdOeahOexu+Wei1xyXG4gICAgICAgIGlmIChvQ2xhc3MgPT09IFwiT2JqZWN0XCIpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0ge307XHJcbiAgICAgICAgfSBlbHNlIGlmIChvQ2xhc3MgPT09IFwiQXJyYXlcIikge1xyXG4gICAgICAgICAgICByZXN1bHQgPSBbXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGtleSBpbiBvYmopIHtcclxuICAgICAgICAgICAgdmFyIGNvcHkgPSBvYmpba2V5XTtcclxuICAgICAgICAgICAgaWYgKGlzQ2xhc3MoY29weSkgPT0gXCJPYmplY3RcIikge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBhcmd1bWVudHMuY2FsbGVlKGNvcHkpOy8v6YCS5b2S6LCD55SoXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNDbGFzcyhjb3B5KSA9PSBcIkFycmF5XCIpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdFtrZXldID0gYXJndW1lbnRzLmNhbGxlZShjb3B5KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdFtrZXldID0gb2JqW2tleV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICBmdW5jdGlvbiBpc0NsYXNzKG8pIHtcclxuICAgICAgICAgICAgaWYgKG8gPT09IG51bGwpIHJldHVybiBcIk51bGxcIjtcclxuICAgICAgICAgICAgaWYgKG8gPT09IHVuZGVmaW5lZCkgcmV0dXJuIFwiVW5kZWZpbmVkXCI7XHJcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvL+iOt+WPluW9k+WJjeWxj+W5leato+S4reW/g1xyXG4gICAgZ2V0Q2VudGVyUG9zaXRpb246IGZ1bmN0aW9uIChzY2VuZSkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHg6IC1zY2VuZS50cmFuc2xhdGVYICsgJCh3aW5kb3cpLndpZHRoKCkgLyAyLFxyXG4gICAgICAgICAgICB5OiAtc2NlbmUudHJhbnNsYXRlWSArICQod2luZG93KS5oZWlnaHQoKSAvIDJcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy/pl6rng4FcclxuICAgIG5vZGVGbGFzaDogZnVuY3Rpb24gKG5vZGUsIG4pIHtcclxuICAgICAgICBpZiAobiA9PSAwKSB7XHJcbiAgICAgICAgICAgIG5vZGUuc2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBub2RlLnNlbGVjdGVkID0gIW5vZGUuc2VsZWN0ZWQ7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHV0aWwubm9kZUZsYXNoKG5vZGUsIG4gLSAxKTtcclxuICAgICAgICB9LCAzMDApO1xyXG4gICAgfSxcclxuICAgIC8v5Zu+5bGC5bmz56e75Yiw6IqC54K55LiKXHJcbiAgICBub2RlQXNDZW50ZXI6IGZ1bmN0aW9uIChzY2VuZSwgbm9kZSkge1xyXG4gICAgICAgIGlmIChub2RlKSB7XHJcbiAgICAgICAgICAgIHZhciBsb2NhdGlvbiA9IG5vZGUuZ2V0Q2VudGVyTG9jYXRpb24oKTtcclxuICAgICAgICAgICAgLy8g5p+l6K+i5Yiw55qE6IqC54K55bGF5Lit5pi+56S6XHJcbiAgICAgICAgICAgIGlmIChzY2VuZS5jaGlsZHMuaW5kZXhPZihub2RlKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBzY2VuZS5zY2FsZVggPSAxO1xyXG4gICAgICAgICAgICAgICAgc2NlbmUuc2NhbGVZID0gMTtcclxuICAgICAgICAgICAgICAgIHNjZW5lLnNldENlbnRlcihsb2NhdGlvbi54LCBsb2NhdGlvbi55KTtcclxuICAgICAgICAgICAgICAgIC8vIOmXqueDgeWHoOS4i1xyXG4gICAgICAgICAgICAgICAgdXRpbC5ub2RlRmxhc2gobm9kZSwgNik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LC8v6I635Y+W5a2X56ym5Liy6ZW/5bqmXHJcbiAgICBnZXRTdHJpbmdXaWR0aDogZnVuY3Rpb24gKHRleHQsIHNpemUpIHtcclxuICAgICAgICBpZiAoIXJ1bGVyKSB7XHJcbiAgICAgICAgICAgIHJ1bGVyID0gJChcInNwYW5bbmFtZT10b3BvX2dldF9zdHJpbmdfV2lkdGhdXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBydWxlci50ZXh0KHRleHQpO1xyXG4gICAgICAgIGlmIChzaXplKSB7XHJcbiAgICAgICAgICAgIHJ1bGVyLmNzcyhcImZvbnRTaXplXCIsIHNpemUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJ1bGVyLmNzcyhcImZvbnRTaXplXCIsIFwiMTRweFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJ1bGVyWzBdLm9mZnNldFdpZHRoO1xyXG4gICAgfVxyXG59O1xyXG5tb2R1bGUuZXhwb3J0cyA9IHV0aWw7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9kZXZlbG9wL3V0aWwuanNcbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==')},function(module,exports,__webpack_require__){eval('/**\r\n * Created by qiyc on 2017/2/7.\r\n */\r\nvar Node = {\r\n    Normal: __webpack_require__(4),\r\n    Text: __webpack_require__(7)\r\n};\r\nvar Link = {\r\n    Curve: __webpack_require__(8),\r\n    Direct: __webpack_require__(10),\r\n    Flexional: __webpack_require__(11),\r\n    Fold: __webpack_require__(12)\r\n};\r\nvar Container = {\r\n    Group: __webpack_require__(13)\r\n};\r\nmodule.exports = Scene;\r\n//画布对象\r\nvar defaults = function () {\r\n    return {\r\n        name: \'\',\r\n        id: \'\',\r\n        pid: \'\',\r\n        weight: 1,\r\n        path: [],\r\n        offsetX: 0,\r\n        offsetY: 0,\r\n        mode: "edit",\r\n        background:""\r\n    };\r\n};\r\nfunction Scene(stage, config) {\r\n    var self = this;\r\n    self.jtopo = new JTopo.Scene();\r\n    self.jtopo.qtopo=self;\r\n    self.children = {\r\n        node: [],\r\n        link: [],\r\n        container: []\r\n    };\r\n    self.attr = defaults();\r\n    stage.add(self.jtopo);\r\n    setTimeout(function(){\r\n        if(config.background){\r\n            self.setBackGround(config.background);\r\n        }\r\n        if(config.mode){\r\n            self.setMode(config.mode);\r\n        }\r\n    });\r\n}\r\n//scan 格式 aaa=bb,ccc=dd条件之间以,分隔\r\nScene.prototype.clear=function(){\r\n    console.info("scene clear");\r\n    this.jtopo.clear();\r\n};\r\nScene.prototype.on = function (name, fn) {\r\n    this.jtopo.addEventListener(name, function (e) {\r\n        if(e.target&&e.target.qtopo){\r\n            fn(e,e.target.qtopo);\r\n        }else{\r\n            fn(e);\r\n        }\r\n    });\r\n};\r\nScene.prototype.off= function (name, fn) {\r\n    this.jtopo.removeEventListener(name);\r\n};\r\nScene.prototype.find=function(scan, type) {\r\n    var children = this.children;\r\n    var result = [];\r\n    var condition = typeof scan == "string" ? scan.split(",") : [];\r\n    if (condition.length > 0) {\r\n        $.each(condition, function (i, term) {\r\n            term = term.split("=");\r\n            //制定了类型，缩小查找范围，未指定则全部遍历\r\n            if (type) {\r\n                switch (type) {\r\n                    case "node":\r\n                        scanArr(children.node, term[0], term[1]);\r\n                        break;\r\n                    case "link":\r\n                        scanArr(children.link, term[0], term[1]);\r\n                        break;\r\n                    case "container":\r\n                        scanArr(children.container, term[0], term[1]);\r\n                        break;\r\n                }\r\n            } else {\r\n                $.each(children,function(j,arr){\r\n                    scanArr(arr, term[0], term[1]);\r\n                });\r\n            }\r\n        });\r\n    }\r\n    return result;\r\n    function scanArr(arr, key, value) {\r\n        $.each(arr, function (i, v) {\r\n            if (equal(v, key, value) || equal(v.attr, key, value)) {\r\n                result.push(v);\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n\r\n    function equal(object, key, value) {\r\n        return object[key] && object[key] == value;\r\n    }\r\n};\r\nScene.prototype.createNode=function(config) {\r\n    var newNode;\r\n    config = config || {};\r\n    switch (config.type) {\r\n        case "text":\r\n            newNode = new Node.Text(config);\r\n            break;\r\n        default:\r\n            newNode = new Node.Normal(config);\r\n    }\r\n    if (newNode.jtopo) {\r\n        this.add(newNode.jtopo);\r\n        this.children.node.push(newNode);\r\n        return newNode;\r\n    } else {\r\n        console.error("create Node error", config);\r\n        return false;\r\n    }\r\n};\r\nScene.prototype.createLink=function(config) {\r\n    var newLink;\r\n    config = config || {};\r\n    switch (config.type) {\r\n        case "direct":\r\n            newLink = new Link.Direct(config);\r\n            break;\r\n        case "curve":\r\n            newLink = new Link.Curve(config);\r\n            break;\r\n        case "flexional":\r\n            newLink = new Link.Flexional(config);\r\n            break;\r\n        case "fold":\r\n            newLink = new Link.Fold(config);\r\n            break;\r\n        default:\r\n            newLink = new Link.Direct(config);\r\n    }\r\n    if (newLink.jtopo) {\r\n        this.add(newLink.jtopo);\r\n        this.children.link.push(newLink);\r\n        return newLink;\r\n    } else {\r\n        console.error("create Link error", config);\r\n        return false;\r\n    }\r\n};\r\nScene.prototype.createContainer=function(config) {\r\n    var newContainer;\r\n    config = config || {};\r\n    switch (config.type) {\r\n        default:\r\n            newContainer = new Container.Group(config);\r\n    }\r\n    if (newContainer.jtopo) {\r\n        this.add(newContainer.jtopo);\r\n        this.children.container.push(newContainer);\r\n        return newContainer;\r\n    } else {\r\n        console.error("create Container error", config);\r\n        return false;\r\n    }\r\n};\r\nScene.prototype.add=function(element) {\r\n    if (element) {\r\n        this.jtopo.add(element);\r\n    }\r\n};\r\nScene.prototype.center=function(){\r\n    this.jtopo.stage.centerAndZoom();\r\n};\r\nScene.prototype.setMode=function(mode) {\r\n    this.attr.mode = mode;\r\n    this.jtopo.mode = mode;\r\n};\r\nScene.prototype.setBackGround=function(background) {\r\n    this.jtopo.background = background;\r\n    this.attr.background=background;\r\n};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kZXZlbG9wL2NvcmUvU2NlbmUuanM/OWVjOSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiIzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgcWl5YyBvbiAyMDE3LzIvNy5cclxuICovXHJcbnZhciBOb2RlID0ge1xyXG4gICAgTm9ybWFsOiByZXF1aXJlKFwiLi9lbGVtZW50L25vZGUvTm9ybWFsLmpzXCIpLFxyXG4gICAgVGV4dDogcmVxdWlyZShcIi4vZWxlbWVudC9ub2RlL1RleHQuanNcIilcclxufTtcclxudmFyIExpbmsgPSB7XHJcbiAgICBDdXJ2ZTogcmVxdWlyZShcIi4vZWxlbWVudC9saW5rL0N1cnZlLmpzXCIpLFxyXG4gICAgRGlyZWN0OiByZXF1aXJlKFwiLi9lbGVtZW50L2xpbmsvRGlyZWN0LmpzXCIpLFxyXG4gICAgRmxleGlvbmFsOiByZXF1aXJlKFwiLi9lbGVtZW50L2xpbmsvRmxleGlvbmFsLmpzXCIpLFxyXG4gICAgRm9sZDogcmVxdWlyZShcIi4vZWxlbWVudC9saW5rL0ZvbGQuanNcIilcclxufTtcclxudmFyIENvbnRhaW5lciA9IHtcclxuICAgIEdyb3VwOiByZXF1aXJlKFwiLi9lbGVtZW50L2NvbnRhaW5lci9Hcm91cC5qc1wiKVxyXG59O1xyXG5tb2R1bGUuZXhwb3J0cyA9IFNjZW5lO1xyXG4vL+eUu+W4g+WvueixoVxyXG52YXIgZGVmYXVsdHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG5hbWU6ICcnLFxyXG4gICAgICAgIGlkOiAnJyxcclxuICAgICAgICBwaWQ6ICcnLFxyXG4gICAgICAgIHdlaWdodDogMSxcclxuICAgICAgICBwYXRoOiBbXSxcclxuICAgICAgICBvZmZzZXRYOiAwLFxyXG4gICAgICAgIG9mZnNldFk6IDAsXHJcbiAgICAgICAgbW9kZTogXCJlZGl0XCIsXHJcbiAgICAgICAgYmFja2dyb3VuZDpcIlwiXHJcbiAgICB9O1xyXG59O1xyXG5mdW5jdGlvbiBTY2VuZShzdGFnZSwgY29uZmlnKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmp0b3BvID0gbmV3IEpUb3BvLlNjZW5lKCk7XHJcbiAgICBzZWxmLmp0b3BvLnF0b3BvPXNlbGY7XHJcbiAgICBzZWxmLmNoaWxkcmVuID0ge1xyXG4gICAgICAgIG5vZGU6IFtdLFxyXG4gICAgICAgIGxpbms6IFtdLFxyXG4gICAgICAgIGNvbnRhaW5lcjogW11cclxuICAgIH07XHJcbiAgICBzZWxmLmF0dHIgPSBkZWZhdWx0cygpO1xyXG4gICAgc3RhZ2UuYWRkKHNlbGYuanRvcG8pO1xyXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgIGlmKGNvbmZpZy5iYWNrZ3JvdW5kKXtcclxuICAgICAgICAgICAgc2VsZi5zZXRCYWNrR3JvdW5kKGNvbmZpZy5iYWNrZ3JvdW5kKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoY29uZmlnLm1vZGUpe1xyXG4gICAgICAgICAgICBzZWxmLnNldE1vZGUoY29uZmlnLm1vZGUpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcbi8vc2NhbiDmoLzlvI8gYWFhPWJiLGNjYz1kZOadoeS7tuS5i+mXtOS7pSzliIbpmpRcclxuU2NlbmUucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7XHJcbiAgICBjb25zb2xlLmluZm8oXCJzY2VuZSBjbGVhclwiKTtcclxuICAgIHRoaXMuanRvcG8uY2xlYXIoKTtcclxufTtcclxuU2NlbmUucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gKG5hbWUsIGZuKSB7XHJcbiAgICB0aGlzLmp0b3BvLmFkZEV2ZW50TGlzdGVuZXIobmFtZSwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBpZihlLnRhcmdldCYmZS50YXJnZXQucXRvcG8pe1xyXG4gICAgICAgICAgICBmbihlLGUudGFyZ2V0LnF0b3BvKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgZm4oZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn07XHJcblNjZW5lLnByb3RvdHlwZS5vZmY9IGZ1bmN0aW9uIChuYW1lLCBmbikge1xyXG4gICAgdGhpcy5qdG9wby5yZW1vdmVFdmVudExpc3RlbmVyKG5hbWUpO1xyXG59O1xyXG5TY2VuZS5wcm90b3R5cGUuZmluZD1mdW5jdGlvbihzY2FuLCB0eXBlKSB7XHJcbiAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuO1xyXG4gICAgdmFyIHJlc3VsdCA9IFtdO1xyXG4gICAgdmFyIGNvbmRpdGlvbiA9IHR5cGVvZiBzY2FuID09IFwic3RyaW5nXCIgPyBzY2FuLnNwbGl0KFwiLFwiKSA6IFtdO1xyXG4gICAgaWYgKGNvbmRpdGlvbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgJC5lYWNoKGNvbmRpdGlvbiwgZnVuY3Rpb24gKGksIHRlcm0pIHtcclxuICAgICAgICAgICAgdGVybSA9IHRlcm0uc3BsaXQoXCI9XCIpO1xyXG4gICAgICAgICAgICAvL+WItuWumuS6huexu+Wei++8jOe8qeWwj+afpeaJvuiMg+WbtO+8jOacquaMh+WumuWImeWFqOmDqOmBjeWOhlxyXG4gICAgICAgICAgICBpZiAodHlwZSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm5vZGVcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NhbkFycihjaGlsZHJlbi5ub2RlLCB0ZXJtWzBdLCB0ZXJtWzFdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImxpbmtcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NhbkFycihjaGlsZHJlbi5saW5rLCB0ZXJtWzBdLCB0ZXJtWzFdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImNvbnRhaW5lclwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY2FuQXJyKGNoaWxkcmVuLmNvbnRhaW5lciwgdGVybVswXSwgdGVybVsxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJC5lYWNoKGNoaWxkcmVuLGZ1bmN0aW9uKGosYXJyKXtcclxuICAgICAgICAgICAgICAgICAgICBzY2FuQXJyKGFyciwgdGVybVswXSwgdGVybVsxXSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIGZ1bmN0aW9uIHNjYW5BcnIoYXJyLCBrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgJC5lYWNoKGFyciwgZnVuY3Rpb24gKGksIHYpIHtcclxuICAgICAgICAgICAgaWYgKGVxdWFsKHYsIGtleSwgdmFsdWUpIHx8IGVxdWFsKHYuYXR0ciwga2V5LCB2YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBlcXVhbChvYmplY3QsIGtleSwgdmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gb2JqZWN0W2tleV0gJiYgb2JqZWN0W2tleV0gPT0gdmFsdWU7XHJcbiAgICB9XHJcbn07XHJcblNjZW5lLnByb3RvdHlwZS5jcmVhdGVOb2RlPWZ1bmN0aW9uKGNvbmZpZykge1xyXG4gICAgdmFyIG5ld05vZGU7XHJcbiAgICBjb25maWcgPSBjb25maWcgfHwge307XHJcbiAgICBzd2l0Y2ggKGNvbmZpZy50eXBlKSB7XHJcbiAgICAgICAgY2FzZSBcInRleHRcIjpcclxuICAgICAgICAgICAgbmV3Tm9kZSA9IG5ldyBOb2RlLlRleHQoY29uZmlnKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgbmV3Tm9kZSA9IG5ldyBOb2RlLk5vcm1hbChjb25maWcpO1xyXG4gICAgfVxyXG4gICAgaWYgKG5ld05vZGUuanRvcG8pIHtcclxuICAgICAgICB0aGlzLmFkZChuZXdOb2RlLmp0b3BvKTtcclxuICAgICAgICB0aGlzLmNoaWxkcmVuLm5vZGUucHVzaChuZXdOb2RlKTtcclxuICAgICAgICByZXR1cm4gbmV3Tm9kZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcImNyZWF0ZSBOb2RlIGVycm9yXCIsIGNvbmZpZyk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59O1xyXG5TY2VuZS5wcm90b3R5cGUuY3JlYXRlTGluaz1mdW5jdGlvbihjb25maWcpIHtcclxuICAgIHZhciBuZXdMaW5rO1xyXG4gICAgY29uZmlnID0gY29uZmlnIHx8IHt9O1xyXG4gICAgc3dpdGNoIChjb25maWcudHlwZSkge1xyXG4gICAgICAgIGNhc2UgXCJkaXJlY3RcIjpcclxuICAgICAgICAgICAgbmV3TGluayA9IG5ldyBMaW5rLkRpcmVjdChjb25maWcpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwiY3VydmVcIjpcclxuICAgICAgICAgICAgbmV3TGluayA9IG5ldyBMaW5rLkN1cnZlKGNvbmZpZyk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJmbGV4aW9uYWxcIjpcclxuICAgICAgICAgICAgbmV3TGluayA9IG5ldyBMaW5rLkZsZXhpb25hbChjb25maWcpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwiZm9sZFwiOlxyXG4gICAgICAgICAgICBuZXdMaW5rID0gbmV3IExpbmsuRm9sZChjb25maWcpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICBuZXdMaW5rID0gbmV3IExpbmsuRGlyZWN0KGNvbmZpZyk7XHJcbiAgICB9XHJcbiAgICBpZiAobmV3TGluay5qdG9wbykge1xyXG4gICAgICAgIHRoaXMuYWRkKG5ld0xpbmsuanRvcG8pO1xyXG4gICAgICAgIHRoaXMuY2hpbGRyZW4ubGluay5wdXNoKG5ld0xpbmspO1xyXG4gICAgICAgIHJldHVybiBuZXdMaW5rO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiY3JlYXRlIExpbmsgZXJyb3JcIiwgY29uZmlnKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn07XHJcblNjZW5lLnByb3RvdHlwZS5jcmVhdGVDb250YWluZXI9ZnVuY3Rpb24oY29uZmlnKSB7XHJcbiAgICB2YXIgbmV3Q29udGFpbmVyO1xyXG4gICAgY29uZmlnID0gY29uZmlnIHx8IHt9O1xyXG4gICAgc3dpdGNoIChjb25maWcudHlwZSkge1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIG5ld0NvbnRhaW5lciA9IG5ldyBDb250YWluZXIuR3JvdXAoY29uZmlnKTtcclxuICAgIH1cclxuICAgIGlmIChuZXdDb250YWluZXIuanRvcG8pIHtcclxuICAgICAgICB0aGlzLmFkZChuZXdDb250YWluZXIuanRvcG8pO1xyXG4gICAgICAgIHRoaXMuY2hpbGRyZW4uY29udGFpbmVyLnB1c2gobmV3Q29udGFpbmVyKTtcclxuICAgICAgICByZXR1cm4gbmV3Q29udGFpbmVyO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiY3JlYXRlIENvbnRhaW5lciBlcnJvclwiLCBjb25maWcpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufTtcclxuU2NlbmUucHJvdG90eXBlLmFkZD1mdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICBpZiAoZWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuanRvcG8uYWRkKGVsZW1lbnQpO1xyXG4gICAgfVxyXG59O1xyXG5TY2VuZS5wcm90b3R5cGUuY2VudGVyPWZ1bmN0aW9uKCl7XHJcbiAgICB0aGlzLmp0b3BvLnN0YWdlLmNlbnRlckFuZFpvb20oKTtcclxufTtcclxuU2NlbmUucHJvdG90eXBlLnNldE1vZGU9ZnVuY3Rpb24obW9kZSkge1xyXG4gICAgdGhpcy5hdHRyLm1vZGUgPSBtb2RlO1xyXG4gICAgdGhpcy5qdG9wby5tb2RlID0gbW9kZTtcclxufTtcclxuU2NlbmUucHJvdG90eXBlLnNldEJhY2tHcm91bmQ9ZnVuY3Rpb24oYmFja2dyb3VuZCkge1xyXG4gICAgdGhpcy5qdG9wby5iYWNrZ3JvdW5kID0gYmFja2dyb3VuZDtcclxuICAgIHRoaXMuYXR0ci5iYWNrZ3JvdW5kPWJhY2tncm91bmQ7XHJcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9kZXZlbG9wL2NvcmUvU2NlbmUuanNcbi8vIG1vZHVsZSBpZCA9IDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==');
},function(module,exports,__webpack_require__){eval('/**\r\n * Created by qiyc on 2017/2/7.\r\n */\r\nvar Node=__webpack_require__(5);\r\nNormalNode.prototype =new Node();\r\nmodule.exports = NormalNode;\r\nvar defaults = function () {\r\n    return {\r\n        image: "",\r\n        size: [30, 30],\r\n        name: "node",\r\n        alpha: 1,\r\n        position: [0, 0],\r\n        font: {\r\n            size: 16,\r\n            type: \'微软雅黑\',\r\n            color: "255,255,255"\r\n        },\r\n        zIndex: 200,//层级(10-999)\r\n        color: JTopo.util.randomColor(),\r\n        textPosition: \'bottom\',//Bottom_Center Top_Center Middle_Left Middle_Right Hidden\r\n        type: \'normal\',\r\n        alarm: {\r\n            show: false,\r\n            text: "",\r\n            color: "255,255,255",\r\n            font: {\r\n                size: 16,\r\n                type: "微软雅黑"\r\n            }\r\n        }\r\n    }\r\n};\r\n//一般节点\r\nfunction NormalNode(config) {\r\n    var self = this;\r\n    self.attr = QTopo.util.extend(defaults(), config || {});\r\n    self.jtopo = new JTopo.Node();\r\n    //封装对象之间相互保持引用\r\n    self.jtopo.qtopo = self;\r\n    //告警闪烁\r\n    self.jtopo.alarmFlash=alarmFlash;\r\n    //函数\r\n    self.set = setJTopo;\r\n    //初始化\r\n    self.set(self.attr);\r\n}\r\nfunction setJTopo(config) {\r\n    if (config) {\r\n        var self = this;\r\n        //处理一般属性的设置\r\n        this._setAttr(config);\r\n        //处理特殊属性的设置\r\n    }\r\n}\r\nNormalNode.prototype.setImage=function(image) {\r\n    this.jtopo.setImage(image);\r\n    this.attr.image=image;\r\n};\r\nNormalNode.prototype.setAlarm=function(config) {\r\n    var jtopo = this.jtopo;\r\n    alarmAttr(jtopo,this.attr.alarm,config);\r\n};\r\nfunction alarmAttr(jtopo,alarm,config){\r\n    if(typeof config.show=="undefined"){\r\n        config.show=alarm.show;\r\n    }\r\n    if (config.show) {\r\n        jtopo.shadow = true;\r\n        jtopo.alarm = config.text || "";\r\n        alarm.text=jtopo.alarm;\r\n        if(config.color){\r\n            jtopo.alarmColor = QTopo.util.transHex(config.color.toLowerCase());\r\n            alarm.color=jtopo.alarmColor;\r\n        }\r\n        jtopo.alarmAlpha = 1;\r\n        var size=alarm.font.size;\r\n        var font=alarm.font.type;\r\n        if(config.font&&config.font.size){\r\n            size=config.font.size;\r\n        }\r\n        if(config.font&&config.font.type){\r\n            font=config.font.type;\r\n        }\r\n        jtopo.alarmFont =  size+ \'px \' + font;\r\n        alarm.font.size=size;\r\n        alarm.font.type=font;\r\n        toggleAlarmFlash(jtopo,true);\r\n    } else {\r\n        jtopo.alarm = null;\r\n        toggleAlarmFlash(jtopo,false);\r\n    }\r\n    alarm.show=config.show;\r\n}\r\nfunction toggleAlarmFlash(node,show){\r\n    //切换闪烁\r\n    if(show){\r\n        node.shadowOffsetX = 0;\r\n        node.shadowOffsetY = 0;\r\n        node.shadowColor = "rgba(" + node.alarmColor + ",1)";\r\n        node.shadowBlur = 10;\r\n        node.allowAlarmFlash=true;\r\n    }else{\r\n        node.shadowOffsetX = 3;\r\n        node.shadowOffsetY = 6;\r\n        node.shadowColor="rgba(0,0,0,0.1)";\r\n        node.shadowBlur = 10;\r\n        node.allowAlarmFlash=false;\r\n    }\r\n}\r\nfunction alarmFlash() {\r\n    //插入源码部分代码\r\n    if(this.shadow&&this.allowAlarmFlash){\r\n        if(typeof this.shadowDirection=="undefined"){\r\n            this.shadowDirection=true;\r\n        }\r\n        move(this);\r\n        function move(node){\r\n            if (node.shadowDirection) {\r\n                node.shadowBlur += 5;\r\n                if(node.shadowBlur>100){\r\n                    node.shadowDirection=false;\r\n                }\r\n            }\r\n            else {\r\n                node.shadowBlur -= 5;\r\n                if(node.shadowBlur<=10){\r\n                    node.shadowDirection=true;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kZXZlbG9wL2NvcmUvZWxlbWVudC9ub2RlL05vcm1hbC5qcz8xODQyIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBEO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiNC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHFpeWMgb24gMjAxNy8yLzcuXHJcbiAqL1xyXG52YXIgTm9kZT1yZXF1aXJlKFwiLi9Ob2RlLmpzXCIpO1xyXG5Ob3JtYWxOb2RlLnByb3RvdHlwZSA9bmV3IE5vZGUoKTtcclxubW9kdWxlLmV4cG9ydHMgPSBOb3JtYWxOb2RlO1xyXG52YXIgZGVmYXVsdHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGltYWdlOiBcIlwiLFxyXG4gICAgICAgIHNpemU6IFszMCwgMzBdLFxyXG4gICAgICAgIG5hbWU6IFwibm9kZVwiLFxyXG4gICAgICAgIGFscGhhOiAxLFxyXG4gICAgICAgIHBvc2l0aW9uOiBbMCwgMF0sXHJcbiAgICAgICAgZm9udDoge1xyXG4gICAgICAgICAgICBzaXplOiAxNixcclxuICAgICAgICAgICAgdHlwZTogJ+W+rui9r+mbhem7kScsXHJcbiAgICAgICAgICAgIGNvbG9yOiBcIjI1NSwyNTUsMjU1XCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIHpJbmRleDogMjAwLC8v5bGC57qnKDEwLTk5OSlcclxuICAgICAgICBjb2xvcjogSlRvcG8udXRpbC5yYW5kb21Db2xvcigpLFxyXG4gICAgICAgIHRleHRQb3NpdGlvbjogJ2JvdHRvbScsLy9Cb3R0b21fQ2VudGVyIFRvcF9DZW50ZXIgTWlkZGxlX0xlZnQgTWlkZGxlX1JpZ2h0IEhpZGRlblxyXG4gICAgICAgIHR5cGU6ICdub3JtYWwnLFxyXG4gICAgICAgIGFsYXJtOiB7XHJcbiAgICAgICAgICAgIHNob3c6IGZhbHNlLFxyXG4gICAgICAgICAgICB0ZXh0OiBcIlwiLFxyXG4gICAgICAgICAgICBjb2xvcjogXCIyNTUsMjU1LDI1NVwiLFxyXG4gICAgICAgICAgICBmb250OiB7XHJcbiAgICAgICAgICAgICAgICBzaXplOiAxNixcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwi5b6u6L2v6ZuF6buRXCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuLy/kuIDoiKzoioLngrlcclxuZnVuY3Rpb24gTm9ybWFsTm9kZShjb25maWcpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYuYXR0ciA9IFFUb3BvLnV0aWwuZXh0ZW5kKGRlZmF1bHRzKCksIGNvbmZpZyB8fCB7fSk7XHJcbiAgICBzZWxmLmp0b3BvID0gbmV3IEpUb3BvLk5vZGUoKTtcclxuICAgIC8v5bCB6KOF5a+56LGh5LmL6Ze055u45LqS5L+d5oyB5byV55SoXHJcbiAgICBzZWxmLmp0b3BvLnF0b3BvID0gc2VsZjtcclxuICAgIC8v5ZGK6K2m6Zeq54OBXHJcbiAgICBzZWxmLmp0b3BvLmFsYXJtRmxhc2g9YWxhcm1GbGFzaDtcclxuICAgIC8v5Ye95pWwXHJcbiAgICBzZWxmLnNldCA9IHNldEpUb3BvO1xyXG4gICAgLy/liJ3lp4vljJZcclxuICAgIHNlbGYuc2V0KHNlbGYuYXR0cik7XHJcbn1cclxuZnVuY3Rpb24gc2V0SlRvcG8oY29uZmlnKSB7XHJcbiAgICBpZiAoY29uZmlnKSB7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIC8v5aSE55CG5LiA6Iis5bGe5oCn55qE6K6+572uXHJcbiAgICAgICAgdGhpcy5fc2V0QXR0cihjb25maWcpO1xyXG4gICAgICAgIC8v5aSE55CG54m55q6K5bGe5oCn55qE6K6+572uXHJcbiAgICB9XHJcbn1cclxuTm9ybWFsTm9kZS5wcm90b3R5cGUuc2V0SW1hZ2U9ZnVuY3Rpb24oaW1hZ2UpIHtcclxuICAgIHRoaXMuanRvcG8uc2V0SW1hZ2UoaW1hZ2UpO1xyXG4gICAgdGhpcy5hdHRyLmltYWdlPWltYWdlO1xyXG59O1xyXG5Ob3JtYWxOb2RlLnByb3RvdHlwZS5zZXRBbGFybT1mdW5jdGlvbihjb25maWcpIHtcclxuICAgIHZhciBqdG9wbyA9IHRoaXMuanRvcG87XHJcbiAgICBhbGFybUF0dHIoanRvcG8sdGhpcy5hdHRyLmFsYXJtLGNvbmZpZyk7XHJcbn07XHJcbmZ1bmN0aW9uIGFsYXJtQXR0cihqdG9wbyxhbGFybSxjb25maWcpe1xyXG4gICAgaWYodHlwZW9mIGNvbmZpZy5zaG93PT1cInVuZGVmaW5lZFwiKXtcclxuICAgICAgICBjb25maWcuc2hvdz1hbGFybS5zaG93O1xyXG4gICAgfVxyXG4gICAgaWYgKGNvbmZpZy5zaG93KSB7XHJcbiAgICAgICAganRvcG8uc2hhZG93ID0gdHJ1ZTtcclxuICAgICAgICBqdG9wby5hbGFybSA9IGNvbmZpZy50ZXh0IHx8IFwiXCI7XHJcbiAgICAgICAgYWxhcm0udGV4dD1qdG9wby5hbGFybTtcclxuICAgICAgICBpZihjb25maWcuY29sb3Ipe1xyXG4gICAgICAgICAgICBqdG9wby5hbGFybUNvbG9yID0gUVRvcG8udXRpbC50cmFuc0hleChjb25maWcuY29sb3IudG9Mb3dlckNhc2UoKSk7XHJcbiAgICAgICAgICAgIGFsYXJtLmNvbG9yPWp0b3BvLmFsYXJtQ29sb3I7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGp0b3BvLmFsYXJtQWxwaGEgPSAxO1xyXG4gICAgICAgIHZhciBzaXplPWFsYXJtLmZvbnQuc2l6ZTtcclxuICAgICAgICB2YXIgZm9udD1hbGFybS5mb250LnR5cGU7XHJcbiAgICAgICAgaWYoY29uZmlnLmZvbnQmJmNvbmZpZy5mb250LnNpemUpe1xyXG4gICAgICAgICAgICBzaXplPWNvbmZpZy5mb250LnNpemU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGNvbmZpZy5mb250JiZjb25maWcuZm9udC50eXBlKXtcclxuICAgICAgICAgICAgZm9udD1jb25maWcuZm9udC50eXBlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBqdG9wby5hbGFybUZvbnQgPSAgc2l6ZSsgJ3B4ICcgKyBmb250O1xyXG4gICAgICAgIGFsYXJtLmZvbnQuc2l6ZT1zaXplO1xyXG4gICAgICAgIGFsYXJtLmZvbnQudHlwZT1mb250O1xyXG4gICAgICAgIHRvZ2dsZUFsYXJtRmxhc2goanRvcG8sdHJ1ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGp0b3BvLmFsYXJtID0gbnVsbDtcclxuICAgICAgICB0b2dnbGVBbGFybUZsYXNoKGp0b3BvLGZhbHNlKTtcclxuICAgIH1cclxuICAgIGFsYXJtLnNob3c9Y29uZmlnLnNob3c7XHJcbn1cclxuZnVuY3Rpb24gdG9nZ2xlQWxhcm1GbGFzaChub2RlLHNob3cpe1xyXG4gICAgLy/liIfmjaLpl6rng4FcclxuICAgIGlmKHNob3cpe1xyXG4gICAgICAgIG5vZGUuc2hhZG93T2Zmc2V0WCA9IDA7XHJcbiAgICAgICAgbm9kZS5zaGFkb3dPZmZzZXRZID0gMDtcclxuICAgICAgICBub2RlLnNoYWRvd0NvbG9yID0gXCJyZ2JhKFwiICsgbm9kZS5hbGFybUNvbG9yICsgXCIsMSlcIjtcclxuICAgICAgICBub2RlLnNoYWRvd0JsdXIgPSAxMDtcclxuICAgICAgICBub2RlLmFsbG93QWxhcm1GbGFzaD10cnVlO1xyXG4gICAgfWVsc2V7XHJcbiAgICAgICAgbm9kZS5zaGFkb3dPZmZzZXRYID0gMztcclxuICAgICAgICBub2RlLnNoYWRvd09mZnNldFkgPSA2O1xyXG4gICAgICAgIG5vZGUuc2hhZG93Q29sb3I9XCJyZ2JhKDAsMCwwLDAuMSlcIjtcclxuICAgICAgICBub2RlLnNoYWRvd0JsdXIgPSAxMDtcclxuICAgICAgICBub2RlLmFsbG93QWxhcm1GbGFzaD1mYWxzZTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBhbGFybUZsYXNoKCkge1xyXG4gICAgLy/mj5LlhaXmupDnoIHpg6jliIbku6PnoIFcclxuICAgIGlmKHRoaXMuc2hhZG93JiZ0aGlzLmFsbG93QWxhcm1GbGFzaCl7XHJcbiAgICAgICAgaWYodHlwZW9mIHRoaXMuc2hhZG93RGlyZWN0aW9uPT1cInVuZGVmaW5lZFwiKXtcclxuICAgICAgICAgICAgdGhpcy5zaGFkb3dEaXJlY3Rpb249dHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbW92ZSh0aGlzKTtcclxuICAgICAgICBmdW5jdGlvbiBtb3ZlKG5vZGUpe1xyXG4gICAgICAgICAgICBpZiAobm9kZS5zaGFkb3dEaXJlY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIG5vZGUuc2hhZG93Qmx1ciArPSA1O1xyXG4gICAgICAgICAgICAgICAgaWYobm9kZS5zaGFkb3dCbHVyPjEwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5zaGFkb3dEaXJlY3Rpb249ZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBub2RlLnNoYWRvd0JsdXIgLT0gNTtcclxuICAgICAgICAgICAgICAgIGlmKG5vZGUuc2hhZG93Qmx1cjw9MTApe1xyXG4gICAgICAgICAgICAgICAgICAgIG5vZGUuc2hhZG93RGlyZWN0aW9uPXRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2RldmVsb3AvY29yZS9lbGVtZW50L25vZGUvTm9ybWFsLmpzXG4vLyBtb2R1bGUgaWQgPSA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=')},function(module,exports,__webpack_require__){eval('/**\r\n * Created by qiyc on 2017/2/7.\r\n */\r\nvar Element=__webpack_require__(6);\r\nNode.prototype = new Element();\r\nmodule.exports =Node;\r\nfunction Node() {\r\n    this.getType=function(){\r\n        return "node";\r\n    };\r\n    this.setColor = function (color) {\r\n        if (color) {\r\n            color = QTopo.util.transHex(color.toLowerCase());\r\n            this.jtopo.fillColor = color;\r\n            this.attr.color=this.jtopo.fillColor;\r\n        }\r\n    };\r\n    this.setName=function(name){\r\n        if(this.attr.textPosition!="hide"){\r\n            this.jtopo.text=name;\r\n            this.attr.name=this.jtopo.text;\r\n        }\r\n    };\r\n}\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kZXZlbG9wL2NvcmUvZWxlbWVudC9ub2RlL05vZGUuanM/OTA1OCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiNS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHFpeWMgb24gMjAxNy8yLzcuXHJcbiAqL1xyXG52YXIgRWxlbWVudD1yZXF1aXJlKFwiLi4vRWxlbWVudC5qc1wiKTtcclxuTm9kZS5wcm90b3R5cGUgPSBuZXcgRWxlbWVudCgpO1xyXG5tb2R1bGUuZXhwb3J0cyA9Tm9kZTtcclxuZnVuY3Rpb24gTm9kZSgpIHtcclxuICAgIHRoaXMuZ2V0VHlwZT1mdW5jdGlvbigpe1xyXG4gICAgICAgIHJldHVybiBcIm5vZGVcIjtcclxuICAgIH07XHJcbiAgICB0aGlzLnNldENvbG9yID0gZnVuY3Rpb24gKGNvbG9yKSB7XHJcbiAgICAgICAgaWYgKGNvbG9yKSB7XHJcbiAgICAgICAgICAgIGNvbG9yID0gUVRvcG8udXRpbC50cmFuc0hleChjb2xvci50b0xvd2VyQ2FzZSgpKTtcclxuICAgICAgICAgICAgdGhpcy5qdG9wby5maWxsQ29sb3IgPSBjb2xvcjtcclxuICAgICAgICAgICAgdGhpcy5hdHRyLmNvbG9yPXRoaXMuanRvcG8uZmlsbENvbG9yO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aGlzLnNldE5hbWU9ZnVuY3Rpb24obmFtZSl7XHJcbiAgICAgICAgaWYodGhpcy5hdHRyLnRleHRQb3NpdGlvbiE9XCJoaWRlXCIpe1xyXG4gICAgICAgICAgICB0aGlzLmp0b3BvLnRleHQ9bmFtZTtcclxuICAgICAgICAgICAgdGhpcy5hdHRyLm5hbWU9dGhpcy5qdG9wby50ZXh0O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuXHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZGV2ZWxvcC9jb3JlL2VsZW1lbnQvbm9kZS9Ob2RlLmpzXG4vLyBtb2R1bGUgaWQgPSA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=')},function(module,exports){eval('/**\r\n * Created by qiyc on 2017/2/7.\r\n */\r\nmodule.exports =Element;\r\nfunction Element() {\r\n    this.show = function () {\r\n        this.jtopo.visible = true;\r\n        this.attr.show=this.jtopo.visible;\r\n    };\r\n    this.hide = function () {\r\n        this.jtopo.visible = false;\r\n        this.attr.show=this.jtopo.visible;\r\n    };\r\n    this.setText = function (text) {\r\n        this.jtopo.text = text;\r\n        this.attr.text=text;\r\n    };\r\n    this.on = function (name, fn) {\r\n        this.jtopo.addEventListener(name, function (e) {\r\n            if(e.target&&e.target.qtopo){\r\n                fn(e,e.target.qtopo);\r\n            }else{\r\n                fn(e);\r\n            }\r\n        });\r\n    };\r\n    this.off = function (name, fn) {\r\n        this.jtopo.removeEventListener(name);\r\n    };\r\n    this.setZIndex = function (zIndex) {\r\n        this.jtopo.zIndex = parseInt($.isNumeric(zIndex) ? zIndex : 10);\r\n        this.attr.zIndex=this.jtopo.zIndex;\r\n    };\r\n    this.setFont = function (font) {\r\n        if(font){\r\n            var type= this.attr.font.type;\r\n            var size=this.attr.font.size;\r\n            if ($.isNumeric(font.size)) {\r\n                this.attr.font.size=font.size;\r\n                size=font.size;\r\n            }\r\n            if(font.type){\r\n                this.attr.font.type=font.type;\r\n                type=font.type;\r\n            }\r\n            this.jtopo.font = size + "px " + type;\r\n            if (font.color) {\r\n                this.jtopo.fontColor = QTopo.util.transHex(font.color.toLowerCase());\r\n                this.attr.font.color=this.jtopo.fontColor;\r\n            }\r\n        }\r\n    };\r\n    this.setAlpha = function (alpha) {\r\n        if ($.isNumeric(alpha) && alpha <= 1 && alpha > 0) {\r\n            this.jtopo.alpha = alpha;\r\n        } else {\r\n            this.jtopo.alpha = 1;\r\n        }\r\n        this.attr.alpha= this.jtopo.alpha;\r\n    };\r\n    this.setTextOffset = function (arr) {\r\n        if ($.isArray(arr) && arr.length >= 2) {\r\n            this.jtopo.textOffsetX = arr[0];\r\n            this.jtopo.textOffsetY = arr[1];\r\n            this.attr.textOffset=arr;\r\n        } else {\r\n            console.error(this,"textOffset need be array and 2 length");\r\n        }\r\n    };\r\n    this.setPosition = function (position) {\r\n        if ($.isArray(position) && position.length >= 2) {\r\n            if ($.isNumeric(position[0]) && $.isNumeric(position[1])) {\r\n                this.jtopo.setLocation(parseInt(position[0]), parseInt(position[1]));\r\n                this.attr.position=[this.jtopo.x, this.jtopo.y];\r\n            }\r\n        } else {\r\n            console.error(this,"position need be array and 2 length");\r\n        }\r\n    };\r\n    this.setSize = function (size) {\r\n        if ($.isArray(size) && size.length >= 2) {\r\n            this.jtopo.setSize(size[0], size[1]);\r\n            this.attr.size=[this.jtopo.width,this.jtopo.height];\r\n        } else {\r\n            console.error(this,"size need be array and 2 length");\r\n        }\r\n    };\r\n    this.setDragable = function (dragable) {\r\n        this.jtopo.dragable = dragable;\r\n        this.attr.dragable=this.jtopo.dragable;\r\n    };\r\n    this.setTextPosition = function (textPosition) {\r\n        var jtopo = this.jtopo;\r\n        jtopo.text = this.attr.name;\r\n        switch (textPosition) {\r\n            case \'hide\':\r\n                jtopo.text = \'\';\r\n                this.attr.textPosition="hide";\r\n                break;\r\n            case \'bottom\':\r\n                jtopo.textOffsetX = 0;\r\n                jtopo.textOffsetY = 0;\r\n                jtopo.textPosition = "Bottom_Center";\r\n                this.attr.textPosition="bottom";\r\n                break;\r\n            case \'top\':\r\n                jtopo.textOffsetX = 0;\r\n                jtopo.textOffsetY = 0;\r\n                jtopo.textPosition = "Top_Center";\r\n                this.attr.textPosition="top";\r\n                break;\r\n            case \'left\':\r\n                jtopo.textOffsetX = -5;\r\n                jtopo.textOffsetY = 0;\r\n                jtopo.textPosition = "Middle_Left";\r\n                this.attr.textPosition="left";\r\n                break;\r\n            case \'right\':\r\n                jtopo.textOffsetX = 5;\r\n                jtopo.textOffsetY = 0;\r\n                jtopo.textPosition = "Middle_Right";\r\n                this.attr.textPosition="right";\r\n                break;\r\n            default:\r\n                jtopo.textOffsetX = 0;\r\n                jtopo.textOffsetY = 0;\r\n                jtopo.text = this.attr.name;\r\n                jtopo.textPosition = \'Bottom_Center\';\r\n                this.attr.textPosition="bottom";\r\n                console.error(this,"set wrong textPosition,default is bottom");\r\n                break;\r\n        }\r\n    };\r\n    //只要对应属性有方法则修改\r\n    this._setAttr = function (config) {\r\n        var self = this;\r\n        $.each(config, function (k, v) {\r\n            try {\r\n                var fn = self[\'set\' + QTopo.util.upFirst(k)];\r\n                if (fn) {\r\n                    //v=QTopo.util.merge(self.attr[k],v);\r\n                    fn.call(self, v);\r\n                }\r\n            } catch (e) {\r\n                console.error(self,"Element _setAttr error :" + k,e);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kZXZlbG9wL2NvcmUvZWxlbWVudC9FbGVtZW50LmpzPzg1ZDAiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EiLCJmaWxlIjoiNi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHFpeWMgb24gMjAxNy8yLzcuXHJcbiAqL1xyXG5tb2R1bGUuZXhwb3J0cyA9RWxlbWVudDtcclxuZnVuY3Rpb24gRWxlbWVudCgpIHtcclxuICAgIHRoaXMuc2hvdyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmp0b3BvLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuYXR0ci5zaG93PXRoaXMuanRvcG8udmlzaWJsZTtcclxuICAgIH07XHJcbiAgICB0aGlzLmhpZGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5qdG9wby52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5hdHRyLnNob3c9dGhpcy5qdG9wby52aXNpYmxlO1xyXG4gICAgfTtcclxuICAgIHRoaXMuc2V0VGV4dCA9IGZ1bmN0aW9uICh0ZXh0KSB7XHJcbiAgICAgICAgdGhpcy5qdG9wby50ZXh0ID0gdGV4dDtcclxuICAgICAgICB0aGlzLmF0dHIudGV4dD10ZXh0O1xyXG4gICAgfTtcclxuICAgIHRoaXMub24gPSBmdW5jdGlvbiAobmFtZSwgZm4pIHtcclxuICAgICAgICB0aGlzLmp0b3BvLmFkZEV2ZW50TGlzdGVuZXIobmFtZSwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgaWYoZS50YXJnZXQmJmUudGFyZ2V0LnF0b3BvKXtcclxuICAgICAgICAgICAgICAgIGZuKGUsZS50YXJnZXQucXRvcG8pO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGZuKGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5vZmYgPSBmdW5jdGlvbiAobmFtZSwgZm4pIHtcclxuICAgICAgICB0aGlzLmp0b3BvLnJlbW92ZUV2ZW50TGlzdGVuZXIobmFtZSk7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5zZXRaSW5kZXggPSBmdW5jdGlvbiAoekluZGV4KSB7XHJcbiAgICAgICAgdGhpcy5qdG9wby56SW5kZXggPSBwYXJzZUludCgkLmlzTnVtZXJpYyh6SW5kZXgpID8gekluZGV4IDogMTApO1xyXG4gICAgICAgIHRoaXMuYXR0ci56SW5kZXg9dGhpcy5qdG9wby56SW5kZXg7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5zZXRGb250ID0gZnVuY3Rpb24gKGZvbnQpIHtcclxuICAgICAgICBpZihmb250KXtcclxuICAgICAgICAgICAgdmFyIHR5cGU9IHRoaXMuYXR0ci5mb250LnR5cGU7XHJcbiAgICAgICAgICAgIHZhciBzaXplPXRoaXMuYXR0ci5mb250LnNpemU7XHJcbiAgICAgICAgICAgIGlmICgkLmlzTnVtZXJpYyhmb250LnNpemUpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmF0dHIuZm9udC5zaXplPWZvbnQuc2l6ZTtcclxuICAgICAgICAgICAgICAgIHNpemU9Zm9udC5zaXplO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKGZvbnQudHlwZSl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmF0dHIuZm9udC50eXBlPWZvbnQudHlwZTtcclxuICAgICAgICAgICAgICAgIHR5cGU9Zm9udC50eXBlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuanRvcG8uZm9udCA9IHNpemUgKyBcInB4IFwiICsgdHlwZTtcclxuICAgICAgICAgICAgaWYgKGZvbnQuY29sb3IpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuanRvcG8uZm9udENvbG9yID0gUVRvcG8udXRpbC50cmFuc0hleChmb250LmNvbG9yLnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hdHRyLmZvbnQuY29sb3I9dGhpcy5qdG9wby5mb250Q29sb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhpcy5zZXRBbHBoYSA9IGZ1bmN0aW9uIChhbHBoYSkge1xyXG4gICAgICAgIGlmICgkLmlzTnVtZXJpYyhhbHBoYSkgJiYgYWxwaGEgPD0gMSAmJiBhbHBoYSA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5qdG9wby5hbHBoYSA9IGFscGhhO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuanRvcG8uYWxwaGEgPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmF0dHIuYWxwaGE9IHRoaXMuanRvcG8uYWxwaGE7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5zZXRUZXh0T2Zmc2V0ID0gZnVuY3Rpb24gKGFycikge1xyXG4gICAgICAgIGlmICgkLmlzQXJyYXkoYXJyKSAmJiBhcnIubGVuZ3RoID49IDIpIHtcclxuICAgICAgICAgICAgdGhpcy5qdG9wby50ZXh0T2Zmc2V0WCA9IGFyclswXTtcclxuICAgICAgICAgICAgdGhpcy5qdG9wby50ZXh0T2Zmc2V0WSA9IGFyclsxXTtcclxuICAgICAgICAgICAgdGhpcy5hdHRyLnRleHRPZmZzZXQ9YXJyO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IodGhpcyxcInRleHRPZmZzZXQgbmVlZCBiZSBhcnJheSBhbmQgMiBsZW5ndGhcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRoaXMuc2V0UG9zaXRpb24gPSBmdW5jdGlvbiAocG9zaXRpb24pIHtcclxuICAgICAgICBpZiAoJC5pc0FycmF5KHBvc2l0aW9uKSAmJiBwb3NpdGlvbi5sZW5ndGggPj0gMikge1xyXG4gICAgICAgICAgICBpZiAoJC5pc051bWVyaWMocG9zaXRpb25bMF0pICYmICQuaXNOdW1lcmljKHBvc2l0aW9uWzFdKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5qdG9wby5zZXRMb2NhdGlvbihwYXJzZUludChwb3NpdGlvblswXSksIHBhcnNlSW50KHBvc2l0aW9uWzFdKSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmF0dHIucG9zaXRpb249W3RoaXMuanRvcG8ueCwgdGhpcy5qdG9wby55XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IodGhpcyxcInBvc2l0aW9uIG5lZWQgYmUgYXJyYXkgYW5kIDIgbGVuZ3RoXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aGlzLnNldFNpemUgPSBmdW5jdGlvbiAoc2l6ZSkge1xyXG4gICAgICAgIGlmICgkLmlzQXJyYXkoc2l6ZSkgJiYgc2l6ZS5sZW5ndGggPj0gMikge1xyXG4gICAgICAgICAgICB0aGlzLmp0b3BvLnNldFNpemUoc2l6ZVswXSwgc2l6ZVsxXSk7XHJcbiAgICAgICAgICAgIHRoaXMuYXR0ci5zaXplPVt0aGlzLmp0b3BvLndpZHRoLHRoaXMuanRvcG8uaGVpZ2h0XTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKHRoaXMsXCJzaXplIG5lZWQgYmUgYXJyYXkgYW5kIDIgbGVuZ3RoXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aGlzLnNldERyYWdhYmxlID0gZnVuY3Rpb24gKGRyYWdhYmxlKSB7XHJcbiAgICAgICAgdGhpcy5qdG9wby5kcmFnYWJsZSA9IGRyYWdhYmxlO1xyXG4gICAgICAgIHRoaXMuYXR0ci5kcmFnYWJsZT10aGlzLmp0b3BvLmRyYWdhYmxlO1xyXG4gICAgfTtcclxuICAgIHRoaXMuc2V0VGV4dFBvc2l0aW9uID0gZnVuY3Rpb24gKHRleHRQb3NpdGlvbikge1xyXG4gICAgICAgIHZhciBqdG9wbyA9IHRoaXMuanRvcG87XHJcbiAgICAgICAganRvcG8udGV4dCA9IHRoaXMuYXR0ci5uYW1lO1xyXG4gICAgICAgIHN3aXRjaCAodGV4dFBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ2hpZGUnOlxyXG4gICAgICAgICAgICAgICAganRvcG8udGV4dCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hdHRyLnRleHRQb3NpdGlvbj1cImhpZGVcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdib3R0b20nOlxyXG4gICAgICAgICAgICAgICAganRvcG8udGV4dE9mZnNldFggPSAwO1xyXG4gICAgICAgICAgICAgICAganRvcG8udGV4dE9mZnNldFkgPSAwO1xyXG4gICAgICAgICAgICAgICAganRvcG8udGV4dFBvc2l0aW9uID0gXCJCb3R0b21fQ2VudGVyXCI7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmF0dHIudGV4dFBvc2l0aW9uPVwiYm90dG9tXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAndG9wJzpcclxuICAgICAgICAgICAgICAgIGp0b3BvLnRleHRPZmZzZXRYID0gMDtcclxuICAgICAgICAgICAgICAgIGp0b3BvLnRleHRPZmZzZXRZID0gMDtcclxuICAgICAgICAgICAgICAgIGp0b3BvLnRleHRQb3NpdGlvbiA9IFwiVG9wX0NlbnRlclwiO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hdHRyLnRleHRQb3NpdGlvbj1cInRvcFwiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2xlZnQnOlxyXG4gICAgICAgICAgICAgICAganRvcG8udGV4dE9mZnNldFggPSAtNTtcclxuICAgICAgICAgICAgICAgIGp0b3BvLnRleHRPZmZzZXRZID0gMDtcclxuICAgICAgICAgICAgICAgIGp0b3BvLnRleHRQb3NpdGlvbiA9IFwiTWlkZGxlX0xlZnRcIjtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXR0ci50ZXh0UG9zaXRpb249XCJsZWZ0XCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAncmlnaHQnOlxyXG4gICAgICAgICAgICAgICAganRvcG8udGV4dE9mZnNldFggPSA1O1xyXG4gICAgICAgICAgICAgICAganRvcG8udGV4dE9mZnNldFkgPSAwO1xyXG4gICAgICAgICAgICAgICAganRvcG8udGV4dFBvc2l0aW9uID0gXCJNaWRkbGVfUmlnaHRcIjtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXR0ci50ZXh0UG9zaXRpb249XCJyaWdodFwiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBqdG9wby50ZXh0T2Zmc2V0WCA9IDA7XHJcbiAgICAgICAgICAgICAgICBqdG9wby50ZXh0T2Zmc2V0WSA9IDA7XHJcbiAgICAgICAgICAgICAgICBqdG9wby50ZXh0ID0gdGhpcy5hdHRyLm5hbWU7XHJcbiAgICAgICAgICAgICAgICBqdG9wby50ZXh0UG9zaXRpb24gPSAnQm90dG9tX0NlbnRlcic7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmF0dHIudGV4dFBvc2l0aW9uPVwiYm90dG9tXCI7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKHRoaXMsXCJzZXQgd3JvbmcgdGV4dFBvc2l0aW9uLGRlZmF1bHQgaXMgYm90dG9tXCIpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8v5Y+q6KaB5a+55bqU5bGe5oCn5pyJ5pa55rOV5YiZ5L+u5pS5XHJcbiAgICB0aGlzLl9zZXRBdHRyID0gZnVuY3Rpb24gKGNvbmZpZykge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAkLmVhY2goY29uZmlnLCBmdW5jdGlvbiAoaywgdikge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZuID0gc2VsZlsnc2V0JyArIFFUb3BvLnV0aWwudXBGaXJzdChrKV07XHJcbiAgICAgICAgICAgICAgICBpZiAoZm4pIHtcclxuICAgICAgICAgICAgICAgICAgICAvL3Y9UVRvcG8udXRpbC5tZXJnZShzZWxmLmF0dHJba10sdik7XHJcbiAgICAgICAgICAgICAgICAgICAgZm4uY2FsbChzZWxmLCB2KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihzZWxmLFwiRWxlbWVudCBfc2V0QXR0ciBlcnJvciA6XCIgKyBrLGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZGV2ZWxvcC9jb3JlL2VsZW1lbnQvRWxlbWVudC5qc1xuLy8gbW9kdWxlIGlkID0gNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9')},function(module,exports,__webpack_require__){eval("/**\r\n * Created by qiyc on 2017/2/7.\r\n */\r\n\r\nvar Node=__webpack_require__(5);\r\nTextNode.prototype =new Node();\r\nmodule.exports = TextNode;\r\nvar defaults =function(){\r\n    return {\r\n        position:[0,0],\r\n        font:{\r\n            size:16,\r\n            type: '微软雅黑',\r\n            color:\"255,255,255\"\r\n        },\r\n        zIndex: 200,//层级(10-999)\r\n        alpha: 1,\r\n        text: 'no text here',\r\n        type: 'text'\r\n    };\r\n};\r\n//一般节点\r\nfunction TextNode(config) {\r\n    var self = this;\r\n    self.jtopo = new JTopo.TextNode();\r\n    //封装对象之间相互保持引用\r\n    self.jtopo.qtopo=self;\r\n    //函数\r\n    self.attr= QTopo.util.extend(defaults(), config || {});\r\n    self.set = setJTopo;\r\n    //初始化\r\n    self.set(self.attr);\r\n}\r\nfunction setJTopo(config) {\r\n    if (config) {\r\n        var self=this;\r\n        //处理一般属性的设置\r\n        this._setAttr(config);\r\n    }\r\n}\r\n//私有函数//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kZXZlbG9wL2NvcmUvZWxlbWVudC9ub2RlL1RleHQuanM/MzM5ZiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBeUQ7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6IjcuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBxaXljIG9uIDIwMTcvMi83LlxyXG4gKi9cclxuXHJcbnZhciBOb2RlPXJlcXVpcmUoXCIuL05vZGUuanNcIik7XHJcblRleHROb2RlLnByb3RvdHlwZSA9bmV3IE5vZGUoKTtcclxubW9kdWxlLmV4cG9ydHMgPSBUZXh0Tm9kZTtcclxudmFyIGRlZmF1bHRzID1mdW5jdGlvbigpe1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBwb3NpdGlvbjpbMCwwXSxcclxuICAgICAgICBmb250OntcclxuICAgICAgICAgICAgc2l6ZToxNixcclxuICAgICAgICAgICAgdHlwZTogJ+W+rui9r+mbhem7kScsXHJcbiAgICAgICAgICAgIGNvbG9yOlwiMjU1LDI1NSwyNTVcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgekluZGV4OiAyMDAsLy/lsYLnuqcoMTAtOTk5KVxyXG4gICAgICAgIGFscGhhOiAxLFxyXG4gICAgICAgIHRleHQ6ICdubyB0ZXh0IGhlcmUnLFxyXG4gICAgICAgIHR5cGU6ICd0ZXh0J1xyXG4gICAgfTtcclxufTtcclxuLy/kuIDoiKzoioLngrlcclxuZnVuY3Rpb24gVGV4dE5vZGUoY29uZmlnKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmp0b3BvID0gbmV3IEpUb3BvLlRleHROb2RlKCk7XHJcbiAgICAvL+WwgeijheWvueixoeS5i+mXtOebuOS6kuS/neaMgeW8leeUqFxyXG4gICAgc2VsZi5qdG9wby5xdG9wbz1zZWxmO1xyXG4gICAgLy/lh73mlbBcclxuICAgIHNlbGYuYXR0cj0gUVRvcG8udXRpbC5leHRlbmQoZGVmYXVsdHMoKSwgY29uZmlnIHx8IHt9KTtcclxuICAgIHNlbGYuc2V0ID0gc2V0SlRvcG87XHJcbiAgICAvL+WIneWni+WMllxyXG4gICAgc2VsZi5zZXQoc2VsZi5hdHRyKTtcclxufVxyXG5mdW5jdGlvbiBzZXRKVG9wbyhjb25maWcpIHtcclxuICAgIGlmIChjb25maWcpIHtcclxuICAgICAgICB2YXIgc2VsZj10aGlzO1xyXG4gICAgICAgIC8v5aSE55CG5LiA6Iis5bGe5oCn55qE6K6+572uXHJcbiAgICAgICAgdGhpcy5fc2V0QXR0cihjb25maWcpO1xyXG4gICAgfVxyXG59XHJcbi8v56eB5pyJ5Ye95pWwXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9kZXZlbG9wL2NvcmUvZWxlbWVudC9ub2RlL1RleHQuanNcbi8vIG1vZHVsZSBpZCA9IDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==")},function(module,exports,__webpack_require__){eval('/**\r\n * Created by qiyc on 2017/2/7.\r\n */\r\nvar Link=__webpack_require__(9);\r\nCurveLink.prototype=new Link();\r\nmodule.exports = CurveLink;\r\n//曲线\r\nvar defaults =function(){\r\n    return {\r\n        num: 1,\r\n        alpha:1,\r\n        color: \'22,124,255\',\r\n        arrow:{\r\n            size:null,\r\n            offset:0,\r\n            start:false,\r\n            end:true\r\n        },\r\n        gap:20,\r\n        width: 2,\r\n        dashed:  null,\r\n        zIndex : 100,\r\n        textOffset:[0,0],\r\n        font:{\r\n            size:16,\r\n            type:"微软雅黑",\r\n            color:\'255,255,255\'\r\n        },\r\n        type: \'curve\',\r\n        curveOffset:200\r\n    };\r\n};\r\nfunction CurveLink(config){\r\n    if(!config.start||!config.end){\r\n        console.error("Create Link need start and end");\r\n        return;\r\n    }\r\n    var self = this;\r\n    self.jtopo = new JTopo.FoldLink(config.start.jtopo, config.end.jtopo);\r\n    //封装对象之间相互保持引用\r\n    self.jtopo.qtopo=self;\r\n    self.attr =  QTopo.util.extend(defaults(), config || {});\r\n    //函数\r\n    self.set = setJTopo;\r\n    //初始化\r\n    self.set(self.attr);\r\n    //改写源码绘制曲线,可由curveOffset指定弧度\r\n    reset(self);\r\n}\r\nfunction setJTopo(config) {\r\n    if (config) {\r\n        var self=this;\r\n        self._setAttr(config);\r\n    }\r\n}\r\nfunction reset(link){\r\n    link.jtopo.getStartPosition = function () {\r\n        var a;\r\n        return (a = (function (thisl) {\r\n            var b = thisl.nodeA, c = thisl.nodeZ;\r\n            var d = JTopo.util.lineF(b.cx, b.cy, c.cx, c.cy);\r\n            var e = b.getBound();\r\n            return f = JTopo.util.intersectionLineBound(d, e);\r\n        })(this)), a;\r\n    };\r\n    link.jtopo.getEndPosition = function () {\r\n        var a;\r\n        return (a = (function (thisl) {\r\n            var b = thisl.nodeZ, c = thisl.nodeA;\r\n            var d = JTopo.util.lineF(b.cx, b.cy, c.cx, c.cy);\r\n            var e = b.getBound();\r\n            return f = JTopo.util.intersectionLineBound(d, e);\r\n        })(this)), a;\r\n    };\r\n    link.jtopo.paintPath = function (cx, path) {\r\n        if (this.nodeA === this.nodeZ)return void this.paintLoop(cx);\r\n        var s = path[0];\r\n        var t = path[path.length - 1];\r\n        cx.beginPath();\r\n        cx.moveTo(s.x, s.y);\r\n        var angle = Math.atan(Math.abs(t.y - s.y) / Math.abs(t.x - s.x));\r\n        var mX = (s.x + t.x) / 2 + link.attr.curveOffset * Math.cos(angle - Math.PI / 2);\r\n        var mY = (s.y + t.y) / 2 + link.attr.curveOffset * Math.sin(angle - Math.PI / 2);\r\n        cx.strokeStyle = "rgba(" + this.strokeColor + "," + this.alpha + ")";\r\n        cx.lineWidth = this.lineWidth;\r\n        cx.moveTo(s.x, s.cy);\r\n        cx.quadraticCurveTo(mX, mY, t.x, t.y);\r\n        cx.stroke();\r\n        if (cx.stroke(), cx.closePath(), null != this.arrowsRadius) {\r\n            if (link.attr.arrow.end) {\r\n                this.paintArrow(cx, s, t);\r\n            }\r\n            if (link.attr.arrow.start) {\r\n                this.paintArrow(cx, t, s);\r\n            }\r\n        }\r\n    };\r\n}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kZXZlbG9wL2NvcmUvZWxlbWVudC9saW5rL0N1cnZlLmpzP2QwZTMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQ7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiOC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHFpeWMgb24gMjAxNy8yLzcuXHJcbiAqL1xyXG52YXIgTGluaz1yZXF1aXJlKFwiLi9MaW5rLmpzXCIpO1xyXG5DdXJ2ZUxpbmsucHJvdG90eXBlPW5ldyBMaW5rKCk7XHJcbm1vZHVsZS5leHBvcnRzID0gQ3VydmVMaW5rO1xyXG4vL+absue6v1xyXG52YXIgZGVmYXVsdHMgPWZ1bmN0aW9uKCl7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG51bTogMSxcclxuICAgICAgICBhbHBoYToxLFxyXG4gICAgICAgIGNvbG9yOiAnMjIsMTI0LDI1NScsXHJcbiAgICAgICAgYXJyb3c6e1xyXG4gICAgICAgICAgICBzaXplOm51bGwsXHJcbiAgICAgICAgICAgIG9mZnNldDowLFxyXG4gICAgICAgICAgICBzdGFydDpmYWxzZSxcclxuICAgICAgICAgICAgZW5kOnRydWVcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdhcDoyMCxcclxuICAgICAgICB3aWR0aDogMixcclxuICAgICAgICBkYXNoZWQ6ICBudWxsLFxyXG4gICAgICAgIHpJbmRleCA6IDEwMCxcclxuICAgICAgICB0ZXh0T2Zmc2V0OlswLDBdLFxyXG4gICAgICAgIGZvbnQ6e1xyXG4gICAgICAgICAgICBzaXplOjE2LFxyXG4gICAgICAgICAgICB0eXBlOlwi5b6u6L2v6ZuF6buRXCIsXHJcbiAgICAgICAgICAgIGNvbG9yOicyNTUsMjU1LDI1NSdcclxuICAgICAgICB9LFxyXG4gICAgICAgIHR5cGU6ICdjdXJ2ZScsXHJcbiAgICAgICAgY3VydmVPZmZzZXQ6MjAwXHJcbiAgICB9O1xyXG59O1xyXG5mdW5jdGlvbiBDdXJ2ZUxpbmsoY29uZmlnKXtcclxuICAgIGlmKCFjb25maWcuc3RhcnR8fCFjb25maWcuZW5kKXtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiQ3JlYXRlIExpbmsgbmVlZCBzdGFydCBhbmQgZW5kXCIpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYuanRvcG8gPSBuZXcgSlRvcG8uRm9sZExpbmsoY29uZmlnLnN0YXJ0Lmp0b3BvLCBjb25maWcuZW5kLmp0b3BvKTtcclxuICAgIC8v5bCB6KOF5a+56LGh5LmL6Ze055u45LqS5L+d5oyB5byV55SoXHJcbiAgICBzZWxmLmp0b3BvLnF0b3BvPXNlbGY7XHJcbiAgICBzZWxmLmF0dHIgPSAgUVRvcG8udXRpbC5leHRlbmQoZGVmYXVsdHMoKSwgY29uZmlnIHx8IHt9KTtcclxuICAgIC8v5Ye95pWwXHJcbiAgICBzZWxmLnNldCA9IHNldEpUb3BvO1xyXG4gICAgLy/liJ3lp4vljJZcclxuICAgIHNlbGYuc2V0KHNlbGYuYXR0cik7XHJcbiAgICAvL+aUueWGmea6kOeggee7mOWItuabsue6vyzlj6/nlLFjdXJ2ZU9mZnNldOaMh+WumuW8p+W6plxyXG4gICAgcmVzZXQoc2VsZik7XHJcbn1cclxuZnVuY3Rpb24gc2V0SlRvcG8oY29uZmlnKSB7XHJcbiAgICBpZiAoY29uZmlnKSB7XHJcbiAgICAgICAgdmFyIHNlbGY9dGhpcztcclxuICAgICAgICBzZWxmLl9zZXRBdHRyKGNvbmZpZyk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gcmVzZXQobGluayl7XHJcbiAgICBsaW5rLmp0b3BvLmdldFN0YXJ0UG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGE7XHJcbiAgICAgICAgcmV0dXJuIChhID0gKGZ1bmN0aW9uICh0aGlzbCkge1xyXG4gICAgICAgICAgICB2YXIgYiA9IHRoaXNsLm5vZGVBLCBjID0gdGhpc2wubm9kZVo7XHJcbiAgICAgICAgICAgIHZhciBkID0gSlRvcG8udXRpbC5saW5lRihiLmN4LCBiLmN5LCBjLmN4LCBjLmN5KTtcclxuICAgICAgICAgICAgdmFyIGUgPSBiLmdldEJvdW5kKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBmID0gSlRvcG8udXRpbC5pbnRlcnNlY3Rpb25MaW5lQm91bmQoZCwgZSk7XHJcbiAgICAgICAgfSkodGhpcykpLCBhO1xyXG4gICAgfTtcclxuICAgIGxpbmsuanRvcG8uZ2V0RW5kUG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGE7XHJcbiAgICAgICAgcmV0dXJuIChhID0gKGZ1bmN0aW9uICh0aGlzbCkge1xyXG4gICAgICAgICAgICB2YXIgYiA9IHRoaXNsLm5vZGVaLCBjID0gdGhpc2wubm9kZUE7XHJcbiAgICAgICAgICAgIHZhciBkID0gSlRvcG8udXRpbC5saW5lRihiLmN4LCBiLmN5LCBjLmN4LCBjLmN5KTtcclxuICAgICAgICAgICAgdmFyIGUgPSBiLmdldEJvdW5kKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBmID0gSlRvcG8udXRpbC5pbnRlcnNlY3Rpb25MaW5lQm91bmQoZCwgZSk7XHJcbiAgICAgICAgfSkodGhpcykpLCBhO1xyXG4gICAgfTtcclxuICAgIGxpbmsuanRvcG8ucGFpbnRQYXRoID0gZnVuY3Rpb24gKGN4LCBwYXRoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubm9kZUEgPT09IHRoaXMubm9kZVopcmV0dXJuIHZvaWQgdGhpcy5wYWludExvb3AoY3gpO1xyXG4gICAgICAgIHZhciBzID0gcGF0aFswXTtcclxuICAgICAgICB2YXIgdCA9IHBhdGhbcGF0aC5sZW5ndGggLSAxXTtcclxuICAgICAgICBjeC5iZWdpblBhdGgoKTtcclxuICAgICAgICBjeC5tb3ZlVG8ocy54LCBzLnkpO1xyXG4gICAgICAgIHZhciBhbmdsZSA9IE1hdGguYXRhbihNYXRoLmFicyh0LnkgLSBzLnkpIC8gTWF0aC5hYnModC54IC0gcy54KSk7XHJcbiAgICAgICAgdmFyIG1YID0gKHMueCArIHQueCkgLyAyICsgbGluay5hdHRyLmN1cnZlT2Zmc2V0ICogTWF0aC5jb3MoYW5nbGUgLSBNYXRoLlBJIC8gMik7XHJcbiAgICAgICAgdmFyIG1ZID0gKHMueSArIHQueSkgLyAyICsgbGluay5hdHRyLmN1cnZlT2Zmc2V0ICogTWF0aC5zaW4oYW5nbGUgLSBNYXRoLlBJIC8gMik7XHJcbiAgICAgICAgY3guc3Ryb2tlU3R5bGUgPSBcInJnYmEoXCIgKyB0aGlzLnN0cm9rZUNvbG9yICsgXCIsXCIgKyB0aGlzLmFscGhhICsgXCIpXCI7XHJcbiAgICAgICAgY3gubGluZVdpZHRoID0gdGhpcy5saW5lV2lkdGg7XHJcbiAgICAgICAgY3gubW92ZVRvKHMueCwgcy5jeSk7XHJcbiAgICAgICAgY3gucXVhZHJhdGljQ3VydmVUbyhtWCwgbVksIHQueCwgdC55KTtcclxuICAgICAgICBjeC5zdHJva2UoKTtcclxuICAgICAgICBpZiAoY3guc3Ryb2tlKCksIGN4LmNsb3NlUGF0aCgpLCBudWxsICE9IHRoaXMuYXJyb3dzUmFkaXVzKSB7XHJcbiAgICAgICAgICAgIGlmIChsaW5rLmF0dHIuYXJyb3cuZW5kKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhaW50QXJyb3coY3gsIHMsIHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChsaW5rLmF0dHIuYXJyb3cuc3RhcnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFpbnRBcnJvdyhjeCwgdCwgcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9kZXZlbG9wL2NvcmUvZWxlbWVudC9saW5rL0N1cnZlLmpzXG4vLyBtb2R1bGUgaWQgPSA4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=');
},function(module,exports,__webpack_require__){eval("/**\r\n * Created by qiyc on 2017/2/7.\r\n */\r\nvar Element=__webpack_require__(6);\r\nLink.prototype = new Element();\r\nmodule.exports =Link;\r\nfunction Link() {\r\n    this.getType=function(){\r\n        return \"link\";\r\n    };\r\n    this.setColor = function (color) {\r\n        if (color) {\r\n            color = QTopo.util.transHex(color.toLowerCase());\r\n            this.jtopo.strokeColor = color;\r\n            this.attr.color=this.jtopo.strokeColor;\r\n        }\r\n    };\r\n    this.setNum = function (num) {\r\n        if ($.isNumeric(num)&&num > 1) {\r\n            this.jtopo.text = '(+' + num + ')';\r\n        } else {\r\n            this.jtopo.text = '';\r\n        }\r\n        this.attr.num=num;\r\n    };\r\n    this.setWidth=function(width){\r\n        this.jtopo.lineWidth = width; // 线宽\r\n        this.attr.width=width;\r\n    };\r\n    this.setArrow = function(arrow){\r\n        this.jtopo.arrowsRadius = $.isNumeric(arrow.size)?arrow.size:0;\r\n        this.jtopo.arrowsOffset = $.isNumeric(arrow.offset)?arrow.offset:0;\r\n        this.attr.arrow.size=this.jtopo.arrowsRadius;\r\n        this.attr.arrow.offset=this.jtopo.arrowsOffset;\r\n    };\r\n    this.setGap=function(gap){\r\n        this.jtopo.bundleGap = $.isNumeric(gap)?gap:0; // 线条之间的间隔\r\n        this.attr.gap=this.jtopo.bundleGap;\r\n    };\r\n    this.setDashed=function(dashedPattern){\r\n        if($.isNumeric(dashedPattern)&&dashedPattern>0){\r\n            this.jtopo.dashedPattern=dashedPattern;\r\n        }else{\r\n            this.jtopo.dashedPattern=null;\r\n        }\r\n        this.attr.dashed=this.jtopo.dashedPattern;\r\n    };\r\n}\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kZXZlbG9wL2NvcmUvZWxlbWVudC9saW5rL0xpbmsuanM/NTYwMCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNEO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiI5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgcWl5YyBvbiAyMDE3LzIvNy5cclxuICovXHJcbnZhciBFbGVtZW50PXJlcXVpcmUoXCIuLi9FbGVtZW50LmpzXCIpO1xyXG5MaW5rLnByb3RvdHlwZSA9IG5ldyBFbGVtZW50KCk7XHJcbm1vZHVsZS5leHBvcnRzID1MaW5rO1xyXG5mdW5jdGlvbiBMaW5rKCkge1xyXG4gICAgdGhpcy5nZXRUeXBlPWZ1bmN0aW9uKCl7XHJcbiAgICAgICAgcmV0dXJuIFwibGlua1wiO1xyXG4gICAgfTtcclxuICAgIHRoaXMuc2V0Q29sb3IgPSBmdW5jdGlvbiAoY29sb3IpIHtcclxuICAgICAgICBpZiAoY29sb3IpIHtcclxuICAgICAgICAgICAgY29sb3IgPSBRVG9wby51dGlsLnRyYW5zSGV4KGNvbG9yLnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgICAgICAgICB0aGlzLmp0b3BvLnN0cm9rZUNvbG9yID0gY29sb3I7XHJcbiAgICAgICAgICAgIHRoaXMuYXR0ci5jb2xvcj10aGlzLmp0b3BvLnN0cm9rZUNvbG9yO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aGlzLnNldE51bSA9IGZ1bmN0aW9uIChudW0pIHtcclxuICAgICAgICBpZiAoJC5pc051bWVyaWMobnVtKSYmbnVtID4gMSkge1xyXG4gICAgICAgICAgICB0aGlzLmp0b3BvLnRleHQgPSAnKCsnICsgbnVtICsgJyknO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuanRvcG8udGV4dCA9ICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmF0dHIubnVtPW51bTtcclxuICAgIH07XHJcbiAgICB0aGlzLnNldFdpZHRoPWZ1bmN0aW9uKHdpZHRoKXtcclxuICAgICAgICB0aGlzLmp0b3BvLmxpbmVXaWR0aCA9IHdpZHRoOyAvLyDnur/lrr1cclxuICAgICAgICB0aGlzLmF0dHIud2lkdGg9d2lkdGg7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5zZXRBcnJvdyA9IGZ1bmN0aW9uKGFycm93KXtcclxuICAgICAgICB0aGlzLmp0b3BvLmFycm93c1JhZGl1cyA9ICQuaXNOdW1lcmljKGFycm93LnNpemUpP2Fycm93LnNpemU6MDtcclxuICAgICAgICB0aGlzLmp0b3BvLmFycm93c09mZnNldCA9ICQuaXNOdW1lcmljKGFycm93Lm9mZnNldCk/YXJyb3cub2Zmc2V0OjA7XHJcbiAgICAgICAgdGhpcy5hdHRyLmFycm93LnNpemU9dGhpcy5qdG9wby5hcnJvd3NSYWRpdXM7XHJcbiAgICAgICAgdGhpcy5hdHRyLmFycm93Lm9mZnNldD10aGlzLmp0b3BvLmFycm93c09mZnNldDtcclxuICAgIH07XHJcbiAgICB0aGlzLnNldEdhcD1mdW5jdGlvbihnYXApe1xyXG4gICAgICAgIHRoaXMuanRvcG8uYnVuZGxlR2FwID0gJC5pc051bWVyaWMoZ2FwKT9nYXA6MDsgLy8g57q/5p2h5LmL6Ze055qE6Ze06ZqUXHJcbiAgICAgICAgdGhpcy5hdHRyLmdhcD10aGlzLmp0b3BvLmJ1bmRsZUdhcDtcclxuICAgIH07XHJcbiAgICB0aGlzLnNldERhc2hlZD1mdW5jdGlvbihkYXNoZWRQYXR0ZXJuKXtcclxuICAgICAgICBpZigkLmlzTnVtZXJpYyhkYXNoZWRQYXR0ZXJuKSYmZGFzaGVkUGF0dGVybj4wKXtcclxuICAgICAgICAgICAgdGhpcy5qdG9wby5kYXNoZWRQYXR0ZXJuPWRhc2hlZFBhdHRlcm47XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMuanRvcG8uZGFzaGVkUGF0dGVybj1udWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmF0dHIuZGFzaGVkPXRoaXMuanRvcG8uZGFzaGVkUGF0dGVybjtcclxuICAgIH07XHJcbn1cclxuXHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZGV2ZWxvcC9jb3JlL2VsZW1lbnQvbGluay9MaW5rLmpzXG4vLyBtb2R1bGUgaWQgPSA5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=")},function(module,exports,__webpack_require__){eval("/**\r\n * Created by qiyc on 2017/2/7.\r\n */\r\nvar Link=__webpack_require__(9);\r\nDirectLink.prototype=new Link();\r\nmodule.exports = DirectLink;\r\n//直线\r\nvar defaults =function(){\r\n    return {\r\n        num: 1,\r\n        alpha:1,\r\n        color: '22,124,255',\r\n        arrow:{\r\n            size:null,\r\n            offset:0,\r\n            start:false,\r\n            end:true\r\n        },\r\n        gap:20,\r\n        width: 2,\r\n        dashed:  null,\r\n        zIndex : 100,\r\n        textOffset:[0,0],\r\n        font:{\r\n            size:16,\r\n            type:\"微软雅黑\",\r\n            color:'255,255,255'\r\n        },\r\n        type: 'direct',\r\n        bundleOffset:60// 多条直线时，线条折线拐角处的长度\r\n    };\r\n};\r\nfunction DirectLink(config) {\r\n    if(!config.start||!config.end){\r\n        console.error(\"Create Link need start and end\");\r\n        return;\r\n    }\r\n    var self = this;\r\n    self.jtopo = new JTopo.Link(config.start.jtopo, config.end.jtopo);\r\n    //封装对象之间相互保持引用\r\n    self.jtopo.qtopo=self;\r\n    self.attr =  QTopo.util.extend(defaults(), config || {});\r\n    //函数\r\n    self.set = setJTopo;\r\n    //初始化\r\n    self.set(self.attr);\r\n    //源码修改\r\n    reset(self);\r\n\r\n}\r\nfunction setJTopo(config) {\r\n    if (config) {\r\n        var self=this;\r\n        self._setAttr(config);\r\n    }\r\n}\r\nfunction reset(link){\r\n    //双向箭头\r\n    link.jtopo.getStartPosition = function () {\r\n        var a;\r\n        return null != this.arrowsRadius && (a = (function (thisl) {\r\n            var b = thisl.nodeA, c = thisl.nodeZ;\r\n            var d = JTopo.util.lineF(b.cx, b.cy, c.cx, c.cy);\r\n            var e = b.getBound();\r\n            return f = JTopo.util.intersectionLineBound(d, e);\r\n        })(this)), null == a && (a = {\r\n            x: this.nodeA.cx,\r\n            y: this.nodeA.cy\r\n        }), a;\r\n    };\r\n    link.jtopo.paintPath = function (a, b) {\r\n        if (this.nodeA === this.nodeZ) return void this.paintLoop(a);\r\n        a.beginPath(),\r\n            a.moveTo(b[0].x, b[0].y);\r\n        for (var c = 1; c < b.length; c++) {\r\n            null == this.dashedPattern ? (\r\n                (null == this.PointPathColor ? a.lineTo(b[c].x, b[c].y) : a.JtopoDrawPointPath(b[c - 1].x, b[c - 1].y, b[c].x, b[c].y, a.strokeStyle, this.PointPathColor))\r\n            ) : a.JTopoDashedLineTo(b[c - 1].x, b[c - 1].y, b[c].x, b[c].y, this.dashedPattern)\r\n        }\r\n        if (a.stroke(), a.closePath(), null != this.arrowsRadius) {\r\n            if (link.attr.arrow.end) {\r\n                this.paintArrow(a, b[0], b[b.length - 1]);\r\n            }//终点箭头\r\n            if (link.attr.arrow.start) {\r\n                this.paintArrow(a, b[b.length - 1], b[0]);\r\n            }//起点箭头\r\n        }\r\n    };\r\n}\r\nDirectLink.prototype.setBundleOffset=function(bundleOffset){\r\n    this.jtopo.bundleOffset=parseInt(bundleOffset);\r\n};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kZXZlbG9wL2NvcmUvZWxlbWVudC9saW5rL0RpcmVjdC5qcz9jZjVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJEO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsY0FBYztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiIxMC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHFpeWMgb24gMjAxNy8yLzcuXHJcbiAqL1xyXG52YXIgTGluaz1yZXF1aXJlKFwiLi9MaW5rLmpzXCIpO1xyXG5EaXJlY3RMaW5rLnByb3RvdHlwZT1uZXcgTGluaygpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IERpcmVjdExpbms7XHJcbi8v55u057q/XHJcbnZhciBkZWZhdWx0cyA9ZnVuY3Rpb24oKXtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbnVtOiAxLFxyXG4gICAgICAgIGFscGhhOjEsXHJcbiAgICAgICAgY29sb3I6ICcyMiwxMjQsMjU1JyxcclxuICAgICAgICBhcnJvdzp7XHJcbiAgICAgICAgICAgIHNpemU6bnVsbCxcclxuICAgICAgICAgICAgb2Zmc2V0OjAsXHJcbiAgICAgICAgICAgIHN0YXJ0OmZhbHNlLFxyXG4gICAgICAgICAgICBlbmQ6dHJ1ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2FwOjIwLFxyXG4gICAgICAgIHdpZHRoOiAyLFxyXG4gICAgICAgIGRhc2hlZDogIG51bGwsXHJcbiAgICAgICAgekluZGV4IDogMTAwLFxyXG4gICAgICAgIHRleHRPZmZzZXQ6WzAsMF0sXHJcbiAgICAgICAgZm9udDp7XHJcbiAgICAgICAgICAgIHNpemU6MTYsXHJcbiAgICAgICAgICAgIHR5cGU6XCLlvq7ova/pm4Xpu5FcIixcclxuICAgICAgICAgICAgY29sb3I6JzI1NSwyNTUsMjU1J1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdHlwZTogJ2RpcmVjdCcsXHJcbiAgICAgICAgYnVuZGxlT2Zmc2V0OjYwLy8g5aSa5p2h55u057q/5pe277yM57q/5p2h5oqY57q/5ouQ6KeS5aSE55qE6ZW/5bqmXHJcbiAgICB9O1xyXG59O1xyXG5mdW5jdGlvbiBEaXJlY3RMaW5rKGNvbmZpZykge1xyXG4gICAgaWYoIWNvbmZpZy5zdGFydHx8IWNvbmZpZy5lbmQpe1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJDcmVhdGUgTGluayBuZWVkIHN0YXJ0IGFuZCBlbmRcIik7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5qdG9wbyA9IG5ldyBKVG9wby5MaW5rKGNvbmZpZy5zdGFydC5qdG9wbywgY29uZmlnLmVuZC5qdG9wbyk7XHJcbiAgICAvL+WwgeijheWvueixoeS5i+mXtOebuOS6kuS/neaMgeW8leeUqFxyXG4gICAgc2VsZi5qdG9wby5xdG9wbz1zZWxmO1xyXG4gICAgc2VsZi5hdHRyID0gIFFUb3BvLnV0aWwuZXh0ZW5kKGRlZmF1bHRzKCksIGNvbmZpZyB8fCB7fSk7XHJcbiAgICAvL+WHveaVsFxyXG4gICAgc2VsZi5zZXQgPSBzZXRKVG9wbztcclxuICAgIC8v5Yid5aeL5YyWXHJcbiAgICBzZWxmLnNldChzZWxmLmF0dHIpO1xyXG4gICAgLy/mupDnoIHkv67mlLlcclxuICAgIHJlc2V0KHNlbGYpO1xyXG5cclxufVxyXG5mdW5jdGlvbiBzZXRKVG9wbyhjb25maWcpIHtcclxuICAgIGlmIChjb25maWcpIHtcclxuICAgICAgICB2YXIgc2VsZj10aGlzO1xyXG4gICAgICAgIHNlbGYuX3NldEF0dHIoY29uZmlnKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiByZXNldChsaW5rKXtcclxuICAgIC8v5Y+M5ZCR566t5aS0XHJcbiAgICBsaW5rLmp0b3BvLmdldFN0YXJ0UG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGE7XHJcbiAgICAgICAgcmV0dXJuIG51bGwgIT0gdGhpcy5hcnJvd3NSYWRpdXMgJiYgKGEgPSAoZnVuY3Rpb24gKHRoaXNsKSB7XHJcbiAgICAgICAgICAgIHZhciBiID0gdGhpc2wubm9kZUEsIGMgPSB0aGlzbC5ub2RlWjtcclxuICAgICAgICAgICAgdmFyIGQgPSBKVG9wby51dGlsLmxpbmVGKGIuY3gsIGIuY3ksIGMuY3gsIGMuY3kpO1xyXG4gICAgICAgICAgICB2YXIgZSA9IGIuZ2V0Qm91bmQoKTtcclxuICAgICAgICAgICAgcmV0dXJuIGYgPSBKVG9wby51dGlsLmludGVyc2VjdGlvbkxpbmVCb3VuZChkLCBlKTtcclxuICAgICAgICB9KSh0aGlzKSksIG51bGwgPT0gYSAmJiAoYSA9IHtcclxuICAgICAgICAgICAgeDogdGhpcy5ub2RlQS5jeCxcclxuICAgICAgICAgICAgeTogdGhpcy5ub2RlQS5jeVxyXG4gICAgICAgIH0pLCBhO1xyXG4gICAgfTtcclxuICAgIGxpbmsuanRvcG8ucGFpbnRQYXRoID0gZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICBpZiAodGhpcy5ub2RlQSA9PT0gdGhpcy5ub2RlWikgcmV0dXJuIHZvaWQgdGhpcy5wYWludExvb3AoYSk7XHJcbiAgICAgICAgYS5iZWdpblBhdGgoKSxcclxuICAgICAgICAgICAgYS5tb3ZlVG8oYlswXS54LCBiWzBdLnkpO1xyXG4gICAgICAgIGZvciAodmFyIGMgPSAxOyBjIDwgYi5sZW5ndGg7IGMrKykge1xyXG4gICAgICAgICAgICBudWxsID09IHRoaXMuZGFzaGVkUGF0dGVybiA/IChcclxuICAgICAgICAgICAgICAgIChudWxsID09IHRoaXMuUG9pbnRQYXRoQ29sb3IgPyBhLmxpbmVUbyhiW2NdLngsIGJbY10ueSkgOiBhLkp0b3BvRHJhd1BvaW50UGF0aChiW2MgLSAxXS54LCBiW2MgLSAxXS55LCBiW2NdLngsIGJbY10ueSwgYS5zdHJva2VTdHlsZSwgdGhpcy5Qb2ludFBhdGhDb2xvcikpXHJcbiAgICAgICAgICAgICkgOiBhLkpUb3BvRGFzaGVkTGluZVRvKGJbYyAtIDFdLngsIGJbYyAtIDFdLnksIGJbY10ueCwgYltjXS55LCB0aGlzLmRhc2hlZFBhdHRlcm4pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhLnN0cm9rZSgpLCBhLmNsb3NlUGF0aCgpLCBudWxsICE9IHRoaXMuYXJyb3dzUmFkaXVzKSB7XHJcbiAgICAgICAgICAgIGlmIChsaW5rLmF0dHIuYXJyb3cuZW5kKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhaW50QXJyb3coYSwgYlswXSwgYltiLmxlbmd0aCAtIDFdKTtcclxuICAgICAgICAgICAgfS8v57uI54K5566t5aS0XHJcbiAgICAgICAgICAgIGlmIChsaW5rLmF0dHIuYXJyb3cuc3RhcnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFpbnRBcnJvdyhhLCBiW2IubGVuZ3RoIC0gMV0sIGJbMF0pO1xyXG4gICAgICAgICAgICB9Ly/otbfngrnnrq3lpLRcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcbkRpcmVjdExpbmsucHJvdG90eXBlLnNldEJ1bmRsZU9mZnNldD1mdW5jdGlvbihidW5kbGVPZmZzZXQpe1xyXG4gICAgdGhpcy5qdG9wby5idW5kbGVPZmZzZXQ9cGFyc2VJbnQoYnVuZGxlT2Zmc2V0KTtcclxufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2RldmVsb3AvY29yZS9lbGVtZW50L2xpbmsvRGlyZWN0LmpzXG4vLyBtb2R1bGUgaWQgPSAxMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9")},function(module,exports,__webpack_require__){eval('/**\r\n * Created by qiyc on 2017/2/7.\r\n */\r\nvar Link=__webpack_require__(9);\r\nFlexionalLink.prototype=new Link();\r\nmodule.exports = FlexionalLink;\r\n//二次折线\r\nvar defaults =function(){\r\n    return {\r\n        num: 1,\r\n        alpha:1,\r\n        color: \'22,124,255\',\r\n        arrow:{\r\n            size:null,\r\n            offset:0,\r\n            start:false,\r\n            end:true\r\n        },\r\n        gap:20,\r\n        width:2,\r\n        dashed:  null,\r\n        zIndex : 100,\r\n        textOffset:[0,0],\r\n        font:{\r\n            size:16,\r\n            type:"微软雅黑",\r\n            color:\'255,255,255\'\r\n        },\r\n        type: \'flexional\',\r\n        direction:"horizontal",\r\n        offsetGap:60\r\n    };\r\n};\r\nfunction FlexionalLink(config){\r\n    if(!config.start||!config.end){\r\n        console.error("Create Link need start and end");\r\n        return;\r\n    }\r\n    var self = this;\r\n    self.jtopo = new JTopo.FlexionalLink(config.start.jtopo, config.end.jtopo);\r\n    //封装对象之间相互保持引用\r\n    self.jtopo.qtopo=self;\r\n    self.attr =  QTopo.util.extend(defaults(), config || {});\r\n    //函数\r\n    self.set = setJTopo;\r\n    //初始化\r\n    self.set(self.attr);\r\n    //修改源码\r\n    reset(self);\r\n}\r\nfunction setJTopo(config) {\r\n    if (config) {\r\n        var self=this;\r\n        this._setAttr(config);\r\n    }\r\n}\r\nfunction reset(link){\r\n    //双向箭头\r\n    link.jtopo.paintPath = function (a, b) {\r\n        if (this.nodeA === this.nodeZ)return void this.paintLoop(a);\r\n        a.beginPath(), a.moveTo(b[0].x, b[0].y);\r\n        for (var c = 1; c < b.length; c++)\r\n            null == this.dashedPattern ? a.lineTo(b[c].x, b[c].y) : a.JTopoDashedLineTo(b[c - 1].x, b[c - 1].y, b[c].x, b[c].y, this.dashedPattern);\r\n        if (a.stroke(), a.closePath(), null != this.arrowsRadius) {\r\n            if (link.attr.arrow.end) {\r\n                this.paintArrow(a, b[b.length - 2], b[b.length - 1]);\r\n            }\r\n            if (link.attr.arrow.start) {\r\n                this.paintArrow(a, b[1], b[0]);//添加双向箭头\r\n            }\r\n        }\r\n    };\r\n}\r\nFlexionalLink.prototype.setOffsetGap=function(offsetGap){\r\n    this.jtopo.offsetGap = parseInt(offsetGap);// 折线拐角处的长度\r\n    this.attr.offsetGap=this.jtopo.offsetGap;\r\n};\r\nFlexionalLink.prototype.setDirection=function(direction){\r\n    //折线方向 horizontal 水平 "vertical"垂直\r\n    this.jtopo.direction=direction;\r\n    this.attr.direction=this.jtopo.direction;\r\n};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kZXZlbG9wL2NvcmUvZWxlbWVudC9saW5rL0ZsZXhpb25hbC5qcz8wMDA2Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQ7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGNBQWM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0M7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiMTEuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBxaXljIG9uIDIwMTcvMi83LlxyXG4gKi9cclxudmFyIExpbms9cmVxdWlyZShcIi4vTGluay5qc1wiKTtcclxuRmxleGlvbmFsTGluay5wcm90b3R5cGU9bmV3IExpbmsoKTtcclxubW9kdWxlLmV4cG9ydHMgPSBGbGV4aW9uYWxMaW5rO1xyXG4vL+S6jOasoeaKmOe6v1xyXG52YXIgZGVmYXVsdHMgPWZ1bmN0aW9uKCl7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG51bTogMSxcclxuICAgICAgICBhbHBoYToxLFxyXG4gICAgICAgIGNvbG9yOiAnMjIsMTI0LDI1NScsXHJcbiAgICAgICAgYXJyb3c6e1xyXG4gICAgICAgICAgICBzaXplOm51bGwsXHJcbiAgICAgICAgICAgIG9mZnNldDowLFxyXG4gICAgICAgICAgICBzdGFydDpmYWxzZSxcclxuICAgICAgICAgICAgZW5kOnRydWVcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdhcDoyMCxcclxuICAgICAgICB3aWR0aDoyLFxyXG4gICAgICAgIGRhc2hlZDogIG51bGwsXHJcbiAgICAgICAgekluZGV4IDogMTAwLFxyXG4gICAgICAgIHRleHRPZmZzZXQ6WzAsMF0sXHJcbiAgICAgICAgZm9udDp7XHJcbiAgICAgICAgICAgIHNpemU6MTYsXHJcbiAgICAgICAgICAgIHR5cGU6XCLlvq7ova/pm4Xpu5FcIixcclxuICAgICAgICAgICAgY29sb3I6JzI1NSwyNTUsMjU1J1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdHlwZTogJ2ZsZXhpb25hbCcsXHJcbiAgICAgICAgZGlyZWN0aW9uOlwiaG9yaXpvbnRhbFwiLFxyXG4gICAgICAgIG9mZnNldEdhcDo2MFxyXG4gICAgfTtcclxufTtcclxuZnVuY3Rpb24gRmxleGlvbmFsTGluayhjb25maWcpe1xyXG4gICAgaWYoIWNvbmZpZy5zdGFydHx8IWNvbmZpZy5lbmQpe1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJDcmVhdGUgTGluayBuZWVkIHN0YXJ0IGFuZCBlbmRcIik7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5qdG9wbyA9IG5ldyBKVG9wby5GbGV4aW9uYWxMaW5rKGNvbmZpZy5zdGFydC5qdG9wbywgY29uZmlnLmVuZC5qdG9wbyk7XHJcbiAgICAvL+WwgeijheWvueixoeS5i+mXtOebuOS6kuS/neaMgeW8leeUqFxyXG4gICAgc2VsZi5qdG9wby5xdG9wbz1zZWxmO1xyXG4gICAgc2VsZi5hdHRyID0gIFFUb3BvLnV0aWwuZXh0ZW5kKGRlZmF1bHRzKCksIGNvbmZpZyB8fCB7fSk7XHJcbiAgICAvL+WHveaVsFxyXG4gICAgc2VsZi5zZXQgPSBzZXRKVG9wbztcclxuICAgIC8v5Yid5aeL5YyWXHJcbiAgICBzZWxmLnNldChzZWxmLmF0dHIpO1xyXG4gICAgLy/kv67mlLnmupDnoIFcclxuICAgIHJlc2V0KHNlbGYpO1xyXG59XHJcbmZ1bmN0aW9uIHNldEpUb3BvKGNvbmZpZykge1xyXG4gICAgaWYgKGNvbmZpZykge1xyXG4gICAgICAgIHZhciBzZWxmPXRoaXM7XHJcbiAgICAgICAgdGhpcy5fc2V0QXR0cihjb25maWcpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHJlc2V0KGxpbmspe1xyXG4gICAgLy/lj4zlkJHnrq3lpLRcclxuICAgIGxpbmsuanRvcG8ucGFpbnRQYXRoID0gZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICBpZiAodGhpcy5ub2RlQSA9PT0gdGhpcy5ub2RlWilyZXR1cm4gdm9pZCB0aGlzLnBhaW50TG9vcChhKTtcclxuICAgICAgICBhLmJlZ2luUGF0aCgpLCBhLm1vdmVUbyhiWzBdLngsIGJbMF0ueSk7XHJcbiAgICAgICAgZm9yICh2YXIgYyA9IDE7IGMgPCBiLmxlbmd0aDsgYysrKVxyXG4gICAgICAgICAgICBudWxsID09IHRoaXMuZGFzaGVkUGF0dGVybiA/IGEubGluZVRvKGJbY10ueCwgYltjXS55KSA6IGEuSlRvcG9EYXNoZWRMaW5lVG8oYltjIC0gMV0ueCwgYltjIC0gMV0ueSwgYltjXS54LCBiW2NdLnksIHRoaXMuZGFzaGVkUGF0dGVybik7XHJcbiAgICAgICAgaWYgKGEuc3Ryb2tlKCksIGEuY2xvc2VQYXRoKCksIG51bGwgIT0gdGhpcy5hcnJvd3NSYWRpdXMpIHtcclxuICAgICAgICAgICAgaWYgKGxpbmsuYXR0ci5hcnJvdy5lbmQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFpbnRBcnJvdyhhLCBiW2IubGVuZ3RoIC0gMl0sIGJbYi5sZW5ndGggLSAxXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGxpbmsuYXR0ci5hcnJvdy5zdGFydCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wYWludEFycm93KGEsIGJbMV0sIGJbMF0pOy8v5re75Yqg5Y+M5ZCR566t5aS0XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcbkZsZXhpb25hbExpbmsucHJvdG90eXBlLnNldE9mZnNldEdhcD1mdW5jdGlvbihvZmZzZXRHYXApe1xyXG4gICAgdGhpcy5qdG9wby5vZmZzZXRHYXAgPSBwYXJzZUludChvZmZzZXRHYXApOy8vIOaKmOe6v+aLkOinkuWkhOeahOmVv+W6plxyXG4gICAgdGhpcy5hdHRyLm9mZnNldEdhcD10aGlzLmp0b3BvLm9mZnNldEdhcDtcclxufTtcclxuRmxleGlvbmFsTGluay5wcm90b3R5cGUuc2V0RGlyZWN0aW9uPWZ1bmN0aW9uKGRpcmVjdGlvbil7XHJcbiAgICAvL+aKmOe6v+aWueWQkSBob3Jpem9udGFsIOawtOW5syBcInZlcnRpY2FsXCLlnoLnm7RcclxuICAgIHRoaXMuanRvcG8uZGlyZWN0aW9uPWRpcmVjdGlvbjtcclxuICAgIHRoaXMuYXR0ci5kaXJlY3Rpb249dGhpcy5qdG9wby5kaXJlY3Rpb247XHJcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9kZXZlbG9wL2NvcmUvZWxlbWVudC9saW5rL0ZsZXhpb25hbC5qc1xuLy8gbW9kdWxlIGlkID0gMTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==')},function(module,exports,__webpack_require__){eval('/**\r\n * Created by qiyc on 2017/2/7.\r\n */\r\nvar Link=__webpack_require__(9);\r\nFoldLink.prototype=new Link();\r\nmodule.exports = FoldLink;\r\n//折线\r\nvar defaults =function(){\r\n    return {\r\n        num:1,\r\n        alpha:1,\r\n        color: \'22,124,255\',\r\n        arrow:{\r\n            size:null,\r\n            offset:0,\r\n            start:false,\r\n            end:true\r\n        },\r\n        gap:20,\r\n        width: 2,\r\n        dashed:  null,\r\n        zIndex : 100,\r\n        textOffset:[0,0],\r\n        font:{\r\n            size:16,\r\n            type:"微软雅黑",\r\n            color:\'255,255,255\'\r\n        },\r\n        type: \'fold\',\r\n        direction:"vertical"\r\n    };\r\n};\r\nfunction FoldLink(config){\r\n    if(!config.start||!config.end){\r\n        console.error("Create Link need start and end");\r\n        return;\r\n    }\r\n    var self = this;\r\n    self.jtopo = new JTopo.FoldLink(config.start.jtopo, config.end.jtopo);\r\n    //封装对象之间相互保持引用\r\n    self.jtopo.qtopo=self;\r\n    self.attr =  QTopo.util.extend(defaults(), config || {});\r\n    //函数\r\n    self.set = setJTopo;\r\n    //初始化\r\n    self.set(self.attr);\r\n    //修改源码\r\n    reset(self);\r\n}\r\nfunction setJTopo(config) {\r\n    if (config) {\r\n        var self=this;\r\n        this._setAttr(config);\r\n    }\r\n}\r\nfunction reset(link){\r\n    //双向箭头\r\n    link.jtopo.paintPath = function (a, b) {\r\n        if (this.nodeA === this.nodeZ)return void this.paintLoop(a);\r\n        a.beginPath(), a.moveTo(b[0].x, b[0].y);\r\n        for (var c = 1; c < b.length; c++)\r\n            null == this.dashedPattern ? a.lineTo(b[c].x, b[c].y) : a.JTopoDashedLineTo(b[c - 1].x, b[c - 1].y, b[c].x, b[c].y, this.dashedPattern);\r\n        if (a.stroke(), a.closePath(), null != this.arrowsRadius) {\r\n            if (link.attr.arrow.end) {\r\n                this.paintArrow(a, b[b.length - 2], b[b.length - 1]);\r\n            }\r\n            if (link.attr.arrow.start) {\r\n                this.paintArrow(a, b[1], b[0]);//添加双向箭头\r\n            }\r\n        }\r\n    };\r\n}\r\nFoldLink.prototype.setDirection=function(direction){\r\n    //折线方向 horizontal 水平 "vertical"垂直\r\n    this.jtopo.direction=direction;\r\n    this.attr.direction=this.jtopo.direction;\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kZXZlbG9wL2NvcmUvZWxlbWVudC9saW5rL0ZvbGQuanM/NTBiYiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRDtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsY0FBYztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0M7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6IjEyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgcWl5YyBvbiAyMDE3LzIvNy5cclxuICovXHJcbnZhciBMaW5rPXJlcXVpcmUoXCIuL0xpbmsuanNcIik7XHJcbkZvbGRMaW5rLnByb3RvdHlwZT1uZXcgTGluaygpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IEZvbGRMaW5rO1xyXG4vL+aKmOe6v1xyXG52YXIgZGVmYXVsdHMgPWZ1bmN0aW9uKCl7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG51bToxLFxyXG4gICAgICAgIGFscGhhOjEsXHJcbiAgICAgICAgY29sb3I6ICcyMiwxMjQsMjU1JyxcclxuICAgICAgICBhcnJvdzp7XHJcbiAgICAgICAgICAgIHNpemU6bnVsbCxcclxuICAgICAgICAgICAgb2Zmc2V0OjAsXHJcbiAgICAgICAgICAgIHN0YXJ0OmZhbHNlLFxyXG4gICAgICAgICAgICBlbmQ6dHJ1ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2FwOjIwLFxyXG4gICAgICAgIHdpZHRoOiAyLFxyXG4gICAgICAgIGRhc2hlZDogIG51bGwsXHJcbiAgICAgICAgekluZGV4IDogMTAwLFxyXG4gICAgICAgIHRleHRPZmZzZXQ6WzAsMF0sXHJcbiAgICAgICAgZm9udDp7XHJcbiAgICAgICAgICAgIHNpemU6MTYsXHJcbiAgICAgICAgICAgIHR5cGU6XCLlvq7ova/pm4Xpu5FcIixcclxuICAgICAgICAgICAgY29sb3I6JzI1NSwyNTUsMjU1J1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdHlwZTogJ2ZvbGQnLFxyXG4gICAgICAgIGRpcmVjdGlvbjpcInZlcnRpY2FsXCJcclxuICAgIH07XHJcbn07XHJcbmZ1bmN0aW9uIEZvbGRMaW5rKGNvbmZpZyl7XHJcbiAgICBpZighY29uZmlnLnN0YXJ0fHwhY29uZmlnLmVuZCl7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkNyZWF0ZSBMaW5rIG5lZWQgc3RhcnQgYW5kIGVuZFwiKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmp0b3BvID0gbmV3IEpUb3BvLkZvbGRMaW5rKGNvbmZpZy5zdGFydC5qdG9wbywgY29uZmlnLmVuZC5qdG9wbyk7XHJcbiAgICAvL+WwgeijheWvueixoeS5i+mXtOebuOS6kuS/neaMgeW8leeUqFxyXG4gICAgc2VsZi5qdG9wby5xdG9wbz1zZWxmO1xyXG4gICAgc2VsZi5hdHRyID0gIFFUb3BvLnV0aWwuZXh0ZW5kKGRlZmF1bHRzKCksIGNvbmZpZyB8fCB7fSk7XHJcbiAgICAvL+WHveaVsFxyXG4gICAgc2VsZi5zZXQgPSBzZXRKVG9wbztcclxuICAgIC8v5Yid5aeL5YyWXHJcbiAgICBzZWxmLnNldChzZWxmLmF0dHIpO1xyXG4gICAgLy/kv67mlLnmupDnoIFcclxuICAgIHJlc2V0KHNlbGYpO1xyXG59XHJcbmZ1bmN0aW9uIHNldEpUb3BvKGNvbmZpZykge1xyXG4gICAgaWYgKGNvbmZpZykge1xyXG4gICAgICAgIHZhciBzZWxmPXRoaXM7XHJcbiAgICAgICAgdGhpcy5fc2V0QXR0cihjb25maWcpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHJlc2V0KGxpbmspe1xyXG4gICAgLy/lj4zlkJHnrq3lpLRcclxuICAgIGxpbmsuanRvcG8ucGFpbnRQYXRoID0gZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICBpZiAodGhpcy5ub2RlQSA9PT0gdGhpcy5ub2RlWilyZXR1cm4gdm9pZCB0aGlzLnBhaW50TG9vcChhKTtcclxuICAgICAgICBhLmJlZ2luUGF0aCgpLCBhLm1vdmVUbyhiWzBdLngsIGJbMF0ueSk7XHJcbiAgICAgICAgZm9yICh2YXIgYyA9IDE7IGMgPCBiLmxlbmd0aDsgYysrKVxyXG4gICAgICAgICAgICBudWxsID09IHRoaXMuZGFzaGVkUGF0dGVybiA/IGEubGluZVRvKGJbY10ueCwgYltjXS55KSA6IGEuSlRvcG9EYXNoZWRMaW5lVG8oYltjIC0gMV0ueCwgYltjIC0gMV0ueSwgYltjXS54LCBiW2NdLnksIHRoaXMuZGFzaGVkUGF0dGVybik7XHJcbiAgICAgICAgaWYgKGEuc3Ryb2tlKCksIGEuY2xvc2VQYXRoKCksIG51bGwgIT0gdGhpcy5hcnJvd3NSYWRpdXMpIHtcclxuICAgICAgICAgICAgaWYgKGxpbmsuYXR0ci5hcnJvdy5lbmQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFpbnRBcnJvdyhhLCBiW2IubGVuZ3RoIC0gMl0sIGJbYi5sZW5ndGggLSAxXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGxpbmsuYXR0ci5hcnJvdy5zdGFydCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wYWludEFycm93KGEsIGJbMV0sIGJbMF0pOy8v5re75Yqg5Y+M5ZCR566t5aS0XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcbkZvbGRMaW5rLnByb3RvdHlwZS5zZXREaXJlY3Rpb249ZnVuY3Rpb24oZGlyZWN0aW9uKXtcclxuICAgIC8v5oqY57q/5pa55ZCRIGhvcml6b250YWwg5rC05bmzIFwidmVydGljYWxcIuWeguebtFxyXG4gICAgdGhpcy5qdG9wby5kaXJlY3Rpb249ZGlyZWN0aW9uO1xyXG4gICAgdGhpcy5hdHRyLmRpcmVjdGlvbj10aGlzLmp0b3BvLmRpcmVjdGlvbjtcclxufTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9kZXZlbG9wL2NvcmUvZWxlbWVudC9saW5rL0ZvbGQuanNcbi8vIG1vZHVsZSBpZCA9IDEyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=')},function(module,exports,__webpack_require__){eval("/**\r\n * Created by qiyc on 2017/2/8.\r\n */\r\nvar Container=__webpack_require__(14);\r\nGroup.prototype = new Container();\r\nmodule.exports = Group;\r\n//曲线\r\nvar defaults = function () {\r\n    return {\r\n        name: 'group',\r\n        font:{\r\n            size:16,\r\n            type:\"微软雅黑\",\r\n            color:'255,255,255'\r\n        },\r\n        color: '10,10,100',\r\n        alpha: 0.5,\r\n        dragable: true,\r\n        zIndex: 10,\r\n        border:{\r\n            width:0,\r\n            radius:30,//最大160 最小0\r\n            color:\"255,0,0\"\r\n        },\r\n        textPosition: 'bottom',//Bottom_Center Top_Center Middle_Left Middle_Right Hidden,\r\n        layout: \"\",\r\n        children:{\r\n            showLink: false,\r\n            showName: true,\r\n            dragble: true\r\n        }\r\n    };\r\n};\r\n\r\nfunction Group(config) {\r\n    var self = this;\r\n    self.jtopo = new JTopo.Container();\r\n    //封装对象之间相互保持引用\r\n    self.jtopo.qtopo=self;\r\n    self.attr =  QTopo.util.extend(defaults(), config || {});\r\n    //函数\r\n    self.set = setJTopo;\r\n    //初始化\r\n    self.children=[];\r\n    self.set(self.attr);\r\n    //改写源码绘制曲线,可由curveOffset指定弧度\r\n    reset(self);\r\n}\r\nvar defaultLayout = function (container, children) {\r\n    if (children.length > 0) {\r\n        var left = 1e7,\r\n            right = -1e7,\r\n            top = 1e7,\r\n            bottom = -1e7,\r\n            width = right - left,\r\n            height = bottom - top;\r\n        for (var i = 0; i < children.length; i++) {\r\n            var child = children[i];\r\n            child.x <= left && (left = child.x);\r\n            (child.x+child.width) >= right && (right = child.x+child.width);\r\n            child.y <= top && (top = child.y);\r\n            (child.y+child.height) >= bottom && (bottom = child.y+child.height);\r\n            width = right - left;\r\n            height = bottom - top;\r\n        }\r\n        container.x = left;\r\n        container.y = top;\r\n        container.width = width;\r\n        container.height = height;\r\n    }\r\n};\r\nfunction setJTopo(config) {\r\n    if (config) {\r\n        var self=this;\r\n        self._setAttr(config);\r\n    }\r\n}\r\nfunction reset(group) {\r\n    group.jtopo.layout=defaultLayout;\r\n}\r\nGroup.prototype.setLayout=function(layout){\r\n    var selected;\r\n    if (layout) {\r\n        switch (layout.type) {\r\n            case 'flow':\r\n                // 流式布局（水平,垂直间隔)\r\n                selected = JTopo.layout.FlowLayout(layout.row, layout.column);\r\n                this.attr.layout=layout;\r\n                break;\r\n            case 'grid':\r\n                // 网格布局(行,列)\r\n                selected = JTopo.layout.GridLayout(layout.row, layout.column);\r\n                this.attr.layout=layout;\r\n                break;\r\n            default:\r\n                selected = defaultLayout;\r\n                this.attr.layout={};\r\n                this.attr.layout.type=\"set\";\r\n        }\r\n    } else {\r\n        selected = defaultLayout;\r\n        this.attr.layout={};\r\n        this.attr.layout.type=\"set\";\r\n    }\r\n    this.jtopo.layout = selected;\r\n};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kZXZlbG9wL2NvcmUvZWxlbWVudC9jb250YWluZXIvR3JvdXAuanM/YjdmYSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQ7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIscUJBQXFCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiMTMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBxaXljIG9uIDIwMTcvMi84LlxyXG4gKi9cclxudmFyIENvbnRhaW5lcj1yZXF1aXJlKFwiLi9Db250YWluZXIuanNcIik7XHJcbkdyb3VwLnByb3RvdHlwZSA9IG5ldyBDb250YWluZXIoKTtcclxubW9kdWxlLmV4cG9ydHMgPSBHcm91cDtcclxuLy/mm7Lnur9cclxudmFyIGRlZmF1bHRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBuYW1lOiAnZ3JvdXAnLFxyXG4gICAgICAgIGZvbnQ6e1xyXG4gICAgICAgICAgICBzaXplOjE2LFxyXG4gICAgICAgICAgICB0eXBlOlwi5b6u6L2v6ZuF6buRXCIsXHJcbiAgICAgICAgICAgIGNvbG9yOicyNTUsMjU1LDI1NSdcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbG9yOiAnMTAsMTAsMTAwJyxcclxuICAgICAgICBhbHBoYTogMC41LFxyXG4gICAgICAgIGRyYWdhYmxlOiB0cnVlLFxyXG4gICAgICAgIHpJbmRleDogMTAsXHJcbiAgICAgICAgYm9yZGVyOntcclxuICAgICAgICAgICAgd2lkdGg6MCxcclxuICAgICAgICAgICAgcmFkaXVzOjMwLC8v5pyA5aSnMTYwIOacgOWwjzBcclxuICAgICAgICAgICAgY29sb3I6XCIyNTUsMCwwXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRleHRQb3NpdGlvbjogJ2JvdHRvbScsLy9Cb3R0b21fQ2VudGVyIFRvcF9DZW50ZXIgTWlkZGxlX0xlZnQgTWlkZGxlX1JpZ2h0IEhpZGRlbixcclxuICAgICAgICBsYXlvdXQ6IFwiXCIsXHJcbiAgICAgICAgY2hpbGRyZW46e1xyXG4gICAgICAgICAgICBzaG93TGluazogZmFsc2UsXHJcbiAgICAgICAgICAgIHNob3dOYW1lOiB0cnVlLFxyXG4gICAgICAgICAgICBkcmFnYmxlOiB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIEdyb3VwKGNvbmZpZykge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5qdG9wbyA9IG5ldyBKVG9wby5Db250YWluZXIoKTtcclxuICAgIC8v5bCB6KOF5a+56LGh5LmL6Ze055u45LqS5L+d5oyB5byV55SoXHJcbiAgICBzZWxmLmp0b3BvLnF0b3BvPXNlbGY7XHJcbiAgICBzZWxmLmF0dHIgPSAgUVRvcG8udXRpbC5leHRlbmQoZGVmYXVsdHMoKSwgY29uZmlnIHx8IHt9KTtcclxuICAgIC8v5Ye95pWwXHJcbiAgICBzZWxmLnNldCA9IHNldEpUb3BvO1xyXG4gICAgLy/liJ3lp4vljJZcclxuICAgIHNlbGYuY2hpbGRyZW49W107XHJcbiAgICBzZWxmLnNldChzZWxmLmF0dHIpO1xyXG4gICAgLy/mlLnlhpnmupDnoIHnu5jliLbmm7Lnur8s5Y+v55SxY3VydmVPZmZzZXTmjIflrprlvKfluqZcclxuICAgIHJlc2V0KHNlbGYpO1xyXG59XHJcbnZhciBkZWZhdWx0TGF5b3V0ID0gZnVuY3Rpb24gKGNvbnRhaW5lciwgY2hpbGRyZW4pIHtcclxuICAgIGlmIChjaGlsZHJlbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgdmFyIGxlZnQgPSAxZTcsXHJcbiAgICAgICAgICAgIHJpZ2h0ID0gLTFlNyxcclxuICAgICAgICAgICAgdG9wID0gMWU3LFxyXG4gICAgICAgICAgICBib3R0b20gPSAtMWU3LFxyXG4gICAgICAgICAgICB3aWR0aCA9IHJpZ2h0IC0gbGVmdCxcclxuICAgICAgICAgICAgaGVpZ2h0ID0gYm90dG9tIC0gdG9wO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGNoaWxkID0gY2hpbGRyZW5baV07XHJcbiAgICAgICAgICAgIGNoaWxkLnggPD0gbGVmdCAmJiAobGVmdCA9IGNoaWxkLngpO1xyXG4gICAgICAgICAgICAoY2hpbGQueCtjaGlsZC53aWR0aCkgPj0gcmlnaHQgJiYgKHJpZ2h0ID0gY2hpbGQueCtjaGlsZC53aWR0aCk7XHJcbiAgICAgICAgICAgIGNoaWxkLnkgPD0gdG9wICYmICh0b3AgPSBjaGlsZC55KTtcclxuICAgICAgICAgICAgKGNoaWxkLnkrY2hpbGQuaGVpZ2h0KSA+PSBib3R0b20gJiYgKGJvdHRvbSA9IGNoaWxkLnkrY2hpbGQuaGVpZ2h0KTtcclxuICAgICAgICAgICAgd2lkdGggPSByaWdodCAtIGxlZnQ7XHJcbiAgICAgICAgICAgIGhlaWdodCA9IGJvdHRvbSAtIHRvcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29udGFpbmVyLnggPSBsZWZ0O1xyXG4gICAgICAgIGNvbnRhaW5lci55ID0gdG9wO1xyXG4gICAgICAgIGNvbnRhaW5lci53aWR0aCA9IHdpZHRoO1xyXG4gICAgICAgIGNvbnRhaW5lci5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICB9XHJcbn07XHJcbmZ1bmN0aW9uIHNldEpUb3BvKGNvbmZpZykge1xyXG4gICAgaWYgKGNvbmZpZykge1xyXG4gICAgICAgIHZhciBzZWxmPXRoaXM7XHJcbiAgICAgICAgc2VsZi5fc2V0QXR0cihjb25maWcpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHJlc2V0KGdyb3VwKSB7XHJcbiAgICBncm91cC5qdG9wby5sYXlvdXQ9ZGVmYXVsdExheW91dDtcclxufVxyXG5Hcm91cC5wcm90b3R5cGUuc2V0TGF5b3V0PWZ1bmN0aW9uKGxheW91dCl7XHJcbiAgICB2YXIgc2VsZWN0ZWQ7XHJcbiAgICBpZiAobGF5b3V0KSB7XHJcbiAgICAgICAgc3dpdGNoIChsYXlvdXQudHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlICdmbG93JzpcclxuICAgICAgICAgICAgICAgIC8vIOa1geW8j+W4g+WxgO+8iOawtOW5syzlnoLnm7Tpl7TpmpQpXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZCA9IEpUb3BvLmxheW91dC5GbG93TGF5b3V0KGxheW91dC5yb3csIGxheW91dC5jb2x1bW4pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hdHRyLmxheW91dD1sYXlvdXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnZ3JpZCc6XHJcbiAgICAgICAgICAgICAgICAvLyDnvZHmoLzluIPlsYAo6KGMLOWIlylcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkID0gSlRvcG8ubGF5b3V0LkdyaWRMYXlvdXQobGF5b3V0LnJvdywgbGF5b3V0LmNvbHVtbik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmF0dHIubGF5b3V0PWxheW91dDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQgPSBkZWZhdWx0TGF5b3V0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hdHRyLmxheW91dD17fTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXR0ci5sYXlvdXQudHlwZT1cInNldFwiO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2VsZWN0ZWQgPSBkZWZhdWx0TGF5b3V0O1xyXG4gICAgICAgIHRoaXMuYXR0ci5sYXlvdXQ9e307XHJcbiAgICAgICAgdGhpcy5hdHRyLmxheW91dC50eXBlPVwic2V0XCI7XHJcbiAgICB9XHJcbiAgICB0aGlzLmp0b3BvLmxheW91dCA9IHNlbGVjdGVkO1xyXG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZGV2ZWxvcC9jb3JlL2VsZW1lbnQvY29udGFpbmVyL0dyb3VwLmpzXG4vLyBtb2R1bGUgaWQgPSAxM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");
},function(module,exports,__webpack_require__){eval('/**\r\n * Created by qiyc on 2017/2/7.\r\n */\r\nvar Element=__webpack_require__(6);\r\nContainer.prototype = new Element();\r\nmodule.exports =Container;\r\nfunction Container() {\r\n    this.setName=function(name){\r\n        if(this.attr.textPosition!="hide"){\r\n            this.jtopo.text=name;\r\n            this.attr.name=name;\r\n        }\r\n    };\r\n    this.add = function (element) {\r\n        if (!$.isArray(this.children)) {\r\n            this.children = [];\r\n        }\r\n        if(element.jtopo&&this.children.indexOf(element)<0){\r\n            this.children.push(element);\r\n            this.jtopo.add(element.jtopo);\r\n        }\r\n    };\r\n    this.remove=function(element){\r\n        if($.isArray(this.children)&&this.children.indexOf(element)>0){\r\n            this.children.splice(this.children.indexOf(element),1);\r\n            this.jtopo.remove(element.jtopo);\r\n        }\r\n    };\r\n    this.getChildren=function(){\r\n        var children=[];\r\n        var self=this;\r\n        if(self.jtopo&&self.jtopo.childs){\r\n            $.each(self.jtopo.childs,function(i,v){\r\n                if(v.qtopo){\r\n                    children.push(v.qtopo);\r\n                }else{\r\n                    console.error(this,"the child not wraped by qtopo",v);\r\n                }\r\n            });\r\n        }\r\n        this.children=children;\r\n        return children;\r\n    };\r\n    this.getType = function () {\r\n        return "container"\r\n    };\r\n    this.setColor = function (color) {\r\n        if (color) {\r\n            color = QTopo.util.transHex(color.toLowerCase());\r\n            this.jtopo.fillColor = color;\r\n            this.attr.color=color;\r\n        }\r\n    };\r\n    this.setBorder = function (border) {\r\n        if (border.color && $.isNumeric(border.width) && $.isNumeric(border.radius)) {\r\n            this.jtopo.borderColor = QTopo.util.transHex(border.color.toLowerCase());\r\n            this.jtopo.borderWidth = parseInt(border.width);\r\n            this.jtopo.borderRadius = parseInt(border.radius);\r\n            this.attr.border.color=this.jtopo.borderColor;\r\n            this.attr.border.width=this.jtopo.borderWidth;\r\n            this.attr.border.raidus=this.jtopo.borderRadius;\r\n        } else {\r\n            console.error(this,"setBorder need params", border);\r\n        }\r\n    };\r\n    this.setChildren = function (children) {\r\n        if (children) {\r\n            this.jtopo.childDragble = typeof children.dragble == "boolean" ? children.dragble : true;\r\n            this.attr.children.dragble=this.jtopo.childDragble;\r\n        }\r\n    };\r\n}\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kZXZlbG9wL2NvcmUvZWxlbWVudC9jb250YWluZXIvQ29udGFpbmVyLmpzPzNhZTMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6IjE0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgcWl5YyBvbiAyMDE3LzIvNy5cclxuICovXHJcbnZhciBFbGVtZW50PXJlcXVpcmUoXCIuLi9FbGVtZW50LmpzXCIpO1xyXG5Db250YWluZXIucHJvdG90eXBlID0gbmV3IEVsZW1lbnQoKTtcclxubW9kdWxlLmV4cG9ydHMgPUNvbnRhaW5lcjtcclxuZnVuY3Rpb24gQ29udGFpbmVyKCkge1xyXG4gICAgdGhpcy5zZXROYW1lPWZ1bmN0aW9uKG5hbWUpe1xyXG4gICAgICAgIGlmKHRoaXMuYXR0ci50ZXh0UG9zaXRpb24hPVwiaGlkZVwiKXtcclxuICAgICAgICAgICAgdGhpcy5qdG9wby50ZXh0PW5hbWU7XHJcbiAgICAgICAgICAgIHRoaXMuYXR0ci5uYW1lPW5hbWU7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRoaXMuYWRkID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICBpZiAoISQuaXNBcnJheSh0aGlzLmNoaWxkcmVuKSkge1xyXG4gICAgICAgICAgICB0aGlzLmNoaWxkcmVuID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGVsZW1lbnQuanRvcG8mJnRoaXMuY2hpbGRyZW4uaW5kZXhPZihlbGVtZW50KTwwKXtcclxuICAgICAgICAgICAgdGhpcy5jaGlsZHJlbi5wdXNoKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB0aGlzLmp0b3BvLmFkZChlbGVtZW50Lmp0b3BvKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhpcy5yZW1vdmU9ZnVuY3Rpb24oZWxlbWVudCl7XHJcbiAgICAgICAgaWYoJC5pc0FycmF5KHRoaXMuY2hpbGRyZW4pJiZ0aGlzLmNoaWxkcmVuLmluZGV4T2YoZWxlbWVudCk+MCl7XHJcbiAgICAgICAgICAgIHRoaXMuY2hpbGRyZW4uc3BsaWNlKHRoaXMuY2hpbGRyZW4uaW5kZXhPZihlbGVtZW50KSwxKTtcclxuICAgICAgICAgICAgdGhpcy5qdG9wby5yZW1vdmUoZWxlbWVudC5qdG9wbyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRoaXMuZ2V0Q2hpbGRyZW49ZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgY2hpbGRyZW49W107XHJcbiAgICAgICAgdmFyIHNlbGY9dGhpcztcclxuICAgICAgICBpZihzZWxmLmp0b3BvJiZzZWxmLmp0b3BvLmNoaWxkcyl7XHJcbiAgICAgICAgICAgICQuZWFjaChzZWxmLmp0b3BvLmNoaWxkcyxmdW5jdGlvbihpLHYpe1xyXG4gICAgICAgICAgICAgICAgaWYodi5xdG9wbyl7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW4ucHVzaCh2LnF0b3BvKTtcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IodGhpcyxcInRoZSBjaGlsZCBub3Qgd3JhcGVkIGJ5IHF0b3BvXCIsdik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNoaWxkcmVuPWNoaWxkcmVuO1xyXG4gICAgICAgIHJldHVybiBjaGlsZHJlbjtcclxuICAgIH07XHJcbiAgICB0aGlzLmdldFR5cGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiY29udGFpbmVyXCJcclxuICAgIH07XHJcbiAgICB0aGlzLnNldENvbG9yID0gZnVuY3Rpb24gKGNvbG9yKSB7XHJcbiAgICAgICAgaWYgKGNvbG9yKSB7XHJcbiAgICAgICAgICAgIGNvbG9yID0gUVRvcG8udXRpbC50cmFuc0hleChjb2xvci50b0xvd2VyQ2FzZSgpKTtcclxuICAgICAgICAgICAgdGhpcy5qdG9wby5maWxsQ29sb3IgPSBjb2xvcjtcclxuICAgICAgICAgICAgdGhpcy5hdHRyLmNvbG9yPWNvbG9yO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aGlzLnNldEJvcmRlciA9IGZ1bmN0aW9uIChib3JkZXIpIHtcclxuICAgICAgICBpZiAoYm9yZGVyLmNvbG9yICYmICQuaXNOdW1lcmljKGJvcmRlci53aWR0aCkgJiYgJC5pc051bWVyaWMoYm9yZGVyLnJhZGl1cykpIHtcclxuICAgICAgICAgICAgdGhpcy5qdG9wby5ib3JkZXJDb2xvciA9IFFUb3BvLnV0aWwudHJhbnNIZXgoYm9yZGVyLmNvbG9yLnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgICAgICAgICB0aGlzLmp0b3BvLmJvcmRlcldpZHRoID0gcGFyc2VJbnQoYm9yZGVyLndpZHRoKTtcclxuICAgICAgICAgICAgdGhpcy5qdG9wby5ib3JkZXJSYWRpdXMgPSBwYXJzZUludChib3JkZXIucmFkaXVzKTtcclxuICAgICAgICAgICAgdGhpcy5hdHRyLmJvcmRlci5jb2xvcj10aGlzLmp0b3BvLmJvcmRlckNvbG9yO1xyXG4gICAgICAgICAgICB0aGlzLmF0dHIuYm9yZGVyLndpZHRoPXRoaXMuanRvcG8uYm9yZGVyV2lkdGg7XHJcbiAgICAgICAgICAgIHRoaXMuYXR0ci5ib3JkZXIucmFpZHVzPXRoaXMuanRvcG8uYm9yZGVyUmFkaXVzO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IodGhpcyxcInNldEJvcmRlciBuZWVkIHBhcmFtc1wiLCBib3JkZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aGlzLnNldENoaWxkcmVuID0gZnVuY3Rpb24gKGNoaWxkcmVuKSB7XHJcbiAgICAgICAgaWYgKGNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgIHRoaXMuanRvcG8uY2hpbGREcmFnYmxlID0gdHlwZW9mIGNoaWxkcmVuLmRyYWdibGUgPT0gXCJib29sZWFuXCIgPyBjaGlsZHJlbi5kcmFnYmxlIDogdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5hdHRyLmNoaWxkcmVuLmRyYWdibGU9dGhpcy5qdG9wby5jaGlsZERyYWdibGU7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5cclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9kZXZlbG9wL2NvcmUvZWxlbWVudC9jb250YWluZXIvQ29udGFpbmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAxNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9')},function(module,exports,__webpack_require__){eval('/**\r\n * Created by qiyc on 2017/2/16.\r\n */\r\n//依赖bootstrap\r\n__webpack_require__(16);//滚动条插件\r\n//require("./lib/bootstrap-3.3.6-dist/js/bootstrap.min.js");\r\n//require("./lib/flat-ui/js/flat-ui.min.js");\r\n\r\nmodule.exports = windows;\r\nfunction windows(){\r\n\r\n}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kZXZlbG9wL2NvbXBvbmVudC93aW5kb3dzLmpzPzYxMzIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBNEQ7QUFDNUQ7QUFDQTs7QUFFQTtBQUNBOztBQUVBIiwiZmlsZSI6IjE1LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgcWl5YyBvbiAyMDE3LzIvMTYuXHJcbiAqL1xyXG4vL+S+nei1lmJvb3RzdHJhcFxyXG5yZXF1aXJlKFwiLi9saWIvanF1ZXJ5LW5pY2VzY3JvbGwvanF1ZXJ5Lm5pY2VzY3JvbGwubWluLmpzXCIpOy8v5rua5Yqo5p2h5o+S5Lu2XHJcbi8vcmVxdWlyZShcIi4vbGliL2Jvb3RzdHJhcC0zLjMuNi1kaXN0L2pzL2Jvb3RzdHJhcC5taW4uanNcIik7XHJcbi8vcmVxdWlyZShcIi4vbGliL2ZsYXQtdWkvanMvZmxhdC11aS5taW4uanNcIik7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHdpbmRvd3M7XHJcbmZ1bmN0aW9uIHdpbmRvd3MoKXtcclxuXHJcbn1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2RldmVsb3AvY29tcG9uZW50L3dpbmRvd3MuanNcbi8vIG1vZHVsZSBpZCA9IDE1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=')},function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jquery.nicescroll 3.6.8 InuYaksa*2015 MIT http://nicescroll.areaaperta.com */(function(f){ true?!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(17)], __WEBPACK_AMD_DEFINE_FACTORY__ = (f), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === \'function\' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)):"object"===typeof exports?module.exports=f(require("jquery")):f(jQuery)})(function(f){var B=!1,F=!1,O=0,P=2E3,A=0,J=["webkit","ms","moz","o"],v=window.requestAnimationFrame||!1,w=window.cancelAnimationFrame||!1;if(!v)for(var Q in J){var G=J[Q];if(v=window[G+"RequestAnimationFrame"]){w=window[G+"CancelAnimationFrame"]||window[G+"CancelRequestAnimationFrame"];break}}var x=window.MutationObserver||window.WebKitMutationObserver||\r\n!1,K={zindex:"auto",cursoropacitymin:0,cursoropacitymax:1,cursorcolor:"#424242",cursorwidth:"6px",cursorborder:"1px solid #fff",cursorborderradius:"5px",scrollspeed:60,mousescrollstep:24,touchbehavior:!1,hwacceleration:!0,usetransition:!0,boxzoom:!1,dblclickzoom:!0,gesturezoom:!0,grabcursorenabled:!0,autohidemode:!0,background:"",iframeautoresize:!0,cursorminheight:32,preservenativescrolling:!0,railoffset:!1,railhoffset:!1,bouncescroll:!0,spacebarenabled:!0,railpadding:{top:0,right:0,left:0,bottom:0},\r\ndisableoutline:!0,horizrailenabled:!0,railalign:"right",railvalign:"bottom",enabletranslate3d:!0,enablemousewheel:!0,enablekeyboard:!0,smoothscroll:!0,sensitiverail:!0,enablemouselockapi:!0,cursorfixedheight:!1,directionlockdeadzone:6,hidecursordelay:400,nativeparentscrolling:!0,enablescrollonselection:!0,overflowx:!0,overflowy:!0,cursordragspeed:.3,rtlmode:"auto",cursordragontouch:!1,oneaxismousemode:"auto",scriptpath:function(){var f=document.getElementsByTagName("script"),f=f.length?f[f.length-\r\n1].src.split("?")[0]:"";return 0<f.split("/").length?f.split("/").slice(0,-1).join("/")+"/":""}(),preventmultitouchscrolling:!0,disablemutationobserver:!1},H=!1,R=function(){if(H)return H;var f=document.createElement("DIV"),c=f.style,k=navigator.userAgent,l=navigator.platform,d={haspointerlock:"pointerLockElement"in document||"webkitPointerLockElement"in document||"mozPointerLockElement"in document};d.isopera="opera"in window;d.isopera12=d.isopera&&"getUserMedia"in navigator;d.isoperamini="[object OperaMini]"===\r\nObject.prototype.toString.call(window.operamini);d.isie="all"in document&&"attachEvent"in f&&!d.isopera;d.isieold=d.isie&&!("msInterpolationMode"in c);d.isie7=d.isie&&!d.isieold&&(!("documentMode"in document)||7==document.documentMode);d.isie8=d.isie&&"documentMode"in document&&8==document.documentMode;d.isie9=d.isie&&"performance"in window&&9==document.documentMode;d.isie10=d.isie&&"performance"in window&&10==document.documentMode;d.isie11="msRequestFullscreen"in f&&11<=document.documentMode;d.isieedge12=\r\nnavigator.userAgent.match(/Edge\\/12\\./);d.isieedge="msOverflowStyle"in f;d.ismodernie=d.isie11||d.isieedge;d.isie9mobile=/iemobile.9/i.test(k);d.isie9mobile&&(d.isie9=!1);d.isie7mobile=!d.isie9mobile&&d.isie7&&/iemobile/i.test(k);d.ismozilla="MozAppearance"in c;d.iswebkit="WebkitAppearance"in c;d.ischrome="chrome"in window;d.ischrome38=d.ischrome&&"touchAction"in c;d.ischrome22=!d.ischrome38&&d.ischrome&&d.haspointerlock;d.ischrome26=!d.ischrome38&&d.ischrome&&"transition"in c;d.cantouch="ontouchstart"in\r\ndocument.documentElement||"ontouchstart"in window;d.hasw3ctouch=(window.PointerEvent||!1)&&(0<navigator.MaxTouchPoints||0<navigator.msMaxTouchPoints);d.hasmstouch=!d.hasw3ctouch&&(window.MSPointerEvent||!1);d.ismac=/^mac$/i.test(l);d.isios=d.cantouch&&/iphone|ipad|ipod/i.test(l);d.isios4=d.isios&&!("seal"in Object);d.isios7=d.isios&&"webkitHidden"in document;d.isios8=d.isios&&"hidden"in document;d.isandroid=/android/i.test(k);d.haseventlistener="addEventListener"in f;d.trstyle=!1;d.hastransform=!1;\r\nd.hastranslate3d=!1;d.transitionstyle=!1;d.hastransition=!1;d.transitionend=!1;l=["transform","msTransform","webkitTransform","MozTransform","OTransform"];for(k=0;k<l.length;k++)if(void 0!==c[l[k]]){d.trstyle=l[k];break}d.hastransform=!!d.trstyle;d.hastransform&&(c[d.trstyle]="translate3d(1px,2px,3px)",d.hastranslate3d=/translate3d/.test(c[d.trstyle]));d.transitionstyle=!1;d.prefixstyle="";d.transitionend=!1;for(var l="transition webkitTransition msTransition MozTransition OTransition OTransition KhtmlTransition".split(" "),\r\nq=" -webkit- -ms- -moz- -o- -o -khtml-".split(" "),t="transitionend webkitTransitionEnd msTransitionEnd transitionend otransitionend oTransitionEnd KhtmlTransitionEnd".split(" "),k=0;k<l.length;k++)if(l[k]in c){d.transitionstyle=l[k];d.prefixstyle=q[k];d.transitionend=t[k];break}d.ischrome26&&(d.prefixstyle=q[1]);d.hastransition=d.transitionstyle;a:{k=["grab","-webkit-grab","-moz-grab"];if(d.ischrome&&!d.ischrome38||d.isie)k=[];for(l=0;l<k.length;l++)if(q=k[l],c.cursor=q,c.cursor==q){c=q;break a}c=\r\n"url(//patriciaportfolio.googlecode.com/files/openhand.cur),n-resize"}d.cursorgrabvalue=c;d.hasmousecapture="setCapture"in f;d.hasMutationObserver=!1!==x;return H=d},S=function(h,c){function k(){var b=a.doc.css(e.trstyle);return b&&"matrix"==b.substr(0,6)?b.replace(/^.*\\((.*)\\)$/g,"$1").replace(/px/g,"").split(/, +/):!1}function l(){var b=a.win;if("zIndex"in b)return b.zIndex();for(;0<b.length&&9!=b[0].nodeType;){var g=b.css("zIndex");if(!isNaN(g)&&0!=g)return parseInt(g);b=b.parent()}return!1}function d(b,\r\ng,u){g=b.css(g);b=parseFloat(g);return isNaN(b)?(b=z[g]||0,u=3==b?u?a.win.outerHeight()-a.win.innerHeight():a.win.outerWidth()-a.win.innerWidth():1,a.isie8&&b&&(b+=1),u?b:0):b}function q(b,g,u,c){a._bind(b,g,function(a){a=a?a:window.event;var c={original:a,target:a.target||a.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==a.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){a.preventDefault?a.preventDefault():a.returnValue=!1;return!1},stopImmediatePropagation:function(){a.stopImmediatePropagation?\r\na.stopImmediatePropagation():a.cancelBubble=!0}};"mousewheel"==g?(a.wheelDeltaX&&(c.deltaX=-.025*a.wheelDeltaX),a.wheelDeltaY&&(c.deltaY=-.025*a.wheelDeltaY),c.deltaY||c.deltaX||(c.deltaY=-.025*a.wheelDelta)):c.deltaY=a.detail;return u.call(b,c)},c)}function t(b,g,c){var d,e;0==b.deltaMode?(d=-Math.floor(a.opt.mousescrollstep/54*b.deltaX),e=-Math.floor(a.opt.mousescrollstep/54*b.deltaY)):1==b.deltaMode&&(d=-Math.floor(b.deltaX*a.opt.mousescrollstep),e=-Math.floor(b.deltaY*a.opt.mousescrollstep));\r\ng&&a.opt.oneaxismousemode&&0==d&&e&&(d=e,e=0,c&&(0>d?a.getScrollLeft()>=a.page.maxw:0>=a.getScrollLeft())&&(e=d,d=0));a.isrtlmode&&(d=-d);d&&(a.scrollmom&&a.scrollmom.stop(),a.lastdeltax+=d,a.debounced("mousewheelx",function(){var b=a.lastdeltax;a.lastdeltax=0;a.rail.drag||a.doScrollLeftBy(b)},15));if(e){if(a.opt.nativeparentscrolling&&c&&!a.ispage&&!a.zoomactive)if(0>e){if(a.getScrollTop()>=a.page.maxh)return!0}else if(0>=a.getScrollTop())return!0;a.scrollmom&&a.scrollmom.stop();a.lastdeltay+=e;\r\na.synched("mousewheely",function(){var b=a.lastdeltay;a.lastdeltay=0;a.rail.drag||a.doScrollBy(b)},15)}b.stopImmediatePropagation();return b.preventDefault()}var a=this;this.version="3.6.8";this.name="nicescroll";this.me=c;this.opt={doc:f("body"),win:!1};f.extend(this.opt,K);this.opt.snapbackspeed=80;if(h)for(var r in a.opt)void 0!==h[r]&&(a.opt[r]=h[r]);a.opt.disablemutationobserver&&(x=!1);this.iddoc=(this.doc=a.opt.doc)&&this.doc[0]?this.doc[0].id||"":"";this.ispage=/^BODY|HTML/.test(a.opt.win?\r\na.opt.win[0].nodeName:this.doc[0].nodeName);this.haswrapper=!1!==a.opt.win;this.win=a.opt.win||(this.ispage?f(window):this.doc);this.docscroll=this.ispage&&!this.haswrapper?f(window):this.win;this.body=f("body");this.iframe=this.isfixed=this.viewport=!1;this.isiframe="IFRAME"==this.doc[0].nodeName&&"IFRAME"==this.win[0].nodeName;this.istextarea="TEXTAREA"==this.win[0].nodeName;this.forcescreen=!1;this.canshowonmouseevent="scroll"!=a.opt.autohidemode;this.page=this.view=this.onzoomout=this.onzoomin=\r\nthis.onscrollcancel=this.onscrollend=this.onscrollstart=this.onclick=this.ongesturezoom=this.onkeypress=this.onmousewheel=this.onmousemove=this.onmouseup=this.onmousedown=!1;this.scroll={x:0,y:0};this.scrollratio={x:0,y:0};this.cursorheight=20;this.scrollvaluemax=0;if("auto"==this.opt.rtlmode){r=this.win[0]==window?this.body:this.win;var p=r.css("writing-mode")||r.css("-webkit-writing-mode")||r.css("-ms-writing-mode")||r.css("-moz-writing-mode");"horizontal-tb"==p||"lr-tb"==p||""==p?(this.isrtlmode=\r\n"rtl"==r.css("direction"),this.isvertical=!1):(this.isrtlmode="vertical-rl"==p||"tb"==p||"tb-rl"==p||"rl-tb"==p,this.isvertical="vertical-rl"==p||"tb"==p||"tb-rl"==p)}else this.isrtlmode=!0===this.opt.rtlmode,this.isvertical=!1;this.observerbody=this.observerremover=this.observer=this.scrollmom=this.scrollrunning=!1;do this.id="ascrail"+P++;while(document.getElementById(this.id));this.hasmousefocus=this.hasfocus=this.zoomactive=this.zoom=this.selectiondrag=this.cursorfreezed=this.cursor=this.rail=\r\n!1;this.visibility=!0;this.hidden=this.locked=this.railslocked=!1;this.cursoractive=!0;this.wheelprevented=!1;this.overflowx=a.opt.overflowx;this.overflowy=a.opt.overflowy;this.nativescrollingarea=!1;this.checkarea=0;this.events=[];this.saved={};this.delaylist={};this.synclist={};this.lastdeltay=this.lastdeltax=0;this.detected=R();var e=f.extend({},this.detected);this.ishwscroll=(this.canhwscroll=e.hastransform&&a.opt.hwacceleration)&&a.haswrapper;this.hasreversehr=this.isrtlmode?this.isvertical?\r\n!(e.iswebkit||e.isie||e.isie11):!(e.iswebkit||e.isie&&!e.isie10&&!e.isie11):!1;this.istouchcapable=!1;e.cantouch||!e.hasw3ctouch&&!e.hasmstouch?!e.cantouch||e.isios||e.isandroid||!e.iswebkit&&!e.ismozilla||(this.istouchcapable=!0):this.istouchcapable=!0;a.opt.enablemouselockapi||(e.hasmousecapture=!1,e.haspointerlock=!1);this.debounced=function(b,g,c){a&&(a.delaylist[b]||(g.call(a),a.delaylist[b]={h:v(function(){a.delaylist[b].fn.call(a);a.delaylist[b]=!1},c)}),a.delaylist[b].fn=g)};var I=!1;this.synched=\r\nfunction(b,g){a.synclist[b]=g;(function(){I||(v(function(){if(a){I=!1;for(var b in a.synclist){var g=a.synclist[b];g&&g.call(a);a.synclist[b]=!1}}}),I=!0)})();return b};this.unsynched=function(b){a.synclist[b]&&(a.synclist[b]=!1)};this.css=function(b,g){for(var c in g)a.saved.css.push([b,c,b.css(c)]),b.css(c,g[c])};this.scrollTop=function(b){return void 0===b?a.getScrollTop():a.setScrollTop(b)};this.scrollLeft=function(b){return void 0===b?a.getScrollLeft():a.setScrollLeft(b)};var D=function(a,g,\r\nc,d,e,f,k){this.st=a;this.ed=g;this.spd=c;this.p1=d||0;this.p2=e||1;this.p3=f||0;this.p4=k||1;this.ts=(new Date).getTime();this.df=this.ed-this.st};D.prototype={B2:function(a){return 3*a*a*(1-a)},B3:function(a){return 3*a*(1-a)*(1-a)},B4:function(a){return(1-a)*(1-a)*(1-a)},getNow:function(){var a=1-((new Date).getTime()-this.ts)/this.spd,g=this.B2(a)+this.B3(a)+this.B4(a);return 0>a?this.ed:this.st+Math.round(this.df*g)},update:function(a,g){this.st=this.getNow();this.ed=a;this.spd=g;this.ts=(new Date).getTime();\r\nthis.df=this.ed-this.st;return this}};if(this.ishwscroll){this.doc.translate={x:0,y:0,tx:"0px",ty:"0px"};e.hastranslate3d&&e.isios&&this.doc.css("-webkit-backface-visibility","hidden");this.getScrollTop=function(b){if(!b){if(b=k())return 16==b.length?-b[13]:-b[5];if(a.timerscroll&&a.timerscroll.bz)return a.timerscroll.bz.getNow()}return a.doc.translate.y};this.getScrollLeft=function(b){if(!b){if(b=k())return 16==b.length?-b[12]:-b[4];if(a.timerscroll&&a.timerscroll.bh)return a.timerscroll.bh.getNow()}return a.doc.translate.x};\r\nthis.notifyScrollEvent=function(a){var g=document.createEvent("UIEvents");g.initUIEvent("scroll",!1,!0,window,1);g.niceevent=!0;a.dispatchEvent(g)};var y=this.isrtlmode?1:-1;e.hastranslate3d&&a.opt.enabletranslate3d?(this.setScrollTop=function(b,g){a.doc.translate.y=b;a.doc.translate.ty=-1*b+"px";a.doc.css(e.trstyle,"translate3d("+a.doc.translate.tx+","+a.doc.translate.ty+",0px)");g||a.notifyScrollEvent(a.win[0])},this.setScrollLeft=function(b,g){a.doc.translate.x=b;a.doc.translate.tx=b*y+"px";a.doc.css(e.trstyle,\r\n"translate3d("+a.doc.translate.tx+","+a.doc.translate.ty+",0px)");g||a.notifyScrollEvent(a.win[0])}):(this.setScrollTop=function(b,g){a.doc.translate.y=b;a.doc.translate.ty=-1*b+"px";a.doc.css(e.trstyle,"translate("+a.doc.translate.tx+","+a.doc.translate.ty+")");g||a.notifyScrollEvent(a.win[0])},this.setScrollLeft=function(b,g){a.doc.translate.x=b;a.doc.translate.tx=b*y+"px";a.doc.css(e.trstyle,"translate("+a.doc.translate.tx+","+a.doc.translate.ty+")");g||a.notifyScrollEvent(a.win[0])})}else this.getScrollTop=\r\nfunction(){return a.docscroll.scrollTop()},this.setScrollTop=function(b){return setTimeout(function(){a&&a.docscroll.scrollTop(b)},1)},this.getScrollLeft=function(){return a.hasreversehr?a.detected.ismozilla?a.page.maxw-Math.abs(a.docscroll.scrollLeft()):a.page.maxw-a.docscroll.scrollLeft():a.docscroll.scrollLeft()},this.setScrollLeft=function(b){return setTimeout(function(){if(a)return a.hasreversehr&&(b=a.detected.ismozilla?-(a.page.maxw-b):a.page.maxw-b),a.docscroll.scrollLeft(b)},1)};this.getTarget=\r\nfunction(a){return a?a.target?a.target:a.srcElement?a.srcElement:!1:!1};this.hasParent=function(a,g){if(!a)return!1;for(var c=a.target||a.srcElement||a||!1;c&&c.id!=g;)c=c.parentNode||!1;return!1!==c};var z={thin:1,medium:3,thick:5};this.getDocumentScrollOffset=function(){return{top:window.pageYOffset||document.documentElement.scrollTop,left:window.pageXOffset||document.documentElement.scrollLeft}};this.getOffset=function(){if(a.isfixed){var b=a.win.offset(),g=a.getDocumentScrollOffset();b.top-=g.top;\r\nb.left-=g.left;return b}b=a.win.offset();if(!a.viewport)return b;g=a.viewport.offset();return{top:b.top-g.top,left:b.left-g.left}};this.updateScrollBar=function(b){var g,c,e;if(a.ishwscroll)a.rail.css({height:a.win.innerHeight()-(a.opt.railpadding.top+a.opt.railpadding.bottom)}),a.railh&&a.railh.css({width:a.win.innerWidth()-(a.opt.railpadding.left+a.opt.railpadding.right)});else{var f=a.getOffset();g=f.top;c=f.left-(a.opt.railpadding.left+a.opt.railpadding.right);g+=d(a.win,"border-top-width",!0);\r\nc+=a.rail.align?a.win.outerWidth()-d(a.win,"border-right-width")-a.rail.width:d(a.win,"border-left-width");if(e=a.opt.railoffset)e.top&&(g+=e.top),e.left&&(c+=e.left);a.railslocked||a.rail.css({top:g,left:c,height:(b?b.h:a.win.innerHeight())-(a.opt.railpadding.top+a.opt.railpadding.bottom)});a.zoom&&a.zoom.css({top:g+1,left:1==a.rail.align?c-20:c+a.rail.width+4});if(a.railh&&!a.railslocked){g=f.top;c=f.left;if(e=a.opt.railhoffset)e.top&&(g+=e.top),e.left&&(c+=e.left);b=a.railh.align?g+d(a.win,"border-top-width",\r\n!0)+a.win.innerHeight()-a.railh.height:g+d(a.win,"border-top-width",!0);c+=d(a.win,"border-left-width");a.railh.css({top:b-(a.opt.railpadding.top+a.opt.railpadding.bottom),left:c,width:a.railh.width})}}};this.doRailClick=function(b,g,c){var d;a.railslocked||(a.cancelEvent(b),g?(g=c?a.doScrollLeft:a.doScrollTop,d=c?(b.pageX-a.railh.offset().left-a.cursorwidth/2)*a.scrollratio.x:(b.pageY-a.rail.offset().top-a.cursorheight/2)*a.scrollratio.y,g(d)):(g=c?a.doScrollLeftBy:a.doScrollBy,d=c?a.scroll.x:a.scroll.y,\r\nb=c?b.pageX-a.railh.offset().left:b.pageY-a.rail.offset().top,c=c?a.view.w:a.view.h,g(d>=b?c:-c)))};a.hasanimationframe=v;a.hascancelanimationframe=w;a.hasanimationframe?a.hascancelanimationframe||(w=function(){a.cancelAnimationFrame=!0}):(v=function(a){return setTimeout(a,15-Math.floor(+new Date/1E3)%16)},w=clearTimeout);this.init=function(){a.saved.css=[];if(e.isie7mobile||e.isoperamini)return!0;e.hasmstouch&&a.css(a.ispage?f("html"):a.win,{_touchaction:"none"});var b=e.ismodernie||e.isie10?{"-ms-overflow-style":"none"}:\r\n{"overflow-y":"hidden"};a.zindex="auto";a.zindex=a.ispage||"auto"!=a.opt.zindex?a.opt.zindex:l()||"auto";!a.ispage&&"auto"!=a.zindex&&a.zindex>A&&(A=a.zindex);a.isie&&0==a.zindex&&"auto"==a.opt.zindex&&(a.zindex="auto");if(!a.ispage||!e.cantouch&&!e.isieold&&!e.isie9mobile){var c=a.docscroll;a.ispage&&(c=a.haswrapper?a.win:a.doc);e.isie9mobile||a.css(c,b);a.ispage&&e.isie7&&("BODY"==a.doc[0].nodeName?a.css(f("html"),{"overflow-y":"hidden"}):"HTML"==a.doc[0].nodeName&&a.css(f("body"),b));!e.isios||\r\na.ispage||a.haswrapper||a.css(f("body"),{"-webkit-overflow-scrolling":"touch"});var d=f(document.createElement("div"));d.css({position:"relative",top:0,"float":"right",width:a.opt.cursorwidth,height:0,"background-color":a.opt.cursorcolor,border:a.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":a.opt.cursorborderradius,"-moz-border-radius":a.opt.cursorborderradius,"border-radius":a.opt.cursorborderradius});d.hborder=parseFloat(d.outerHeight()-d.innerHeight());d.addClass("nicescroll-cursors");\r\na.cursor=d;var m=f(document.createElement("div"));m.attr("id",a.id);m.addClass("nicescroll-rails nicescroll-rails-vr");var k,h,p=["left","right","top","bottom"],L;for(L in p)h=p[L],(k=a.opt.railpadding[h])?m.css("padding-"+h,k+"px"):a.opt.railpadding[h]=0;m.append(d);m.width=Math.max(parseFloat(a.opt.cursorwidth),d.outerWidth());m.css({width:m.width+"px",zIndex:a.zindex,background:a.opt.background,cursor:"default"});m.visibility=!0;m.scrollable=!0;m.align="left"==a.opt.railalign?0:1;a.rail=m;d=a.rail.drag=\r\n!1;!a.opt.boxzoom||a.ispage||e.isieold||(d=document.createElement("div"),a.bind(d,"click",a.doZoom),a.bind(d,"mouseenter",function(){a.zoom.css("opacity",a.opt.cursoropacitymax)}),a.bind(d,"mouseleave",function(){a.zoom.css("opacity",a.opt.cursoropacitymin)}),a.zoom=f(d),a.zoom.css({cursor:"pointer",zIndex:a.zindex,backgroundImage:"url("+a.opt.scriptpath+"zoomico.png)",height:18,width:18,backgroundPosition:"0px 0px"}),a.opt.dblclickzoom&&a.bind(a.win,"dblclick",a.doZoom),e.cantouch&&a.opt.gesturezoom&&\r\n(a.ongesturezoom=function(b){1.5<b.scale&&a.doZoomIn(b);.8>b.scale&&a.doZoomOut(b);return a.cancelEvent(b)},a.bind(a.win,"gestureend",a.ongesturezoom)));a.railh=!1;var n;a.opt.horizrailenabled&&(a.css(c,{overflowX:"hidden"}),d=f(document.createElement("div")),d.css({position:"absolute",top:0,height:a.opt.cursorwidth,width:0,backgroundColor:a.opt.cursorcolor,border:a.opt.cursorborder,backgroundClip:"padding-box","-webkit-border-radius":a.opt.cursorborderradius,"-moz-border-radius":a.opt.cursorborderradius,\r\n"border-radius":a.opt.cursorborderradius}),e.isieold&&d.css("overflow","hidden"),d.wborder=parseFloat(d.outerWidth()-d.innerWidth()),d.addClass("nicescroll-cursors"),a.cursorh=d,n=f(document.createElement("div")),n.attr("id",a.id+"-hr"),n.addClass("nicescroll-rails nicescroll-rails-hr"),n.height=Math.max(parseFloat(a.opt.cursorwidth),d.outerHeight()),n.css({height:n.height+"px",zIndex:a.zindex,background:a.opt.background}),n.append(d),n.visibility=!0,n.scrollable=!0,n.align="top"==a.opt.railvalign?\r\n0:1,a.railh=n,a.railh.drag=!1);a.ispage?(m.css({position:"fixed",top:0,height:"100%"}),m.align?m.css({right:0}):m.css({left:0}),a.body.append(m),a.railh&&(n.css({position:"fixed",left:0,width:"100%"}),n.align?n.css({bottom:0}):n.css({top:0}),a.body.append(n))):(a.ishwscroll?("static"==a.win.css("position")&&a.css(a.win,{position:"relative"}),c="HTML"==a.win[0].nodeName?a.body:a.win,f(c).scrollTop(0).scrollLeft(0),a.zoom&&(a.zoom.css({position:"absolute",top:1,right:0,"margin-right":m.width+4}),c.append(a.zoom)),\r\nm.css({position:"absolute",top:0}),m.align?m.css({right:0}):m.css({left:0}),c.append(m),n&&(n.css({position:"absolute",left:0,bottom:0}),n.align?n.css({bottom:0}):n.css({top:0}),c.append(n))):(a.isfixed="fixed"==a.win.css("position"),c=a.isfixed?"fixed":"absolute",a.isfixed||(a.viewport=a.getViewport(a.win[0])),a.viewport&&(a.body=a.viewport,0==/fixed|absolute/.test(a.viewport.css("position"))&&a.css(a.viewport,{position:"relative"})),m.css({position:c}),a.zoom&&a.zoom.css({position:c}),a.updateScrollBar(),\r\na.body.append(m),a.zoom&&a.body.append(a.zoom),a.railh&&(n.css({position:c}),a.body.append(n))),e.isios&&a.css(a.win,{"-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"}),e.isie&&a.opt.disableoutline&&a.win.attr("hideFocus","true"),e.iswebkit&&a.opt.disableoutline&&a.win.css("outline","none"));!1===a.opt.autohidemode?(a.autohidedom=!1,a.rail.css({opacity:a.opt.cursoropacitymax}),a.railh&&a.railh.css({opacity:a.opt.cursoropacitymax})):!0===a.opt.autohidemode||"leave"===a.opt.autohidemode?\r\n(a.autohidedom=f().add(a.rail),e.isie8&&(a.autohidedom=a.autohidedom.add(a.cursor)),a.railh&&(a.autohidedom=a.autohidedom.add(a.railh)),a.railh&&e.isie8&&(a.autohidedom=a.autohidedom.add(a.cursorh))):"scroll"==a.opt.autohidemode?(a.autohidedom=f().add(a.rail),a.railh&&(a.autohidedom=a.autohidedom.add(a.railh))):"cursor"==a.opt.autohidemode?(a.autohidedom=f().add(a.cursor),a.railh&&(a.autohidedom=a.autohidedom.add(a.cursorh))):"hidden"==a.opt.autohidemode&&(a.autohidedom=!1,a.hide(),a.railslocked=\r\n!1);if(e.isie9mobile)a.scrollmom=new M(a),a.onmangotouch=function(){var b=a.getScrollTop(),c=a.getScrollLeft();if(b==a.scrollmom.lastscrolly&&c==a.scrollmom.lastscrollx)return!0;var g=b-a.mangotouch.sy,d=c-a.mangotouch.sx;if(0!=Math.round(Math.sqrt(Math.pow(d,2)+Math.pow(g,2)))){var e=0>g?-1:1,f=0>d?-1:1,u=+new Date;a.mangotouch.lazy&&clearTimeout(a.mangotouch.lazy);80<u-a.mangotouch.tm||a.mangotouch.dry!=e||a.mangotouch.drx!=f?(a.scrollmom.stop(),a.scrollmom.reset(c,b),a.mangotouch.sy=b,a.mangotouch.ly=\r\nb,a.mangotouch.sx=c,a.mangotouch.lx=c,a.mangotouch.dry=e,a.mangotouch.drx=f,a.mangotouch.tm=u):(a.scrollmom.stop(),a.scrollmom.update(a.mangotouch.sx-d,a.mangotouch.sy-g),a.mangotouch.tm=u,g=Math.max(Math.abs(a.mangotouch.ly-b),Math.abs(a.mangotouch.lx-c)),a.mangotouch.ly=b,a.mangotouch.lx=c,2<g&&(a.mangotouch.lazy=setTimeout(function(){a.mangotouch.lazy=!1;a.mangotouch.dry=0;a.mangotouch.drx=0;a.mangotouch.tm=0;a.scrollmom.doMomentum(30)},100)))}},m=a.getScrollTop(),n=a.getScrollLeft(),a.mangotouch=\r\n{sy:m,ly:m,dry:0,sx:n,lx:n,drx:0,lazy:!1,tm:0},a.bind(a.docscroll,"scroll",a.onmangotouch);else{if(e.cantouch||a.istouchcapable||a.opt.touchbehavior||e.hasmstouch){a.scrollmom=new M(a);a.ontouchstart=function(b){if(b.pointerType&&2!=b.pointerType&&"touch"!=b.pointerType)return!1;a.hasmoving=!1;if(!a.railslocked){var c;if(e.hasmstouch)for(c=b.target?b.target:!1;c;){var g=f(c).getNiceScroll();if(0<g.length&&g[0].me==a.me)break;if(0<g.length)return!1;if("DIV"==c.nodeName&&c.id==a.id)break;c=c.parentNode?\r\nc.parentNode:!1}a.cancelScroll();if((c=a.getTarget(b))&&/INPUT/i.test(c.nodeName)&&/range/i.test(c.type))return a.stopPropagation(b);!("clientX"in b)&&"changedTouches"in b&&(b.clientX=b.changedTouches[0].clientX,b.clientY=b.changedTouches[0].clientY);a.forcescreen&&(g=b,b={original:b.original?b.original:b},b.clientX=g.screenX,b.clientY=g.screenY);a.rail.drag={x:b.clientX,y:b.clientY,sx:a.scroll.x,sy:a.scroll.y,st:a.getScrollTop(),sl:a.getScrollLeft(),pt:2,dl:!1};if(a.ispage||!a.opt.directionlockdeadzone)a.rail.drag.dl=\r\n"f";else{var g=f(window).width(),d=f(window).height(),d=Math.max(0,Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)-d),g=Math.max(0,Math.max(document.body.scrollWidth,document.documentElement.scrollWidth)-g);a.rail.drag.ck=!a.rail.scrollable&&a.railh.scrollable?0<d?"v":!1:a.rail.scrollable&&!a.railh.scrollable?0<g?"h":!1:!1;a.rail.drag.ck||(a.rail.drag.dl="f")}a.opt.touchbehavior&&a.isiframe&&e.isie&&(g=a.win.position(),a.rail.drag.x+=g.left,a.rail.drag.y+=g.top);a.hasmoving=\r\n!1;a.lastmouseup=!1;a.scrollmom.reset(b.clientX,b.clientY);if(!e.cantouch&&!this.istouchcapable&&!b.pointerType){if(!c||!/INPUT|SELECT|TEXTAREA/i.test(c.nodeName))return!a.ispage&&e.hasmousecapture&&c.setCapture(),a.opt.touchbehavior?(c.onclick&&!c._onclick&&(c._onclick=c.onclick,c.onclick=function(b){if(a.hasmoving)return!1;c._onclick.call(this,b)}),a.cancelEvent(b)):a.stopPropagation(b);/SUBMIT|CANCEL|BUTTON/i.test(f(c).attr("type"))&&(pc={tg:c,click:!1},a.preventclick=pc)}}};a.ontouchend=function(b){if(!a.rail.drag)return!0;\r\nif(2==a.rail.drag.pt){if(b.pointerType&&2!=b.pointerType&&"touch"!=b.pointerType)return!1;a.scrollmom.doMomentum();a.rail.drag=!1;if(a.hasmoving&&(a.lastmouseup=!0,a.hideCursor(),e.hasmousecapture&&document.releaseCapture(),!e.cantouch))return a.cancelEvent(b)}else if(1==a.rail.drag.pt)return a.onmouseup(b)};var q=a.opt.touchbehavior&&a.isiframe&&!e.hasmousecapture;a.ontouchmove=function(b,c){if(!a.rail.drag||b.targetTouches&&a.opt.preventmultitouchscrolling&&1<b.targetTouches.length||b.pointerType&&\r\n2!=b.pointerType&&"touch"!=b.pointerType)return!1;if(2==a.rail.drag.pt){if(e.cantouch&&e.isios&&void 0===b.original)return!0;a.hasmoving=!0;a.preventclick&&!a.preventclick.click&&(a.preventclick.click=a.preventclick.tg.onclick||!1,a.preventclick.tg.onclick=a.onpreventclick);b=f.extend({original:b},b);"changedTouches"in b&&(b.clientX=b.changedTouches[0].clientX,b.clientY=b.changedTouches[0].clientY);if(a.forcescreen){var g=b;b={original:b.original?b.original:b};b.clientX=g.screenX;b.clientY=g.screenY}var d,\r\ng=d=0;q&&!c&&(d=a.win.position(),g=-d.left,d=-d.top);var u=b.clientY+d;d=u-a.rail.drag.y;var m=b.clientX+g,k=m-a.rail.drag.x,h=a.rail.drag.st-d;a.ishwscroll&&a.opt.bouncescroll?0>h?h=Math.round(h/2):h>a.page.maxh&&(h=a.page.maxh+Math.round((h-a.page.maxh)/2)):(0>h&&(u=h=0),h>a.page.maxh&&(h=a.page.maxh,u=0));var l;a.railh&&a.railh.scrollable&&(l=a.isrtlmode?k-a.rail.drag.sl:a.rail.drag.sl-k,a.ishwscroll&&a.opt.bouncescroll?0>l?l=Math.round(l/2):l>a.page.maxw&&(l=a.page.maxw+Math.round((l-a.page.maxw)/\r\n2)):(0>l&&(m=l=0),l>a.page.maxw&&(l=a.page.maxw,m=0)));g=!1;if(a.rail.drag.dl)g=!0,"v"==a.rail.drag.dl?l=a.rail.drag.sl:"h"==a.rail.drag.dl&&(h=a.rail.drag.st);else{d=Math.abs(d);var k=Math.abs(k),C=a.opt.directionlockdeadzone;if("v"==a.rail.drag.ck){if(d>C&&k<=.3*d)return a.rail.drag=!1,!0;k>C&&(a.rail.drag.dl="f",f("body").scrollTop(f("body").scrollTop()))}else if("h"==a.rail.drag.ck){if(k>C&&d<=.3*k)return a.rail.drag=!1,!0;d>C&&(a.rail.drag.dl="f",f("body").scrollLeft(f("body").scrollLeft()))}}a.synched("touchmove",\r\nfunction(){a.rail.drag&&2==a.rail.drag.pt&&(a.prepareTransition&&a.prepareTransition(0),a.rail.scrollable&&a.setScrollTop(h),a.scrollmom.update(m,u),a.railh&&a.railh.scrollable?(a.setScrollLeft(l),a.showCursor(h,l)):a.showCursor(h),e.isie10&&document.selection.clear())});e.ischrome&&a.istouchcapable&&(g=!1);if(g)return a.cancelEvent(b)}else if(1==a.rail.drag.pt)return a.onmousemove(b)}}a.onmousedown=function(b,c){if(!a.rail.drag||1==a.rail.drag.pt){if(a.railslocked)return a.cancelEvent(b);a.cancelScroll();\r\na.rail.drag={x:b.clientX,y:b.clientY,sx:a.scroll.x,sy:a.scroll.y,pt:1,hr:!!c};var g=a.getTarget(b);!a.ispage&&e.hasmousecapture&&g.setCapture();a.isiframe&&!e.hasmousecapture&&(a.saved.csspointerevents=a.doc.css("pointer-events"),a.css(a.doc,{"pointer-events":"none"}));a.hasmoving=!1;return a.cancelEvent(b)}};a.onmouseup=function(b){if(a.rail.drag){if(1!=a.rail.drag.pt)return!0;e.hasmousecapture&&document.releaseCapture();a.isiframe&&!e.hasmousecapture&&a.doc.css("pointer-events",a.saved.csspointerevents);\r\na.rail.drag=!1;a.hasmoving&&a.triggerScrollEnd();return a.cancelEvent(b)}};a.onmousemove=function(b){if(a.rail.drag){if(1==a.rail.drag.pt){if(e.ischrome&&0==b.which)return a.onmouseup(b);a.cursorfreezed=!0;a.hasmoving=!0;if(a.rail.drag.hr){a.scroll.x=a.rail.drag.sx+(b.clientX-a.rail.drag.x);0>a.scroll.x&&(a.scroll.x=0);var c=a.scrollvaluemaxw;a.scroll.x>c&&(a.scroll.x=c)}else a.scroll.y=a.rail.drag.sy+(b.clientY-a.rail.drag.y),0>a.scroll.y&&(a.scroll.y=0),c=a.scrollvaluemax,a.scroll.y>c&&(a.scroll.y=\r\nc);a.synched("mousemove",function(){a.rail.drag&&1==a.rail.drag.pt&&(a.showCursor(),a.rail.drag.hr?a.hasreversehr?a.doScrollLeft(a.scrollvaluemaxw-Math.round(a.scroll.x*a.scrollratio.x),a.opt.cursordragspeed):a.doScrollLeft(Math.round(a.scroll.x*a.scrollratio.x),a.opt.cursordragspeed):a.doScrollTop(Math.round(a.scroll.y*a.scrollratio.y),a.opt.cursordragspeed))});return a.cancelEvent(b)}}else a.checkarea=0};if(e.cantouch||a.opt.touchbehavior)a.onpreventclick=function(b){if(a.preventclick)return a.preventclick.tg.onclick=\r\na.preventclick.click,a.preventclick=!1,a.cancelEvent(b)},a.bind(a.win,"mousedown",a.ontouchstart),a.onclick=e.isios?!1:function(b){return a.lastmouseup?(a.lastmouseup=!1,a.cancelEvent(b)):!0},a.opt.grabcursorenabled&&e.cursorgrabvalue&&(a.css(a.ispage?a.doc:a.win,{cursor:e.cursorgrabvalue}),a.css(a.rail,{cursor:e.cursorgrabvalue}));else{var r=function(b){if(a.selectiondrag){if(b){var c=a.win.outerHeight();b=b.pageY-a.selectiondrag.top;0<b&&b<c&&(b=0);b>=c&&(b-=c);a.selectiondrag.df=b}0!=a.selectiondrag.df&&\r\n(a.doScrollBy(2*-Math.floor(a.selectiondrag.df/6)),a.debounced("doselectionscroll",function(){r()},50))}};a.hasTextSelected="getSelection"in document?function(){return 0<document.getSelection().rangeCount}:"selection"in document?function(){return"None"!=document.selection.type}:function(){return!1};a.onselectionstart=function(b){a.ispage||(a.selectiondrag=a.win.offset())};a.onselectionend=function(b){a.selectiondrag=!1};a.onselectiondrag=function(b){a.selectiondrag&&a.hasTextSelected()&&a.debounced("selectionscroll",\r\nfunction(){r(b)},250)}}e.hasw3ctouch?(a.css(a.rail,{"touch-action":"none"}),a.css(a.cursor,{"touch-action":"none"}),a.bind(a.win,"pointerdown",a.ontouchstart),a.bind(document,"pointerup",a.ontouchend),a.bind(document,"pointermove",a.ontouchmove)):e.hasmstouch?(a.css(a.rail,{"-ms-touch-action":"none"}),a.css(a.cursor,{"-ms-touch-action":"none"}),a.bind(a.win,"MSPointerDown",a.ontouchstart),a.bind(document,"MSPointerUp",a.ontouchend),a.bind(document,"MSPointerMove",a.ontouchmove),a.bind(a.cursor,"MSGestureHold",\r\nfunction(a){a.preventDefault()}),a.bind(a.cursor,"contextmenu",function(a){a.preventDefault()})):this.istouchcapable&&(a.bind(a.win,"touchstart",a.ontouchstart),a.bind(document,"touchend",a.ontouchend),a.bind(document,"touchcancel",a.ontouchend),a.bind(document,"touchmove",a.ontouchmove));if(a.opt.cursordragontouch||!e.cantouch&&!a.opt.touchbehavior)a.rail.css({cursor:"default"}),a.railh&&a.railh.css({cursor:"default"}),a.jqbind(a.rail,"mouseenter",function(){if(!a.ispage&&!a.win.is(":visible"))return!1;\r\na.canshowonmouseevent&&a.showCursor();a.rail.active=!0}),a.jqbind(a.rail,"mouseleave",function(){a.rail.active=!1;a.rail.drag||a.hideCursor()}),a.opt.sensitiverail&&(a.bind(a.rail,"click",function(b){a.doRailClick(b,!1,!1)}),a.bind(a.rail,"dblclick",function(b){a.doRailClick(b,!0,!1)}),a.bind(a.cursor,"click",function(b){a.cancelEvent(b)}),a.bind(a.cursor,"dblclick",function(b){a.cancelEvent(b)})),a.railh&&(a.jqbind(a.railh,"mouseenter",function(){if(!a.ispage&&!a.win.is(":visible"))return!1;a.canshowonmouseevent&&\r\na.showCursor();a.rail.active=!0}),a.jqbind(a.railh,"mouseleave",function(){a.rail.active=!1;a.rail.drag||a.hideCursor()}),a.opt.sensitiverail&&(a.bind(a.railh,"click",function(b){a.doRailClick(b,!1,!0)}),a.bind(a.railh,"dblclick",function(b){a.doRailClick(b,!0,!0)}),a.bind(a.cursorh,"click",function(b){a.cancelEvent(b)}),a.bind(a.cursorh,"dblclick",function(b){a.cancelEvent(b)})));e.cantouch||a.opt.touchbehavior?(a.bind(e.hasmousecapture?a.win:document,"mouseup",a.ontouchend),a.bind(document,"mousemove",\r\na.ontouchmove),a.onclick&&a.bind(document,"click",a.onclick),a.opt.cursordragontouch?(a.bind(a.cursor,"mousedown",a.onmousedown),a.bind(a.cursor,"mouseup",a.onmouseup),a.cursorh&&a.bind(a.cursorh,"mousedown",function(b){a.onmousedown(b,!0)}),a.cursorh&&a.bind(a.cursorh,"mouseup",a.onmouseup)):(a.bind(a.rail,"mousedown",function(a){a.preventDefault()}),a.railh&&a.bind(a.railh,"mousedown",function(a){a.preventDefault()}))):(a.bind(e.hasmousecapture?a.win:document,"mouseup",a.onmouseup),a.bind(document,\r\n"mousemove",a.onmousemove),a.onclick&&a.bind(document,"click",a.onclick),a.bind(a.cursor,"mousedown",a.onmousedown),a.bind(a.cursor,"mouseup",a.onmouseup),a.railh&&(a.bind(a.cursorh,"mousedown",function(b){a.onmousedown(b,!0)}),a.bind(a.cursorh,"mouseup",a.onmouseup)),!a.ispage&&a.opt.enablescrollonselection&&(a.bind(a.win[0],"mousedown",a.onselectionstart),a.bind(document,"mouseup",a.onselectionend),a.bind(a.cursor,"mouseup",a.onselectionend),a.cursorh&&a.bind(a.cursorh,"mouseup",a.onselectionend),\r\na.bind(document,"mousemove",a.onselectiondrag)),a.zoom&&(a.jqbind(a.zoom,"mouseenter",function(){a.canshowonmouseevent&&a.showCursor();a.rail.active=!0}),a.jqbind(a.zoom,"mouseleave",function(){a.rail.active=!1;a.rail.drag||a.hideCursor()})));a.opt.enablemousewheel&&(a.isiframe||a.mousewheel(e.isie&&a.ispage?document:a.win,a.onmousewheel),a.mousewheel(a.rail,a.onmousewheel),a.railh&&a.mousewheel(a.railh,a.onmousewheelhr));a.ispage||e.cantouch||/HTML|^BODY/.test(a.win[0].nodeName)||(a.win.attr("tabindex")||\r\na.win.attr({tabindex:O++}),a.jqbind(a.win,"focus",function(b){B=a.getTarget(b).id||!0;a.hasfocus=!0;a.canshowonmouseevent&&a.noticeCursor()}),a.jqbind(a.win,"blur",function(b){B=!1;a.hasfocus=!1}),a.jqbind(a.win,"mouseenter",function(b){F=a.getTarget(b).id||!0;a.hasmousefocus=!0;a.canshowonmouseevent&&a.noticeCursor()}),a.jqbind(a.win,"mouseleave",function(){F=!1;a.hasmousefocus=!1;a.rail.drag||a.hideCursor()}))}a.onkeypress=function(b){if(a.railslocked&&0==a.page.maxh)return!0;b=b?b:window.e;var c=\r\na.getTarget(b);if(c&&/INPUT|TEXTAREA|SELECT|OPTION/.test(c.nodeName)&&(!c.getAttribute("type")&&!c.type||!/submit|button|cancel/i.tp)||f(c).attr("contenteditable"))return!0;if(a.hasfocus||a.hasmousefocus&&!B||a.ispage&&!B&&!F){c=b.keyCode;if(a.railslocked&&27!=c)return a.cancelEvent(b);var g=b.ctrlKey||!1,d=b.shiftKey||!1,e=!1;switch(c){case 38:case 63233:a.doScrollBy(72);e=!0;break;case 40:case 63235:a.doScrollBy(-72);e=!0;break;case 37:case 63232:a.railh&&(g?a.doScrollLeft(0):a.doScrollLeftBy(72),\r\ne=!0);break;case 39:case 63234:a.railh&&(g?a.doScrollLeft(a.page.maxw):a.doScrollLeftBy(-72),e=!0);break;case 33:case 63276:a.doScrollBy(a.view.h);e=!0;break;case 34:case 63277:a.doScrollBy(-a.view.h);e=!0;break;case 36:case 63273:a.railh&&g?a.doScrollPos(0,0):a.doScrollTo(0);e=!0;break;case 35:case 63275:a.railh&&g?a.doScrollPos(a.page.maxw,a.page.maxh):a.doScrollTo(a.page.maxh);e=!0;break;case 32:a.opt.spacebarenabled&&(d?a.doScrollBy(a.view.h):a.doScrollBy(-a.view.h),e=!0);break;case 27:a.zoomactive&&\r\n(a.doZoom(),e=!0)}if(e)return a.cancelEvent(b)}};a.opt.enablekeyboard&&a.bind(document,e.isopera&&!e.isopera12?"keypress":"keydown",a.onkeypress);a.bind(document,"keydown",function(b){b.ctrlKey&&(a.wheelprevented=!0)});a.bind(document,"keyup",function(b){b.ctrlKey||(a.wheelprevented=!1)});a.bind(window,"blur",function(b){a.wheelprevented=!1});a.bind(window,"resize",a.lazyResize);a.bind(window,"orientationchange",a.lazyResize);a.bind(window,"load",a.lazyResize);if(e.ischrome&&!a.ispage&&!a.haswrapper){var t=\r\na.win.attr("style"),m=parseFloat(a.win.css("width"))+1;a.win.css("width",m);a.synched("chromefix",function(){a.win.attr("style",t)})}a.onAttributeChange=function(b){a.lazyResize(a.isieold?250:30)};a.isie11||!1===x||(a.observerbody=new x(function(b){b.forEach(function(b){if("attributes"==b.type)return f("body").hasClass("modal-open")&&f("body").hasClass("modal-dialog")&&!f.contains(f(".modal-dialog")[0],a.doc[0])?a.hide():a.show()});if(document.body.scrollHeight!=a.page.maxh)return a.lazyResize(30)}),\r\na.observerbody.observe(document.body,{childList:!0,subtree:!0,characterData:!1,attributes:!0,attributeFilter:["class"]}));a.ispage||a.haswrapper||(!1!==x?(a.observer=new x(function(b){b.forEach(a.onAttributeChange)}),a.observer.observe(a.win[0],{childList:!0,characterData:!1,attributes:!0,subtree:!1}),a.observerremover=new x(function(b){b.forEach(function(b){if(0<b.removedNodes.length)for(var c in b.removedNodes)if(a&&b.removedNodes[c]==a.win[0])return a.remove()})}),a.observerremover.observe(a.win[0].parentNode,\r\n{childList:!0,characterData:!1,attributes:!1,subtree:!1})):(a.bind(a.win,e.isie&&!e.isie9?"propertychange":"DOMAttrModified",a.onAttributeChange),e.isie9&&a.win[0].attachEvent("onpropertychange",a.onAttributeChange),a.bind(a.win,"DOMNodeRemoved",function(b){b.target==a.win[0]&&a.remove()})));!a.ispage&&a.opt.boxzoom&&a.bind(window,"resize",a.resizeZoom);a.istextarea&&(a.bind(a.win,"keydown",a.lazyResize),a.bind(a.win,"mouseup",a.lazyResize));a.lazyResize(30)}if("IFRAME"==this.doc[0].nodeName){var N=\r\nfunction(){a.iframexd=!1;var c;try{c="contentDocument"in this?this.contentDocument:this.contentWindow.document}catch(g){a.iframexd=!0,c=!1}if(a.iframexd)return"console"in window&&console.log("NiceScroll error: policy restriced iframe"),!0;a.forcescreen=!0;a.isiframe&&(a.iframe={doc:f(c),html:a.doc.contents().find("html")[0],body:a.doc.contents().find("body")[0]},a.getContentSize=function(){return{w:Math.max(a.iframe.html.scrollWidth,a.iframe.body.scrollWidth),h:Math.max(a.iframe.html.scrollHeight,\r\na.iframe.body.scrollHeight)}},a.docscroll=f(a.iframe.body));if(!e.isios&&a.opt.iframeautoresize&&!a.isiframe){a.win.scrollTop(0);a.doc.height("");var d=Math.max(c.getElementsByTagName("html")[0].scrollHeight,c.body.scrollHeight);a.doc.height(d)}a.lazyResize(30);e.isie7&&a.css(f(a.iframe.html),b);a.css(f(a.iframe.body),b);e.isios&&a.haswrapper&&a.css(f(c.body),{"-webkit-transform":"translate3d(0,0,0)"});"contentWindow"in this?a.bind(this.contentWindow,"scroll",a.onscroll):a.bind(c,"scroll",a.onscroll);\r\na.opt.enablemousewheel&&a.mousewheel(c,a.onmousewheel);a.opt.enablekeyboard&&a.bind(c,e.isopera?"keypress":"keydown",a.onkeypress);if(e.cantouch||a.opt.touchbehavior)a.bind(c,"mousedown",a.ontouchstart),a.bind(c,"mousemove",function(b){return a.ontouchmove(b,!0)}),a.opt.grabcursorenabled&&e.cursorgrabvalue&&a.css(f(c.body),{cursor:e.cursorgrabvalue});a.bind(c,"mouseup",a.ontouchend);a.zoom&&(a.opt.dblclickzoom&&a.bind(c,"dblclick",a.doZoom),a.ongesturezoom&&a.bind(c,"gestureend",a.ongesturezoom))};\r\nthis.doc[0].readyState&&"complete"==this.doc[0].readyState&&setTimeout(function(){N.call(a.doc[0],!1)},500);a.bind(this.doc,"load",N)}};this.showCursor=function(b,c){a.cursortimeout&&(clearTimeout(a.cursortimeout),a.cursortimeout=0);if(a.rail){a.autohidedom&&(a.autohidedom.stop().css({opacity:a.opt.cursoropacitymax}),a.cursoractive=!0);a.rail.drag&&1==a.rail.drag.pt||(void 0!==b&&!1!==b&&(a.scroll.y=Math.round(1*b/a.scrollratio.y)),void 0!==c&&(a.scroll.x=Math.round(1*c/a.scrollratio.x)));a.cursor.css({height:a.cursorheight,\r\ntop:a.scroll.y});if(a.cursorh){var d=a.hasreversehr?a.scrollvaluemaxw-a.scroll.x:a.scroll.x;!a.rail.align&&a.rail.visibility?a.cursorh.css({width:a.cursorwidth,left:d+a.rail.width}):a.cursorh.css({width:a.cursorwidth,left:d});a.cursoractive=!0}a.zoom&&a.zoom.stop().css({opacity:a.opt.cursoropacitymax})}};this.hideCursor=function(b){a.cursortimeout||!a.rail||!a.autohidedom||a.hasmousefocus&&"leave"==a.opt.autohidemode||(a.cursortimeout=setTimeout(function(){a.rail.active&&a.showonmouseevent||(a.autohidedom.stop().animate({opacity:a.opt.cursoropacitymin}),\r\na.zoom&&a.zoom.stop().animate({opacity:a.opt.cursoropacitymin}),a.cursoractive=!1);a.cursortimeout=0},b||a.opt.hidecursordelay))};this.noticeCursor=function(b,c,d){a.showCursor(c,d);a.rail.active||a.hideCursor(b)};this.getContentSize=a.ispage?function(){return{w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}}:a.haswrapper?function(){return{w:a.doc.outerWidth()+parseInt(a.win.css("paddingLeft"))+\r\nparseInt(a.win.css("paddingRight")),h:a.doc.outerHeight()+parseInt(a.win.css("paddingTop"))+parseInt(a.win.css("paddingBottom"))}}:function(){return{w:a.docscroll[0].scrollWidth,h:a.docscroll[0].scrollHeight}};this.onResize=function(b,c){if(!a||!a.win)return!1;if(!a.haswrapper&&!a.ispage){if("none"==a.win.css("display"))return a.visibility&&a.hideRail().hideRailHr(),!1;a.hidden||a.visibility||a.showRail().showRailHr()}var d=a.page.maxh,e=a.page.maxw,f=a.view.h,k=a.view.w;a.view={w:a.ispage?a.win.width():\r\nparseInt(a.win[0].clientWidth),h:a.ispage?a.win.height():parseInt(a.win[0].clientHeight)};a.page=c?c:a.getContentSize();a.page.maxh=Math.max(0,a.page.h-a.view.h);a.page.maxw=Math.max(0,a.page.w-a.view.w);if(a.page.maxh==d&&a.page.maxw==e&&a.view.w==k&&a.view.h==f){if(a.ispage)return a;d=a.win.offset();if(a.lastposition&&(e=a.lastposition,e.top==d.top&&e.left==d.left))return a;a.lastposition=d}0==a.page.maxh?(a.hideRail(),a.scrollvaluemax=0,a.scroll.y=0,a.scrollratio.y=0,a.cursorheight=0,a.setScrollTop(0),\r\na.rail&&(a.rail.scrollable=!1)):(a.page.maxh-=a.opt.railpadding.top+a.opt.railpadding.bottom,a.rail.scrollable=!0);0==a.page.maxw?(a.hideRailHr(),a.scrollvaluemaxw=0,a.scroll.x=0,a.scrollratio.x=0,a.cursorwidth=0,a.setScrollLeft(0),a.railh&&(a.railh.scrollable=!1)):(a.page.maxw-=a.opt.railpadding.left+a.opt.railpadding.right,a.railh&&(a.railh.scrollable=a.opt.horizrailenabled));a.railslocked=a.locked||0==a.page.maxh&&0==a.page.maxw;if(a.railslocked)return a.ispage||a.updateScrollBar(a.view),!1;a.hidden||\r\na.visibility?!a.railh||a.hidden||a.railh.visibility||a.showRailHr():a.showRail().showRailHr();a.istextarea&&a.win.css("resize")&&"none"!=a.win.css("resize")&&(a.view.h-=20);a.cursorheight=Math.min(a.view.h,Math.round(a.view.h/a.page.h*a.view.h));a.cursorheight=a.opt.cursorfixedheight?a.opt.cursorfixedheight:Math.max(a.opt.cursorminheight,a.cursorheight);a.cursorwidth=Math.min(a.view.w,Math.round(a.view.w/a.page.w*a.view.w));a.cursorwidth=a.opt.cursorfixedheight?a.opt.cursorfixedheight:Math.max(a.opt.cursorminheight,\r\na.cursorwidth);a.scrollvaluemax=a.view.h-a.cursorheight-a.cursor.hborder-(a.opt.railpadding.top+a.opt.railpadding.bottom);a.railh&&(a.railh.width=0<a.page.maxh?a.view.w-a.rail.width:a.view.w,a.scrollvaluemaxw=a.railh.width-a.cursorwidth-a.cursorh.wborder-(a.opt.railpadding.left+a.opt.railpadding.right));a.ispage||a.updateScrollBar(a.view);a.scrollratio={x:a.page.maxw/a.scrollvaluemaxw,y:a.page.maxh/a.scrollvaluemax};a.getScrollTop()>a.page.maxh?a.doScrollTop(a.page.maxh):(a.scroll.y=Math.round(a.getScrollTop()*\r\n(1/a.scrollratio.y)),a.scroll.x=Math.round(a.getScrollLeft()*(1/a.scrollratio.x)),a.cursoractive&&a.noticeCursor());a.scroll.y&&0==a.getScrollTop()&&a.doScrollTo(Math.floor(a.scroll.y*a.scrollratio.y));return a};this.resize=a.onResize;this.hlazyresize=0;this.lazyResize=function(b){a.haswrapper||a.hide();a.hlazyresize&&clearTimeout(a.hlazyresize);a.hlazyresize=setTimeout(function(){a&&a.show().resize()},240);return a};this.jqbind=function(b,c,d){a.events.push({e:b,n:c,f:d,q:!0});f(b).bind(c,d)};this.mousewheel=\r\nfunction(b,c,d){b="jquery"in b?b[0]:b;if("onwheel"in document.createElement("div"))a._bind(b,"wheel",c,d||!1);else{var e=void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";q(b,e,c,d||!1);"DOMMouseScroll"==e&&q(b,"MozMousePixelScroll",c,d||!1)}};e.haseventlistener?(this.bind=function(b,c,d,e){a._bind("jquery"in b?b[0]:b,c,d,e||!1)},this._bind=function(b,c,d,e){a.events.push({e:b,n:c,f:d,b:e,q:!1});b.addEventListener(c,d,e||!1)},this.cancelEvent=function(a){if(!a)return!1;a=a.original?a.original:\r\na;a.cancelable&&a.preventDefault();a.stopPropagation();a.preventManipulation&&a.preventManipulation();return!1},this.stopPropagation=function(a){if(!a)return!1;a=a.original?a.original:a;a.stopPropagation();return!1},this._unbind=function(a,c,d,e){a.removeEventListener(c,d,e)}):(this.bind=function(b,c,d,e){var f="jquery"in b?b[0]:b;a._bind(f,c,function(b){(b=b||window.event||!1)&&b.srcElement&&(b.target=b.srcElement);"pageY"in b||(b.pageX=b.clientX+document.documentElement.scrollLeft,b.pageY=b.clientY+\r\ndocument.documentElement.scrollTop);return!1===d.call(f,b)||!1===e?a.cancelEvent(b):!0})},this._bind=function(b,c,d,e){a.events.push({e:b,n:c,f:d,b:e,q:!1});b.attachEvent?b.attachEvent("on"+c,d):b["on"+c]=d},this.cancelEvent=function(a){a=window.event||!1;if(!a)return!1;a.cancelBubble=!0;a.cancel=!0;return a.returnValue=!1},this.stopPropagation=function(a){a=window.event||!1;if(!a)return!1;a.cancelBubble=!0;return!1},this._unbind=function(a,c,d,e){a.detachEvent?a.detachEvent("on"+c,d):a["on"+c]=!1});\r\nthis.unbindAll=function(){for(var b=0;b<a.events.length;b++){var c=a.events[b];c.q?c.e.unbind(c.n,c.f):a._unbind(c.e,c.n,c.f,c.b)}};this.showRail=function(){0==a.page.maxh||!a.ispage&&"none"==a.win.css("display")||(a.visibility=!0,a.rail.visibility=!0,a.rail.css("display","block"));return a};this.showRailHr=function(){if(!a.railh)return a;0==a.page.maxw||!a.ispage&&"none"==a.win.css("display")||(a.railh.visibility=!0,a.railh.css("display","block"));return a};this.hideRail=function(){a.visibility=\r\n!1;a.rail.visibility=!1;a.rail.css("display","none");return a};this.hideRailHr=function(){if(!a.railh)return a;a.railh.visibility=!1;a.railh.css("display","none");return a};this.show=function(){a.hidden=!1;a.railslocked=!1;return a.showRail().showRailHr()};this.hide=function(){a.hidden=!0;a.railslocked=!0;return a.hideRail().hideRailHr()};this.toggle=function(){return a.hidden?a.show():a.hide()};this.remove=function(){a.stop();a.cursortimeout&&clearTimeout(a.cursortimeout);for(var b in a.delaylist)a.delaylist[b]&&\r\nw(a.delaylist[b].h);a.doZoomOut();a.unbindAll();e.isie9&&a.win[0].detachEvent("onpropertychange",a.onAttributeChange);!1!==a.observer&&a.observer.disconnect();!1!==a.observerremover&&a.observerremover.disconnect();!1!==a.observerbody&&a.observerbody.disconnect();a.events=null;a.cursor&&a.cursor.remove();a.cursorh&&a.cursorh.remove();a.rail&&a.rail.remove();a.railh&&a.railh.remove();a.zoom&&a.zoom.remove();for(b=0;b<a.saved.css.length;b++){var c=a.saved.css[b];c[0].css(c[1],void 0===c[2]?"":c[2])}a.saved=\r\n!1;a.me.data("__nicescroll","");var d=f.nicescroll;d.each(function(b){if(this&&this.id===a.id){delete d[b];for(var c=++b;c<d.length;c++,b++)d[b]=d[c];d.length--;d.length&&delete d[d.length]}});for(var k in a)a[k]=null,delete a[k];a=null};this.scrollstart=function(b){this.onscrollstart=b;return a};this.scrollend=function(b){this.onscrollend=b;return a};this.scrollcancel=function(b){this.onscrollcancel=b;return a};this.zoomin=function(b){this.onzoomin=b;return a};this.zoomout=function(b){this.onzoomout=\r\nb;return a};this.isScrollable=function(a){a=a.target?a.target:a;if("OPTION"==a.nodeName)return!0;for(;a&&1==a.nodeType&&!/^BODY|HTML/.test(a.nodeName);){var c=f(a),c=c.css("overflowY")||c.css("overflowX")||c.css("overflow")||"";if(/scroll|auto/.test(c))return a.clientHeight!=a.scrollHeight;a=a.parentNode?a.parentNode:!1}return!1};this.getViewport=function(a){for(a=a&&a.parentNode?a.parentNode:!1;a&&1==a.nodeType&&!/^BODY|HTML/.test(a.nodeName);){var c=f(a);if(/fixed|absolute/.test(c.css("position")))return c;\r\nvar d=c.css("overflowY")||c.css("overflowX")||c.css("overflow")||"";if(/scroll|auto/.test(d)&&a.clientHeight!=a.scrollHeight||0<c.getNiceScroll().length)return c;a=a.parentNode?a.parentNode:!1}return!1};this.triggerScrollEnd=function(){if(a.onscrollend){var b=a.getScrollLeft(),c=a.getScrollTop();a.onscrollend.call(a,{type:"scrollend",current:{x:b,y:c},end:{x:b,y:c}})}};this.onmousewheel=function(b){if(!a.wheelprevented){if(a.railslocked)return a.debounced("checkunlock",a.resize,250),!0;if(a.rail.drag)return a.cancelEvent(b);\r\n"auto"==a.opt.oneaxismousemode&&0!=b.deltaX&&(a.opt.oneaxismousemode=!1);if(a.opt.oneaxismousemode&&0==b.deltaX&&!a.rail.scrollable)return a.railh&&a.railh.scrollable?a.onmousewheelhr(b):!0;var c=+new Date,d=!1;a.opt.preservenativescrolling&&a.checkarea+600<c&&(a.nativescrollingarea=a.isScrollable(b),d=!0);a.checkarea=c;if(a.nativescrollingarea)return!0;if(b=t(b,!1,d))a.checkarea=0;return b}};this.onmousewheelhr=function(b){if(!a.wheelprevented){if(a.railslocked||!a.railh.scrollable)return!0;if(a.rail.drag)return a.cancelEvent(b);\r\nvar c=+new Date,d=!1;a.opt.preservenativescrolling&&a.checkarea+600<c&&(a.nativescrollingarea=a.isScrollable(b),d=!0);a.checkarea=c;return a.nativescrollingarea?!0:a.railslocked?a.cancelEvent(b):t(b,!0,d)}};this.stop=function(){a.cancelScroll();a.scrollmon&&a.scrollmon.stop();a.cursorfreezed=!1;a.scroll.y=Math.round(a.getScrollTop()*(1/a.scrollratio.y));a.noticeCursor();return a};this.getTransitionSpeed=function(b){b=Math.min(Math.round(10*a.opt.scrollspeed),Math.round(b/20*a.opt.scrollspeed));return 20<\r\nb?b:0};a.opt.smoothscroll?a.ishwscroll&&e.hastransition&&a.opt.usetransition&&a.opt.smoothscroll?(this.prepareTransition=function(b,c){var d=c?20<b?b:0:a.getTransitionSpeed(b),f=d?e.prefixstyle+"transform "+d+"ms ease-out":"";a.lasttransitionstyle&&a.lasttransitionstyle==f||(a.lasttransitionstyle=f,a.doc.css(e.transitionstyle,f));return d},this.doScrollLeft=function(b,c){var d=a.scrollrunning?a.newscrolly:a.getScrollTop();a.doScrollPos(b,d,c)},this.doScrollTop=function(b,c){var d=a.scrollrunning?\r\na.newscrollx:a.getScrollLeft();a.doScrollPos(d,b,c)},this.doScrollPos=function(b,c,d){var f=a.getScrollTop(),k=a.getScrollLeft();(0>(a.newscrolly-f)*(c-f)||0>(a.newscrollx-k)*(b-k))&&a.cancelScroll();0==a.opt.bouncescroll&&(0>c?c=0:c>a.page.maxh&&(c=a.page.maxh),0>b?b=0:b>a.page.maxw&&(b=a.page.maxw));if(a.scrollrunning&&b==a.newscrollx&&c==a.newscrolly)return!1;a.newscrolly=c;a.newscrollx=b;a.newscrollspeed=d||!1;if(a.timer)return!1;a.timer=setTimeout(function(){var d=a.getScrollTop(),f=a.getScrollLeft(),\r\nk=Math.round(Math.sqrt(Math.pow(b-f,2)+Math.pow(c-d,2))),k=a.newscrollspeed&&1<a.newscrollspeed?a.newscrollspeed:a.getTransitionSpeed(k);a.newscrollspeed&&1>=a.newscrollspeed&&(k*=a.newscrollspeed);a.prepareTransition(k,!0);a.timerscroll&&a.timerscroll.tm&&clearInterval(a.timerscroll.tm);0<k&&(!a.scrollrunning&&a.onscrollstart&&a.onscrollstart.call(a,{type:"scrollstart",current:{x:f,y:d},request:{x:b,y:c},end:{x:a.newscrollx,y:a.newscrolly},speed:k}),e.transitionend?a.scrollendtrapped||(a.scrollendtrapped=\r\n!0,a.bind(a.doc,e.transitionend,a.onScrollTransitionEnd,!1)):(a.scrollendtrapped&&clearTimeout(a.scrollendtrapped),a.scrollendtrapped=setTimeout(a.onScrollTransitionEnd,k)),a.timerscroll={bz:new D(d,a.newscrolly,k,0,0,.58,1),bh:new D(f,a.newscrollx,k,0,0,.58,1)},a.cursorfreezed||(a.timerscroll.tm=setInterval(function(){a.showCursor(a.getScrollTop(),a.getScrollLeft())},60)));a.synched("doScroll-set",function(){a.timer=0;a.scrollendtrapped&&(a.scrollrunning=!0);a.setScrollTop(a.newscrolly);a.setScrollLeft(a.newscrollx);\r\nif(!a.scrollendtrapped)a.onScrollTransitionEnd()})},50)},this.cancelScroll=function(){if(!a.scrollendtrapped)return!0;var b=a.getScrollTop(),c=a.getScrollLeft();a.scrollrunning=!1;e.transitionend||clearTimeout(e.transitionend);a.scrollendtrapped=!1;a._unbind(a.doc[0],e.transitionend,a.onScrollTransitionEnd);a.prepareTransition(0);a.setScrollTop(b);a.railh&&a.setScrollLeft(c);a.timerscroll&&a.timerscroll.tm&&clearInterval(a.timerscroll.tm);a.timerscroll=!1;a.cursorfreezed=!1;a.showCursor(b,c);return a},\r\nthis.onScrollTransitionEnd=function(){a.scrollendtrapped&&a._unbind(a.doc[0],e.transitionend,a.onScrollTransitionEnd);a.scrollendtrapped=!1;a.prepareTransition(0);a.timerscroll&&a.timerscroll.tm&&clearInterval(a.timerscroll.tm);a.timerscroll=!1;var b=a.getScrollTop(),c=a.getScrollLeft();a.setScrollTop(b);a.railh&&a.setScrollLeft(c);a.noticeCursor(!1,b,c);a.cursorfreezed=!1;0>b?b=0:b>a.page.maxh&&(b=a.page.maxh);0>c?c=0:c>a.page.maxw&&(c=a.page.maxw);if(b!=a.newscrolly||c!=a.newscrollx)return a.doScrollPos(c,\r\nb,a.opt.snapbackspeed);a.onscrollend&&a.scrollrunning&&a.triggerScrollEnd();a.scrollrunning=!1}):(this.doScrollLeft=function(b,c){var d=a.scrollrunning?a.newscrolly:a.getScrollTop();a.doScrollPos(b,d,c)},this.doScrollTop=function(b,c){var d=a.scrollrunning?a.newscrollx:a.getScrollLeft();a.doScrollPos(d,b,c)},this.doScrollPos=function(b,c,d){function e(){if(a.cancelAnimationFrame)return!0;a.scrollrunning=!0;if(p=1-p)return a.timer=v(e)||1;var b=0,c,d,f=d=a.getScrollTop();if(a.dst.ay){f=a.bzscroll?\r\na.dst.py+a.bzscroll.getNow()*a.dst.ay:a.newscrolly;c=f-d;if(0>c&&f<a.newscrolly||0<c&&f>a.newscrolly)f=a.newscrolly;a.setScrollTop(f);f==a.newscrolly&&(b=1)}else b=1;d=c=a.getScrollLeft();if(a.dst.ax){d=a.bzscroll?a.dst.px+a.bzscroll.getNow()*a.dst.ax:a.newscrollx;c=d-c;if(0>c&&d<a.newscrollx||0<c&&d>a.newscrollx)d=a.newscrollx;a.setScrollLeft(d);d==a.newscrollx&&(b+=1)}else b+=1;2==b?(a.timer=0,a.cursorfreezed=!1,a.bzscroll=!1,a.scrollrunning=!1,0>f?f=0:f>a.page.maxh&&(f=Math.max(0,a.page.maxh)),\r\n0>d?d=0:d>a.page.maxw&&(d=a.page.maxw),d!=a.newscrollx||f!=a.newscrolly?a.doScrollPos(d,f):a.onscrollend&&a.triggerScrollEnd()):a.timer=v(e)||1}c=void 0===c||!1===c?a.getScrollTop(!0):c;if(a.timer&&a.newscrolly==c&&a.newscrollx==b)return!0;a.timer&&w(a.timer);a.timer=0;var f=a.getScrollTop(),k=a.getScrollLeft();(0>(a.newscrolly-f)*(c-f)||0>(a.newscrollx-k)*(b-k))&&a.cancelScroll();a.newscrolly=c;a.newscrollx=b;a.bouncescroll&&a.rail.visibility||(0>a.newscrolly?a.newscrolly=0:a.newscrolly>a.page.maxh&&\r\n(a.newscrolly=a.page.maxh));a.bouncescroll&&a.railh.visibility||(0>a.newscrollx?a.newscrollx=0:a.newscrollx>a.page.maxw&&(a.newscrollx=a.page.maxw));a.dst={};a.dst.x=b-k;a.dst.y=c-f;a.dst.px=k;a.dst.py=f;var h=Math.round(Math.sqrt(Math.pow(a.dst.x,2)+Math.pow(a.dst.y,2)));a.dst.ax=a.dst.x/h;a.dst.ay=a.dst.y/h;var l=0,n=h;0==a.dst.x?(l=f,n=c,a.dst.ay=1,a.dst.py=0):0==a.dst.y&&(l=k,n=b,a.dst.ax=1,a.dst.px=0);h=a.getTransitionSpeed(h);d&&1>=d&&(h*=d);a.bzscroll=0<h?a.bzscroll?a.bzscroll.update(n,h):\r\nnew D(l,n,h,0,1,0,1):!1;if(!a.timer){(f==a.page.maxh&&c>=a.page.maxh||k==a.page.maxw&&b>=a.page.maxw)&&a.checkContentSize();var p=1;a.cancelAnimationFrame=!1;a.timer=1;a.onscrollstart&&!a.scrollrunning&&a.onscrollstart.call(a,{type:"scrollstart",current:{x:k,y:f},request:{x:b,y:c},end:{x:a.newscrollx,y:a.newscrolly},speed:h});e();(f==a.page.maxh&&c>=f||k==a.page.maxw&&b>=k)&&a.checkContentSize();a.noticeCursor()}},this.cancelScroll=function(){a.timer&&w(a.timer);a.timer=0;a.bzscroll=!1;a.scrollrunning=\r\n!1;return a}):(this.doScrollLeft=function(b,c){var d=a.getScrollTop();a.doScrollPos(b,d,c)},this.doScrollTop=function(b,c){var d=a.getScrollLeft();a.doScrollPos(d,b,c)},this.doScrollPos=function(b,c,d){var e=b>a.page.maxw?a.page.maxw:b;0>e&&(e=0);var f=c>a.page.maxh?a.page.maxh:c;0>f&&(f=0);a.synched("scroll",function(){a.setScrollTop(f);a.setScrollLeft(e)})},this.cancelScroll=function(){});this.doScrollBy=function(b,c){var d=0,d=c?Math.floor((a.scroll.y-b)*a.scrollratio.y):(a.timer?a.newscrolly:\r\na.getScrollTop(!0))-b;if(a.bouncescroll){var e=Math.round(a.view.h/2);d<-e?d=-e:d>a.page.maxh+e&&(d=a.page.maxh+e)}a.cursorfreezed=!1;e=a.getScrollTop(!0);if(0>d&&0>=e)return a.noticeCursor();if(d>a.page.maxh&&e>=a.page.maxh)return a.checkContentSize(),a.noticeCursor();a.doScrollTop(d)};this.doScrollLeftBy=function(b,c){var d=0,d=c?Math.floor((a.scroll.x-b)*a.scrollratio.x):(a.timer?a.newscrollx:a.getScrollLeft(!0))-b;if(a.bouncescroll){var e=Math.round(a.view.w/2);d<-e?d=-e:d>a.page.maxw+e&&(d=a.page.maxw+\r\ne)}a.cursorfreezed=!1;e=a.getScrollLeft(!0);if(0>d&&0>=e||d>a.page.maxw&&e>=a.page.maxw)return a.noticeCursor();a.doScrollLeft(d)};this.doScrollTo=function(b,c){a.cursorfreezed=!1;a.doScrollTop(b)};this.checkContentSize=function(){var b=a.getContentSize();b.h==a.page.h&&b.w==a.page.w||a.resize(!1,b)};a.onscroll=function(b){a.rail.drag||a.cursorfreezed||a.synched("scroll",function(){a.scroll.y=Math.round(a.getScrollTop()*(1/a.scrollratio.y));a.railh&&(a.scroll.x=Math.round(a.getScrollLeft()*(1/a.scrollratio.x)));\r\na.noticeCursor()})};a.bind(a.docscroll,"scroll",a.onscroll);this.doZoomIn=function(b){if(!a.zoomactive){a.zoomactive=!0;a.zoomrestore={style:{}};var c="position top left zIndex backgroundColor marginTop marginBottom marginLeft marginRight".split(" "),d=a.win[0].style,k;for(k in c){var h=c[k];a.zoomrestore.style[h]=void 0!==d[h]?d[h]:""}a.zoomrestore.style.width=a.win.css("width");a.zoomrestore.style.height=a.win.css("height");a.zoomrestore.padding={w:a.win.outerWidth()-a.win.width(),h:a.win.outerHeight()-\r\na.win.height()};e.isios4&&(a.zoomrestore.scrollTop=f(window).scrollTop(),f(window).scrollTop(0));a.win.css({position:e.isios4?"absolute":"fixed",top:0,left:0,zIndex:A+100,margin:0});c=a.win.css("backgroundColor");(""==c||/transparent|rgba\\(0, 0, 0, 0\\)|rgba\\(0,0,0,0\\)/.test(c))&&a.win.css("backgroundColor","#fff");a.rail.css({zIndex:A+101});a.zoom.css({zIndex:A+102});a.zoom.css("backgroundPosition","0px -18px");a.resizeZoom();a.onzoomin&&a.onzoomin.call(a);return a.cancelEvent(b)}};this.doZoomOut=\r\nfunction(b){if(a.zoomactive)return a.zoomactive=!1,a.win.css("margin",""),a.win.css(a.zoomrestore.style),e.isios4&&f(window).scrollTop(a.zoomrestore.scrollTop),a.rail.css({"z-index":a.zindex}),a.zoom.css({"z-index":a.zindex}),a.zoomrestore=!1,a.zoom.css("backgroundPosition","0px 0px"),a.onResize(),a.onzoomout&&a.onzoomout.call(a),a.cancelEvent(b)};this.doZoom=function(b){return a.zoomactive?a.doZoomOut(b):a.doZoomIn(b)};this.resizeZoom=function(){if(a.zoomactive){var b=a.getScrollTop();a.win.css({width:f(window).width()-\r\na.zoomrestore.padding.w+"px",height:f(window).height()-a.zoomrestore.padding.h+"px"});a.onResize();a.setScrollTop(Math.min(a.page.maxh,b))}};this.init();f.nicescroll.push(this)},M=function(f){var c=this;this.nc=f;this.steptime=this.lasttime=this.speedy=this.speedx=this.lasty=this.lastx=0;this.snapy=this.snapx=!1;this.demuly=this.demulx=0;this.lastscrolly=this.lastscrollx=-1;this.timer=this.chky=this.chkx=0;this.time=function(){return+new Date};this.reset=function(f,h){c.stop();var d=c.time();c.steptime=\r\n0;c.lasttime=d;c.speedx=0;c.speedy=0;c.lastx=f;c.lasty=h;c.lastscrollx=-1;c.lastscrolly=-1};this.update=function(f,h){var d=c.time();c.steptime=d-c.lasttime;c.lasttime=d;var d=h-c.lasty,q=f-c.lastx,t=c.nc.getScrollTop(),a=c.nc.getScrollLeft(),t=t+d,a=a+q;c.snapx=0>a||a>c.nc.page.maxw;c.snapy=0>t||t>c.nc.page.maxh;c.speedx=q;c.speedy=d;c.lastx=f;c.lasty=h};this.stop=function(){c.nc.unsynched("domomentum2d");c.timer&&clearTimeout(c.timer);c.timer=0;c.lastscrollx=-1;c.lastscrolly=-1};this.doSnapy=function(f,\r\nh){var d=!1;0>h?(h=0,d=!0):h>c.nc.page.maxh&&(h=c.nc.page.maxh,d=!0);0>f?(f=0,d=!0):f>c.nc.page.maxw&&(f=c.nc.page.maxw,d=!0);d?c.nc.doScrollPos(f,h,c.nc.opt.snapbackspeed):c.nc.triggerScrollEnd()};this.doMomentum=function(f){var h=c.time(),d=f?h+f:c.lasttime;f=c.nc.getScrollLeft();var q=c.nc.getScrollTop(),t=c.nc.page.maxh,a=c.nc.page.maxw;c.speedx=0<a?Math.min(60,c.speedx):0;c.speedy=0<t?Math.min(60,c.speedy):0;d=d&&60>=h-d;if(0>q||q>t||0>f||f>a)d=!1;f=c.speedx&&d?c.speedx:!1;if(c.speedy&&d&&c.speedy||\r\nf){var r=Math.max(16,c.steptime);50<r&&(f=r/50,c.speedx*=f,c.speedy*=f,r=50);c.demulxy=0;c.lastscrollx=c.nc.getScrollLeft();c.chkx=c.lastscrollx;c.lastscrolly=c.nc.getScrollTop();c.chky=c.lastscrolly;var p=c.lastscrollx,e=c.lastscrolly,v=function(){var d=600<c.time()-h?.04:.02;c.speedx&&(p=Math.floor(c.lastscrollx-c.speedx*(1-c.demulxy)),c.lastscrollx=p,0>p||p>a)&&(d=.1);c.speedy&&(e=Math.floor(c.lastscrolly-c.speedy*(1-c.demulxy)),c.lastscrolly=e,0>e||e>t)&&(d=.1);c.demulxy=Math.min(1,c.demulxy+\r\nd);c.nc.synched("domomentum2d",function(){c.speedx&&(c.nc.getScrollLeft(),c.chkx=p,c.nc.setScrollLeft(p));c.speedy&&(c.nc.getScrollTop(),c.chky=e,c.nc.setScrollTop(e));c.timer||(c.nc.hideCursor(),c.doSnapy(p,e))});1>c.demulxy?c.timer=setTimeout(v,r):(c.stop(),c.nc.hideCursor(),c.doSnapy(p,e))};v()}else c.doSnapy(c.nc.getScrollLeft(),c.nc.getScrollTop())}},y=f.fn.scrollTop;f.cssHooks.pageYOffset={get:function(h,c,k){return(c=f.data(h,"__nicescroll")||!1)&&c.ishwscroll?c.getScrollTop():y.call(h)},set:function(h,\r\nc){var k=f.data(h,"__nicescroll")||!1;k&&k.ishwscroll?k.setScrollTop(parseInt(c)):y.call(h,c);return this}};f.fn.scrollTop=function(h){if(void 0===h){var c=this[0]?f.data(this[0],"__nicescroll")||!1:!1;return c&&c.ishwscroll?c.getScrollTop():y.call(this)}return this.each(function(){var c=f.data(this,"__nicescroll")||!1;c&&c.ishwscroll?c.setScrollTop(parseInt(h)):y.call(f(this),h)})};var z=f.fn.scrollLeft;f.cssHooks.pageXOffset={get:function(h,c,k){return(c=f.data(h,"__nicescroll")||!1)&&c.ishwscroll?\r\nc.getScrollLeft():z.call(h)},set:function(h,c){var k=f.data(h,"__nicescroll")||!1;k&&k.ishwscroll?k.setScrollLeft(parseInt(c)):z.call(h,c);return this}};f.fn.scrollLeft=function(h){if(void 0===h){var c=this[0]?f.data(this[0],"__nicescroll")||!1:!1;return c&&c.ishwscroll?c.getScrollLeft():z.call(this)}return this.each(function(){var c=f.data(this,"__nicescroll")||!1;c&&c.ishwscroll?c.setScrollLeft(parseInt(h)):z.call(f(this),h)})};var E=function(h){var c=this;this.length=0;this.name="nicescrollarray";\r\nthis.each=function(d){f.each(c,d);return c};this.push=function(d){c[c.length]=d;c.length++};this.eq=function(d){return c[d]};if(h)for(var k=0;k<h.length;k++){var l=f.data(h[k],"__nicescroll")||!1;l&&(this[this.length]=l,this.length++)}return this};(function(f,c,k){for(var l=0;l<c.length;l++)k(f,c[l])})(E.prototype,"show hide toggle onResize resize remove stop doScrollPos".split(" "),function(f,c){f[c]=function(){var f=arguments;return this.each(function(){this[c].apply(this,f)})}});f.fn.getNiceScroll=\r\nfunction(h){return void 0===h?new E(this):this[h]&&f.data(this[h],"__nicescroll")||!1};f.expr[":"].nicescroll=function(h){return void 0!==f.data(h,"__nicescroll")};f.fn.niceScroll=function(h,c){void 0!==c||"object"!=typeof h||"jquery"in h||(c=h,h=!1);c=f.extend({},c);var k=new E;void 0===c&&(c={});h&&(c.doc=f(h),c.win=f(this));var l=!("doc"in c);l||"win"in c||(c.win=f(this));this.each(function(){var d=f(this).data("__nicescroll")||!1;d||(c.doc=l?f(this):c.doc,d=new S(c,f(this)),f(this).data("__nicescroll",\r\nd));k.push(d)});return 1==k.length?k[0]:k};window.NiceScroll={getjQuery:function(){return f}};f.nicescroll||(f.nicescroll=new E,f.nicescroll.options=K)});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kZXZlbG9wL2NvbXBvbmVudC9saWIvanF1ZXJ5LW5pY2VzY3JvbGwvanF1ZXJ5Lm5pY2VzY3JvbGwubWluLmpzPzMxZjYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsNkxBQTZGLDBkQUFvSSxjQUFjLDZIQUE2SCxzQkFBc0IsV0FBVyx3Q0FBd0MsNEVBQTRFLE9BQU87QUFDeGdCLE1BQU0scWRBQXFkLDhCQUE4QjtBQUN6ZixrYkFBa2I7QUFDbGIsd0JBQXdCLHVFQUF1RSw0REFBNEQsbUJBQW1CLGNBQWMsNEZBQTRGLDJIQUEySCwyQkFBMkIsa0RBQWtEO0FBQ2hlLGlEQUFpRCx1REFBdUQsK0NBQStDLHFGQUFxRixvRUFBb0UsaUVBQWlFLG1FQUFtRSw4REFBOEQ7QUFDbGYsd0NBQXdDLGlDQUFpQyxrQ0FBa0Msb0NBQW9DLDRCQUE0QiwyREFBMkQsZ0NBQWdDLGtDQUFrQyw2QkFBNkIsMkNBQTJDLHlEQUF5RCx5REFBeUQ7QUFDbGUsa0RBQWtELG9HQUFvRyx5REFBeUQseUJBQXlCLGdEQUFnRCxxQ0FBcUMsNENBQTRDLHNDQUFzQywrQkFBK0IsMENBQTBDLGFBQWE7QUFDcmUsb0JBQW9CLHFCQUFxQixtQkFBbUIsbUJBQW1CLDRFQUE0RSxRQUFRLFdBQVcseUJBQXlCLGVBQWUsTUFBTSwyQkFBMkIsNEdBQTRHLHFCQUFxQixpQkFBaUIsbUJBQW1CO0FBQzVaLHVMQUF1TCxXQUFXLGlCQUFpQix1QkFBdUIsbUJBQW1CLHFCQUFxQixNQUFNLG1DQUFtQyxrQ0FBa0MsR0FBRyxzQ0FBc0MsMENBQTBDLFFBQVEsV0FBVyxzQ0FBc0MsSUFBSSxRQUFRO0FBQ3JmLHNFQUFzRSxvQkFBb0IsbUNBQW1DLDZCQUE2QixXQUFXLGlCQUFpQixhQUFhLDJCQUEyQixvR0FBb0csYUFBYSxZQUFZLGtDQUFrQyxLQUFLLDZCQUE2QixFQUFFLHNCQUFzQixzQ0FBc0MsYUFBYSxTQUFTO0FBQ25mLEtBQUssV0FBVyxnQkFBZ0IsZ0pBQWdK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dCI6WyIvKiBqcXVlcnkubmljZXNjcm9sbCAzLjYuOCBJbnVZYWtzYSoyMDE1IE1JVCBodHRwOi8vbmljZXNjcm9sbC5hcmVhYXBlcnRhLmNvbSAqLyhmdW5jdGlvbihmKXtcImZ1bmN0aW9uXCI9PT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXCJqcXVlcnlcIl0sZik6XCJvYmplY3RcIj09PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWYocmVxdWlyZShcImpxdWVyeVwiKSk6ZihqUXVlcnkpfSkoZnVuY3Rpb24oZil7dmFyIEI9ITEsRj0hMSxPPTAsUD0yRTMsQT0wLEo9W1wid2Via2l0XCIsXCJtc1wiLFwibW96XCIsXCJvXCJdLHY9d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZXx8ITEsdz13aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWV8fCExO2lmKCF2KWZvcih2YXIgUSBpbiBKKXt2YXIgRz1KW1FdO2lmKHY9d2luZG93W0crXCJSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIl0pe3c9d2luZG93W0crXCJDYW5jZWxBbmltYXRpb25GcmFtZVwiXXx8d2luZG93W0crXCJDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIl07YnJlYWt9fXZhciB4PXdpbmRvdy5NdXRhdGlvbk9ic2VydmVyfHx3aW5kb3cuV2ViS2l0TXV0YXRpb25PYnNlcnZlcnx8XHJcbiExLEs9e3ppbmRleDpcImF1dG9cIixjdXJzb3JvcGFjaXR5bWluOjAsY3Vyc29yb3BhY2l0eW1heDoxLGN1cnNvcmNvbG9yOlwiIzQyNDI0MlwiLGN1cnNvcndpZHRoOlwiNnB4XCIsY3Vyc29yYm9yZGVyOlwiMXB4IHNvbGlkICNmZmZcIixjdXJzb3Jib3JkZXJyYWRpdXM6XCI1cHhcIixzY3JvbGxzcGVlZDo2MCxtb3VzZXNjcm9sbHN0ZXA6MjQsdG91Y2hiZWhhdmlvcjohMSxod2FjY2VsZXJhdGlvbjohMCx1c2V0cmFuc2l0aW9uOiEwLGJveHpvb206ITEsZGJsY2xpY2t6b29tOiEwLGdlc3R1cmV6b29tOiEwLGdyYWJjdXJzb3JlbmFibGVkOiEwLGF1dG9oaWRlbW9kZTohMCxiYWNrZ3JvdW5kOlwiXCIsaWZyYW1lYXV0b3Jlc2l6ZTohMCxjdXJzb3JtaW5oZWlnaHQ6MzIscHJlc2VydmVuYXRpdmVzY3JvbGxpbmc6ITAscmFpbG9mZnNldDohMSxyYWlsaG9mZnNldDohMSxib3VuY2VzY3JvbGw6ITAsc3BhY2ViYXJlbmFibGVkOiEwLHJhaWxwYWRkaW5nOnt0b3A6MCxyaWdodDowLGxlZnQ6MCxib3R0b206MH0sXHJcbmRpc2FibGVvdXRsaW5lOiEwLGhvcml6cmFpbGVuYWJsZWQ6ITAscmFpbGFsaWduOlwicmlnaHRcIixyYWlsdmFsaWduOlwiYm90dG9tXCIsZW5hYmxldHJhbnNsYXRlM2Q6ITAsZW5hYmxlbW91c2V3aGVlbDohMCxlbmFibGVrZXlib2FyZDohMCxzbW9vdGhzY3JvbGw6ITAsc2Vuc2l0aXZlcmFpbDohMCxlbmFibGVtb3VzZWxvY2thcGk6ITAsY3Vyc29yZml4ZWRoZWlnaHQ6ITEsZGlyZWN0aW9ubG9ja2RlYWR6b25lOjYsaGlkZWN1cnNvcmRlbGF5OjQwMCxuYXRpdmVwYXJlbnRzY3JvbGxpbmc6ITAsZW5hYmxlc2Nyb2xsb25zZWxlY3Rpb246ITAsb3ZlcmZsb3d4OiEwLG92ZXJmbG93eTohMCxjdXJzb3JkcmFnc3BlZWQ6LjMscnRsbW9kZTpcImF1dG9cIixjdXJzb3JkcmFnb250b3VjaDohMSxvbmVheGlzbW91c2Vtb2RlOlwiYXV0b1wiLHNjcmlwdHBhdGg6ZnVuY3Rpb24oKXt2YXIgZj1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKSxmPWYubGVuZ3RoP2ZbZi5sZW5ndGgtXHJcbjFdLnNyYy5zcGxpdChcIj9cIilbMF06XCJcIjtyZXR1cm4gMDxmLnNwbGl0KFwiL1wiKS5sZW5ndGg/Zi5zcGxpdChcIi9cIikuc2xpY2UoMCwtMSkuam9pbihcIi9cIikrXCIvXCI6XCJcIn0oKSxwcmV2ZW50bXVsdGl0b3VjaHNjcm9sbGluZzohMCxkaXNhYmxlbXV0YXRpb25vYnNlcnZlcjohMX0sSD0hMSxSPWZ1bmN0aW9uKCl7aWYoSClyZXR1cm4gSDt2YXIgZj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiRElWXCIpLGM9Zi5zdHlsZSxrPW5hdmlnYXRvci51c2VyQWdlbnQsbD1uYXZpZ2F0b3IucGxhdGZvcm0sZD17aGFzcG9pbnRlcmxvY2s6XCJwb2ludGVyTG9ja0VsZW1lbnRcImluIGRvY3VtZW50fHxcIndlYmtpdFBvaW50ZXJMb2NrRWxlbWVudFwiaW4gZG9jdW1lbnR8fFwibW96UG9pbnRlckxvY2tFbGVtZW50XCJpbiBkb2N1bWVudH07ZC5pc29wZXJhPVwib3BlcmFcImluIHdpbmRvdztkLmlzb3BlcmExMj1kLmlzb3BlcmEmJlwiZ2V0VXNlck1lZGlhXCJpbiBuYXZpZ2F0b3I7ZC5pc29wZXJhbWluaT1cIltvYmplY3QgT3BlcmFNaW5pXVwiPT09XHJcbk9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh3aW5kb3cub3BlcmFtaW5pKTtkLmlzaWU9XCJhbGxcImluIGRvY3VtZW50JiZcImF0dGFjaEV2ZW50XCJpbiBmJiYhZC5pc29wZXJhO2QuaXNpZW9sZD1kLmlzaWUmJiEoXCJtc0ludGVycG9sYXRpb25Nb2RlXCJpbiBjKTtkLmlzaWU3PWQuaXNpZSYmIWQuaXNpZW9sZCYmKCEoXCJkb2N1bWVudE1vZGVcImluIGRvY3VtZW50KXx8Nz09ZG9jdW1lbnQuZG9jdW1lbnRNb2RlKTtkLmlzaWU4PWQuaXNpZSYmXCJkb2N1bWVudE1vZGVcImluIGRvY3VtZW50JiY4PT1kb2N1bWVudC5kb2N1bWVudE1vZGU7ZC5pc2llOT1kLmlzaWUmJlwicGVyZm9ybWFuY2VcImluIHdpbmRvdyYmOT09ZG9jdW1lbnQuZG9jdW1lbnRNb2RlO2QuaXNpZTEwPWQuaXNpZSYmXCJwZXJmb3JtYW5jZVwiaW4gd2luZG93JiYxMD09ZG9jdW1lbnQuZG9jdW1lbnRNb2RlO2QuaXNpZTExPVwibXNSZXF1ZXN0RnVsbHNjcmVlblwiaW4gZiYmMTE8PWRvY3VtZW50LmRvY3VtZW50TW9kZTtkLmlzaWVlZGdlMTI9XHJcbm5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0VkZ2VcXC8xMlxcLi8pO2QuaXNpZWVkZ2U9XCJtc092ZXJmbG93U3R5bGVcImluIGY7ZC5pc21vZGVybmllPWQuaXNpZTExfHxkLmlzaWVlZGdlO2QuaXNpZTltb2JpbGU9L2llbW9iaWxlLjkvaS50ZXN0KGspO2QuaXNpZTltb2JpbGUmJihkLmlzaWU5PSExKTtkLmlzaWU3bW9iaWxlPSFkLmlzaWU5bW9iaWxlJiZkLmlzaWU3JiYvaWVtb2JpbGUvaS50ZXN0KGspO2QuaXNtb3ppbGxhPVwiTW96QXBwZWFyYW5jZVwiaW4gYztkLmlzd2Via2l0PVwiV2Via2l0QXBwZWFyYW5jZVwiaW4gYztkLmlzY2hyb21lPVwiY2hyb21lXCJpbiB3aW5kb3c7ZC5pc2Nocm9tZTM4PWQuaXNjaHJvbWUmJlwidG91Y2hBY3Rpb25cImluIGM7ZC5pc2Nocm9tZTIyPSFkLmlzY2hyb21lMzgmJmQuaXNjaHJvbWUmJmQuaGFzcG9pbnRlcmxvY2s7ZC5pc2Nocm9tZTI2PSFkLmlzY2hyb21lMzgmJmQuaXNjaHJvbWUmJlwidHJhbnNpdGlvblwiaW4gYztkLmNhbnRvdWNoPVwib250b3VjaHN0YXJ0XCJpblxyXG5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnR8fFwib250b3VjaHN0YXJ0XCJpbiB3aW5kb3c7ZC5oYXN3M2N0b3VjaD0od2luZG93LlBvaW50ZXJFdmVudHx8ITEpJiYoMDxuYXZpZ2F0b3IuTWF4VG91Y2hQb2ludHN8fDA8bmF2aWdhdG9yLm1zTWF4VG91Y2hQb2ludHMpO2QuaGFzbXN0b3VjaD0hZC5oYXN3M2N0b3VjaCYmKHdpbmRvdy5NU1BvaW50ZXJFdmVudHx8ITEpO2QuaXNtYWM9L15tYWMkL2kudGVzdChsKTtkLmlzaW9zPWQuY2FudG91Y2gmJi9pcGhvbmV8aXBhZHxpcG9kL2kudGVzdChsKTtkLmlzaW9zND1kLmlzaW9zJiYhKFwic2VhbFwiaW4gT2JqZWN0KTtkLmlzaW9zNz1kLmlzaW9zJiZcIndlYmtpdEhpZGRlblwiaW4gZG9jdW1lbnQ7ZC5pc2lvczg9ZC5pc2lvcyYmXCJoaWRkZW5cImluIGRvY3VtZW50O2QuaXNhbmRyb2lkPS9hbmRyb2lkL2kudGVzdChrKTtkLmhhc2V2ZW50bGlzdGVuZXI9XCJhZGRFdmVudExpc3RlbmVyXCJpbiBmO2QudHJzdHlsZT0hMTtkLmhhc3RyYW5zZm9ybT0hMTtcclxuZC5oYXN0cmFuc2xhdGUzZD0hMTtkLnRyYW5zaXRpb25zdHlsZT0hMTtkLmhhc3RyYW5zaXRpb249ITE7ZC50cmFuc2l0aW9uZW5kPSExO2w9W1widHJhbnNmb3JtXCIsXCJtc1RyYW5zZm9ybVwiLFwid2Via2l0VHJhbnNmb3JtXCIsXCJNb3pUcmFuc2Zvcm1cIixcIk9UcmFuc2Zvcm1cIl07Zm9yKGs9MDtrPGwubGVuZ3RoO2srKylpZih2b2lkIDAhPT1jW2xba11dKXtkLnRyc3R5bGU9bFtrXTticmVha31kLmhhc3RyYW5zZm9ybT0hIWQudHJzdHlsZTtkLmhhc3RyYW5zZm9ybSYmKGNbZC50cnN0eWxlXT1cInRyYW5zbGF0ZTNkKDFweCwycHgsM3B4KVwiLGQuaGFzdHJhbnNsYXRlM2Q9L3RyYW5zbGF0ZTNkLy50ZXN0KGNbZC50cnN0eWxlXSkpO2QudHJhbnNpdGlvbnN0eWxlPSExO2QucHJlZml4c3R5bGU9XCJcIjtkLnRyYW5zaXRpb25lbmQ9ITE7Zm9yKHZhciBsPVwidHJhbnNpdGlvbiB3ZWJraXRUcmFuc2l0aW9uIG1zVHJhbnNpdGlvbiBNb3pUcmFuc2l0aW9uIE9UcmFuc2l0aW9uIE9UcmFuc2l0aW9uIEtodG1sVHJhbnNpdGlvblwiLnNwbGl0KFwiIFwiKSxcclxucT1cIiAtd2Via2l0LSAtbXMtIC1tb3otIC1vLSAtbyAta2h0bWwtXCIuc3BsaXQoXCIgXCIpLHQ9XCJ0cmFuc2l0aW9uZW5kIHdlYmtpdFRyYW5zaXRpb25FbmQgbXNUcmFuc2l0aW9uRW5kIHRyYW5zaXRpb25lbmQgb3RyYW5zaXRpb25lbmQgb1RyYW5zaXRpb25FbmQgS2h0bWxUcmFuc2l0aW9uRW5kXCIuc3BsaXQoXCIgXCIpLGs9MDtrPGwubGVuZ3RoO2srKylpZihsW2tdaW4gYyl7ZC50cmFuc2l0aW9uc3R5bGU9bFtrXTtkLnByZWZpeHN0eWxlPXFba107ZC50cmFuc2l0aW9uZW5kPXRba107YnJlYWt9ZC5pc2Nocm9tZTI2JiYoZC5wcmVmaXhzdHlsZT1xWzFdKTtkLmhhc3RyYW5zaXRpb249ZC50cmFuc2l0aW9uc3R5bGU7YTp7az1bXCJncmFiXCIsXCItd2Via2l0LWdyYWJcIixcIi1tb3otZ3JhYlwiXTtpZihkLmlzY2hyb21lJiYhZC5pc2Nocm9tZTM4fHxkLmlzaWUpaz1bXTtmb3IobD0wO2w8ay5sZW5ndGg7bCsrKWlmKHE9a1tsXSxjLmN1cnNvcj1xLGMuY3Vyc29yPT1xKXtjPXE7YnJlYWsgYX1jPVxyXG5cInVybCgvL3BhdHJpY2lhcG9ydGZvbGlvLmdvb2dsZWNvZGUuY29tL2ZpbGVzL29wZW5oYW5kLmN1ciksbi1yZXNpemVcIn1kLmN1cnNvcmdyYWJ2YWx1ZT1jO2QuaGFzbW91c2VjYXB0dXJlPVwic2V0Q2FwdHVyZVwiaW4gZjtkLmhhc011dGF0aW9uT2JzZXJ2ZXI9ITEhPT14O3JldHVybiBIPWR9LFM9ZnVuY3Rpb24oaCxjKXtmdW5jdGlvbiBrKCl7dmFyIGI9YS5kb2MuY3NzKGUudHJzdHlsZSk7cmV0dXJuIGImJlwibWF0cml4XCI9PWIuc3Vic3RyKDAsNik/Yi5yZXBsYWNlKC9eLipcXCgoLiopXFwpJC9nLFwiJDFcIikucmVwbGFjZSgvcHgvZyxcIlwiKS5zcGxpdCgvLCArLyk6ITF9ZnVuY3Rpb24gbCgpe3ZhciBiPWEud2luO2lmKFwiekluZGV4XCJpbiBiKXJldHVybiBiLnpJbmRleCgpO2Zvcig7MDxiLmxlbmd0aCYmOSE9YlswXS5ub2RlVHlwZTspe3ZhciBnPWIuY3NzKFwiekluZGV4XCIpO2lmKCFpc05hTihnKSYmMCE9ZylyZXR1cm4gcGFyc2VJbnQoZyk7Yj1iLnBhcmVudCgpfXJldHVybiExfWZ1bmN0aW9uIGQoYixcclxuZyx1KXtnPWIuY3NzKGcpO2I9cGFyc2VGbG9hdChnKTtyZXR1cm4gaXNOYU4oYik/KGI9eltnXXx8MCx1PTM9PWI/dT9hLndpbi5vdXRlckhlaWdodCgpLWEud2luLmlubmVySGVpZ2h0KCk6YS53aW4ub3V0ZXJXaWR0aCgpLWEud2luLmlubmVyV2lkdGgoKToxLGEuaXNpZTgmJmImJihiKz0xKSx1P2I6MCk6Yn1mdW5jdGlvbiBxKGIsZyx1LGMpe2EuX2JpbmQoYixnLGZ1bmN0aW9uKGEpe2E9YT9hOndpbmRvdy5ldmVudDt2YXIgYz17b3JpZ2luYWw6YSx0YXJnZXQ6YS50YXJnZXR8fGEuc3JjRWxlbWVudCx0eXBlOlwid2hlZWxcIixkZWx0YU1vZGU6XCJNb3pNb3VzZVBpeGVsU2Nyb2xsXCI9PWEudHlwZT8wOjEsZGVsdGFYOjAsZGVsdGFaOjAscHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXthLnByZXZlbnREZWZhdWx0P2EucHJldmVudERlZmF1bHQoKTphLnJldHVyblZhbHVlPSExO3JldHVybiExfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXthLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbj9cclxuYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTphLmNhbmNlbEJ1YmJsZT0hMH19O1wibW91c2V3aGVlbFwiPT1nPyhhLndoZWVsRGVsdGFYJiYoYy5kZWx0YVg9LS4wMjUqYS53aGVlbERlbHRhWCksYS53aGVlbERlbHRhWSYmKGMuZGVsdGFZPS0uMDI1KmEud2hlZWxEZWx0YVkpLGMuZGVsdGFZfHxjLmRlbHRhWHx8KGMuZGVsdGFZPS0uMDI1KmEud2hlZWxEZWx0YSkpOmMuZGVsdGFZPWEuZGV0YWlsO3JldHVybiB1LmNhbGwoYixjKX0sYyl9ZnVuY3Rpb24gdChiLGcsYyl7dmFyIGQsZTswPT1iLmRlbHRhTW9kZT8oZD0tTWF0aC5mbG9vcihhLm9wdC5tb3VzZXNjcm9sbHN0ZXAvNTQqYi5kZWx0YVgpLGU9LU1hdGguZmxvb3IoYS5vcHQubW91c2VzY3JvbGxzdGVwLzU0KmIuZGVsdGFZKSk6MT09Yi5kZWx0YU1vZGUmJihkPS1NYXRoLmZsb29yKGIuZGVsdGFYKmEub3B0Lm1vdXNlc2Nyb2xsc3RlcCksZT0tTWF0aC5mbG9vcihiLmRlbHRhWSphLm9wdC5tb3VzZXNjcm9sbHN0ZXApKTtcclxuZyYmYS5vcHQub25lYXhpc21vdXNlbW9kZSYmMD09ZCYmZSYmKGQ9ZSxlPTAsYyYmKDA+ZD9hLmdldFNjcm9sbExlZnQoKT49YS5wYWdlLm1heHc6MD49YS5nZXRTY3JvbGxMZWZ0KCkpJiYoZT1kLGQ9MCkpO2EuaXNydGxtb2RlJiYoZD0tZCk7ZCYmKGEuc2Nyb2xsbW9tJiZhLnNjcm9sbG1vbS5zdG9wKCksYS5sYXN0ZGVsdGF4Kz1kLGEuZGVib3VuY2VkKFwibW91c2V3aGVlbHhcIixmdW5jdGlvbigpe3ZhciBiPWEubGFzdGRlbHRheDthLmxhc3RkZWx0YXg9MDthLnJhaWwuZHJhZ3x8YS5kb1Njcm9sbExlZnRCeShiKX0sMTUpKTtpZihlKXtpZihhLm9wdC5uYXRpdmVwYXJlbnRzY3JvbGxpbmcmJmMmJiFhLmlzcGFnZSYmIWEuem9vbWFjdGl2ZSlpZigwPmUpe2lmKGEuZ2V0U2Nyb2xsVG9wKCk+PWEucGFnZS5tYXhoKXJldHVybiEwfWVsc2UgaWYoMD49YS5nZXRTY3JvbGxUb3AoKSlyZXR1cm4hMDthLnNjcm9sbG1vbSYmYS5zY3JvbGxtb20uc3RvcCgpO2EubGFzdGRlbHRheSs9ZTtcclxuYS5zeW5jaGVkKFwibW91c2V3aGVlbHlcIixmdW5jdGlvbigpe3ZhciBiPWEubGFzdGRlbHRheTthLmxhc3RkZWx0YXk9MDthLnJhaWwuZHJhZ3x8YS5kb1Njcm9sbEJ5KGIpfSwxNSl9Yi5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtyZXR1cm4gYi5wcmV2ZW50RGVmYXVsdCgpfXZhciBhPXRoaXM7dGhpcy52ZXJzaW9uPVwiMy42LjhcIjt0aGlzLm5hbWU9XCJuaWNlc2Nyb2xsXCI7dGhpcy5tZT1jO3RoaXMub3B0PXtkb2M6ZihcImJvZHlcIiksd2luOiExfTtmLmV4dGVuZCh0aGlzLm9wdCxLKTt0aGlzLm9wdC5zbmFwYmFja3NwZWVkPTgwO2lmKGgpZm9yKHZhciByIGluIGEub3B0KXZvaWQgMCE9PWhbcl0mJihhLm9wdFtyXT1oW3JdKTthLm9wdC5kaXNhYmxlbXV0YXRpb25vYnNlcnZlciYmKHg9ITEpO3RoaXMuaWRkb2M9KHRoaXMuZG9jPWEub3B0LmRvYykmJnRoaXMuZG9jWzBdP3RoaXMuZG9jWzBdLmlkfHxcIlwiOlwiXCI7dGhpcy5pc3BhZ2U9L15CT0RZfEhUTUwvLnRlc3QoYS5vcHQud2luP1xyXG5hLm9wdC53aW5bMF0ubm9kZU5hbWU6dGhpcy5kb2NbMF0ubm9kZU5hbWUpO3RoaXMuaGFzd3JhcHBlcj0hMSE9PWEub3B0Lndpbjt0aGlzLndpbj1hLm9wdC53aW58fCh0aGlzLmlzcGFnZT9mKHdpbmRvdyk6dGhpcy5kb2MpO3RoaXMuZG9jc2Nyb2xsPXRoaXMuaXNwYWdlJiYhdGhpcy5oYXN3cmFwcGVyP2Yod2luZG93KTp0aGlzLndpbjt0aGlzLmJvZHk9ZihcImJvZHlcIik7dGhpcy5pZnJhbWU9dGhpcy5pc2ZpeGVkPXRoaXMudmlld3BvcnQ9ITE7dGhpcy5pc2lmcmFtZT1cIklGUkFNRVwiPT10aGlzLmRvY1swXS5ub2RlTmFtZSYmXCJJRlJBTUVcIj09dGhpcy53aW5bMF0ubm9kZU5hbWU7dGhpcy5pc3RleHRhcmVhPVwiVEVYVEFSRUFcIj09dGhpcy53aW5bMF0ubm9kZU5hbWU7dGhpcy5mb3JjZXNjcmVlbj0hMTt0aGlzLmNhbnNob3dvbm1vdXNlZXZlbnQ9XCJzY3JvbGxcIiE9YS5vcHQuYXV0b2hpZGVtb2RlO3RoaXMucGFnZT10aGlzLnZpZXc9dGhpcy5vbnpvb21vdXQ9dGhpcy5vbnpvb21pbj1cclxudGhpcy5vbnNjcm9sbGNhbmNlbD10aGlzLm9uc2Nyb2xsZW5kPXRoaXMub25zY3JvbGxzdGFydD10aGlzLm9uY2xpY2s9dGhpcy5vbmdlc3R1cmV6b29tPXRoaXMub25rZXlwcmVzcz10aGlzLm9ubW91c2V3aGVlbD10aGlzLm9ubW91c2Vtb3ZlPXRoaXMub25tb3VzZXVwPXRoaXMub25tb3VzZWRvd249ITE7dGhpcy5zY3JvbGw9e3g6MCx5OjB9O3RoaXMuc2Nyb2xscmF0aW89e3g6MCx5OjB9O3RoaXMuY3Vyc29yaGVpZ2h0PTIwO3RoaXMuc2Nyb2xsdmFsdWVtYXg9MDtpZihcImF1dG9cIj09dGhpcy5vcHQucnRsbW9kZSl7cj10aGlzLndpblswXT09d2luZG93P3RoaXMuYm9keTp0aGlzLndpbjt2YXIgcD1yLmNzcyhcIndyaXRpbmctbW9kZVwiKXx8ci5jc3MoXCItd2Via2l0LXdyaXRpbmctbW9kZVwiKXx8ci5jc3MoXCItbXMtd3JpdGluZy1tb2RlXCIpfHxyLmNzcyhcIi1tb3otd3JpdGluZy1tb2RlXCIpO1wiaG9yaXpvbnRhbC10YlwiPT1wfHxcImxyLXRiXCI9PXB8fFwiXCI9PXA/KHRoaXMuaXNydGxtb2RlPVxyXG5cInJ0bFwiPT1yLmNzcyhcImRpcmVjdGlvblwiKSx0aGlzLmlzdmVydGljYWw9ITEpOih0aGlzLmlzcnRsbW9kZT1cInZlcnRpY2FsLXJsXCI9PXB8fFwidGJcIj09cHx8XCJ0Yi1ybFwiPT1wfHxcInJsLXRiXCI9PXAsdGhpcy5pc3ZlcnRpY2FsPVwidmVydGljYWwtcmxcIj09cHx8XCJ0YlwiPT1wfHxcInRiLXJsXCI9PXApfWVsc2UgdGhpcy5pc3J0bG1vZGU9ITA9PT10aGlzLm9wdC5ydGxtb2RlLHRoaXMuaXN2ZXJ0aWNhbD0hMTt0aGlzLm9ic2VydmVyYm9keT10aGlzLm9ic2VydmVycmVtb3Zlcj10aGlzLm9ic2VydmVyPXRoaXMuc2Nyb2xsbW9tPXRoaXMuc2Nyb2xscnVubmluZz0hMTtkbyB0aGlzLmlkPVwiYXNjcmFpbFwiK1ArKzt3aGlsZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmlkKSk7dGhpcy5oYXNtb3VzZWZvY3VzPXRoaXMuaGFzZm9jdXM9dGhpcy56b29tYWN0aXZlPXRoaXMuem9vbT10aGlzLnNlbGVjdGlvbmRyYWc9dGhpcy5jdXJzb3JmcmVlemVkPXRoaXMuY3Vyc29yPXRoaXMucmFpbD1cclxuITE7dGhpcy52aXNpYmlsaXR5PSEwO3RoaXMuaGlkZGVuPXRoaXMubG9ja2VkPXRoaXMucmFpbHNsb2NrZWQ9ITE7dGhpcy5jdXJzb3JhY3RpdmU9ITA7dGhpcy53aGVlbHByZXZlbnRlZD0hMTt0aGlzLm92ZXJmbG93eD1hLm9wdC5vdmVyZmxvd3g7dGhpcy5vdmVyZmxvd3k9YS5vcHQub3ZlcmZsb3d5O3RoaXMubmF0aXZlc2Nyb2xsaW5nYXJlYT0hMTt0aGlzLmNoZWNrYXJlYT0wO3RoaXMuZXZlbnRzPVtdO3RoaXMuc2F2ZWQ9e307dGhpcy5kZWxheWxpc3Q9e307dGhpcy5zeW5jbGlzdD17fTt0aGlzLmxhc3RkZWx0YXk9dGhpcy5sYXN0ZGVsdGF4PTA7dGhpcy5kZXRlY3RlZD1SKCk7dmFyIGU9Zi5leHRlbmQoe30sdGhpcy5kZXRlY3RlZCk7dGhpcy5pc2h3c2Nyb2xsPSh0aGlzLmNhbmh3c2Nyb2xsPWUuaGFzdHJhbnNmb3JtJiZhLm9wdC5od2FjY2VsZXJhdGlvbikmJmEuaGFzd3JhcHBlcjt0aGlzLmhhc3JldmVyc2Vocj10aGlzLmlzcnRsbW9kZT90aGlzLmlzdmVydGljYWw/XHJcbiEoZS5pc3dlYmtpdHx8ZS5pc2llfHxlLmlzaWUxMSk6IShlLmlzd2Via2l0fHxlLmlzaWUmJiFlLmlzaWUxMCYmIWUuaXNpZTExKTohMTt0aGlzLmlzdG91Y2hjYXBhYmxlPSExO2UuY2FudG91Y2h8fCFlLmhhc3czY3RvdWNoJiYhZS5oYXNtc3RvdWNoPyFlLmNhbnRvdWNofHxlLmlzaW9zfHxlLmlzYW5kcm9pZHx8IWUuaXN3ZWJraXQmJiFlLmlzbW96aWxsYXx8KHRoaXMuaXN0b3VjaGNhcGFibGU9ITApOnRoaXMuaXN0b3VjaGNhcGFibGU9ITA7YS5vcHQuZW5hYmxlbW91c2Vsb2NrYXBpfHwoZS5oYXNtb3VzZWNhcHR1cmU9ITEsZS5oYXNwb2ludGVybG9jaz0hMSk7dGhpcy5kZWJvdW5jZWQ9ZnVuY3Rpb24oYixnLGMpe2EmJihhLmRlbGF5bGlzdFtiXXx8KGcuY2FsbChhKSxhLmRlbGF5bGlzdFtiXT17aDp2KGZ1bmN0aW9uKCl7YS5kZWxheWxpc3RbYl0uZm4uY2FsbChhKTthLmRlbGF5bGlzdFtiXT0hMX0sYyl9KSxhLmRlbGF5bGlzdFtiXS5mbj1nKX07dmFyIEk9ITE7dGhpcy5zeW5jaGVkPVxyXG5mdW5jdGlvbihiLGcpe2Euc3luY2xpc3RbYl09ZzsoZnVuY3Rpb24oKXtJfHwodihmdW5jdGlvbigpe2lmKGEpe0k9ITE7Zm9yKHZhciBiIGluIGEuc3luY2xpc3Qpe3ZhciBnPWEuc3luY2xpc3RbYl07ZyYmZy5jYWxsKGEpO2Euc3luY2xpc3RbYl09ITF9fX0pLEk9ITApfSkoKTtyZXR1cm4gYn07dGhpcy51bnN5bmNoZWQ9ZnVuY3Rpb24oYil7YS5zeW5jbGlzdFtiXSYmKGEuc3luY2xpc3RbYl09ITEpfTt0aGlzLmNzcz1mdW5jdGlvbihiLGcpe2Zvcih2YXIgYyBpbiBnKWEuc2F2ZWQuY3NzLnB1c2goW2IsYyxiLmNzcyhjKV0pLGIuY3NzKGMsZ1tjXSl9O3RoaXMuc2Nyb2xsVG9wPWZ1bmN0aW9uKGIpe3JldHVybiB2b2lkIDA9PT1iP2EuZ2V0U2Nyb2xsVG9wKCk6YS5zZXRTY3JvbGxUb3AoYil9O3RoaXMuc2Nyb2xsTGVmdD1mdW5jdGlvbihiKXtyZXR1cm4gdm9pZCAwPT09Yj9hLmdldFNjcm9sbExlZnQoKTphLnNldFNjcm9sbExlZnQoYil9O3ZhciBEPWZ1bmN0aW9uKGEsZyxcclxuYyxkLGUsZixrKXt0aGlzLnN0PWE7dGhpcy5lZD1nO3RoaXMuc3BkPWM7dGhpcy5wMT1kfHwwO3RoaXMucDI9ZXx8MTt0aGlzLnAzPWZ8fDA7dGhpcy5wND1rfHwxO3RoaXMudHM9KG5ldyBEYXRlKS5nZXRUaW1lKCk7dGhpcy5kZj10aGlzLmVkLXRoaXMuc3R9O0QucHJvdG90eXBlPXtCMjpmdW5jdGlvbihhKXtyZXR1cm4gMyphKmEqKDEtYSl9LEIzOmZ1bmN0aW9uKGEpe3JldHVybiAzKmEqKDEtYSkqKDEtYSl9LEI0OmZ1bmN0aW9uKGEpe3JldHVybigxLWEpKigxLWEpKigxLWEpfSxnZXROb3c6ZnVuY3Rpb24oKXt2YXIgYT0xLSgobmV3IERhdGUpLmdldFRpbWUoKS10aGlzLnRzKS90aGlzLnNwZCxnPXRoaXMuQjIoYSkrdGhpcy5CMyhhKSt0aGlzLkI0KGEpO3JldHVybiAwPmE/dGhpcy5lZDp0aGlzLnN0K01hdGgucm91bmQodGhpcy5kZipnKX0sdXBkYXRlOmZ1bmN0aW9uKGEsZyl7dGhpcy5zdD10aGlzLmdldE5vdygpO3RoaXMuZWQ9YTt0aGlzLnNwZD1nO3RoaXMudHM9KG5ldyBEYXRlKS5nZXRUaW1lKCk7XHJcbnRoaXMuZGY9dGhpcy5lZC10aGlzLnN0O3JldHVybiB0aGlzfX07aWYodGhpcy5pc2h3c2Nyb2xsKXt0aGlzLmRvYy50cmFuc2xhdGU9e3g6MCx5OjAsdHg6XCIwcHhcIix0eTpcIjBweFwifTtlLmhhc3RyYW5zbGF0ZTNkJiZlLmlzaW9zJiZ0aGlzLmRvYy5jc3MoXCItd2Via2l0LWJhY2tmYWNlLXZpc2liaWxpdHlcIixcImhpZGRlblwiKTt0aGlzLmdldFNjcm9sbFRvcD1mdW5jdGlvbihiKXtpZighYil7aWYoYj1rKCkpcmV0dXJuIDE2PT1iLmxlbmd0aD8tYlsxM106LWJbNV07aWYoYS50aW1lcnNjcm9sbCYmYS50aW1lcnNjcm9sbC5ieilyZXR1cm4gYS50aW1lcnNjcm9sbC5iei5nZXROb3coKX1yZXR1cm4gYS5kb2MudHJhbnNsYXRlLnl9O3RoaXMuZ2V0U2Nyb2xsTGVmdD1mdW5jdGlvbihiKXtpZighYil7aWYoYj1rKCkpcmV0dXJuIDE2PT1iLmxlbmd0aD8tYlsxMl06LWJbNF07aWYoYS50aW1lcnNjcm9sbCYmYS50aW1lcnNjcm9sbC5iaClyZXR1cm4gYS50aW1lcnNjcm9sbC5iaC5nZXROb3coKX1yZXR1cm4gYS5kb2MudHJhbnNsYXRlLnh9O1xyXG50aGlzLm5vdGlmeVNjcm9sbEV2ZW50PWZ1bmN0aW9uKGEpe3ZhciBnPWRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiVUlFdmVudHNcIik7Zy5pbml0VUlFdmVudChcInNjcm9sbFwiLCExLCEwLHdpbmRvdywxKTtnLm5pY2VldmVudD0hMDthLmRpc3BhdGNoRXZlbnQoZyl9O3ZhciB5PXRoaXMuaXNydGxtb2RlPzE6LTE7ZS5oYXN0cmFuc2xhdGUzZCYmYS5vcHQuZW5hYmxldHJhbnNsYXRlM2Q/KHRoaXMuc2V0U2Nyb2xsVG9wPWZ1bmN0aW9uKGIsZyl7YS5kb2MudHJhbnNsYXRlLnk9YjthLmRvYy50cmFuc2xhdGUudHk9LTEqYitcInB4XCI7YS5kb2MuY3NzKGUudHJzdHlsZSxcInRyYW5zbGF0ZTNkKFwiK2EuZG9jLnRyYW5zbGF0ZS50eCtcIixcIithLmRvYy50cmFuc2xhdGUudHkrXCIsMHB4KVwiKTtnfHxhLm5vdGlmeVNjcm9sbEV2ZW50KGEud2luWzBdKX0sdGhpcy5zZXRTY3JvbGxMZWZ0PWZ1bmN0aW9uKGIsZyl7YS5kb2MudHJhbnNsYXRlLng9YjthLmRvYy50cmFuc2xhdGUudHg9Yip5K1wicHhcIjthLmRvYy5jc3MoZS50cnN0eWxlLFxyXG5cInRyYW5zbGF0ZTNkKFwiK2EuZG9jLnRyYW5zbGF0ZS50eCtcIixcIithLmRvYy50cmFuc2xhdGUudHkrXCIsMHB4KVwiKTtnfHxhLm5vdGlmeVNjcm9sbEV2ZW50KGEud2luWzBdKX0pOih0aGlzLnNldFNjcm9sbFRvcD1mdW5jdGlvbihiLGcpe2EuZG9jLnRyYW5zbGF0ZS55PWI7YS5kb2MudHJhbnNsYXRlLnR5PS0xKmIrXCJweFwiO2EuZG9jLmNzcyhlLnRyc3R5bGUsXCJ0cmFuc2xhdGUoXCIrYS5kb2MudHJhbnNsYXRlLnR4K1wiLFwiK2EuZG9jLnRyYW5zbGF0ZS50eStcIilcIik7Z3x8YS5ub3RpZnlTY3JvbGxFdmVudChhLndpblswXSl9LHRoaXMuc2V0U2Nyb2xsTGVmdD1mdW5jdGlvbihiLGcpe2EuZG9jLnRyYW5zbGF0ZS54PWI7YS5kb2MudHJhbnNsYXRlLnR4PWIqeStcInB4XCI7YS5kb2MuY3NzKGUudHJzdHlsZSxcInRyYW5zbGF0ZShcIithLmRvYy50cmFuc2xhdGUudHgrXCIsXCIrYS5kb2MudHJhbnNsYXRlLnR5K1wiKVwiKTtnfHxhLm5vdGlmeVNjcm9sbEV2ZW50KGEud2luWzBdKX0pfWVsc2UgdGhpcy5nZXRTY3JvbGxUb3A9XHJcbmZ1bmN0aW9uKCl7cmV0dXJuIGEuZG9jc2Nyb2xsLnNjcm9sbFRvcCgpfSx0aGlzLnNldFNjcm9sbFRvcD1mdW5jdGlvbihiKXtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe2EmJmEuZG9jc2Nyb2xsLnNjcm9sbFRvcChiKX0sMSl9LHRoaXMuZ2V0U2Nyb2xsTGVmdD1mdW5jdGlvbigpe3JldHVybiBhLmhhc3JldmVyc2Vocj9hLmRldGVjdGVkLmlzbW96aWxsYT9hLnBhZ2UubWF4dy1NYXRoLmFicyhhLmRvY3Njcm9sbC5zY3JvbGxMZWZ0KCkpOmEucGFnZS5tYXh3LWEuZG9jc2Nyb2xsLnNjcm9sbExlZnQoKTphLmRvY3Njcm9sbC5zY3JvbGxMZWZ0KCl9LHRoaXMuc2V0U2Nyb2xsTGVmdD1mdW5jdGlvbihiKXtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe2lmKGEpcmV0dXJuIGEuaGFzcmV2ZXJzZWhyJiYoYj1hLmRldGVjdGVkLmlzbW96aWxsYT8tKGEucGFnZS5tYXh3LWIpOmEucGFnZS5tYXh3LWIpLGEuZG9jc2Nyb2xsLnNjcm9sbExlZnQoYil9LDEpfTt0aGlzLmdldFRhcmdldD1cclxuZnVuY3Rpb24oYSl7cmV0dXJuIGE/YS50YXJnZXQ/YS50YXJnZXQ6YS5zcmNFbGVtZW50P2Euc3JjRWxlbWVudDohMTohMX07dGhpcy5oYXNQYXJlbnQ9ZnVuY3Rpb24oYSxnKXtpZighYSlyZXR1cm4hMTtmb3IodmFyIGM9YS50YXJnZXR8fGEuc3JjRWxlbWVudHx8YXx8ITE7YyYmYy5pZCE9ZzspYz1jLnBhcmVudE5vZGV8fCExO3JldHVybiExIT09Y307dmFyIHo9e3RoaW46MSxtZWRpdW06Myx0aGljazo1fTt0aGlzLmdldERvY3VtZW50U2Nyb2xsT2Zmc2V0PWZ1bmN0aW9uKCl7cmV0dXJue3RvcDp3aW5kb3cucGFnZVlPZmZzZXR8fGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AsbGVmdDp3aW5kb3cucGFnZVhPZmZzZXR8fGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0fX07dGhpcy5nZXRPZmZzZXQ9ZnVuY3Rpb24oKXtpZihhLmlzZml4ZWQpe3ZhciBiPWEud2luLm9mZnNldCgpLGc9YS5nZXREb2N1bWVudFNjcm9sbE9mZnNldCgpO2IudG9wLT1nLnRvcDtcclxuYi5sZWZ0LT1nLmxlZnQ7cmV0dXJuIGJ9Yj1hLndpbi5vZmZzZXQoKTtpZighYS52aWV3cG9ydClyZXR1cm4gYjtnPWEudmlld3BvcnQub2Zmc2V0KCk7cmV0dXJue3RvcDpiLnRvcC1nLnRvcCxsZWZ0OmIubGVmdC1nLmxlZnR9fTt0aGlzLnVwZGF0ZVNjcm9sbEJhcj1mdW5jdGlvbihiKXt2YXIgZyxjLGU7aWYoYS5pc2h3c2Nyb2xsKWEucmFpbC5jc3Moe2hlaWdodDphLndpbi5pbm5lckhlaWdodCgpLShhLm9wdC5yYWlscGFkZGluZy50b3ArYS5vcHQucmFpbHBhZGRpbmcuYm90dG9tKX0pLGEucmFpbGgmJmEucmFpbGguY3NzKHt3aWR0aDphLndpbi5pbm5lcldpZHRoKCktKGEub3B0LnJhaWxwYWRkaW5nLmxlZnQrYS5vcHQucmFpbHBhZGRpbmcucmlnaHQpfSk7ZWxzZXt2YXIgZj1hLmdldE9mZnNldCgpO2c9Zi50b3A7Yz1mLmxlZnQtKGEub3B0LnJhaWxwYWRkaW5nLmxlZnQrYS5vcHQucmFpbHBhZGRpbmcucmlnaHQpO2crPWQoYS53aW4sXCJib3JkZXItdG9wLXdpZHRoXCIsITApO1xyXG5jKz1hLnJhaWwuYWxpZ24/YS53aW4ub3V0ZXJXaWR0aCgpLWQoYS53aW4sXCJib3JkZXItcmlnaHQtd2lkdGhcIiktYS5yYWlsLndpZHRoOmQoYS53aW4sXCJib3JkZXItbGVmdC13aWR0aFwiKTtpZihlPWEub3B0LnJhaWxvZmZzZXQpZS50b3AmJihnKz1lLnRvcCksZS5sZWZ0JiYoYys9ZS5sZWZ0KTthLnJhaWxzbG9ja2VkfHxhLnJhaWwuY3NzKHt0b3A6ZyxsZWZ0OmMsaGVpZ2h0OihiP2IuaDphLndpbi5pbm5lckhlaWdodCgpKS0oYS5vcHQucmFpbHBhZGRpbmcudG9wK2Eub3B0LnJhaWxwYWRkaW5nLmJvdHRvbSl9KTthLnpvb20mJmEuem9vbS5jc3Moe3RvcDpnKzEsbGVmdDoxPT1hLnJhaWwuYWxpZ24/Yy0yMDpjK2EucmFpbC53aWR0aCs0fSk7aWYoYS5yYWlsaCYmIWEucmFpbHNsb2NrZWQpe2c9Zi50b3A7Yz1mLmxlZnQ7aWYoZT1hLm9wdC5yYWlsaG9mZnNldCllLnRvcCYmKGcrPWUudG9wKSxlLmxlZnQmJihjKz1lLmxlZnQpO2I9YS5yYWlsaC5hbGlnbj9nK2QoYS53aW4sXCJib3JkZXItdG9wLXdpZHRoXCIsXHJcbiEwKSthLndpbi5pbm5lckhlaWdodCgpLWEucmFpbGguaGVpZ2h0OmcrZChhLndpbixcImJvcmRlci10b3Atd2lkdGhcIiwhMCk7Yys9ZChhLndpbixcImJvcmRlci1sZWZ0LXdpZHRoXCIpO2EucmFpbGguY3NzKHt0b3A6Yi0oYS5vcHQucmFpbHBhZGRpbmcudG9wK2Eub3B0LnJhaWxwYWRkaW5nLmJvdHRvbSksbGVmdDpjLHdpZHRoOmEucmFpbGgud2lkdGh9KX19fTt0aGlzLmRvUmFpbENsaWNrPWZ1bmN0aW9uKGIsZyxjKXt2YXIgZDthLnJhaWxzbG9ja2VkfHwoYS5jYW5jZWxFdmVudChiKSxnPyhnPWM/YS5kb1Njcm9sbExlZnQ6YS5kb1Njcm9sbFRvcCxkPWM/KGIucGFnZVgtYS5yYWlsaC5vZmZzZXQoKS5sZWZ0LWEuY3Vyc29yd2lkdGgvMikqYS5zY3JvbGxyYXRpby54OihiLnBhZ2VZLWEucmFpbC5vZmZzZXQoKS50b3AtYS5jdXJzb3JoZWlnaHQvMikqYS5zY3JvbGxyYXRpby55LGcoZCkpOihnPWM/YS5kb1Njcm9sbExlZnRCeTphLmRvU2Nyb2xsQnksZD1jP2Euc2Nyb2xsLng6YS5zY3JvbGwueSxcclxuYj1jP2IucGFnZVgtYS5yYWlsaC5vZmZzZXQoKS5sZWZ0OmIucGFnZVktYS5yYWlsLm9mZnNldCgpLnRvcCxjPWM/YS52aWV3Lnc6YS52aWV3LmgsZyhkPj1iP2M6LWMpKSl9O2EuaGFzYW5pbWF0aW9uZnJhbWU9djthLmhhc2NhbmNlbGFuaW1hdGlvbmZyYW1lPXc7YS5oYXNhbmltYXRpb25mcmFtZT9hLmhhc2NhbmNlbGFuaW1hdGlvbmZyYW1lfHwodz1mdW5jdGlvbigpe2EuY2FuY2VsQW5pbWF0aW9uRnJhbWU9ITB9KToodj1mdW5jdGlvbihhKXtyZXR1cm4gc2V0VGltZW91dChhLDE1LU1hdGguZmxvb3IoK25ldyBEYXRlLzFFMyklMTYpfSx3PWNsZWFyVGltZW91dCk7dGhpcy5pbml0PWZ1bmN0aW9uKCl7YS5zYXZlZC5jc3M9W107aWYoZS5pc2llN21vYmlsZXx8ZS5pc29wZXJhbWluaSlyZXR1cm4hMDtlLmhhc21zdG91Y2gmJmEuY3NzKGEuaXNwYWdlP2YoXCJodG1sXCIpOmEud2luLHtfdG91Y2hhY3Rpb246XCJub25lXCJ9KTt2YXIgYj1lLmlzbW9kZXJuaWV8fGUuaXNpZTEwP3tcIi1tcy1vdmVyZmxvdy1zdHlsZVwiOlwibm9uZVwifTpcclxue1wib3ZlcmZsb3cteVwiOlwiaGlkZGVuXCJ9O2EuemluZGV4PVwiYXV0b1wiO2EuemluZGV4PWEuaXNwYWdlfHxcImF1dG9cIiE9YS5vcHQuemluZGV4P2Eub3B0LnppbmRleDpsKCl8fFwiYXV0b1wiOyFhLmlzcGFnZSYmXCJhdXRvXCIhPWEuemluZGV4JiZhLnppbmRleD5BJiYoQT1hLnppbmRleCk7YS5pc2llJiYwPT1hLnppbmRleCYmXCJhdXRvXCI9PWEub3B0LnppbmRleCYmKGEuemluZGV4PVwiYXV0b1wiKTtpZighYS5pc3BhZ2V8fCFlLmNhbnRvdWNoJiYhZS5pc2llb2xkJiYhZS5pc2llOW1vYmlsZSl7dmFyIGM9YS5kb2NzY3JvbGw7YS5pc3BhZ2UmJihjPWEuaGFzd3JhcHBlcj9hLndpbjphLmRvYyk7ZS5pc2llOW1vYmlsZXx8YS5jc3MoYyxiKTthLmlzcGFnZSYmZS5pc2llNyYmKFwiQk9EWVwiPT1hLmRvY1swXS5ub2RlTmFtZT9hLmNzcyhmKFwiaHRtbFwiKSx7XCJvdmVyZmxvdy15XCI6XCJoaWRkZW5cIn0pOlwiSFRNTFwiPT1hLmRvY1swXS5ub2RlTmFtZSYmYS5jc3MoZihcImJvZHlcIiksYikpOyFlLmlzaW9zfHxcclxuYS5pc3BhZ2V8fGEuaGFzd3JhcHBlcnx8YS5jc3MoZihcImJvZHlcIikse1wiLXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmdcIjpcInRvdWNoXCJ9KTt2YXIgZD1mKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpO2QuY3NzKHtwb3NpdGlvbjpcInJlbGF0aXZlXCIsdG9wOjAsXCJmbG9hdFwiOlwicmlnaHRcIix3aWR0aDphLm9wdC5jdXJzb3J3aWR0aCxoZWlnaHQ6MCxcImJhY2tncm91bmQtY29sb3JcIjphLm9wdC5jdXJzb3Jjb2xvcixib3JkZXI6YS5vcHQuY3Vyc29yYm9yZGVyLFwiYmFja2dyb3VuZC1jbGlwXCI6XCJwYWRkaW5nLWJveFwiLFwiLXdlYmtpdC1ib3JkZXItcmFkaXVzXCI6YS5vcHQuY3Vyc29yYm9yZGVycmFkaXVzLFwiLW1vei1ib3JkZXItcmFkaXVzXCI6YS5vcHQuY3Vyc29yYm9yZGVycmFkaXVzLFwiYm9yZGVyLXJhZGl1c1wiOmEub3B0LmN1cnNvcmJvcmRlcnJhZGl1c30pO2QuaGJvcmRlcj1wYXJzZUZsb2F0KGQub3V0ZXJIZWlnaHQoKS1kLmlubmVySGVpZ2h0KCkpO2QuYWRkQ2xhc3MoXCJuaWNlc2Nyb2xsLWN1cnNvcnNcIik7XHJcbmEuY3Vyc29yPWQ7dmFyIG09Zihkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKTttLmF0dHIoXCJpZFwiLGEuaWQpO20uYWRkQ2xhc3MoXCJuaWNlc2Nyb2xsLXJhaWxzIG5pY2VzY3JvbGwtcmFpbHMtdnJcIik7dmFyIGssaCxwPVtcImxlZnRcIixcInJpZ2h0XCIsXCJ0b3BcIixcImJvdHRvbVwiXSxMO2ZvcihMIGluIHApaD1wW0xdLChrPWEub3B0LnJhaWxwYWRkaW5nW2hdKT9tLmNzcyhcInBhZGRpbmctXCIraCxrK1wicHhcIik6YS5vcHQucmFpbHBhZGRpbmdbaF09MDttLmFwcGVuZChkKTttLndpZHRoPU1hdGgubWF4KHBhcnNlRmxvYXQoYS5vcHQuY3Vyc29yd2lkdGgpLGQub3V0ZXJXaWR0aCgpKTttLmNzcyh7d2lkdGg6bS53aWR0aCtcInB4XCIsekluZGV4OmEuemluZGV4LGJhY2tncm91bmQ6YS5vcHQuYmFja2dyb3VuZCxjdXJzb3I6XCJkZWZhdWx0XCJ9KTttLnZpc2liaWxpdHk9ITA7bS5zY3JvbGxhYmxlPSEwO20uYWxpZ249XCJsZWZ0XCI9PWEub3B0LnJhaWxhbGlnbj8wOjE7YS5yYWlsPW07ZD1hLnJhaWwuZHJhZz1cclxuITE7IWEub3B0LmJveHpvb218fGEuaXNwYWdlfHxlLmlzaWVvbGR8fChkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksYS5iaW5kKGQsXCJjbGlja1wiLGEuZG9ab29tKSxhLmJpbmQoZCxcIm1vdXNlZW50ZXJcIixmdW5jdGlvbigpe2Euem9vbS5jc3MoXCJvcGFjaXR5XCIsYS5vcHQuY3Vyc29yb3BhY2l0eW1heCl9KSxhLmJpbmQoZCxcIm1vdXNlbGVhdmVcIixmdW5jdGlvbigpe2Euem9vbS5jc3MoXCJvcGFjaXR5XCIsYS5vcHQuY3Vyc29yb3BhY2l0eW1pbil9KSxhLnpvb209ZihkKSxhLnpvb20uY3NzKHtjdXJzb3I6XCJwb2ludGVyXCIsekluZGV4OmEuemluZGV4LGJhY2tncm91bmRJbWFnZTpcInVybChcIithLm9wdC5zY3JpcHRwYXRoK1wiem9vbWljby5wbmcpXCIsaGVpZ2h0OjE4LHdpZHRoOjE4LGJhY2tncm91bmRQb3NpdGlvbjpcIjBweCAwcHhcIn0pLGEub3B0LmRibGNsaWNrem9vbSYmYS5iaW5kKGEud2luLFwiZGJsY2xpY2tcIixhLmRvWm9vbSksZS5jYW50b3VjaCYmYS5vcHQuZ2VzdHVyZXpvb20mJlxyXG4oYS5vbmdlc3R1cmV6b29tPWZ1bmN0aW9uKGIpezEuNTxiLnNjYWxlJiZhLmRvWm9vbUluKGIpOy44PmIuc2NhbGUmJmEuZG9ab29tT3V0KGIpO3JldHVybiBhLmNhbmNlbEV2ZW50KGIpfSxhLmJpbmQoYS53aW4sXCJnZXN0dXJlZW5kXCIsYS5vbmdlc3R1cmV6b29tKSkpO2EucmFpbGg9ITE7dmFyIG47YS5vcHQuaG9yaXpyYWlsZW5hYmxlZCYmKGEuY3NzKGMse292ZXJmbG93WDpcImhpZGRlblwifSksZD1mKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpLGQuY3NzKHtwb3NpdGlvbjpcImFic29sdXRlXCIsdG9wOjAsaGVpZ2h0OmEub3B0LmN1cnNvcndpZHRoLHdpZHRoOjAsYmFja2dyb3VuZENvbG9yOmEub3B0LmN1cnNvcmNvbG9yLGJvcmRlcjphLm9wdC5jdXJzb3Jib3JkZXIsYmFja2dyb3VuZENsaXA6XCJwYWRkaW5nLWJveFwiLFwiLXdlYmtpdC1ib3JkZXItcmFkaXVzXCI6YS5vcHQuY3Vyc29yYm9yZGVycmFkaXVzLFwiLW1vei1ib3JkZXItcmFkaXVzXCI6YS5vcHQuY3Vyc29yYm9yZGVycmFkaXVzLFxyXG5cImJvcmRlci1yYWRpdXNcIjphLm9wdC5jdXJzb3Jib3JkZXJyYWRpdXN9KSxlLmlzaWVvbGQmJmQuY3NzKFwib3ZlcmZsb3dcIixcImhpZGRlblwiKSxkLndib3JkZXI9cGFyc2VGbG9hdChkLm91dGVyV2lkdGgoKS1kLmlubmVyV2lkdGgoKSksZC5hZGRDbGFzcyhcIm5pY2VzY3JvbGwtY3Vyc29yc1wiKSxhLmN1cnNvcmg9ZCxuPWYoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSksbi5hdHRyKFwiaWRcIixhLmlkK1wiLWhyXCIpLG4uYWRkQ2xhc3MoXCJuaWNlc2Nyb2xsLXJhaWxzIG5pY2VzY3JvbGwtcmFpbHMtaHJcIiksbi5oZWlnaHQ9TWF0aC5tYXgocGFyc2VGbG9hdChhLm9wdC5jdXJzb3J3aWR0aCksZC5vdXRlckhlaWdodCgpKSxuLmNzcyh7aGVpZ2h0Om4uaGVpZ2h0K1wicHhcIix6SW5kZXg6YS56aW5kZXgsYmFja2dyb3VuZDphLm9wdC5iYWNrZ3JvdW5kfSksbi5hcHBlbmQoZCksbi52aXNpYmlsaXR5PSEwLG4uc2Nyb2xsYWJsZT0hMCxuLmFsaWduPVwidG9wXCI9PWEub3B0LnJhaWx2YWxpZ24/XHJcbjA6MSxhLnJhaWxoPW4sYS5yYWlsaC5kcmFnPSExKTthLmlzcGFnZT8obS5jc3Moe3Bvc2l0aW9uOlwiZml4ZWRcIix0b3A6MCxoZWlnaHQ6XCIxMDAlXCJ9KSxtLmFsaWduP20uY3NzKHtyaWdodDowfSk6bS5jc3Moe2xlZnQ6MH0pLGEuYm9keS5hcHBlbmQobSksYS5yYWlsaCYmKG4uY3NzKHtwb3NpdGlvbjpcImZpeGVkXCIsbGVmdDowLHdpZHRoOlwiMTAwJVwifSksbi5hbGlnbj9uLmNzcyh7Ym90dG9tOjB9KTpuLmNzcyh7dG9wOjB9KSxhLmJvZHkuYXBwZW5kKG4pKSk6KGEuaXNod3Njcm9sbD8oXCJzdGF0aWNcIj09YS53aW4uY3NzKFwicG9zaXRpb25cIikmJmEuY3NzKGEud2luLHtwb3NpdGlvbjpcInJlbGF0aXZlXCJ9KSxjPVwiSFRNTFwiPT1hLndpblswXS5ub2RlTmFtZT9hLmJvZHk6YS53aW4sZihjKS5zY3JvbGxUb3AoMCkuc2Nyb2xsTGVmdCgwKSxhLnpvb20mJihhLnpvb20uY3NzKHtwb3NpdGlvbjpcImFic29sdXRlXCIsdG9wOjEscmlnaHQ6MCxcIm1hcmdpbi1yaWdodFwiOm0ud2lkdGgrNH0pLGMuYXBwZW5kKGEuem9vbSkpLFxyXG5tLmNzcyh7cG9zaXRpb246XCJhYnNvbHV0ZVwiLHRvcDowfSksbS5hbGlnbj9tLmNzcyh7cmlnaHQ6MH0pOm0uY3NzKHtsZWZ0OjB9KSxjLmFwcGVuZChtKSxuJiYobi5jc3Moe3Bvc2l0aW9uOlwiYWJzb2x1dGVcIixsZWZ0OjAsYm90dG9tOjB9KSxuLmFsaWduP24uY3NzKHtib3R0b206MH0pOm4uY3NzKHt0b3A6MH0pLGMuYXBwZW5kKG4pKSk6KGEuaXNmaXhlZD1cImZpeGVkXCI9PWEud2luLmNzcyhcInBvc2l0aW9uXCIpLGM9YS5pc2ZpeGVkP1wiZml4ZWRcIjpcImFic29sdXRlXCIsYS5pc2ZpeGVkfHwoYS52aWV3cG9ydD1hLmdldFZpZXdwb3J0KGEud2luWzBdKSksYS52aWV3cG9ydCYmKGEuYm9keT1hLnZpZXdwb3J0LDA9PS9maXhlZHxhYnNvbHV0ZS8udGVzdChhLnZpZXdwb3J0LmNzcyhcInBvc2l0aW9uXCIpKSYmYS5jc3MoYS52aWV3cG9ydCx7cG9zaXRpb246XCJyZWxhdGl2ZVwifSkpLG0uY3NzKHtwb3NpdGlvbjpjfSksYS56b29tJiZhLnpvb20uY3NzKHtwb3NpdGlvbjpjfSksYS51cGRhdGVTY3JvbGxCYXIoKSxcclxuYS5ib2R5LmFwcGVuZChtKSxhLnpvb20mJmEuYm9keS5hcHBlbmQoYS56b29tKSxhLnJhaWxoJiYobi5jc3Moe3Bvc2l0aW9uOmN9KSxhLmJvZHkuYXBwZW5kKG4pKSksZS5pc2lvcyYmYS5jc3MoYS53aW4se1wiLXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yXCI6XCJyZ2JhKDAsMCwwLDApXCIsXCItd2Via2l0LXRvdWNoLWNhbGxvdXRcIjpcIm5vbmVcIn0pLGUuaXNpZSYmYS5vcHQuZGlzYWJsZW91dGxpbmUmJmEud2luLmF0dHIoXCJoaWRlRm9jdXNcIixcInRydWVcIiksZS5pc3dlYmtpdCYmYS5vcHQuZGlzYWJsZW91dGxpbmUmJmEud2luLmNzcyhcIm91dGxpbmVcIixcIm5vbmVcIikpOyExPT09YS5vcHQuYXV0b2hpZGVtb2RlPyhhLmF1dG9oaWRlZG9tPSExLGEucmFpbC5jc3Moe29wYWNpdHk6YS5vcHQuY3Vyc29yb3BhY2l0eW1heH0pLGEucmFpbGgmJmEucmFpbGguY3NzKHtvcGFjaXR5OmEub3B0LmN1cnNvcm9wYWNpdHltYXh9KSk6ITA9PT1hLm9wdC5hdXRvaGlkZW1vZGV8fFwibGVhdmVcIj09PWEub3B0LmF1dG9oaWRlbW9kZT9cclxuKGEuYXV0b2hpZGVkb209ZigpLmFkZChhLnJhaWwpLGUuaXNpZTgmJihhLmF1dG9oaWRlZG9tPWEuYXV0b2hpZGVkb20uYWRkKGEuY3Vyc29yKSksYS5yYWlsaCYmKGEuYXV0b2hpZGVkb209YS5hdXRvaGlkZWRvbS5hZGQoYS5yYWlsaCkpLGEucmFpbGgmJmUuaXNpZTgmJihhLmF1dG9oaWRlZG9tPWEuYXV0b2hpZGVkb20uYWRkKGEuY3Vyc29yaCkpKTpcInNjcm9sbFwiPT1hLm9wdC5hdXRvaGlkZW1vZGU/KGEuYXV0b2hpZGVkb209ZigpLmFkZChhLnJhaWwpLGEucmFpbGgmJihhLmF1dG9oaWRlZG9tPWEuYXV0b2hpZGVkb20uYWRkKGEucmFpbGgpKSk6XCJjdXJzb3JcIj09YS5vcHQuYXV0b2hpZGVtb2RlPyhhLmF1dG9oaWRlZG9tPWYoKS5hZGQoYS5jdXJzb3IpLGEucmFpbGgmJihhLmF1dG9oaWRlZG9tPWEuYXV0b2hpZGVkb20uYWRkKGEuY3Vyc29yaCkpKTpcImhpZGRlblwiPT1hLm9wdC5hdXRvaGlkZW1vZGUmJihhLmF1dG9oaWRlZG9tPSExLGEuaGlkZSgpLGEucmFpbHNsb2NrZWQ9XHJcbiExKTtpZihlLmlzaWU5bW9iaWxlKWEuc2Nyb2xsbW9tPW5ldyBNKGEpLGEub25tYW5nb3RvdWNoPWZ1bmN0aW9uKCl7dmFyIGI9YS5nZXRTY3JvbGxUb3AoKSxjPWEuZ2V0U2Nyb2xsTGVmdCgpO2lmKGI9PWEuc2Nyb2xsbW9tLmxhc3RzY3JvbGx5JiZjPT1hLnNjcm9sbG1vbS5sYXN0c2Nyb2xseClyZXR1cm4hMDt2YXIgZz1iLWEubWFuZ290b3VjaC5zeSxkPWMtYS5tYW5nb3RvdWNoLnN4O2lmKDAhPU1hdGgucm91bmQoTWF0aC5zcXJ0KE1hdGgucG93KGQsMikrTWF0aC5wb3coZywyKSkpKXt2YXIgZT0wPmc/LTE6MSxmPTA+ZD8tMToxLHU9K25ldyBEYXRlO2EubWFuZ290b3VjaC5sYXp5JiZjbGVhclRpbWVvdXQoYS5tYW5nb3RvdWNoLmxhenkpOzgwPHUtYS5tYW5nb3RvdWNoLnRtfHxhLm1hbmdvdG91Y2guZHJ5IT1lfHxhLm1hbmdvdG91Y2guZHJ4IT1mPyhhLnNjcm9sbG1vbS5zdG9wKCksYS5zY3JvbGxtb20ucmVzZXQoYyxiKSxhLm1hbmdvdG91Y2guc3k9YixhLm1hbmdvdG91Y2gubHk9XHJcbmIsYS5tYW5nb3RvdWNoLnN4PWMsYS5tYW5nb3RvdWNoLmx4PWMsYS5tYW5nb3RvdWNoLmRyeT1lLGEubWFuZ290b3VjaC5kcng9ZixhLm1hbmdvdG91Y2gudG09dSk6KGEuc2Nyb2xsbW9tLnN0b3AoKSxhLnNjcm9sbG1vbS51cGRhdGUoYS5tYW5nb3RvdWNoLnN4LWQsYS5tYW5nb3RvdWNoLnN5LWcpLGEubWFuZ290b3VjaC50bT11LGc9TWF0aC5tYXgoTWF0aC5hYnMoYS5tYW5nb3RvdWNoLmx5LWIpLE1hdGguYWJzKGEubWFuZ290b3VjaC5seC1jKSksYS5tYW5nb3RvdWNoLmx5PWIsYS5tYW5nb3RvdWNoLmx4PWMsMjxnJiYoYS5tYW5nb3RvdWNoLmxhenk9c2V0VGltZW91dChmdW5jdGlvbigpe2EubWFuZ290b3VjaC5sYXp5PSExO2EubWFuZ290b3VjaC5kcnk9MDthLm1hbmdvdG91Y2guZHJ4PTA7YS5tYW5nb3RvdWNoLnRtPTA7YS5zY3JvbGxtb20uZG9Nb21lbnR1bSgzMCl9LDEwMCkpKX19LG09YS5nZXRTY3JvbGxUb3AoKSxuPWEuZ2V0U2Nyb2xsTGVmdCgpLGEubWFuZ290b3VjaD1cclxue3N5Om0sbHk6bSxkcnk6MCxzeDpuLGx4Om4sZHJ4OjAsbGF6eTohMSx0bTowfSxhLmJpbmQoYS5kb2NzY3JvbGwsXCJzY3JvbGxcIixhLm9ubWFuZ290b3VjaCk7ZWxzZXtpZihlLmNhbnRvdWNofHxhLmlzdG91Y2hjYXBhYmxlfHxhLm9wdC50b3VjaGJlaGF2aW9yfHxlLmhhc21zdG91Y2gpe2Euc2Nyb2xsbW9tPW5ldyBNKGEpO2Eub250b3VjaHN0YXJ0PWZ1bmN0aW9uKGIpe2lmKGIucG9pbnRlclR5cGUmJjIhPWIucG9pbnRlclR5cGUmJlwidG91Y2hcIiE9Yi5wb2ludGVyVHlwZSlyZXR1cm4hMTthLmhhc21vdmluZz0hMTtpZighYS5yYWlsc2xvY2tlZCl7dmFyIGM7aWYoZS5oYXNtc3RvdWNoKWZvcihjPWIudGFyZ2V0P2IudGFyZ2V0OiExO2M7KXt2YXIgZz1mKGMpLmdldE5pY2VTY3JvbGwoKTtpZigwPGcubGVuZ3RoJiZnWzBdLm1lPT1hLm1lKWJyZWFrO2lmKDA8Zy5sZW5ndGgpcmV0dXJuITE7aWYoXCJESVZcIj09Yy5ub2RlTmFtZSYmYy5pZD09YS5pZClicmVhaztjPWMucGFyZW50Tm9kZT9cclxuYy5wYXJlbnROb2RlOiExfWEuY2FuY2VsU2Nyb2xsKCk7aWYoKGM9YS5nZXRUYXJnZXQoYikpJiYvSU5QVVQvaS50ZXN0KGMubm9kZU5hbWUpJiYvcmFuZ2UvaS50ZXN0KGMudHlwZSkpcmV0dXJuIGEuc3RvcFByb3BhZ2F0aW9uKGIpOyEoXCJjbGllbnRYXCJpbiBiKSYmXCJjaGFuZ2VkVG91Y2hlc1wiaW4gYiYmKGIuY2xpZW50WD1iLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFgsYi5jbGllbnRZPWIuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WSk7YS5mb3JjZXNjcmVlbiYmKGc9YixiPXtvcmlnaW5hbDpiLm9yaWdpbmFsP2Iub3JpZ2luYWw6Yn0sYi5jbGllbnRYPWcuc2NyZWVuWCxiLmNsaWVudFk9Zy5zY3JlZW5ZKTthLnJhaWwuZHJhZz17eDpiLmNsaWVudFgseTpiLmNsaWVudFksc3g6YS5zY3JvbGwueCxzeTphLnNjcm9sbC55LHN0OmEuZ2V0U2Nyb2xsVG9wKCksc2w6YS5nZXRTY3JvbGxMZWZ0KCkscHQ6MixkbDohMX07aWYoYS5pc3BhZ2V8fCFhLm9wdC5kaXJlY3Rpb25sb2NrZGVhZHpvbmUpYS5yYWlsLmRyYWcuZGw9XHJcblwiZlwiO2Vsc2V7dmFyIGc9Zih3aW5kb3cpLndpZHRoKCksZD1mKHdpbmRvdykuaGVpZ2h0KCksZD1NYXRoLm1heCgwLE1hdGgubWF4KGRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0LGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQpLWQpLGc9TWF0aC5tYXgoMCxNYXRoLm1heChkb2N1bWVudC5ib2R5LnNjcm9sbFdpZHRoLGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxXaWR0aCktZyk7YS5yYWlsLmRyYWcuY2s9IWEucmFpbC5zY3JvbGxhYmxlJiZhLnJhaWxoLnNjcm9sbGFibGU/MDxkP1widlwiOiExOmEucmFpbC5zY3JvbGxhYmxlJiYhYS5yYWlsaC5zY3JvbGxhYmxlPzA8Zz9cImhcIjohMTohMTthLnJhaWwuZHJhZy5ja3x8KGEucmFpbC5kcmFnLmRsPVwiZlwiKX1hLm9wdC50b3VjaGJlaGF2aW9yJiZhLmlzaWZyYW1lJiZlLmlzaWUmJihnPWEud2luLnBvc2l0aW9uKCksYS5yYWlsLmRyYWcueCs9Zy5sZWZ0LGEucmFpbC5kcmFnLnkrPWcudG9wKTthLmhhc21vdmluZz1cclxuITE7YS5sYXN0bW91c2V1cD0hMTthLnNjcm9sbG1vbS5yZXNldChiLmNsaWVudFgsYi5jbGllbnRZKTtpZighZS5jYW50b3VjaCYmIXRoaXMuaXN0b3VjaGNhcGFibGUmJiFiLnBvaW50ZXJUeXBlKXtpZighY3x8IS9JTlBVVHxTRUxFQ1R8VEVYVEFSRUEvaS50ZXN0KGMubm9kZU5hbWUpKXJldHVybiFhLmlzcGFnZSYmZS5oYXNtb3VzZWNhcHR1cmUmJmMuc2V0Q2FwdHVyZSgpLGEub3B0LnRvdWNoYmVoYXZpb3I/KGMub25jbGljayYmIWMuX29uY2xpY2smJihjLl9vbmNsaWNrPWMub25jbGljayxjLm9uY2xpY2s9ZnVuY3Rpb24oYil7aWYoYS5oYXNtb3ZpbmcpcmV0dXJuITE7Yy5fb25jbGljay5jYWxsKHRoaXMsYil9KSxhLmNhbmNlbEV2ZW50KGIpKTphLnN0b3BQcm9wYWdhdGlvbihiKTsvU1VCTUlUfENBTkNFTHxCVVRUT04vaS50ZXN0KGYoYykuYXR0cihcInR5cGVcIikpJiYocGM9e3RnOmMsY2xpY2s6ITF9LGEucHJldmVudGNsaWNrPXBjKX19fTthLm9udG91Y2hlbmQ9ZnVuY3Rpb24oYil7aWYoIWEucmFpbC5kcmFnKXJldHVybiEwO1xyXG5pZigyPT1hLnJhaWwuZHJhZy5wdCl7aWYoYi5wb2ludGVyVHlwZSYmMiE9Yi5wb2ludGVyVHlwZSYmXCJ0b3VjaFwiIT1iLnBvaW50ZXJUeXBlKXJldHVybiExO2Euc2Nyb2xsbW9tLmRvTW9tZW50dW0oKTthLnJhaWwuZHJhZz0hMTtpZihhLmhhc21vdmluZyYmKGEubGFzdG1vdXNldXA9ITAsYS5oaWRlQ3Vyc29yKCksZS5oYXNtb3VzZWNhcHR1cmUmJmRvY3VtZW50LnJlbGVhc2VDYXB0dXJlKCksIWUuY2FudG91Y2gpKXJldHVybiBhLmNhbmNlbEV2ZW50KGIpfWVsc2UgaWYoMT09YS5yYWlsLmRyYWcucHQpcmV0dXJuIGEub25tb3VzZXVwKGIpfTt2YXIgcT1hLm9wdC50b3VjaGJlaGF2aW9yJiZhLmlzaWZyYW1lJiYhZS5oYXNtb3VzZWNhcHR1cmU7YS5vbnRvdWNobW92ZT1mdW5jdGlvbihiLGMpe2lmKCFhLnJhaWwuZHJhZ3x8Yi50YXJnZXRUb3VjaGVzJiZhLm9wdC5wcmV2ZW50bXVsdGl0b3VjaHNjcm9sbGluZyYmMTxiLnRhcmdldFRvdWNoZXMubGVuZ3RofHxiLnBvaW50ZXJUeXBlJiZcclxuMiE9Yi5wb2ludGVyVHlwZSYmXCJ0b3VjaFwiIT1iLnBvaW50ZXJUeXBlKXJldHVybiExO2lmKDI9PWEucmFpbC5kcmFnLnB0KXtpZihlLmNhbnRvdWNoJiZlLmlzaW9zJiZ2b2lkIDA9PT1iLm9yaWdpbmFsKXJldHVybiEwO2EuaGFzbW92aW5nPSEwO2EucHJldmVudGNsaWNrJiYhYS5wcmV2ZW50Y2xpY2suY2xpY2smJihhLnByZXZlbnRjbGljay5jbGljaz1hLnByZXZlbnRjbGljay50Zy5vbmNsaWNrfHwhMSxhLnByZXZlbnRjbGljay50Zy5vbmNsaWNrPWEub25wcmV2ZW50Y2xpY2spO2I9Zi5leHRlbmQoe29yaWdpbmFsOmJ9LGIpO1wiY2hhbmdlZFRvdWNoZXNcImluIGImJihiLmNsaWVudFg9Yi5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYLGIuY2xpZW50WT1iLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFkpO2lmKGEuZm9yY2VzY3JlZW4pe3ZhciBnPWI7Yj17b3JpZ2luYWw6Yi5vcmlnaW5hbD9iLm9yaWdpbmFsOmJ9O2IuY2xpZW50WD1nLnNjcmVlblg7Yi5jbGllbnRZPWcuc2NyZWVuWX12YXIgZCxcclxuZz1kPTA7cSYmIWMmJihkPWEud2luLnBvc2l0aW9uKCksZz0tZC5sZWZ0LGQ9LWQudG9wKTt2YXIgdT1iLmNsaWVudFkrZDtkPXUtYS5yYWlsLmRyYWcueTt2YXIgbT1iLmNsaWVudFgrZyxrPW0tYS5yYWlsLmRyYWcueCxoPWEucmFpbC5kcmFnLnN0LWQ7YS5pc2h3c2Nyb2xsJiZhLm9wdC5ib3VuY2VzY3JvbGw/MD5oP2g9TWF0aC5yb3VuZChoLzIpOmg+YS5wYWdlLm1heGgmJihoPWEucGFnZS5tYXhoK01hdGgucm91bmQoKGgtYS5wYWdlLm1heGgpLzIpKTooMD5oJiYodT1oPTApLGg+YS5wYWdlLm1heGgmJihoPWEucGFnZS5tYXhoLHU9MCkpO3ZhciBsO2EucmFpbGgmJmEucmFpbGguc2Nyb2xsYWJsZSYmKGw9YS5pc3J0bG1vZGU/ay1hLnJhaWwuZHJhZy5zbDphLnJhaWwuZHJhZy5zbC1rLGEuaXNod3Njcm9sbCYmYS5vcHQuYm91bmNlc2Nyb2xsPzA+bD9sPU1hdGgucm91bmQobC8yKTpsPmEucGFnZS5tYXh3JiYobD1hLnBhZ2UubWF4dytNYXRoLnJvdW5kKChsLWEucGFnZS5tYXh3KS9cclxuMikpOigwPmwmJihtPWw9MCksbD5hLnBhZ2UubWF4dyYmKGw9YS5wYWdlLm1heHcsbT0wKSkpO2c9ITE7aWYoYS5yYWlsLmRyYWcuZGwpZz0hMCxcInZcIj09YS5yYWlsLmRyYWcuZGw/bD1hLnJhaWwuZHJhZy5zbDpcImhcIj09YS5yYWlsLmRyYWcuZGwmJihoPWEucmFpbC5kcmFnLnN0KTtlbHNle2Q9TWF0aC5hYnMoZCk7dmFyIGs9TWF0aC5hYnMoayksQz1hLm9wdC5kaXJlY3Rpb25sb2NrZGVhZHpvbmU7aWYoXCJ2XCI9PWEucmFpbC5kcmFnLmNrKXtpZihkPkMmJms8PS4zKmQpcmV0dXJuIGEucmFpbC5kcmFnPSExLCEwO2s+QyYmKGEucmFpbC5kcmFnLmRsPVwiZlwiLGYoXCJib2R5XCIpLnNjcm9sbFRvcChmKFwiYm9keVwiKS5zY3JvbGxUb3AoKSkpfWVsc2UgaWYoXCJoXCI9PWEucmFpbC5kcmFnLmNrKXtpZihrPkMmJmQ8PS4zKmspcmV0dXJuIGEucmFpbC5kcmFnPSExLCEwO2Q+QyYmKGEucmFpbC5kcmFnLmRsPVwiZlwiLGYoXCJib2R5XCIpLnNjcm9sbExlZnQoZihcImJvZHlcIikuc2Nyb2xsTGVmdCgpKSl9fWEuc3luY2hlZChcInRvdWNobW92ZVwiLFxyXG5mdW5jdGlvbigpe2EucmFpbC5kcmFnJiYyPT1hLnJhaWwuZHJhZy5wdCYmKGEucHJlcGFyZVRyYW5zaXRpb24mJmEucHJlcGFyZVRyYW5zaXRpb24oMCksYS5yYWlsLnNjcm9sbGFibGUmJmEuc2V0U2Nyb2xsVG9wKGgpLGEuc2Nyb2xsbW9tLnVwZGF0ZShtLHUpLGEucmFpbGgmJmEucmFpbGguc2Nyb2xsYWJsZT8oYS5zZXRTY3JvbGxMZWZ0KGwpLGEuc2hvd0N1cnNvcihoLGwpKTphLnNob3dDdXJzb3IoaCksZS5pc2llMTAmJmRvY3VtZW50LnNlbGVjdGlvbi5jbGVhcigpKX0pO2UuaXNjaHJvbWUmJmEuaXN0b3VjaGNhcGFibGUmJihnPSExKTtpZihnKXJldHVybiBhLmNhbmNlbEV2ZW50KGIpfWVsc2UgaWYoMT09YS5yYWlsLmRyYWcucHQpcmV0dXJuIGEub25tb3VzZW1vdmUoYil9fWEub25tb3VzZWRvd249ZnVuY3Rpb24oYixjKXtpZighYS5yYWlsLmRyYWd8fDE9PWEucmFpbC5kcmFnLnB0KXtpZihhLnJhaWxzbG9ja2VkKXJldHVybiBhLmNhbmNlbEV2ZW50KGIpO2EuY2FuY2VsU2Nyb2xsKCk7XHJcbmEucmFpbC5kcmFnPXt4OmIuY2xpZW50WCx5OmIuY2xpZW50WSxzeDphLnNjcm9sbC54LHN5OmEuc2Nyb2xsLnkscHQ6MSxocjohIWN9O3ZhciBnPWEuZ2V0VGFyZ2V0KGIpOyFhLmlzcGFnZSYmZS5oYXNtb3VzZWNhcHR1cmUmJmcuc2V0Q2FwdHVyZSgpO2EuaXNpZnJhbWUmJiFlLmhhc21vdXNlY2FwdHVyZSYmKGEuc2F2ZWQuY3NzcG9pbnRlcmV2ZW50cz1hLmRvYy5jc3MoXCJwb2ludGVyLWV2ZW50c1wiKSxhLmNzcyhhLmRvYyx7XCJwb2ludGVyLWV2ZW50c1wiOlwibm9uZVwifSkpO2EuaGFzbW92aW5nPSExO3JldHVybiBhLmNhbmNlbEV2ZW50KGIpfX07YS5vbm1vdXNldXA9ZnVuY3Rpb24oYil7aWYoYS5yYWlsLmRyYWcpe2lmKDEhPWEucmFpbC5kcmFnLnB0KXJldHVybiEwO2UuaGFzbW91c2VjYXB0dXJlJiZkb2N1bWVudC5yZWxlYXNlQ2FwdHVyZSgpO2EuaXNpZnJhbWUmJiFlLmhhc21vdXNlY2FwdHVyZSYmYS5kb2MuY3NzKFwicG9pbnRlci1ldmVudHNcIixhLnNhdmVkLmNzc3BvaW50ZXJldmVudHMpO1xyXG5hLnJhaWwuZHJhZz0hMTthLmhhc21vdmluZyYmYS50cmlnZ2VyU2Nyb2xsRW5kKCk7cmV0dXJuIGEuY2FuY2VsRXZlbnQoYil9fTthLm9ubW91c2Vtb3ZlPWZ1bmN0aW9uKGIpe2lmKGEucmFpbC5kcmFnKXtpZigxPT1hLnJhaWwuZHJhZy5wdCl7aWYoZS5pc2Nocm9tZSYmMD09Yi53aGljaClyZXR1cm4gYS5vbm1vdXNldXAoYik7YS5jdXJzb3JmcmVlemVkPSEwO2EuaGFzbW92aW5nPSEwO2lmKGEucmFpbC5kcmFnLmhyKXthLnNjcm9sbC54PWEucmFpbC5kcmFnLnN4KyhiLmNsaWVudFgtYS5yYWlsLmRyYWcueCk7MD5hLnNjcm9sbC54JiYoYS5zY3JvbGwueD0wKTt2YXIgYz1hLnNjcm9sbHZhbHVlbWF4dzthLnNjcm9sbC54PmMmJihhLnNjcm9sbC54PWMpfWVsc2UgYS5zY3JvbGwueT1hLnJhaWwuZHJhZy5zeSsoYi5jbGllbnRZLWEucmFpbC5kcmFnLnkpLDA+YS5zY3JvbGwueSYmKGEuc2Nyb2xsLnk9MCksYz1hLnNjcm9sbHZhbHVlbWF4LGEuc2Nyb2xsLnk+YyYmKGEuc2Nyb2xsLnk9XHJcbmMpO2Euc3luY2hlZChcIm1vdXNlbW92ZVwiLGZ1bmN0aW9uKCl7YS5yYWlsLmRyYWcmJjE9PWEucmFpbC5kcmFnLnB0JiYoYS5zaG93Q3Vyc29yKCksYS5yYWlsLmRyYWcuaHI/YS5oYXNyZXZlcnNlaHI/YS5kb1Njcm9sbExlZnQoYS5zY3JvbGx2YWx1ZW1heHctTWF0aC5yb3VuZChhLnNjcm9sbC54KmEuc2Nyb2xscmF0aW8ueCksYS5vcHQuY3Vyc29yZHJhZ3NwZWVkKTphLmRvU2Nyb2xsTGVmdChNYXRoLnJvdW5kKGEuc2Nyb2xsLngqYS5zY3JvbGxyYXRpby54KSxhLm9wdC5jdXJzb3JkcmFnc3BlZWQpOmEuZG9TY3JvbGxUb3AoTWF0aC5yb3VuZChhLnNjcm9sbC55KmEuc2Nyb2xscmF0aW8ueSksYS5vcHQuY3Vyc29yZHJhZ3NwZWVkKSl9KTtyZXR1cm4gYS5jYW5jZWxFdmVudChiKX19ZWxzZSBhLmNoZWNrYXJlYT0wfTtpZihlLmNhbnRvdWNofHxhLm9wdC50b3VjaGJlaGF2aW9yKWEub25wcmV2ZW50Y2xpY2s9ZnVuY3Rpb24oYil7aWYoYS5wcmV2ZW50Y2xpY2spcmV0dXJuIGEucHJldmVudGNsaWNrLnRnLm9uY2xpY2s9XHJcbmEucHJldmVudGNsaWNrLmNsaWNrLGEucHJldmVudGNsaWNrPSExLGEuY2FuY2VsRXZlbnQoYil9LGEuYmluZChhLndpbixcIm1vdXNlZG93blwiLGEub250b3VjaHN0YXJ0KSxhLm9uY2xpY2s9ZS5pc2lvcz8hMTpmdW5jdGlvbihiKXtyZXR1cm4gYS5sYXN0bW91c2V1cD8oYS5sYXN0bW91c2V1cD0hMSxhLmNhbmNlbEV2ZW50KGIpKTohMH0sYS5vcHQuZ3JhYmN1cnNvcmVuYWJsZWQmJmUuY3Vyc29yZ3JhYnZhbHVlJiYoYS5jc3MoYS5pc3BhZ2U/YS5kb2M6YS53aW4se2N1cnNvcjplLmN1cnNvcmdyYWJ2YWx1ZX0pLGEuY3NzKGEucmFpbCx7Y3Vyc29yOmUuY3Vyc29yZ3JhYnZhbHVlfSkpO2Vsc2V7dmFyIHI9ZnVuY3Rpb24oYil7aWYoYS5zZWxlY3Rpb25kcmFnKXtpZihiKXt2YXIgYz1hLndpbi5vdXRlckhlaWdodCgpO2I9Yi5wYWdlWS1hLnNlbGVjdGlvbmRyYWcudG9wOzA8YiYmYjxjJiYoYj0wKTtiPj1jJiYoYi09Yyk7YS5zZWxlY3Rpb25kcmFnLmRmPWJ9MCE9YS5zZWxlY3Rpb25kcmFnLmRmJiZcclxuKGEuZG9TY3JvbGxCeSgyKi1NYXRoLmZsb29yKGEuc2VsZWN0aW9uZHJhZy5kZi82KSksYS5kZWJvdW5jZWQoXCJkb3NlbGVjdGlvbnNjcm9sbFwiLGZ1bmN0aW9uKCl7cigpfSw1MCkpfX07YS5oYXNUZXh0U2VsZWN0ZWQ9XCJnZXRTZWxlY3Rpb25cImluIGRvY3VtZW50P2Z1bmN0aW9uKCl7cmV0dXJuIDA8ZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKCkucmFuZ2VDb3VudH06XCJzZWxlY3Rpb25cImluIGRvY3VtZW50P2Z1bmN0aW9uKCl7cmV0dXJuXCJOb25lXCIhPWRvY3VtZW50LnNlbGVjdGlvbi50eXBlfTpmdW5jdGlvbigpe3JldHVybiExfTthLm9uc2VsZWN0aW9uc3RhcnQ9ZnVuY3Rpb24oYil7YS5pc3BhZ2V8fChhLnNlbGVjdGlvbmRyYWc9YS53aW4ub2Zmc2V0KCkpfTthLm9uc2VsZWN0aW9uZW5kPWZ1bmN0aW9uKGIpe2Euc2VsZWN0aW9uZHJhZz0hMX07YS5vbnNlbGVjdGlvbmRyYWc9ZnVuY3Rpb24oYil7YS5zZWxlY3Rpb25kcmFnJiZhLmhhc1RleHRTZWxlY3RlZCgpJiZhLmRlYm91bmNlZChcInNlbGVjdGlvbnNjcm9sbFwiLFxyXG5mdW5jdGlvbigpe3IoYil9LDI1MCl9fWUuaGFzdzNjdG91Y2g/KGEuY3NzKGEucmFpbCx7XCJ0b3VjaC1hY3Rpb25cIjpcIm5vbmVcIn0pLGEuY3NzKGEuY3Vyc29yLHtcInRvdWNoLWFjdGlvblwiOlwibm9uZVwifSksYS5iaW5kKGEud2luLFwicG9pbnRlcmRvd25cIixhLm9udG91Y2hzdGFydCksYS5iaW5kKGRvY3VtZW50LFwicG9pbnRlcnVwXCIsYS5vbnRvdWNoZW5kKSxhLmJpbmQoZG9jdW1lbnQsXCJwb2ludGVybW92ZVwiLGEub250b3VjaG1vdmUpKTplLmhhc21zdG91Y2g/KGEuY3NzKGEucmFpbCx7XCItbXMtdG91Y2gtYWN0aW9uXCI6XCJub25lXCJ9KSxhLmNzcyhhLmN1cnNvcix7XCItbXMtdG91Y2gtYWN0aW9uXCI6XCJub25lXCJ9KSxhLmJpbmQoYS53aW4sXCJNU1BvaW50ZXJEb3duXCIsYS5vbnRvdWNoc3RhcnQpLGEuYmluZChkb2N1bWVudCxcIk1TUG9pbnRlclVwXCIsYS5vbnRvdWNoZW5kKSxhLmJpbmQoZG9jdW1lbnQsXCJNU1BvaW50ZXJNb3ZlXCIsYS5vbnRvdWNobW92ZSksYS5iaW5kKGEuY3Vyc29yLFwiTVNHZXN0dXJlSG9sZFwiLFxyXG5mdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCl9KSxhLmJpbmQoYS5jdXJzb3IsXCJjb250ZXh0bWVudVwiLGZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQoKX0pKTp0aGlzLmlzdG91Y2hjYXBhYmxlJiYoYS5iaW5kKGEud2luLFwidG91Y2hzdGFydFwiLGEub250b3VjaHN0YXJ0KSxhLmJpbmQoZG9jdW1lbnQsXCJ0b3VjaGVuZFwiLGEub250b3VjaGVuZCksYS5iaW5kKGRvY3VtZW50LFwidG91Y2hjYW5jZWxcIixhLm9udG91Y2hlbmQpLGEuYmluZChkb2N1bWVudCxcInRvdWNobW92ZVwiLGEub250b3VjaG1vdmUpKTtpZihhLm9wdC5jdXJzb3JkcmFnb250b3VjaHx8IWUuY2FudG91Y2gmJiFhLm9wdC50b3VjaGJlaGF2aW9yKWEucmFpbC5jc3Moe2N1cnNvcjpcImRlZmF1bHRcIn0pLGEucmFpbGgmJmEucmFpbGguY3NzKHtjdXJzb3I6XCJkZWZhdWx0XCJ9KSxhLmpxYmluZChhLnJhaWwsXCJtb3VzZWVudGVyXCIsZnVuY3Rpb24oKXtpZighYS5pc3BhZ2UmJiFhLndpbi5pcyhcIjp2aXNpYmxlXCIpKXJldHVybiExO1xyXG5hLmNhbnNob3dvbm1vdXNlZXZlbnQmJmEuc2hvd0N1cnNvcigpO2EucmFpbC5hY3RpdmU9ITB9KSxhLmpxYmluZChhLnJhaWwsXCJtb3VzZWxlYXZlXCIsZnVuY3Rpb24oKXthLnJhaWwuYWN0aXZlPSExO2EucmFpbC5kcmFnfHxhLmhpZGVDdXJzb3IoKX0pLGEub3B0LnNlbnNpdGl2ZXJhaWwmJihhLmJpbmQoYS5yYWlsLFwiY2xpY2tcIixmdW5jdGlvbihiKXthLmRvUmFpbENsaWNrKGIsITEsITEpfSksYS5iaW5kKGEucmFpbCxcImRibGNsaWNrXCIsZnVuY3Rpb24oYil7YS5kb1JhaWxDbGljayhiLCEwLCExKX0pLGEuYmluZChhLmN1cnNvcixcImNsaWNrXCIsZnVuY3Rpb24oYil7YS5jYW5jZWxFdmVudChiKX0pLGEuYmluZChhLmN1cnNvcixcImRibGNsaWNrXCIsZnVuY3Rpb24oYil7YS5jYW5jZWxFdmVudChiKX0pKSxhLnJhaWxoJiYoYS5qcWJpbmQoYS5yYWlsaCxcIm1vdXNlZW50ZXJcIixmdW5jdGlvbigpe2lmKCFhLmlzcGFnZSYmIWEud2luLmlzKFwiOnZpc2libGVcIikpcmV0dXJuITE7YS5jYW5zaG93b25tb3VzZWV2ZW50JiZcclxuYS5zaG93Q3Vyc29yKCk7YS5yYWlsLmFjdGl2ZT0hMH0pLGEuanFiaW5kKGEucmFpbGgsXCJtb3VzZWxlYXZlXCIsZnVuY3Rpb24oKXthLnJhaWwuYWN0aXZlPSExO2EucmFpbC5kcmFnfHxhLmhpZGVDdXJzb3IoKX0pLGEub3B0LnNlbnNpdGl2ZXJhaWwmJihhLmJpbmQoYS5yYWlsaCxcImNsaWNrXCIsZnVuY3Rpb24oYil7YS5kb1JhaWxDbGljayhiLCExLCEwKX0pLGEuYmluZChhLnJhaWxoLFwiZGJsY2xpY2tcIixmdW5jdGlvbihiKXthLmRvUmFpbENsaWNrKGIsITAsITApfSksYS5iaW5kKGEuY3Vyc29yaCxcImNsaWNrXCIsZnVuY3Rpb24oYil7YS5jYW5jZWxFdmVudChiKX0pLGEuYmluZChhLmN1cnNvcmgsXCJkYmxjbGlja1wiLGZ1bmN0aW9uKGIpe2EuY2FuY2VsRXZlbnQoYil9KSkpO2UuY2FudG91Y2h8fGEub3B0LnRvdWNoYmVoYXZpb3I/KGEuYmluZChlLmhhc21vdXNlY2FwdHVyZT9hLndpbjpkb2N1bWVudCxcIm1vdXNldXBcIixhLm9udG91Y2hlbmQpLGEuYmluZChkb2N1bWVudCxcIm1vdXNlbW92ZVwiLFxyXG5hLm9udG91Y2htb3ZlKSxhLm9uY2xpY2smJmEuYmluZChkb2N1bWVudCxcImNsaWNrXCIsYS5vbmNsaWNrKSxhLm9wdC5jdXJzb3JkcmFnb250b3VjaD8oYS5iaW5kKGEuY3Vyc29yLFwibW91c2Vkb3duXCIsYS5vbm1vdXNlZG93biksYS5iaW5kKGEuY3Vyc29yLFwibW91c2V1cFwiLGEub25tb3VzZXVwKSxhLmN1cnNvcmgmJmEuYmluZChhLmN1cnNvcmgsXCJtb3VzZWRvd25cIixmdW5jdGlvbihiKXthLm9ubW91c2Vkb3duKGIsITApfSksYS5jdXJzb3JoJiZhLmJpbmQoYS5jdXJzb3JoLFwibW91c2V1cFwiLGEub25tb3VzZXVwKSk6KGEuYmluZChhLnJhaWwsXCJtb3VzZWRvd25cIixmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCl9KSxhLnJhaWxoJiZhLmJpbmQoYS5yYWlsaCxcIm1vdXNlZG93blwiLGZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQoKX0pKSk6KGEuYmluZChlLmhhc21vdXNlY2FwdHVyZT9hLndpbjpkb2N1bWVudCxcIm1vdXNldXBcIixhLm9ubW91c2V1cCksYS5iaW5kKGRvY3VtZW50LFxyXG5cIm1vdXNlbW92ZVwiLGEub25tb3VzZW1vdmUpLGEub25jbGljayYmYS5iaW5kKGRvY3VtZW50LFwiY2xpY2tcIixhLm9uY2xpY2spLGEuYmluZChhLmN1cnNvcixcIm1vdXNlZG93blwiLGEub25tb3VzZWRvd24pLGEuYmluZChhLmN1cnNvcixcIm1vdXNldXBcIixhLm9ubW91c2V1cCksYS5yYWlsaCYmKGEuYmluZChhLmN1cnNvcmgsXCJtb3VzZWRvd25cIixmdW5jdGlvbihiKXthLm9ubW91c2Vkb3duKGIsITApfSksYS5iaW5kKGEuY3Vyc29yaCxcIm1vdXNldXBcIixhLm9ubW91c2V1cCkpLCFhLmlzcGFnZSYmYS5vcHQuZW5hYmxlc2Nyb2xsb25zZWxlY3Rpb24mJihhLmJpbmQoYS53aW5bMF0sXCJtb3VzZWRvd25cIixhLm9uc2VsZWN0aW9uc3RhcnQpLGEuYmluZChkb2N1bWVudCxcIm1vdXNldXBcIixhLm9uc2VsZWN0aW9uZW5kKSxhLmJpbmQoYS5jdXJzb3IsXCJtb3VzZXVwXCIsYS5vbnNlbGVjdGlvbmVuZCksYS5jdXJzb3JoJiZhLmJpbmQoYS5jdXJzb3JoLFwibW91c2V1cFwiLGEub25zZWxlY3Rpb25lbmQpLFxyXG5hLmJpbmQoZG9jdW1lbnQsXCJtb3VzZW1vdmVcIixhLm9uc2VsZWN0aW9uZHJhZykpLGEuem9vbSYmKGEuanFiaW5kKGEuem9vbSxcIm1vdXNlZW50ZXJcIixmdW5jdGlvbigpe2EuY2Fuc2hvd29ubW91c2VldmVudCYmYS5zaG93Q3Vyc29yKCk7YS5yYWlsLmFjdGl2ZT0hMH0pLGEuanFiaW5kKGEuem9vbSxcIm1vdXNlbGVhdmVcIixmdW5jdGlvbigpe2EucmFpbC5hY3RpdmU9ITE7YS5yYWlsLmRyYWd8fGEuaGlkZUN1cnNvcigpfSkpKTthLm9wdC5lbmFibGVtb3VzZXdoZWVsJiYoYS5pc2lmcmFtZXx8YS5tb3VzZXdoZWVsKGUuaXNpZSYmYS5pc3BhZ2U/ZG9jdW1lbnQ6YS53aW4sYS5vbm1vdXNld2hlZWwpLGEubW91c2V3aGVlbChhLnJhaWwsYS5vbm1vdXNld2hlZWwpLGEucmFpbGgmJmEubW91c2V3aGVlbChhLnJhaWxoLGEub25tb3VzZXdoZWVsaHIpKTthLmlzcGFnZXx8ZS5jYW50b3VjaHx8L0hUTUx8XkJPRFkvLnRlc3QoYS53aW5bMF0ubm9kZU5hbWUpfHwoYS53aW4uYXR0cihcInRhYmluZGV4XCIpfHxcclxuYS53aW4uYXR0cih7dGFiaW5kZXg6TysrfSksYS5qcWJpbmQoYS53aW4sXCJmb2N1c1wiLGZ1bmN0aW9uKGIpe0I9YS5nZXRUYXJnZXQoYikuaWR8fCEwO2EuaGFzZm9jdXM9ITA7YS5jYW5zaG93b25tb3VzZWV2ZW50JiZhLm5vdGljZUN1cnNvcigpfSksYS5qcWJpbmQoYS53aW4sXCJibHVyXCIsZnVuY3Rpb24oYil7Qj0hMTthLmhhc2ZvY3VzPSExfSksYS5qcWJpbmQoYS53aW4sXCJtb3VzZWVudGVyXCIsZnVuY3Rpb24oYil7Rj1hLmdldFRhcmdldChiKS5pZHx8ITA7YS5oYXNtb3VzZWZvY3VzPSEwO2EuY2Fuc2hvd29ubW91c2VldmVudCYmYS5ub3RpY2VDdXJzb3IoKX0pLGEuanFiaW5kKGEud2luLFwibW91c2VsZWF2ZVwiLGZ1bmN0aW9uKCl7Rj0hMTthLmhhc21vdXNlZm9jdXM9ITE7YS5yYWlsLmRyYWd8fGEuaGlkZUN1cnNvcigpfSkpfWEub25rZXlwcmVzcz1mdW5jdGlvbihiKXtpZihhLnJhaWxzbG9ja2VkJiYwPT1hLnBhZ2UubWF4aClyZXR1cm4hMDtiPWI/Yjp3aW5kb3cuZTt2YXIgYz1cclxuYS5nZXRUYXJnZXQoYik7aWYoYyYmL0lOUFVUfFRFWFRBUkVBfFNFTEVDVHxPUFRJT04vLnRlc3QoYy5ub2RlTmFtZSkmJighYy5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpJiYhYy50eXBlfHwhL3N1Ym1pdHxidXR0b258Y2FuY2VsL2kudHApfHxmKGMpLmF0dHIoXCJjb250ZW50ZWRpdGFibGVcIikpcmV0dXJuITA7aWYoYS5oYXNmb2N1c3x8YS5oYXNtb3VzZWZvY3VzJiYhQnx8YS5pc3BhZ2UmJiFCJiYhRil7Yz1iLmtleUNvZGU7aWYoYS5yYWlsc2xvY2tlZCYmMjchPWMpcmV0dXJuIGEuY2FuY2VsRXZlbnQoYik7dmFyIGc9Yi5jdHJsS2V5fHwhMSxkPWIuc2hpZnRLZXl8fCExLGU9ITE7c3dpdGNoKGMpe2Nhc2UgMzg6Y2FzZSA2MzIzMzphLmRvU2Nyb2xsQnkoNzIpO2U9ITA7YnJlYWs7Y2FzZSA0MDpjYXNlIDYzMjM1OmEuZG9TY3JvbGxCeSgtNzIpO2U9ITA7YnJlYWs7Y2FzZSAzNzpjYXNlIDYzMjMyOmEucmFpbGgmJihnP2EuZG9TY3JvbGxMZWZ0KDApOmEuZG9TY3JvbGxMZWZ0QnkoNzIpLFxyXG5lPSEwKTticmVhaztjYXNlIDM5OmNhc2UgNjMyMzQ6YS5yYWlsaCYmKGc/YS5kb1Njcm9sbExlZnQoYS5wYWdlLm1heHcpOmEuZG9TY3JvbGxMZWZ0QnkoLTcyKSxlPSEwKTticmVhaztjYXNlIDMzOmNhc2UgNjMyNzY6YS5kb1Njcm9sbEJ5KGEudmlldy5oKTtlPSEwO2JyZWFrO2Nhc2UgMzQ6Y2FzZSA2MzI3NzphLmRvU2Nyb2xsQnkoLWEudmlldy5oKTtlPSEwO2JyZWFrO2Nhc2UgMzY6Y2FzZSA2MzI3MzphLnJhaWxoJiZnP2EuZG9TY3JvbGxQb3MoMCwwKTphLmRvU2Nyb2xsVG8oMCk7ZT0hMDticmVhaztjYXNlIDM1OmNhc2UgNjMyNzU6YS5yYWlsaCYmZz9hLmRvU2Nyb2xsUG9zKGEucGFnZS5tYXh3LGEucGFnZS5tYXhoKTphLmRvU2Nyb2xsVG8oYS5wYWdlLm1heGgpO2U9ITA7YnJlYWs7Y2FzZSAzMjphLm9wdC5zcGFjZWJhcmVuYWJsZWQmJihkP2EuZG9TY3JvbGxCeShhLnZpZXcuaCk6YS5kb1Njcm9sbEJ5KC1hLnZpZXcuaCksZT0hMCk7YnJlYWs7Y2FzZSAyNzphLnpvb21hY3RpdmUmJlxyXG4oYS5kb1pvb20oKSxlPSEwKX1pZihlKXJldHVybiBhLmNhbmNlbEV2ZW50KGIpfX07YS5vcHQuZW5hYmxla2V5Ym9hcmQmJmEuYmluZChkb2N1bWVudCxlLmlzb3BlcmEmJiFlLmlzb3BlcmExMj9cImtleXByZXNzXCI6XCJrZXlkb3duXCIsYS5vbmtleXByZXNzKTthLmJpbmQoZG9jdW1lbnQsXCJrZXlkb3duXCIsZnVuY3Rpb24oYil7Yi5jdHJsS2V5JiYoYS53aGVlbHByZXZlbnRlZD0hMCl9KTthLmJpbmQoZG9jdW1lbnQsXCJrZXl1cFwiLGZ1bmN0aW9uKGIpe2IuY3RybEtleXx8KGEud2hlZWxwcmV2ZW50ZWQ9ITEpfSk7YS5iaW5kKHdpbmRvdyxcImJsdXJcIixmdW5jdGlvbihiKXthLndoZWVscHJldmVudGVkPSExfSk7YS5iaW5kKHdpbmRvdyxcInJlc2l6ZVwiLGEubGF6eVJlc2l6ZSk7YS5iaW5kKHdpbmRvdyxcIm9yaWVudGF0aW9uY2hhbmdlXCIsYS5sYXp5UmVzaXplKTthLmJpbmQod2luZG93LFwibG9hZFwiLGEubGF6eVJlc2l6ZSk7aWYoZS5pc2Nocm9tZSYmIWEuaXNwYWdlJiYhYS5oYXN3cmFwcGVyKXt2YXIgdD1cclxuYS53aW4uYXR0cihcInN0eWxlXCIpLG09cGFyc2VGbG9hdChhLndpbi5jc3MoXCJ3aWR0aFwiKSkrMTthLndpbi5jc3MoXCJ3aWR0aFwiLG0pO2Euc3luY2hlZChcImNocm9tZWZpeFwiLGZ1bmN0aW9uKCl7YS53aW4uYXR0cihcInN0eWxlXCIsdCl9KX1hLm9uQXR0cmlidXRlQ2hhbmdlPWZ1bmN0aW9uKGIpe2EubGF6eVJlc2l6ZShhLmlzaWVvbGQ/MjUwOjMwKX07YS5pc2llMTF8fCExPT09eHx8KGEub2JzZXJ2ZXJib2R5PW5ldyB4KGZ1bmN0aW9uKGIpe2IuZm9yRWFjaChmdW5jdGlvbihiKXtpZihcImF0dHJpYnV0ZXNcIj09Yi50eXBlKXJldHVybiBmKFwiYm9keVwiKS5oYXNDbGFzcyhcIm1vZGFsLW9wZW5cIikmJmYoXCJib2R5XCIpLmhhc0NsYXNzKFwibW9kYWwtZGlhbG9nXCIpJiYhZi5jb250YWlucyhmKFwiLm1vZGFsLWRpYWxvZ1wiKVswXSxhLmRvY1swXSk/YS5oaWRlKCk6YS5zaG93KCl9KTtpZihkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodCE9YS5wYWdlLm1heGgpcmV0dXJuIGEubGF6eVJlc2l6ZSgzMCl9KSxcclxuYS5vYnNlcnZlcmJvZHkub2JzZXJ2ZShkb2N1bWVudC5ib2R5LHtjaGlsZExpc3Q6ITAsc3VidHJlZTohMCxjaGFyYWN0ZXJEYXRhOiExLGF0dHJpYnV0ZXM6ITAsYXR0cmlidXRlRmlsdGVyOltcImNsYXNzXCJdfSkpO2EuaXNwYWdlfHxhLmhhc3dyYXBwZXJ8fCghMSE9PXg/KGEub2JzZXJ2ZXI9bmV3IHgoZnVuY3Rpb24oYil7Yi5mb3JFYWNoKGEub25BdHRyaWJ1dGVDaGFuZ2UpfSksYS5vYnNlcnZlci5vYnNlcnZlKGEud2luWzBdLHtjaGlsZExpc3Q6ITAsY2hhcmFjdGVyRGF0YTohMSxhdHRyaWJ1dGVzOiEwLHN1YnRyZWU6ITF9KSxhLm9ic2VydmVycmVtb3Zlcj1uZXcgeChmdW5jdGlvbihiKXtiLmZvckVhY2goZnVuY3Rpb24oYil7aWYoMDxiLnJlbW92ZWROb2Rlcy5sZW5ndGgpZm9yKHZhciBjIGluIGIucmVtb3ZlZE5vZGVzKWlmKGEmJmIucmVtb3ZlZE5vZGVzW2NdPT1hLndpblswXSlyZXR1cm4gYS5yZW1vdmUoKX0pfSksYS5vYnNlcnZlcnJlbW92ZXIub2JzZXJ2ZShhLndpblswXS5wYXJlbnROb2RlLFxyXG57Y2hpbGRMaXN0OiEwLGNoYXJhY3RlckRhdGE6ITEsYXR0cmlidXRlczohMSxzdWJ0cmVlOiExfSkpOihhLmJpbmQoYS53aW4sZS5pc2llJiYhZS5pc2llOT9cInByb3BlcnR5Y2hhbmdlXCI6XCJET01BdHRyTW9kaWZpZWRcIixhLm9uQXR0cmlidXRlQ2hhbmdlKSxlLmlzaWU5JiZhLndpblswXS5hdHRhY2hFdmVudChcIm9ucHJvcGVydHljaGFuZ2VcIixhLm9uQXR0cmlidXRlQ2hhbmdlKSxhLmJpbmQoYS53aW4sXCJET01Ob2RlUmVtb3ZlZFwiLGZ1bmN0aW9uKGIpe2IudGFyZ2V0PT1hLndpblswXSYmYS5yZW1vdmUoKX0pKSk7IWEuaXNwYWdlJiZhLm9wdC5ib3h6b29tJiZhLmJpbmQod2luZG93LFwicmVzaXplXCIsYS5yZXNpemVab29tKTthLmlzdGV4dGFyZWEmJihhLmJpbmQoYS53aW4sXCJrZXlkb3duXCIsYS5sYXp5UmVzaXplKSxhLmJpbmQoYS53aW4sXCJtb3VzZXVwXCIsYS5sYXp5UmVzaXplKSk7YS5sYXp5UmVzaXplKDMwKX1pZihcIklGUkFNRVwiPT10aGlzLmRvY1swXS5ub2RlTmFtZSl7dmFyIE49XHJcbmZ1bmN0aW9uKCl7YS5pZnJhbWV4ZD0hMTt2YXIgYzt0cnl7Yz1cImNvbnRlbnREb2N1bWVudFwiaW4gdGhpcz90aGlzLmNvbnRlbnREb2N1bWVudDp0aGlzLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnR9Y2F0Y2goZyl7YS5pZnJhbWV4ZD0hMCxjPSExfWlmKGEuaWZyYW1leGQpcmV0dXJuXCJjb25zb2xlXCJpbiB3aW5kb3cmJmNvbnNvbGUubG9nKFwiTmljZVNjcm9sbCBlcnJvcjogcG9saWN5IHJlc3RyaWNlZCBpZnJhbWVcIiksITA7YS5mb3JjZXNjcmVlbj0hMDthLmlzaWZyYW1lJiYoYS5pZnJhbWU9e2RvYzpmKGMpLGh0bWw6YS5kb2MuY29udGVudHMoKS5maW5kKFwiaHRtbFwiKVswXSxib2R5OmEuZG9jLmNvbnRlbnRzKCkuZmluZChcImJvZHlcIilbMF19LGEuZ2V0Q29udGVudFNpemU9ZnVuY3Rpb24oKXtyZXR1cm57dzpNYXRoLm1heChhLmlmcmFtZS5odG1sLnNjcm9sbFdpZHRoLGEuaWZyYW1lLmJvZHkuc2Nyb2xsV2lkdGgpLGg6TWF0aC5tYXgoYS5pZnJhbWUuaHRtbC5zY3JvbGxIZWlnaHQsXHJcbmEuaWZyYW1lLmJvZHkuc2Nyb2xsSGVpZ2h0KX19LGEuZG9jc2Nyb2xsPWYoYS5pZnJhbWUuYm9keSkpO2lmKCFlLmlzaW9zJiZhLm9wdC5pZnJhbWVhdXRvcmVzaXplJiYhYS5pc2lmcmFtZSl7YS53aW4uc2Nyb2xsVG9wKDApO2EuZG9jLmhlaWdodChcIlwiKTt2YXIgZD1NYXRoLm1heChjLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaHRtbFwiKVswXS5zY3JvbGxIZWlnaHQsYy5ib2R5LnNjcm9sbEhlaWdodCk7YS5kb2MuaGVpZ2h0KGQpfWEubGF6eVJlc2l6ZSgzMCk7ZS5pc2llNyYmYS5jc3MoZihhLmlmcmFtZS5odG1sKSxiKTthLmNzcyhmKGEuaWZyYW1lLmJvZHkpLGIpO2UuaXNpb3MmJmEuaGFzd3JhcHBlciYmYS5jc3MoZihjLmJvZHkpLHtcIi13ZWJraXQtdHJhbnNmb3JtXCI6XCJ0cmFuc2xhdGUzZCgwLDAsMClcIn0pO1wiY29udGVudFdpbmRvd1wiaW4gdGhpcz9hLmJpbmQodGhpcy5jb250ZW50V2luZG93LFwic2Nyb2xsXCIsYS5vbnNjcm9sbCk6YS5iaW5kKGMsXCJzY3JvbGxcIixhLm9uc2Nyb2xsKTtcclxuYS5vcHQuZW5hYmxlbW91c2V3aGVlbCYmYS5tb3VzZXdoZWVsKGMsYS5vbm1vdXNld2hlZWwpO2Eub3B0LmVuYWJsZWtleWJvYXJkJiZhLmJpbmQoYyxlLmlzb3BlcmE/XCJrZXlwcmVzc1wiOlwia2V5ZG93blwiLGEub25rZXlwcmVzcyk7aWYoZS5jYW50b3VjaHx8YS5vcHQudG91Y2hiZWhhdmlvcilhLmJpbmQoYyxcIm1vdXNlZG93blwiLGEub250b3VjaHN0YXJ0KSxhLmJpbmQoYyxcIm1vdXNlbW92ZVwiLGZ1bmN0aW9uKGIpe3JldHVybiBhLm9udG91Y2htb3ZlKGIsITApfSksYS5vcHQuZ3JhYmN1cnNvcmVuYWJsZWQmJmUuY3Vyc29yZ3JhYnZhbHVlJiZhLmNzcyhmKGMuYm9keSkse2N1cnNvcjplLmN1cnNvcmdyYWJ2YWx1ZX0pO2EuYmluZChjLFwibW91c2V1cFwiLGEub250b3VjaGVuZCk7YS56b29tJiYoYS5vcHQuZGJsY2xpY2t6b29tJiZhLmJpbmQoYyxcImRibGNsaWNrXCIsYS5kb1pvb20pLGEub25nZXN0dXJlem9vbSYmYS5iaW5kKGMsXCJnZXN0dXJlZW5kXCIsYS5vbmdlc3R1cmV6b29tKSl9O1xyXG50aGlzLmRvY1swXS5yZWFkeVN0YXRlJiZcImNvbXBsZXRlXCI9PXRoaXMuZG9jWzBdLnJlYWR5U3RhdGUmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXtOLmNhbGwoYS5kb2NbMF0sITEpfSw1MDApO2EuYmluZCh0aGlzLmRvYyxcImxvYWRcIixOKX19O3RoaXMuc2hvd0N1cnNvcj1mdW5jdGlvbihiLGMpe2EuY3Vyc29ydGltZW91dCYmKGNsZWFyVGltZW91dChhLmN1cnNvcnRpbWVvdXQpLGEuY3Vyc29ydGltZW91dD0wKTtpZihhLnJhaWwpe2EuYXV0b2hpZGVkb20mJihhLmF1dG9oaWRlZG9tLnN0b3AoKS5jc3Moe29wYWNpdHk6YS5vcHQuY3Vyc29yb3BhY2l0eW1heH0pLGEuY3Vyc29yYWN0aXZlPSEwKTthLnJhaWwuZHJhZyYmMT09YS5yYWlsLmRyYWcucHR8fCh2b2lkIDAhPT1iJiYhMSE9PWImJihhLnNjcm9sbC55PU1hdGgucm91bmQoMSpiL2Euc2Nyb2xscmF0aW8ueSkpLHZvaWQgMCE9PWMmJihhLnNjcm9sbC54PU1hdGgucm91bmQoMSpjL2Euc2Nyb2xscmF0aW8ueCkpKTthLmN1cnNvci5jc3Moe2hlaWdodDphLmN1cnNvcmhlaWdodCxcclxudG9wOmEuc2Nyb2xsLnl9KTtpZihhLmN1cnNvcmgpe3ZhciBkPWEuaGFzcmV2ZXJzZWhyP2Euc2Nyb2xsdmFsdWVtYXh3LWEuc2Nyb2xsLng6YS5zY3JvbGwueDshYS5yYWlsLmFsaWduJiZhLnJhaWwudmlzaWJpbGl0eT9hLmN1cnNvcmguY3NzKHt3aWR0aDphLmN1cnNvcndpZHRoLGxlZnQ6ZCthLnJhaWwud2lkdGh9KTphLmN1cnNvcmguY3NzKHt3aWR0aDphLmN1cnNvcndpZHRoLGxlZnQ6ZH0pO2EuY3Vyc29yYWN0aXZlPSEwfWEuem9vbSYmYS56b29tLnN0b3AoKS5jc3Moe29wYWNpdHk6YS5vcHQuY3Vyc29yb3BhY2l0eW1heH0pfX07dGhpcy5oaWRlQ3Vyc29yPWZ1bmN0aW9uKGIpe2EuY3Vyc29ydGltZW91dHx8IWEucmFpbHx8IWEuYXV0b2hpZGVkb218fGEuaGFzbW91c2Vmb2N1cyYmXCJsZWF2ZVwiPT1hLm9wdC5hdXRvaGlkZW1vZGV8fChhLmN1cnNvcnRpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpe2EucmFpbC5hY3RpdmUmJmEuc2hvd29ubW91c2VldmVudHx8KGEuYXV0b2hpZGVkb20uc3RvcCgpLmFuaW1hdGUoe29wYWNpdHk6YS5vcHQuY3Vyc29yb3BhY2l0eW1pbn0pLFxyXG5hLnpvb20mJmEuem9vbS5zdG9wKCkuYW5pbWF0ZSh7b3BhY2l0eTphLm9wdC5jdXJzb3JvcGFjaXR5bWlufSksYS5jdXJzb3JhY3RpdmU9ITEpO2EuY3Vyc29ydGltZW91dD0wfSxifHxhLm9wdC5oaWRlY3Vyc29yZGVsYXkpKX07dGhpcy5ub3RpY2VDdXJzb3I9ZnVuY3Rpb24oYixjLGQpe2Euc2hvd0N1cnNvcihjLGQpO2EucmFpbC5hY3RpdmV8fGEuaGlkZUN1cnNvcihiKX07dGhpcy5nZXRDb250ZW50U2l6ZT1hLmlzcGFnZT9mdW5jdGlvbigpe3JldHVybnt3Ok1hdGgubWF4KGRvY3VtZW50LmJvZHkuc2Nyb2xsV2lkdGgsZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFdpZHRoKSxoOk1hdGgubWF4KGRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0LGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQpfX06YS5oYXN3cmFwcGVyP2Z1bmN0aW9uKCl7cmV0dXJue3c6YS5kb2Mub3V0ZXJXaWR0aCgpK3BhcnNlSW50KGEud2luLmNzcyhcInBhZGRpbmdMZWZ0XCIpKStcclxucGFyc2VJbnQoYS53aW4uY3NzKFwicGFkZGluZ1JpZ2h0XCIpKSxoOmEuZG9jLm91dGVySGVpZ2h0KCkrcGFyc2VJbnQoYS53aW4uY3NzKFwicGFkZGluZ1RvcFwiKSkrcGFyc2VJbnQoYS53aW4uY3NzKFwicGFkZGluZ0JvdHRvbVwiKSl9fTpmdW5jdGlvbigpe3JldHVybnt3OmEuZG9jc2Nyb2xsWzBdLnNjcm9sbFdpZHRoLGg6YS5kb2NzY3JvbGxbMF0uc2Nyb2xsSGVpZ2h0fX07dGhpcy5vblJlc2l6ZT1mdW5jdGlvbihiLGMpe2lmKCFhfHwhYS53aW4pcmV0dXJuITE7aWYoIWEuaGFzd3JhcHBlciYmIWEuaXNwYWdlKXtpZihcIm5vbmVcIj09YS53aW4uY3NzKFwiZGlzcGxheVwiKSlyZXR1cm4gYS52aXNpYmlsaXR5JiZhLmhpZGVSYWlsKCkuaGlkZVJhaWxIcigpLCExO2EuaGlkZGVufHxhLnZpc2liaWxpdHl8fGEuc2hvd1JhaWwoKS5zaG93UmFpbEhyKCl9dmFyIGQ9YS5wYWdlLm1heGgsZT1hLnBhZ2UubWF4dyxmPWEudmlldy5oLGs9YS52aWV3Lnc7YS52aWV3PXt3OmEuaXNwYWdlP2Eud2luLndpZHRoKCk6XHJcbnBhcnNlSW50KGEud2luWzBdLmNsaWVudFdpZHRoKSxoOmEuaXNwYWdlP2Eud2luLmhlaWdodCgpOnBhcnNlSW50KGEud2luWzBdLmNsaWVudEhlaWdodCl9O2EucGFnZT1jP2M6YS5nZXRDb250ZW50U2l6ZSgpO2EucGFnZS5tYXhoPU1hdGgubWF4KDAsYS5wYWdlLmgtYS52aWV3LmgpO2EucGFnZS5tYXh3PU1hdGgubWF4KDAsYS5wYWdlLnctYS52aWV3LncpO2lmKGEucGFnZS5tYXhoPT1kJiZhLnBhZ2UubWF4dz09ZSYmYS52aWV3Lnc9PWsmJmEudmlldy5oPT1mKXtpZihhLmlzcGFnZSlyZXR1cm4gYTtkPWEud2luLm9mZnNldCgpO2lmKGEubGFzdHBvc2l0aW9uJiYoZT1hLmxhc3Rwb3NpdGlvbixlLnRvcD09ZC50b3AmJmUubGVmdD09ZC5sZWZ0KSlyZXR1cm4gYTthLmxhc3Rwb3NpdGlvbj1kfTA9PWEucGFnZS5tYXhoPyhhLmhpZGVSYWlsKCksYS5zY3JvbGx2YWx1ZW1heD0wLGEuc2Nyb2xsLnk9MCxhLnNjcm9sbHJhdGlvLnk9MCxhLmN1cnNvcmhlaWdodD0wLGEuc2V0U2Nyb2xsVG9wKDApLFxyXG5hLnJhaWwmJihhLnJhaWwuc2Nyb2xsYWJsZT0hMSkpOihhLnBhZ2UubWF4aC09YS5vcHQucmFpbHBhZGRpbmcudG9wK2Eub3B0LnJhaWxwYWRkaW5nLmJvdHRvbSxhLnJhaWwuc2Nyb2xsYWJsZT0hMCk7MD09YS5wYWdlLm1heHc/KGEuaGlkZVJhaWxIcigpLGEuc2Nyb2xsdmFsdWVtYXh3PTAsYS5zY3JvbGwueD0wLGEuc2Nyb2xscmF0aW8ueD0wLGEuY3Vyc29yd2lkdGg9MCxhLnNldFNjcm9sbExlZnQoMCksYS5yYWlsaCYmKGEucmFpbGguc2Nyb2xsYWJsZT0hMSkpOihhLnBhZ2UubWF4dy09YS5vcHQucmFpbHBhZGRpbmcubGVmdCthLm9wdC5yYWlscGFkZGluZy5yaWdodCxhLnJhaWxoJiYoYS5yYWlsaC5zY3JvbGxhYmxlPWEub3B0Lmhvcml6cmFpbGVuYWJsZWQpKTthLnJhaWxzbG9ja2VkPWEubG9ja2VkfHwwPT1hLnBhZ2UubWF4aCYmMD09YS5wYWdlLm1heHc7aWYoYS5yYWlsc2xvY2tlZClyZXR1cm4gYS5pc3BhZ2V8fGEudXBkYXRlU2Nyb2xsQmFyKGEudmlldyksITE7YS5oaWRkZW58fFxyXG5hLnZpc2liaWxpdHk/IWEucmFpbGh8fGEuaGlkZGVufHxhLnJhaWxoLnZpc2liaWxpdHl8fGEuc2hvd1JhaWxIcigpOmEuc2hvd1JhaWwoKS5zaG93UmFpbEhyKCk7YS5pc3RleHRhcmVhJiZhLndpbi5jc3MoXCJyZXNpemVcIikmJlwibm9uZVwiIT1hLndpbi5jc3MoXCJyZXNpemVcIikmJihhLnZpZXcuaC09MjApO2EuY3Vyc29yaGVpZ2h0PU1hdGgubWluKGEudmlldy5oLE1hdGgucm91bmQoYS52aWV3LmgvYS5wYWdlLmgqYS52aWV3LmgpKTthLmN1cnNvcmhlaWdodD1hLm9wdC5jdXJzb3JmaXhlZGhlaWdodD9hLm9wdC5jdXJzb3JmaXhlZGhlaWdodDpNYXRoLm1heChhLm9wdC5jdXJzb3JtaW5oZWlnaHQsYS5jdXJzb3JoZWlnaHQpO2EuY3Vyc29yd2lkdGg9TWF0aC5taW4oYS52aWV3LncsTWF0aC5yb3VuZChhLnZpZXcudy9hLnBhZ2UudyphLnZpZXcudykpO2EuY3Vyc29yd2lkdGg9YS5vcHQuY3Vyc29yZml4ZWRoZWlnaHQ/YS5vcHQuY3Vyc29yZml4ZWRoZWlnaHQ6TWF0aC5tYXgoYS5vcHQuY3Vyc29ybWluaGVpZ2h0LFxyXG5hLmN1cnNvcndpZHRoKTthLnNjcm9sbHZhbHVlbWF4PWEudmlldy5oLWEuY3Vyc29yaGVpZ2h0LWEuY3Vyc29yLmhib3JkZXItKGEub3B0LnJhaWxwYWRkaW5nLnRvcCthLm9wdC5yYWlscGFkZGluZy5ib3R0b20pO2EucmFpbGgmJihhLnJhaWxoLndpZHRoPTA8YS5wYWdlLm1heGg/YS52aWV3LnctYS5yYWlsLndpZHRoOmEudmlldy53LGEuc2Nyb2xsdmFsdWVtYXh3PWEucmFpbGgud2lkdGgtYS5jdXJzb3J3aWR0aC1hLmN1cnNvcmgud2JvcmRlci0oYS5vcHQucmFpbHBhZGRpbmcubGVmdCthLm9wdC5yYWlscGFkZGluZy5yaWdodCkpO2EuaXNwYWdlfHxhLnVwZGF0ZVNjcm9sbEJhcihhLnZpZXcpO2Euc2Nyb2xscmF0aW89e3g6YS5wYWdlLm1heHcvYS5zY3JvbGx2YWx1ZW1heHcseTphLnBhZ2UubWF4aC9hLnNjcm9sbHZhbHVlbWF4fTthLmdldFNjcm9sbFRvcCgpPmEucGFnZS5tYXhoP2EuZG9TY3JvbGxUb3AoYS5wYWdlLm1heGgpOihhLnNjcm9sbC55PU1hdGgucm91bmQoYS5nZXRTY3JvbGxUb3AoKSpcclxuKDEvYS5zY3JvbGxyYXRpby55KSksYS5zY3JvbGwueD1NYXRoLnJvdW5kKGEuZ2V0U2Nyb2xsTGVmdCgpKigxL2Euc2Nyb2xscmF0aW8ueCkpLGEuY3Vyc29yYWN0aXZlJiZhLm5vdGljZUN1cnNvcigpKTthLnNjcm9sbC55JiYwPT1hLmdldFNjcm9sbFRvcCgpJiZhLmRvU2Nyb2xsVG8oTWF0aC5mbG9vcihhLnNjcm9sbC55KmEuc2Nyb2xscmF0aW8ueSkpO3JldHVybiBhfTt0aGlzLnJlc2l6ZT1hLm9uUmVzaXplO3RoaXMuaGxhenlyZXNpemU9MDt0aGlzLmxhenlSZXNpemU9ZnVuY3Rpb24oYil7YS5oYXN3cmFwcGVyfHxhLmhpZGUoKTthLmhsYXp5cmVzaXplJiZjbGVhclRpbWVvdXQoYS5obGF6eXJlc2l6ZSk7YS5obGF6eXJlc2l6ZT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YSYmYS5zaG93KCkucmVzaXplKCl9LDI0MCk7cmV0dXJuIGF9O3RoaXMuanFiaW5kPWZ1bmN0aW9uKGIsYyxkKXthLmV2ZW50cy5wdXNoKHtlOmIsbjpjLGY6ZCxxOiEwfSk7ZihiKS5iaW5kKGMsZCl9O3RoaXMubW91c2V3aGVlbD1cclxuZnVuY3Rpb24oYixjLGQpe2I9XCJqcXVlcnlcImluIGI/YlswXTpiO2lmKFwib253aGVlbFwiaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSlhLl9iaW5kKGIsXCJ3aGVlbFwiLGMsZHx8ITEpO2Vsc2V7dmFyIGU9dm9pZCAwIT09ZG9jdW1lbnQub25tb3VzZXdoZWVsP1wibW91c2V3aGVlbFwiOlwiRE9NTW91c2VTY3JvbGxcIjtxKGIsZSxjLGR8fCExKTtcIkRPTU1vdXNlU2Nyb2xsXCI9PWUmJnEoYixcIk1vek1vdXNlUGl4ZWxTY3JvbGxcIixjLGR8fCExKX19O2UuaGFzZXZlbnRsaXN0ZW5lcj8odGhpcy5iaW5kPWZ1bmN0aW9uKGIsYyxkLGUpe2EuX2JpbmQoXCJqcXVlcnlcImluIGI/YlswXTpiLGMsZCxlfHwhMSl9LHRoaXMuX2JpbmQ9ZnVuY3Rpb24oYixjLGQsZSl7YS5ldmVudHMucHVzaCh7ZTpiLG46YyxmOmQsYjplLHE6ITF9KTtiLmFkZEV2ZW50TGlzdGVuZXIoYyxkLGV8fCExKX0sdGhpcy5jYW5jZWxFdmVudD1mdW5jdGlvbihhKXtpZighYSlyZXR1cm4hMTthPWEub3JpZ2luYWw/YS5vcmlnaW5hbDpcclxuYTthLmNhbmNlbGFibGUmJmEucHJldmVudERlZmF1bHQoKTthLnN0b3BQcm9wYWdhdGlvbigpO2EucHJldmVudE1hbmlwdWxhdGlvbiYmYS5wcmV2ZW50TWFuaXB1bGF0aW9uKCk7cmV0dXJuITF9LHRoaXMuc3RvcFByb3BhZ2F0aW9uPWZ1bmN0aW9uKGEpe2lmKCFhKXJldHVybiExO2E9YS5vcmlnaW5hbD9hLm9yaWdpbmFsOmE7YS5zdG9wUHJvcGFnYXRpb24oKTtyZXR1cm4hMX0sdGhpcy5fdW5iaW5kPWZ1bmN0aW9uKGEsYyxkLGUpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lcihjLGQsZSl9KToodGhpcy5iaW5kPWZ1bmN0aW9uKGIsYyxkLGUpe3ZhciBmPVwianF1ZXJ5XCJpbiBiP2JbMF06YjthLl9iaW5kKGYsYyxmdW5jdGlvbihiKXsoYj1ifHx3aW5kb3cuZXZlbnR8fCExKSYmYi5zcmNFbGVtZW50JiYoYi50YXJnZXQ9Yi5zcmNFbGVtZW50KTtcInBhZ2VZXCJpbiBifHwoYi5wYWdlWD1iLmNsaWVudFgrZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQsYi5wYWdlWT1iLmNsaWVudFkrXHJcbmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3ApO3JldHVybiExPT09ZC5jYWxsKGYsYil8fCExPT09ZT9hLmNhbmNlbEV2ZW50KGIpOiEwfSl9LHRoaXMuX2JpbmQ9ZnVuY3Rpb24oYixjLGQsZSl7YS5ldmVudHMucHVzaCh7ZTpiLG46YyxmOmQsYjplLHE6ITF9KTtiLmF0dGFjaEV2ZW50P2IuYXR0YWNoRXZlbnQoXCJvblwiK2MsZCk6YltcIm9uXCIrY109ZH0sdGhpcy5jYW5jZWxFdmVudD1mdW5jdGlvbihhKXthPXdpbmRvdy5ldmVudHx8ITE7aWYoIWEpcmV0dXJuITE7YS5jYW5jZWxCdWJibGU9ITA7YS5jYW5jZWw9ITA7cmV0dXJuIGEucmV0dXJuVmFsdWU9ITF9LHRoaXMuc3RvcFByb3BhZ2F0aW9uPWZ1bmN0aW9uKGEpe2E9d2luZG93LmV2ZW50fHwhMTtpZighYSlyZXR1cm4hMTthLmNhbmNlbEJ1YmJsZT0hMDtyZXR1cm4hMX0sdGhpcy5fdW5iaW5kPWZ1bmN0aW9uKGEsYyxkLGUpe2EuZGV0YWNoRXZlbnQ/YS5kZXRhY2hFdmVudChcIm9uXCIrYyxkKTphW1wib25cIitjXT0hMX0pO1xyXG50aGlzLnVuYmluZEFsbD1mdW5jdGlvbigpe2Zvcih2YXIgYj0wO2I8YS5ldmVudHMubGVuZ3RoO2IrKyl7dmFyIGM9YS5ldmVudHNbYl07Yy5xP2MuZS51bmJpbmQoYy5uLGMuZik6YS5fdW5iaW5kKGMuZSxjLm4sYy5mLGMuYil9fTt0aGlzLnNob3dSYWlsPWZ1bmN0aW9uKCl7MD09YS5wYWdlLm1heGh8fCFhLmlzcGFnZSYmXCJub25lXCI9PWEud2luLmNzcyhcImRpc3BsYXlcIil8fChhLnZpc2liaWxpdHk9ITAsYS5yYWlsLnZpc2liaWxpdHk9ITAsYS5yYWlsLmNzcyhcImRpc3BsYXlcIixcImJsb2NrXCIpKTtyZXR1cm4gYX07dGhpcy5zaG93UmFpbEhyPWZ1bmN0aW9uKCl7aWYoIWEucmFpbGgpcmV0dXJuIGE7MD09YS5wYWdlLm1heHd8fCFhLmlzcGFnZSYmXCJub25lXCI9PWEud2luLmNzcyhcImRpc3BsYXlcIil8fChhLnJhaWxoLnZpc2liaWxpdHk9ITAsYS5yYWlsaC5jc3MoXCJkaXNwbGF5XCIsXCJibG9ja1wiKSk7cmV0dXJuIGF9O3RoaXMuaGlkZVJhaWw9ZnVuY3Rpb24oKXthLnZpc2liaWxpdHk9XHJcbiExO2EucmFpbC52aXNpYmlsaXR5PSExO2EucmFpbC5jc3MoXCJkaXNwbGF5XCIsXCJub25lXCIpO3JldHVybiBhfTt0aGlzLmhpZGVSYWlsSHI9ZnVuY3Rpb24oKXtpZighYS5yYWlsaClyZXR1cm4gYTthLnJhaWxoLnZpc2liaWxpdHk9ITE7YS5yYWlsaC5jc3MoXCJkaXNwbGF5XCIsXCJub25lXCIpO3JldHVybiBhfTt0aGlzLnNob3c9ZnVuY3Rpb24oKXthLmhpZGRlbj0hMTthLnJhaWxzbG9ja2VkPSExO3JldHVybiBhLnNob3dSYWlsKCkuc2hvd1JhaWxIcigpfTt0aGlzLmhpZGU9ZnVuY3Rpb24oKXthLmhpZGRlbj0hMDthLnJhaWxzbG9ja2VkPSEwO3JldHVybiBhLmhpZGVSYWlsKCkuaGlkZVJhaWxIcigpfTt0aGlzLnRvZ2dsZT1mdW5jdGlvbigpe3JldHVybiBhLmhpZGRlbj9hLnNob3coKTphLmhpZGUoKX07dGhpcy5yZW1vdmU9ZnVuY3Rpb24oKXthLnN0b3AoKTthLmN1cnNvcnRpbWVvdXQmJmNsZWFyVGltZW91dChhLmN1cnNvcnRpbWVvdXQpO2Zvcih2YXIgYiBpbiBhLmRlbGF5bGlzdClhLmRlbGF5bGlzdFtiXSYmXHJcbncoYS5kZWxheWxpc3RbYl0uaCk7YS5kb1pvb21PdXQoKTthLnVuYmluZEFsbCgpO2UuaXNpZTkmJmEud2luWzBdLmRldGFjaEV2ZW50KFwib25wcm9wZXJ0eWNoYW5nZVwiLGEub25BdHRyaWJ1dGVDaGFuZ2UpOyExIT09YS5vYnNlcnZlciYmYS5vYnNlcnZlci5kaXNjb25uZWN0KCk7ITEhPT1hLm9ic2VydmVycmVtb3ZlciYmYS5vYnNlcnZlcnJlbW92ZXIuZGlzY29ubmVjdCgpOyExIT09YS5vYnNlcnZlcmJvZHkmJmEub2JzZXJ2ZXJib2R5LmRpc2Nvbm5lY3QoKTthLmV2ZW50cz1udWxsO2EuY3Vyc29yJiZhLmN1cnNvci5yZW1vdmUoKTthLmN1cnNvcmgmJmEuY3Vyc29yaC5yZW1vdmUoKTthLnJhaWwmJmEucmFpbC5yZW1vdmUoKTthLnJhaWxoJiZhLnJhaWxoLnJlbW92ZSgpO2Euem9vbSYmYS56b29tLnJlbW92ZSgpO2ZvcihiPTA7YjxhLnNhdmVkLmNzcy5sZW5ndGg7YisrKXt2YXIgYz1hLnNhdmVkLmNzc1tiXTtjWzBdLmNzcyhjWzFdLHZvaWQgMD09PWNbMl0/XCJcIjpjWzJdKX1hLnNhdmVkPVxyXG4hMTthLm1lLmRhdGEoXCJfX25pY2VzY3JvbGxcIixcIlwiKTt2YXIgZD1mLm5pY2VzY3JvbGw7ZC5lYWNoKGZ1bmN0aW9uKGIpe2lmKHRoaXMmJnRoaXMuaWQ9PT1hLmlkKXtkZWxldGUgZFtiXTtmb3IodmFyIGM9KytiO2M8ZC5sZW5ndGg7YysrLGIrKylkW2JdPWRbY107ZC5sZW5ndGgtLTtkLmxlbmd0aCYmZGVsZXRlIGRbZC5sZW5ndGhdfX0pO2Zvcih2YXIgayBpbiBhKWFba109bnVsbCxkZWxldGUgYVtrXTthPW51bGx9O3RoaXMuc2Nyb2xsc3RhcnQ9ZnVuY3Rpb24oYil7dGhpcy5vbnNjcm9sbHN0YXJ0PWI7cmV0dXJuIGF9O3RoaXMuc2Nyb2xsZW5kPWZ1bmN0aW9uKGIpe3RoaXMub25zY3JvbGxlbmQ9YjtyZXR1cm4gYX07dGhpcy5zY3JvbGxjYW5jZWw9ZnVuY3Rpb24oYil7dGhpcy5vbnNjcm9sbGNhbmNlbD1iO3JldHVybiBhfTt0aGlzLnpvb21pbj1mdW5jdGlvbihiKXt0aGlzLm9uem9vbWluPWI7cmV0dXJuIGF9O3RoaXMuem9vbW91dD1mdW5jdGlvbihiKXt0aGlzLm9uem9vbW91dD1cclxuYjtyZXR1cm4gYX07dGhpcy5pc1Njcm9sbGFibGU9ZnVuY3Rpb24oYSl7YT1hLnRhcmdldD9hLnRhcmdldDphO2lmKFwiT1BUSU9OXCI9PWEubm9kZU5hbWUpcmV0dXJuITA7Zm9yKDthJiYxPT1hLm5vZGVUeXBlJiYhL15CT0RZfEhUTUwvLnRlc3QoYS5ub2RlTmFtZSk7KXt2YXIgYz1mKGEpLGM9Yy5jc3MoXCJvdmVyZmxvd1lcIil8fGMuY3NzKFwib3ZlcmZsb3dYXCIpfHxjLmNzcyhcIm92ZXJmbG93XCIpfHxcIlwiO2lmKC9zY3JvbGx8YXV0by8udGVzdChjKSlyZXR1cm4gYS5jbGllbnRIZWlnaHQhPWEuc2Nyb2xsSGVpZ2h0O2E9YS5wYXJlbnROb2RlP2EucGFyZW50Tm9kZTohMX1yZXR1cm4hMX07dGhpcy5nZXRWaWV3cG9ydD1mdW5jdGlvbihhKXtmb3IoYT1hJiZhLnBhcmVudE5vZGU/YS5wYXJlbnROb2RlOiExO2EmJjE9PWEubm9kZVR5cGUmJiEvXkJPRFl8SFRNTC8udGVzdChhLm5vZGVOYW1lKTspe3ZhciBjPWYoYSk7aWYoL2ZpeGVkfGFic29sdXRlLy50ZXN0KGMuY3NzKFwicG9zaXRpb25cIikpKXJldHVybiBjO1xyXG52YXIgZD1jLmNzcyhcIm92ZXJmbG93WVwiKXx8Yy5jc3MoXCJvdmVyZmxvd1hcIil8fGMuY3NzKFwib3ZlcmZsb3dcIil8fFwiXCI7aWYoL3Njcm9sbHxhdXRvLy50ZXN0KGQpJiZhLmNsaWVudEhlaWdodCE9YS5zY3JvbGxIZWlnaHR8fDA8Yy5nZXROaWNlU2Nyb2xsKCkubGVuZ3RoKXJldHVybiBjO2E9YS5wYXJlbnROb2RlP2EucGFyZW50Tm9kZTohMX1yZXR1cm4hMX07dGhpcy50cmlnZ2VyU2Nyb2xsRW5kPWZ1bmN0aW9uKCl7aWYoYS5vbnNjcm9sbGVuZCl7dmFyIGI9YS5nZXRTY3JvbGxMZWZ0KCksYz1hLmdldFNjcm9sbFRvcCgpO2Eub25zY3JvbGxlbmQuY2FsbChhLHt0eXBlOlwic2Nyb2xsZW5kXCIsY3VycmVudDp7eDpiLHk6Y30sZW5kOnt4OmIseTpjfX0pfX07dGhpcy5vbm1vdXNld2hlZWw9ZnVuY3Rpb24oYil7aWYoIWEud2hlZWxwcmV2ZW50ZWQpe2lmKGEucmFpbHNsb2NrZWQpcmV0dXJuIGEuZGVib3VuY2VkKFwiY2hlY2t1bmxvY2tcIixhLnJlc2l6ZSwyNTApLCEwO2lmKGEucmFpbC5kcmFnKXJldHVybiBhLmNhbmNlbEV2ZW50KGIpO1xyXG5cImF1dG9cIj09YS5vcHQub25lYXhpc21vdXNlbW9kZSYmMCE9Yi5kZWx0YVgmJihhLm9wdC5vbmVheGlzbW91c2Vtb2RlPSExKTtpZihhLm9wdC5vbmVheGlzbW91c2Vtb2RlJiYwPT1iLmRlbHRhWCYmIWEucmFpbC5zY3JvbGxhYmxlKXJldHVybiBhLnJhaWxoJiZhLnJhaWxoLnNjcm9sbGFibGU/YS5vbm1vdXNld2hlZWxocihiKTohMDt2YXIgYz0rbmV3IERhdGUsZD0hMTthLm9wdC5wcmVzZXJ2ZW5hdGl2ZXNjcm9sbGluZyYmYS5jaGVja2FyZWErNjAwPGMmJihhLm5hdGl2ZXNjcm9sbGluZ2FyZWE9YS5pc1Njcm9sbGFibGUoYiksZD0hMCk7YS5jaGVja2FyZWE9YztpZihhLm5hdGl2ZXNjcm9sbGluZ2FyZWEpcmV0dXJuITA7aWYoYj10KGIsITEsZCkpYS5jaGVja2FyZWE9MDtyZXR1cm4gYn19O3RoaXMub25tb3VzZXdoZWVsaHI9ZnVuY3Rpb24oYil7aWYoIWEud2hlZWxwcmV2ZW50ZWQpe2lmKGEucmFpbHNsb2NrZWR8fCFhLnJhaWxoLnNjcm9sbGFibGUpcmV0dXJuITA7aWYoYS5yYWlsLmRyYWcpcmV0dXJuIGEuY2FuY2VsRXZlbnQoYik7XHJcbnZhciBjPStuZXcgRGF0ZSxkPSExO2Eub3B0LnByZXNlcnZlbmF0aXZlc2Nyb2xsaW5nJiZhLmNoZWNrYXJlYSs2MDA8YyYmKGEubmF0aXZlc2Nyb2xsaW5nYXJlYT1hLmlzU2Nyb2xsYWJsZShiKSxkPSEwKTthLmNoZWNrYXJlYT1jO3JldHVybiBhLm5hdGl2ZXNjcm9sbGluZ2FyZWE/ITA6YS5yYWlsc2xvY2tlZD9hLmNhbmNlbEV2ZW50KGIpOnQoYiwhMCxkKX19O3RoaXMuc3RvcD1mdW5jdGlvbigpe2EuY2FuY2VsU2Nyb2xsKCk7YS5zY3JvbGxtb24mJmEuc2Nyb2xsbW9uLnN0b3AoKTthLmN1cnNvcmZyZWV6ZWQ9ITE7YS5zY3JvbGwueT1NYXRoLnJvdW5kKGEuZ2V0U2Nyb2xsVG9wKCkqKDEvYS5zY3JvbGxyYXRpby55KSk7YS5ub3RpY2VDdXJzb3IoKTtyZXR1cm4gYX07dGhpcy5nZXRUcmFuc2l0aW9uU3BlZWQ9ZnVuY3Rpb24oYil7Yj1NYXRoLm1pbihNYXRoLnJvdW5kKDEwKmEub3B0LnNjcm9sbHNwZWVkKSxNYXRoLnJvdW5kKGIvMjAqYS5vcHQuc2Nyb2xsc3BlZWQpKTtyZXR1cm4gMjA8XHJcbmI/YjowfTthLm9wdC5zbW9vdGhzY3JvbGw/YS5pc2h3c2Nyb2xsJiZlLmhhc3RyYW5zaXRpb24mJmEub3B0LnVzZXRyYW5zaXRpb24mJmEub3B0LnNtb290aHNjcm9sbD8odGhpcy5wcmVwYXJlVHJhbnNpdGlvbj1mdW5jdGlvbihiLGMpe3ZhciBkPWM/MjA8Yj9iOjA6YS5nZXRUcmFuc2l0aW9uU3BlZWQoYiksZj1kP2UucHJlZml4c3R5bGUrXCJ0cmFuc2Zvcm0gXCIrZCtcIm1zIGVhc2Utb3V0XCI6XCJcIjthLmxhc3R0cmFuc2l0aW9uc3R5bGUmJmEubGFzdHRyYW5zaXRpb25zdHlsZT09Znx8KGEubGFzdHRyYW5zaXRpb25zdHlsZT1mLGEuZG9jLmNzcyhlLnRyYW5zaXRpb25zdHlsZSxmKSk7cmV0dXJuIGR9LHRoaXMuZG9TY3JvbGxMZWZ0PWZ1bmN0aW9uKGIsYyl7dmFyIGQ9YS5zY3JvbGxydW5uaW5nP2EubmV3c2Nyb2xseTphLmdldFNjcm9sbFRvcCgpO2EuZG9TY3JvbGxQb3MoYixkLGMpfSx0aGlzLmRvU2Nyb2xsVG9wPWZ1bmN0aW9uKGIsYyl7dmFyIGQ9YS5zY3JvbGxydW5uaW5nP1xyXG5hLm5ld3Njcm9sbHg6YS5nZXRTY3JvbGxMZWZ0KCk7YS5kb1Njcm9sbFBvcyhkLGIsYyl9LHRoaXMuZG9TY3JvbGxQb3M9ZnVuY3Rpb24oYixjLGQpe3ZhciBmPWEuZ2V0U2Nyb2xsVG9wKCksaz1hLmdldFNjcm9sbExlZnQoKTsoMD4oYS5uZXdzY3JvbGx5LWYpKihjLWYpfHwwPihhLm5ld3Njcm9sbHgtaykqKGItaykpJiZhLmNhbmNlbFNjcm9sbCgpOzA9PWEub3B0LmJvdW5jZXNjcm9sbCYmKDA+Yz9jPTA6Yz5hLnBhZ2UubWF4aCYmKGM9YS5wYWdlLm1heGgpLDA+Yj9iPTA6Yj5hLnBhZ2UubWF4dyYmKGI9YS5wYWdlLm1heHcpKTtpZihhLnNjcm9sbHJ1bm5pbmcmJmI9PWEubmV3c2Nyb2xseCYmYz09YS5uZXdzY3JvbGx5KXJldHVybiExO2EubmV3c2Nyb2xseT1jO2EubmV3c2Nyb2xseD1iO2EubmV3c2Nyb2xsc3BlZWQ9ZHx8ITE7aWYoYS50aW1lcilyZXR1cm4hMTthLnRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgZD1hLmdldFNjcm9sbFRvcCgpLGY9YS5nZXRTY3JvbGxMZWZ0KCksXHJcbms9TWF0aC5yb3VuZChNYXRoLnNxcnQoTWF0aC5wb3coYi1mLDIpK01hdGgucG93KGMtZCwyKSkpLGs9YS5uZXdzY3JvbGxzcGVlZCYmMTxhLm5ld3Njcm9sbHNwZWVkP2EubmV3c2Nyb2xsc3BlZWQ6YS5nZXRUcmFuc2l0aW9uU3BlZWQoayk7YS5uZXdzY3JvbGxzcGVlZCYmMT49YS5uZXdzY3JvbGxzcGVlZCYmKGsqPWEubmV3c2Nyb2xsc3BlZWQpO2EucHJlcGFyZVRyYW5zaXRpb24oaywhMCk7YS50aW1lcnNjcm9sbCYmYS50aW1lcnNjcm9sbC50bSYmY2xlYXJJbnRlcnZhbChhLnRpbWVyc2Nyb2xsLnRtKTswPGsmJighYS5zY3JvbGxydW5uaW5nJiZhLm9uc2Nyb2xsc3RhcnQmJmEub25zY3JvbGxzdGFydC5jYWxsKGEse3R5cGU6XCJzY3JvbGxzdGFydFwiLGN1cnJlbnQ6e3g6Zix5OmR9LHJlcXVlc3Q6e3g6Yix5OmN9LGVuZDp7eDphLm5ld3Njcm9sbHgseTphLm5ld3Njcm9sbHl9LHNwZWVkOmt9KSxlLnRyYW5zaXRpb25lbmQ/YS5zY3JvbGxlbmR0cmFwcGVkfHwoYS5zY3JvbGxlbmR0cmFwcGVkPVxyXG4hMCxhLmJpbmQoYS5kb2MsZS50cmFuc2l0aW9uZW5kLGEub25TY3JvbGxUcmFuc2l0aW9uRW5kLCExKSk6KGEuc2Nyb2xsZW5kdHJhcHBlZCYmY2xlYXJUaW1lb3V0KGEuc2Nyb2xsZW5kdHJhcHBlZCksYS5zY3JvbGxlbmR0cmFwcGVkPXNldFRpbWVvdXQoYS5vblNjcm9sbFRyYW5zaXRpb25FbmQsaykpLGEudGltZXJzY3JvbGw9e2J6Om5ldyBEKGQsYS5uZXdzY3JvbGx5LGssMCwwLC41OCwxKSxiaDpuZXcgRChmLGEubmV3c2Nyb2xseCxrLDAsMCwuNTgsMSl9LGEuY3Vyc29yZnJlZXplZHx8KGEudGltZXJzY3JvbGwudG09c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXthLnNob3dDdXJzb3IoYS5nZXRTY3JvbGxUb3AoKSxhLmdldFNjcm9sbExlZnQoKSl9LDYwKSkpO2Euc3luY2hlZChcImRvU2Nyb2xsLXNldFwiLGZ1bmN0aW9uKCl7YS50aW1lcj0wO2Euc2Nyb2xsZW5kdHJhcHBlZCYmKGEuc2Nyb2xscnVubmluZz0hMCk7YS5zZXRTY3JvbGxUb3AoYS5uZXdzY3JvbGx5KTthLnNldFNjcm9sbExlZnQoYS5uZXdzY3JvbGx4KTtcclxuaWYoIWEuc2Nyb2xsZW5kdHJhcHBlZClhLm9uU2Nyb2xsVHJhbnNpdGlvbkVuZCgpfSl9LDUwKX0sdGhpcy5jYW5jZWxTY3JvbGw9ZnVuY3Rpb24oKXtpZighYS5zY3JvbGxlbmR0cmFwcGVkKXJldHVybiEwO3ZhciBiPWEuZ2V0U2Nyb2xsVG9wKCksYz1hLmdldFNjcm9sbExlZnQoKTthLnNjcm9sbHJ1bm5pbmc9ITE7ZS50cmFuc2l0aW9uZW5kfHxjbGVhclRpbWVvdXQoZS50cmFuc2l0aW9uZW5kKTthLnNjcm9sbGVuZHRyYXBwZWQ9ITE7YS5fdW5iaW5kKGEuZG9jWzBdLGUudHJhbnNpdGlvbmVuZCxhLm9uU2Nyb2xsVHJhbnNpdGlvbkVuZCk7YS5wcmVwYXJlVHJhbnNpdGlvbigwKTthLnNldFNjcm9sbFRvcChiKTthLnJhaWxoJiZhLnNldFNjcm9sbExlZnQoYyk7YS50aW1lcnNjcm9sbCYmYS50aW1lcnNjcm9sbC50bSYmY2xlYXJJbnRlcnZhbChhLnRpbWVyc2Nyb2xsLnRtKTthLnRpbWVyc2Nyb2xsPSExO2EuY3Vyc29yZnJlZXplZD0hMTthLnNob3dDdXJzb3IoYixjKTtyZXR1cm4gYX0sXHJcbnRoaXMub25TY3JvbGxUcmFuc2l0aW9uRW5kPWZ1bmN0aW9uKCl7YS5zY3JvbGxlbmR0cmFwcGVkJiZhLl91bmJpbmQoYS5kb2NbMF0sZS50cmFuc2l0aW9uZW5kLGEub25TY3JvbGxUcmFuc2l0aW9uRW5kKTthLnNjcm9sbGVuZHRyYXBwZWQ9ITE7YS5wcmVwYXJlVHJhbnNpdGlvbigwKTthLnRpbWVyc2Nyb2xsJiZhLnRpbWVyc2Nyb2xsLnRtJiZjbGVhckludGVydmFsKGEudGltZXJzY3JvbGwudG0pO2EudGltZXJzY3JvbGw9ITE7dmFyIGI9YS5nZXRTY3JvbGxUb3AoKSxjPWEuZ2V0U2Nyb2xsTGVmdCgpO2Euc2V0U2Nyb2xsVG9wKGIpO2EucmFpbGgmJmEuc2V0U2Nyb2xsTGVmdChjKTthLm5vdGljZUN1cnNvcighMSxiLGMpO2EuY3Vyc29yZnJlZXplZD0hMTswPmI/Yj0wOmI+YS5wYWdlLm1heGgmJihiPWEucGFnZS5tYXhoKTswPmM/Yz0wOmM+YS5wYWdlLm1heHcmJihjPWEucGFnZS5tYXh3KTtpZihiIT1hLm5ld3Njcm9sbHl8fGMhPWEubmV3c2Nyb2xseClyZXR1cm4gYS5kb1Njcm9sbFBvcyhjLFxyXG5iLGEub3B0LnNuYXBiYWNrc3BlZWQpO2Eub25zY3JvbGxlbmQmJmEuc2Nyb2xscnVubmluZyYmYS50cmlnZ2VyU2Nyb2xsRW5kKCk7YS5zY3JvbGxydW5uaW5nPSExfSk6KHRoaXMuZG9TY3JvbGxMZWZ0PWZ1bmN0aW9uKGIsYyl7dmFyIGQ9YS5zY3JvbGxydW5uaW5nP2EubmV3c2Nyb2xseTphLmdldFNjcm9sbFRvcCgpO2EuZG9TY3JvbGxQb3MoYixkLGMpfSx0aGlzLmRvU2Nyb2xsVG9wPWZ1bmN0aW9uKGIsYyl7dmFyIGQ9YS5zY3JvbGxydW5uaW5nP2EubmV3c2Nyb2xseDphLmdldFNjcm9sbExlZnQoKTthLmRvU2Nyb2xsUG9zKGQsYixjKX0sdGhpcy5kb1Njcm9sbFBvcz1mdW5jdGlvbihiLGMsZCl7ZnVuY3Rpb24gZSgpe2lmKGEuY2FuY2VsQW5pbWF0aW9uRnJhbWUpcmV0dXJuITA7YS5zY3JvbGxydW5uaW5nPSEwO2lmKHA9MS1wKXJldHVybiBhLnRpbWVyPXYoZSl8fDE7dmFyIGI9MCxjLGQsZj1kPWEuZ2V0U2Nyb2xsVG9wKCk7aWYoYS5kc3QuYXkpe2Y9YS5ienNjcm9sbD9cclxuYS5kc3QucHkrYS5ienNjcm9sbC5nZXROb3coKSphLmRzdC5heTphLm5ld3Njcm9sbHk7Yz1mLWQ7aWYoMD5jJiZmPGEubmV3c2Nyb2xseXx8MDxjJiZmPmEubmV3c2Nyb2xseSlmPWEubmV3c2Nyb2xseTthLnNldFNjcm9sbFRvcChmKTtmPT1hLm5ld3Njcm9sbHkmJihiPTEpfWVsc2UgYj0xO2Q9Yz1hLmdldFNjcm9sbExlZnQoKTtpZihhLmRzdC5heCl7ZD1hLmJ6c2Nyb2xsP2EuZHN0LnB4K2EuYnpzY3JvbGwuZ2V0Tm93KCkqYS5kc3QuYXg6YS5uZXdzY3JvbGx4O2M9ZC1jO2lmKDA+YyYmZDxhLm5ld3Njcm9sbHh8fDA8YyYmZD5hLm5ld3Njcm9sbHgpZD1hLm5ld3Njcm9sbHg7YS5zZXRTY3JvbGxMZWZ0KGQpO2Q9PWEubmV3c2Nyb2xseCYmKGIrPTEpfWVsc2UgYis9MTsyPT1iPyhhLnRpbWVyPTAsYS5jdXJzb3JmcmVlemVkPSExLGEuYnpzY3JvbGw9ITEsYS5zY3JvbGxydW5uaW5nPSExLDA+Zj9mPTA6Zj5hLnBhZ2UubWF4aCYmKGY9TWF0aC5tYXgoMCxhLnBhZ2UubWF4aCkpLFxyXG4wPmQ/ZD0wOmQ+YS5wYWdlLm1heHcmJihkPWEucGFnZS5tYXh3KSxkIT1hLm5ld3Njcm9sbHh8fGYhPWEubmV3c2Nyb2xseT9hLmRvU2Nyb2xsUG9zKGQsZik6YS5vbnNjcm9sbGVuZCYmYS50cmlnZ2VyU2Nyb2xsRW5kKCkpOmEudGltZXI9dihlKXx8MX1jPXZvaWQgMD09PWN8fCExPT09Yz9hLmdldFNjcm9sbFRvcCghMCk6YztpZihhLnRpbWVyJiZhLm5ld3Njcm9sbHk9PWMmJmEubmV3c2Nyb2xseD09YilyZXR1cm4hMDthLnRpbWVyJiZ3KGEudGltZXIpO2EudGltZXI9MDt2YXIgZj1hLmdldFNjcm9sbFRvcCgpLGs9YS5nZXRTY3JvbGxMZWZ0KCk7KDA+KGEubmV3c2Nyb2xseS1mKSooYy1mKXx8MD4oYS5uZXdzY3JvbGx4LWspKihiLWspKSYmYS5jYW5jZWxTY3JvbGwoKTthLm5ld3Njcm9sbHk9YzthLm5ld3Njcm9sbHg9YjthLmJvdW5jZXNjcm9sbCYmYS5yYWlsLnZpc2liaWxpdHl8fCgwPmEubmV3c2Nyb2xseT9hLm5ld3Njcm9sbHk9MDphLm5ld3Njcm9sbHk+YS5wYWdlLm1heGgmJlxyXG4oYS5uZXdzY3JvbGx5PWEucGFnZS5tYXhoKSk7YS5ib3VuY2VzY3JvbGwmJmEucmFpbGgudmlzaWJpbGl0eXx8KDA+YS5uZXdzY3JvbGx4P2EubmV3c2Nyb2xseD0wOmEubmV3c2Nyb2xseD5hLnBhZ2UubWF4dyYmKGEubmV3c2Nyb2xseD1hLnBhZ2UubWF4dykpO2EuZHN0PXt9O2EuZHN0Lng9Yi1rO2EuZHN0Lnk9Yy1mO2EuZHN0LnB4PWs7YS5kc3QucHk9Zjt2YXIgaD1NYXRoLnJvdW5kKE1hdGguc3FydChNYXRoLnBvdyhhLmRzdC54LDIpK01hdGgucG93KGEuZHN0LnksMikpKTthLmRzdC5heD1hLmRzdC54L2g7YS5kc3QuYXk9YS5kc3QueS9oO3ZhciBsPTAsbj1oOzA9PWEuZHN0Lng/KGw9ZixuPWMsYS5kc3QuYXk9MSxhLmRzdC5weT0wKTowPT1hLmRzdC55JiYobD1rLG49YixhLmRzdC5heD0xLGEuZHN0LnB4PTApO2g9YS5nZXRUcmFuc2l0aW9uU3BlZWQoaCk7ZCYmMT49ZCYmKGgqPWQpO2EuYnpzY3JvbGw9MDxoP2EuYnpzY3JvbGw/YS5ienNjcm9sbC51cGRhdGUobixoKTpcclxubmV3IEQobCxuLGgsMCwxLDAsMSk6ITE7aWYoIWEudGltZXIpeyhmPT1hLnBhZ2UubWF4aCYmYz49YS5wYWdlLm1heGh8fGs9PWEucGFnZS5tYXh3JiZiPj1hLnBhZ2UubWF4dykmJmEuY2hlY2tDb250ZW50U2l6ZSgpO3ZhciBwPTE7YS5jYW5jZWxBbmltYXRpb25GcmFtZT0hMTthLnRpbWVyPTE7YS5vbnNjcm9sbHN0YXJ0JiYhYS5zY3JvbGxydW5uaW5nJiZhLm9uc2Nyb2xsc3RhcnQuY2FsbChhLHt0eXBlOlwic2Nyb2xsc3RhcnRcIixjdXJyZW50Ont4OmsseTpmfSxyZXF1ZXN0Ont4OmIseTpjfSxlbmQ6e3g6YS5uZXdzY3JvbGx4LHk6YS5uZXdzY3JvbGx5fSxzcGVlZDpofSk7ZSgpOyhmPT1hLnBhZ2UubWF4aCYmYz49Znx8az09YS5wYWdlLm1heHcmJmI+PWspJiZhLmNoZWNrQ29udGVudFNpemUoKTthLm5vdGljZUN1cnNvcigpfX0sdGhpcy5jYW5jZWxTY3JvbGw9ZnVuY3Rpb24oKXthLnRpbWVyJiZ3KGEudGltZXIpO2EudGltZXI9MDthLmJ6c2Nyb2xsPSExO2Euc2Nyb2xscnVubmluZz1cclxuITE7cmV0dXJuIGF9KToodGhpcy5kb1Njcm9sbExlZnQ9ZnVuY3Rpb24oYixjKXt2YXIgZD1hLmdldFNjcm9sbFRvcCgpO2EuZG9TY3JvbGxQb3MoYixkLGMpfSx0aGlzLmRvU2Nyb2xsVG9wPWZ1bmN0aW9uKGIsYyl7dmFyIGQ9YS5nZXRTY3JvbGxMZWZ0KCk7YS5kb1Njcm9sbFBvcyhkLGIsYyl9LHRoaXMuZG9TY3JvbGxQb3M9ZnVuY3Rpb24oYixjLGQpe3ZhciBlPWI+YS5wYWdlLm1heHc/YS5wYWdlLm1heHc6YjswPmUmJihlPTApO3ZhciBmPWM+YS5wYWdlLm1heGg/YS5wYWdlLm1heGg6YzswPmYmJihmPTApO2Euc3luY2hlZChcInNjcm9sbFwiLGZ1bmN0aW9uKCl7YS5zZXRTY3JvbGxUb3AoZik7YS5zZXRTY3JvbGxMZWZ0KGUpfSl9LHRoaXMuY2FuY2VsU2Nyb2xsPWZ1bmN0aW9uKCl7fSk7dGhpcy5kb1Njcm9sbEJ5PWZ1bmN0aW9uKGIsYyl7dmFyIGQ9MCxkPWM/TWF0aC5mbG9vcigoYS5zY3JvbGwueS1iKSphLnNjcm9sbHJhdGlvLnkpOihhLnRpbWVyP2EubmV3c2Nyb2xseTpcclxuYS5nZXRTY3JvbGxUb3AoITApKS1iO2lmKGEuYm91bmNlc2Nyb2xsKXt2YXIgZT1NYXRoLnJvdW5kKGEudmlldy5oLzIpO2Q8LWU/ZD0tZTpkPmEucGFnZS5tYXhoK2UmJihkPWEucGFnZS5tYXhoK2UpfWEuY3Vyc29yZnJlZXplZD0hMTtlPWEuZ2V0U2Nyb2xsVG9wKCEwKTtpZigwPmQmJjA+PWUpcmV0dXJuIGEubm90aWNlQ3Vyc29yKCk7aWYoZD5hLnBhZ2UubWF4aCYmZT49YS5wYWdlLm1heGgpcmV0dXJuIGEuY2hlY2tDb250ZW50U2l6ZSgpLGEubm90aWNlQ3Vyc29yKCk7YS5kb1Njcm9sbFRvcChkKX07dGhpcy5kb1Njcm9sbExlZnRCeT1mdW5jdGlvbihiLGMpe3ZhciBkPTAsZD1jP01hdGguZmxvb3IoKGEuc2Nyb2xsLngtYikqYS5zY3JvbGxyYXRpby54KTooYS50aW1lcj9hLm5ld3Njcm9sbHg6YS5nZXRTY3JvbGxMZWZ0KCEwKSktYjtpZihhLmJvdW5jZXNjcm9sbCl7dmFyIGU9TWF0aC5yb3VuZChhLnZpZXcudy8yKTtkPC1lP2Q9LWU6ZD5hLnBhZ2UubWF4dytlJiYoZD1hLnBhZ2UubWF4dytcclxuZSl9YS5jdXJzb3JmcmVlemVkPSExO2U9YS5nZXRTY3JvbGxMZWZ0KCEwKTtpZigwPmQmJjA+PWV8fGQ+YS5wYWdlLm1heHcmJmU+PWEucGFnZS5tYXh3KXJldHVybiBhLm5vdGljZUN1cnNvcigpO2EuZG9TY3JvbGxMZWZ0KGQpfTt0aGlzLmRvU2Nyb2xsVG89ZnVuY3Rpb24oYixjKXthLmN1cnNvcmZyZWV6ZWQ9ITE7YS5kb1Njcm9sbFRvcChiKX07dGhpcy5jaGVja0NvbnRlbnRTaXplPWZ1bmN0aW9uKCl7dmFyIGI9YS5nZXRDb250ZW50U2l6ZSgpO2IuaD09YS5wYWdlLmgmJmIudz09YS5wYWdlLnd8fGEucmVzaXplKCExLGIpfTthLm9uc2Nyb2xsPWZ1bmN0aW9uKGIpe2EucmFpbC5kcmFnfHxhLmN1cnNvcmZyZWV6ZWR8fGEuc3luY2hlZChcInNjcm9sbFwiLGZ1bmN0aW9uKCl7YS5zY3JvbGwueT1NYXRoLnJvdW5kKGEuZ2V0U2Nyb2xsVG9wKCkqKDEvYS5zY3JvbGxyYXRpby55KSk7YS5yYWlsaCYmKGEuc2Nyb2xsLng9TWF0aC5yb3VuZChhLmdldFNjcm9sbExlZnQoKSooMS9hLnNjcm9sbHJhdGlvLngpKSk7XHJcbmEubm90aWNlQ3Vyc29yKCl9KX07YS5iaW5kKGEuZG9jc2Nyb2xsLFwic2Nyb2xsXCIsYS5vbnNjcm9sbCk7dGhpcy5kb1pvb21Jbj1mdW5jdGlvbihiKXtpZighYS56b29tYWN0aXZlKXthLnpvb21hY3RpdmU9ITA7YS56b29tcmVzdG9yZT17c3R5bGU6e319O3ZhciBjPVwicG9zaXRpb24gdG9wIGxlZnQgekluZGV4IGJhY2tncm91bmRDb2xvciBtYXJnaW5Ub3AgbWFyZ2luQm90dG9tIG1hcmdpbkxlZnQgbWFyZ2luUmlnaHRcIi5zcGxpdChcIiBcIiksZD1hLndpblswXS5zdHlsZSxrO2ZvcihrIGluIGMpe3ZhciBoPWNba107YS56b29tcmVzdG9yZS5zdHlsZVtoXT12b2lkIDAhPT1kW2hdP2RbaF06XCJcIn1hLnpvb21yZXN0b3JlLnN0eWxlLndpZHRoPWEud2luLmNzcyhcIndpZHRoXCIpO2Euem9vbXJlc3RvcmUuc3R5bGUuaGVpZ2h0PWEud2luLmNzcyhcImhlaWdodFwiKTthLnpvb21yZXN0b3JlLnBhZGRpbmc9e3c6YS53aW4ub3V0ZXJXaWR0aCgpLWEud2luLndpZHRoKCksaDphLndpbi5vdXRlckhlaWdodCgpLVxyXG5hLndpbi5oZWlnaHQoKX07ZS5pc2lvczQmJihhLnpvb21yZXN0b3JlLnNjcm9sbFRvcD1mKHdpbmRvdykuc2Nyb2xsVG9wKCksZih3aW5kb3cpLnNjcm9sbFRvcCgwKSk7YS53aW4uY3NzKHtwb3NpdGlvbjplLmlzaW9zND9cImFic29sdXRlXCI6XCJmaXhlZFwiLHRvcDowLGxlZnQ6MCx6SW5kZXg6QSsxMDAsbWFyZ2luOjB9KTtjPWEud2luLmNzcyhcImJhY2tncm91bmRDb2xvclwiKTsoXCJcIj09Y3x8L3RyYW5zcGFyZW50fHJnYmFcXCgwLCAwLCAwLCAwXFwpfHJnYmFcXCgwLDAsMCwwXFwpLy50ZXN0KGMpKSYmYS53aW4uY3NzKFwiYmFja2dyb3VuZENvbG9yXCIsXCIjZmZmXCIpO2EucmFpbC5jc3Moe3pJbmRleDpBKzEwMX0pO2Euem9vbS5jc3Moe3pJbmRleDpBKzEwMn0pO2Euem9vbS5jc3MoXCJiYWNrZ3JvdW5kUG9zaXRpb25cIixcIjBweCAtMThweFwiKTthLnJlc2l6ZVpvb20oKTthLm9uem9vbWluJiZhLm9uem9vbWluLmNhbGwoYSk7cmV0dXJuIGEuY2FuY2VsRXZlbnQoYil9fTt0aGlzLmRvWm9vbU91dD1cclxuZnVuY3Rpb24oYil7aWYoYS56b29tYWN0aXZlKXJldHVybiBhLnpvb21hY3RpdmU9ITEsYS53aW4uY3NzKFwibWFyZ2luXCIsXCJcIiksYS53aW4uY3NzKGEuem9vbXJlc3RvcmUuc3R5bGUpLGUuaXNpb3M0JiZmKHdpbmRvdykuc2Nyb2xsVG9wKGEuem9vbXJlc3RvcmUuc2Nyb2xsVG9wKSxhLnJhaWwuY3NzKHtcInotaW5kZXhcIjphLnppbmRleH0pLGEuem9vbS5jc3Moe1wiei1pbmRleFwiOmEuemluZGV4fSksYS56b29tcmVzdG9yZT0hMSxhLnpvb20uY3NzKFwiYmFja2dyb3VuZFBvc2l0aW9uXCIsXCIwcHggMHB4XCIpLGEub25SZXNpemUoKSxhLm9uem9vbW91dCYmYS5vbnpvb21vdXQuY2FsbChhKSxhLmNhbmNlbEV2ZW50KGIpfTt0aGlzLmRvWm9vbT1mdW5jdGlvbihiKXtyZXR1cm4gYS56b29tYWN0aXZlP2EuZG9ab29tT3V0KGIpOmEuZG9ab29tSW4oYil9O3RoaXMucmVzaXplWm9vbT1mdW5jdGlvbigpe2lmKGEuem9vbWFjdGl2ZSl7dmFyIGI9YS5nZXRTY3JvbGxUb3AoKTthLndpbi5jc3Moe3dpZHRoOmYod2luZG93KS53aWR0aCgpLVxyXG5hLnpvb21yZXN0b3JlLnBhZGRpbmcudytcInB4XCIsaGVpZ2h0OmYod2luZG93KS5oZWlnaHQoKS1hLnpvb21yZXN0b3JlLnBhZGRpbmcuaCtcInB4XCJ9KTthLm9uUmVzaXplKCk7YS5zZXRTY3JvbGxUb3AoTWF0aC5taW4oYS5wYWdlLm1heGgsYikpfX07dGhpcy5pbml0KCk7Zi5uaWNlc2Nyb2xsLnB1c2godGhpcyl9LE09ZnVuY3Rpb24oZil7dmFyIGM9dGhpczt0aGlzLm5jPWY7dGhpcy5zdGVwdGltZT10aGlzLmxhc3R0aW1lPXRoaXMuc3BlZWR5PXRoaXMuc3BlZWR4PXRoaXMubGFzdHk9dGhpcy5sYXN0eD0wO3RoaXMuc25hcHk9dGhpcy5zbmFweD0hMTt0aGlzLmRlbXVseT10aGlzLmRlbXVseD0wO3RoaXMubGFzdHNjcm9sbHk9dGhpcy5sYXN0c2Nyb2xseD0tMTt0aGlzLnRpbWVyPXRoaXMuY2hreT10aGlzLmNoa3g9MDt0aGlzLnRpbWU9ZnVuY3Rpb24oKXtyZXR1cm4rbmV3IERhdGV9O3RoaXMucmVzZXQ9ZnVuY3Rpb24oZixoKXtjLnN0b3AoKTt2YXIgZD1jLnRpbWUoKTtjLnN0ZXB0aW1lPVxyXG4wO2MubGFzdHRpbWU9ZDtjLnNwZWVkeD0wO2Muc3BlZWR5PTA7Yy5sYXN0eD1mO2MubGFzdHk9aDtjLmxhc3RzY3JvbGx4PS0xO2MubGFzdHNjcm9sbHk9LTF9O3RoaXMudXBkYXRlPWZ1bmN0aW9uKGYsaCl7dmFyIGQ9Yy50aW1lKCk7Yy5zdGVwdGltZT1kLWMubGFzdHRpbWU7Yy5sYXN0dGltZT1kO3ZhciBkPWgtYy5sYXN0eSxxPWYtYy5sYXN0eCx0PWMubmMuZ2V0U2Nyb2xsVG9wKCksYT1jLm5jLmdldFNjcm9sbExlZnQoKSx0PXQrZCxhPWErcTtjLnNuYXB4PTA+YXx8YT5jLm5jLnBhZ2UubWF4dztjLnNuYXB5PTA+dHx8dD5jLm5jLnBhZ2UubWF4aDtjLnNwZWVkeD1xO2Muc3BlZWR5PWQ7Yy5sYXN0eD1mO2MubGFzdHk9aH07dGhpcy5zdG9wPWZ1bmN0aW9uKCl7Yy5uYy51bnN5bmNoZWQoXCJkb21vbWVudHVtMmRcIik7Yy50aW1lciYmY2xlYXJUaW1lb3V0KGMudGltZXIpO2MudGltZXI9MDtjLmxhc3RzY3JvbGx4PS0xO2MubGFzdHNjcm9sbHk9LTF9O3RoaXMuZG9TbmFweT1mdW5jdGlvbihmLFxyXG5oKXt2YXIgZD0hMTswPmg/KGg9MCxkPSEwKTpoPmMubmMucGFnZS5tYXhoJiYoaD1jLm5jLnBhZ2UubWF4aCxkPSEwKTswPmY/KGY9MCxkPSEwKTpmPmMubmMucGFnZS5tYXh3JiYoZj1jLm5jLnBhZ2UubWF4dyxkPSEwKTtkP2MubmMuZG9TY3JvbGxQb3MoZixoLGMubmMub3B0LnNuYXBiYWNrc3BlZWQpOmMubmMudHJpZ2dlclNjcm9sbEVuZCgpfTt0aGlzLmRvTW9tZW50dW09ZnVuY3Rpb24oZil7dmFyIGg9Yy50aW1lKCksZD1mP2grZjpjLmxhc3R0aW1lO2Y9Yy5uYy5nZXRTY3JvbGxMZWZ0KCk7dmFyIHE9Yy5uYy5nZXRTY3JvbGxUb3AoKSx0PWMubmMucGFnZS5tYXhoLGE9Yy5uYy5wYWdlLm1heHc7Yy5zcGVlZHg9MDxhP01hdGgubWluKDYwLGMuc3BlZWR4KTowO2Muc3BlZWR5PTA8dD9NYXRoLm1pbig2MCxjLnNwZWVkeSk6MDtkPWQmJjYwPj1oLWQ7aWYoMD5xfHxxPnR8fDA+Znx8Zj5hKWQ9ITE7Zj1jLnNwZWVkeCYmZD9jLnNwZWVkeDohMTtpZihjLnNwZWVkeSYmZCYmYy5zcGVlZHl8fFxyXG5mKXt2YXIgcj1NYXRoLm1heCgxNixjLnN0ZXB0aW1lKTs1MDxyJiYoZj1yLzUwLGMuc3BlZWR4Kj1mLGMuc3BlZWR5Kj1mLHI9NTApO2MuZGVtdWx4eT0wO2MubGFzdHNjcm9sbHg9Yy5uYy5nZXRTY3JvbGxMZWZ0KCk7Yy5jaGt4PWMubGFzdHNjcm9sbHg7Yy5sYXN0c2Nyb2xseT1jLm5jLmdldFNjcm9sbFRvcCgpO2MuY2hreT1jLmxhc3RzY3JvbGx5O3ZhciBwPWMubGFzdHNjcm9sbHgsZT1jLmxhc3RzY3JvbGx5LHY9ZnVuY3Rpb24oKXt2YXIgZD02MDA8Yy50aW1lKCktaD8uMDQ6LjAyO2Muc3BlZWR4JiYocD1NYXRoLmZsb29yKGMubGFzdHNjcm9sbHgtYy5zcGVlZHgqKDEtYy5kZW11bHh5KSksYy5sYXN0c2Nyb2xseD1wLDA+cHx8cD5hKSYmKGQ9LjEpO2Muc3BlZWR5JiYoZT1NYXRoLmZsb29yKGMubGFzdHNjcm9sbHktYy5zcGVlZHkqKDEtYy5kZW11bHh5KSksYy5sYXN0c2Nyb2xseT1lLDA+ZXx8ZT50KSYmKGQ9LjEpO2MuZGVtdWx4eT1NYXRoLm1pbigxLGMuZGVtdWx4eStcclxuZCk7Yy5uYy5zeW5jaGVkKFwiZG9tb21lbnR1bTJkXCIsZnVuY3Rpb24oKXtjLnNwZWVkeCYmKGMubmMuZ2V0U2Nyb2xsTGVmdCgpLGMuY2hreD1wLGMubmMuc2V0U2Nyb2xsTGVmdChwKSk7Yy5zcGVlZHkmJihjLm5jLmdldFNjcm9sbFRvcCgpLGMuY2hreT1lLGMubmMuc2V0U2Nyb2xsVG9wKGUpKTtjLnRpbWVyfHwoYy5uYy5oaWRlQ3Vyc29yKCksYy5kb1NuYXB5KHAsZSkpfSk7MT5jLmRlbXVseHk/Yy50aW1lcj1zZXRUaW1lb3V0KHYscik6KGMuc3RvcCgpLGMubmMuaGlkZUN1cnNvcigpLGMuZG9TbmFweShwLGUpKX07digpfWVsc2UgYy5kb1NuYXB5KGMubmMuZ2V0U2Nyb2xsTGVmdCgpLGMubmMuZ2V0U2Nyb2xsVG9wKCkpfX0seT1mLmZuLnNjcm9sbFRvcDtmLmNzc0hvb2tzLnBhZ2VZT2Zmc2V0PXtnZXQ6ZnVuY3Rpb24oaCxjLGspe3JldHVybihjPWYuZGF0YShoLFwiX19uaWNlc2Nyb2xsXCIpfHwhMSkmJmMuaXNod3Njcm9sbD9jLmdldFNjcm9sbFRvcCgpOnkuY2FsbChoKX0sc2V0OmZ1bmN0aW9uKGgsXHJcbmMpe3ZhciBrPWYuZGF0YShoLFwiX19uaWNlc2Nyb2xsXCIpfHwhMTtrJiZrLmlzaHdzY3JvbGw/ay5zZXRTY3JvbGxUb3AocGFyc2VJbnQoYykpOnkuY2FsbChoLGMpO3JldHVybiB0aGlzfX07Zi5mbi5zY3JvbGxUb3A9ZnVuY3Rpb24oaCl7aWYodm9pZCAwPT09aCl7dmFyIGM9dGhpc1swXT9mLmRhdGEodGhpc1swXSxcIl9fbmljZXNjcm9sbFwiKXx8ITE6ITE7cmV0dXJuIGMmJmMuaXNod3Njcm9sbD9jLmdldFNjcm9sbFRvcCgpOnkuY2FsbCh0aGlzKX1yZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9Zi5kYXRhKHRoaXMsXCJfX25pY2VzY3JvbGxcIil8fCExO2MmJmMuaXNod3Njcm9sbD9jLnNldFNjcm9sbFRvcChwYXJzZUludChoKSk6eS5jYWxsKGYodGhpcyksaCl9KX07dmFyIHo9Zi5mbi5zY3JvbGxMZWZ0O2YuY3NzSG9va3MucGFnZVhPZmZzZXQ9e2dldDpmdW5jdGlvbihoLGMsayl7cmV0dXJuKGM9Zi5kYXRhKGgsXCJfX25pY2VzY3JvbGxcIil8fCExKSYmYy5pc2h3c2Nyb2xsP1xyXG5jLmdldFNjcm9sbExlZnQoKTp6LmNhbGwoaCl9LHNldDpmdW5jdGlvbihoLGMpe3ZhciBrPWYuZGF0YShoLFwiX19uaWNlc2Nyb2xsXCIpfHwhMTtrJiZrLmlzaHdzY3JvbGw/ay5zZXRTY3JvbGxMZWZ0KHBhcnNlSW50KGMpKTp6LmNhbGwoaCxjKTtyZXR1cm4gdGhpc319O2YuZm4uc2Nyb2xsTGVmdD1mdW5jdGlvbihoKXtpZih2b2lkIDA9PT1oKXt2YXIgYz10aGlzWzBdP2YuZGF0YSh0aGlzWzBdLFwiX19uaWNlc2Nyb2xsXCIpfHwhMTohMTtyZXR1cm4gYyYmYy5pc2h3c2Nyb2xsP2MuZ2V0U2Nyb2xsTGVmdCgpOnouY2FsbCh0aGlzKX1yZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9Zi5kYXRhKHRoaXMsXCJfX25pY2VzY3JvbGxcIil8fCExO2MmJmMuaXNod3Njcm9sbD9jLnNldFNjcm9sbExlZnQocGFyc2VJbnQoaCkpOnouY2FsbChmKHRoaXMpLGgpfSl9O3ZhciBFPWZ1bmN0aW9uKGgpe3ZhciBjPXRoaXM7dGhpcy5sZW5ndGg9MDt0aGlzLm5hbWU9XCJuaWNlc2Nyb2xsYXJyYXlcIjtcclxudGhpcy5lYWNoPWZ1bmN0aW9uKGQpe2YuZWFjaChjLGQpO3JldHVybiBjfTt0aGlzLnB1c2g9ZnVuY3Rpb24oZCl7Y1tjLmxlbmd0aF09ZDtjLmxlbmd0aCsrfTt0aGlzLmVxPWZ1bmN0aW9uKGQpe3JldHVybiBjW2RdfTtpZihoKWZvcih2YXIgaz0wO2s8aC5sZW5ndGg7aysrKXt2YXIgbD1mLmRhdGEoaFtrXSxcIl9fbmljZXNjcm9sbFwiKXx8ITE7bCYmKHRoaXNbdGhpcy5sZW5ndGhdPWwsdGhpcy5sZW5ndGgrKyl9cmV0dXJuIHRoaXN9OyhmdW5jdGlvbihmLGMsayl7Zm9yKHZhciBsPTA7bDxjLmxlbmd0aDtsKyspayhmLGNbbF0pfSkoRS5wcm90b3R5cGUsXCJzaG93IGhpZGUgdG9nZ2xlIG9uUmVzaXplIHJlc2l6ZSByZW1vdmUgc3RvcCBkb1Njcm9sbFBvc1wiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihmLGMpe2ZbY109ZnVuY3Rpb24oKXt2YXIgZj1hcmd1bWVudHM7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3RoaXNbY10uYXBwbHkodGhpcyxmKX0pfX0pO2YuZm4uZ2V0TmljZVNjcm9sbD1cclxuZnVuY3Rpb24oaCl7cmV0dXJuIHZvaWQgMD09PWg/bmV3IEUodGhpcyk6dGhpc1toXSYmZi5kYXRhKHRoaXNbaF0sXCJfX25pY2VzY3JvbGxcIil8fCExfTtmLmV4cHJbXCI6XCJdLm5pY2VzY3JvbGw9ZnVuY3Rpb24oaCl7cmV0dXJuIHZvaWQgMCE9PWYuZGF0YShoLFwiX19uaWNlc2Nyb2xsXCIpfTtmLmZuLm5pY2VTY3JvbGw9ZnVuY3Rpb24oaCxjKXt2b2lkIDAhPT1jfHxcIm9iamVjdFwiIT10eXBlb2YgaHx8XCJqcXVlcnlcImluIGh8fChjPWgsaD0hMSk7Yz1mLmV4dGVuZCh7fSxjKTt2YXIgaz1uZXcgRTt2b2lkIDA9PT1jJiYoYz17fSk7aCYmKGMuZG9jPWYoaCksYy53aW49Zih0aGlzKSk7dmFyIGw9IShcImRvY1wiaW4gYyk7bHx8XCJ3aW5cImluIGN8fChjLndpbj1mKHRoaXMpKTt0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZD1mKHRoaXMpLmRhdGEoXCJfX25pY2VzY3JvbGxcIil8fCExO2R8fChjLmRvYz1sP2YodGhpcyk6Yy5kb2MsZD1uZXcgUyhjLGYodGhpcykpLGYodGhpcykuZGF0YShcIl9fbmljZXNjcm9sbFwiLFxyXG5kKSk7ay5wdXNoKGQpfSk7cmV0dXJuIDE9PWsubGVuZ3RoP2tbMF06a307d2luZG93Lk5pY2VTY3JvbGw9e2dldGpRdWVyeTpmdW5jdGlvbigpe3JldHVybiBmfX07Zi5uaWNlc2Nyb2xsfHwoZi5uaWNlc2Nyb2xsPW5ldyBFLGYubmljZXNjcm9sbC5vcHRpb25zPUspfSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9kZXZlbG9wL2NvbXBvbmVudC9saWIvanF1ZXJ5LW5pY2VzY3JvbGwvanF1ZXJ5Lm5pY2VzY3JvbGwubWluLmpzXG4vLyBtb2R1bGUgaWQgPSAxNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9');
},function(module,exports){eval("module.exports = window.$;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJ3aW5kb3cuJFwiP2Y4ZDIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiMTcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHdpbmRvdy4kO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwid2luZG93LiRcIlxuLy8gbW9kdWxlIGlkID0gMTdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==")}]);