!function(g){function I(C){if(c[C])return c[C].exports;var n=c[C]={exports:{},id:C,loaded:!1};return g[C].call(n.exports,n,n.exports,I),n.loaded=!0,n.exports}var c={};return I.m=g,I.c=c,I.p="",I(0)}([function(module,exports,__webpack_require__){eval('/**\r\n * Created by qiyc on 2017/2/6.\r\n */\r\n__webpack_require__(1);\r\n__webpack_require__(3);\r\n//模块\r\nwindow.QTopo = {};\r\nwindow.QTopo.util = __webpack_require__(4);\r\nvar Scene=__webpack_require__(5);\r\nwindow.QTopo.init = function (canvas, config) {\r\n    this.config=config;\r\n    var QtopoInstance={};\r\n    var stage = new JTopo.Stage(canvas);\r\n    var scene = new Scene(stage,{\r\n        background:config.background||""\r\n    });\r\n    QtopoInstance.scene=scene;\r\n    QtopoInstance.setOption=setOption;\r\n    test(scene);\r\n    return QtopoInstance;\r\n\r\n};\r\nfunction setOption(option){\r\n    var scene=this.scene;\r\n    createNode(option.node||{});\r\n    createContainer(option.container||{});\r\n    createLink(option.link||{});\r\n\r\n    function createNode(config){\r\n        if($.isArray(config.data)){\r\n            $.each(config.data,function(i,v){\r\n                var node=scene.createNode(v);\r\n                if($.isArray(nodeConfig.exprop)){\r\n                    $.each(nodeConfig.exprop,function(j,key){\r\n                        node[key]=v[key];\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    }\r\n    function createLink(config){\r\n        var path=config.path;\r\n        if($.isArray(path)){\r\n            var findStart;\r\n            var findEnd;\r\n            //确定搜索条件,起始点条件可不同\r\n            path.length==1?findEnd=findStart=path[0]: findStart=path[0],findEnd=path[1];\r\n            if($.isArray(config.data)){\r\n                $.each(config.data,function(i,v) {\r\n                    var start=scene.find(findStart+"="+ v.start)[0];\r\n                    var end=scene.find(findEnd+"="+ v.end)[0];\r\n                    if(start&&end){\r\n                        v.start=start;\r\n                        v.end=end;\r\n                        scene.createLink(v);\r\n                    }else{\r\n                        console.error("some link path invalid",v);\r\n                    }\r\n                });\r\n            }\r\n        }else{\r\n            console.error("can not draw link,need config \'path\' and \'path\' is Array");\r\n        }\r\n    }\r\n    function createContainer(config){\r\n\r\n    }\r\n}\r\nfunction test(scene){\r\n    scene.on("dbclick",function(target,e){\r\n        console.info(target);\r\n    });\r\n    var text=scene.createNode({\r\n        type:"text",\r\n        position:[200,200],\r\n        font:{\r\n            size:30\r\n        }\r\n    });\r\n    var normal=scene.createNode({\r\n        type:"normal",\r\n        position:[200,100],\r\n        font:{\r\n            size:30\r\n        },\r\n        image:"img/mo/wlan_4.png",\r\n        name:"test1",\r\n        size:[100,100]\r\n    });\r\n    normal.id="avsa...";\r\n    var normal2=scene.createNode({\r\n        type:"normal",\r\n        position:[200,100],\r\n        font:{\r\n            size:30\r\n        }\r\n    });\r\n    normal2.id="avsa...";\r\n    var group=scene.createContainer({\r\n        name:"test Group",\r\n        font:{\r\n            size:30\r\n        }\r\n    });\r\n    console.info(scene);\r\n    var link=scene.createLink({\r\n        type:"flexional",\r\n        start:text,\r\n        end:normal\r\n    });\r\n    link.id="avsa...";\r\n    normal.set({\r\n        position:[500,200]\r\n    });\r\n    setTimeout(function(){\r\n        text.set({\r\n            text:"aaaa"\r\n        });\r\n        normal.set({\r\n            name:"aaa",\r\n            textPosition:"hide"\r\n        });\r\n        group.add(normal);\r\n    },2000);\r\n    setTimeout(function(){\r\n        normal.set({\r\n            name:"bbb",\r\n            textPosition:"left"\r\n        });\r\n        group.add(text);\r\n    },3000);\r\n    setTimeout(function(){\r\n        normal.set({\r\n            name:"ccc",\r\n            textPosition:"top"\r\n        });\r\n        group.remove(text);\r\n        group.add(normal2);\r\n    },4000);\r\n}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jb3JlL21haW4uanM/NTk3NSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsOEJBQThCO0FBQzlCLHdDQUF3QztBQUN4Qyw4QkFBOEI7O0FBRTlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMIiwiZmlsZSI6IjAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBxaXljIG9uIDIwMTcvMi82LlxyXG4gKi9cclxucmVxdWlyZSgnLi9saWIvanF1ZXJ5LW5pY2VzY3JvbGwvanF1ZXJ5Lm5pY2VzY3JvbGwubWluLmpzJyk7XHJcbnJlcXVpcmUoXCIuL2xpYi9qdG9wby9qdG9wby1taW4uanNcIik7XHJcbi8v5qih5Z2XXHJcbndpbmRvdy5RVG9wbyA9IHt9O1xyXG53aW5kb3cuUVRvcG8udXRpbCA9IHJlcXVpcmUoJy4vdXRpbC5qcycpO1xyXG52YXIgU2NlbmU9cmVxdWlyZSgnLi9TY2VuZS5qcycpO1xyXG53aW5kb3cuUVRvcG8uaW5pdCA9IGZ1bmN0aW9uIChjYW52YXMsIGNvbmZpZykge1xyXG4gICAgdGhpcy5jb25maWc9Y29uZmlnO1xyXG4gICAgdmFyIFF0b3BvSW5zdGFuY2U9e307XHJcbiAgICB2YXIgc3RhZ2UgPSBuZXcgSlRvcG8uU3RhZ2UoY2FudmFzKTtcclxuICAgIHZhciBzY2VuZSA9IG5ldyBTY2VuZShzdGFnZSx7XHJcbiAgICAgICAgYmFja2dyb3VuZDpjb25maWcuYmFja2dyb3VuZHx8XCJcIlxyXG4gICAgfSk7XHJcbiAgICBRdG9wb0luc3RhbmNlLnNjZW5lPXNjZW5lO1xyXG4gICAgUXRvcG9JbnN0YW5jZS5zZXRPcHRpb249c2V0T3B0aW9uO1xyXG4gICAgdGVzdChzY2VuZSk7XHJcbiAgICByZXR1cm4gUXRvcG9JbnN0YW5jZTtcclxuXHJcbn07XHJcbmZ1bmN0aW9uIHNldE9wdGlvbihvcHRpb24pe1xyXG4gICAgdmFyIHNjZW5lPXRoaXMuc2NlbmU7XHJcbiAgICBjcmVhdGVOb2RlKG9wdGlvbi5ub2RlfHx7fSk7XHJcbiAgICBjcmVhdGVDb250YWluZXIob3B0aW9uLmNvbnRhaW5lcnx8e30pO1xyXG4gICAgY3JlYXRlTGluayhvcHRpb24ubGlua3x8e30pO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZU5vZGUoY29uZmlnKXtcclxuICAgICAgICBpZigkLmlzQXJyYXkoY29uZmlnLmRhdGEpKXtcclxuICAgICAgICAgICAgJC5lYWNoKGNvbmZpZy5kYXRhLGZ1bmN0aW9uKGksdil7XHJcbiAgICAgICAgICAgICAgICB2YXIgbm9kZT1zY2VuZS5jcmVhdGVOb2RlKHYpO1xyXG4gICAgICAgICAgICAgICAgaWYoJC5pc0FycmF5KG5vZGVDb25maWcuZXhwcm9wKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKG5vZGVDb25maWcuZXhwcm9wLGZ1bmN0aW9uKGosa2V5KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVtrZXldPXZba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gY3JlYXRlTGluayhjb25maWcpe1xyXG4gICAgICAgIHZhciBwYXRoPWNvbmZpZy5wYXRoO1xyXG4gICAgICAgIGlmKCQuaXNBcnJheShwYXRoKSl7XHJcbiAgICAgICAgICAgIHZhciBmaW5kU3RhcnQ7XHJcbiAgICAgICAgICAgIHZhciBmaW5kRW5kO1xyXG4gICAgICAgICAgICAvL+ehruWumuaQnOe0ouadoeS7tizotbflp4vngrnmnaHku7blj6/kuI3lkIxcclxuICAgICAgICAgICAgcGF0aC5sZW5ndGg9PTE/ZmluZEVuZD1maW5kU3RhcnQ9cGF0aFswXTogZmluZFN0YXJ0PXBhdGhbMF0sZmluZEVuZD1wYXRoWzFdO1xyXG4gICAgICAgICAgICBpZigkLmlzQXJyYXkoY29uZmlnLmRhdGEpKXtcclxuICAgICAgICAgICAgICAgICQuZWFjaChjb25maWcuZGF0YSxmdW5jdGlvbihpLHYpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3RhcnQ9c2NlbmUuZmluZChmaW5kU3RhcnQrXCI9XCIrIHYuc3RhcnQpWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlbmQ9c2NlbmUuZmluZChmaW5kRW5kK1wiPVwiKyB2LmVuZClbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoc3RhcnQmJmVuZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHYuc3RhcnQ9c3RhcnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHYuZW5kPWVuZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NlbmUuY3JlYXRlTGluayh2KTtcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcInNvbWUgbGluayBwYXRoIGludmFsaWRcIix2KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiY2FuIG5vdCBkcmF3IGxpbmssbmVlZCBjb25maWcgJ3BhdGgnIGFuZCAncGF0aCcgaXMgQXJyYXlcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gY3JlYXRlQ29udGFpbmVyKGNvbmZpZyl7XHJcblxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHRlc3Qoc2NlbmUpe1xyXG4gICAgc2NlbmUub24oXCJkYmNsaWNrXCIsZnVuY3Rpb24odGFyZ2V0LGUpe1xyXG4gICAgICAgIGNvbnNvbGUuaW5mbyh0YXJnZXQpO1xyXG4gICAgfSk7XHJcbiAgICB2YXIgdGV4dD1zY2VuZS5jcmVhdGVOb2RlKHtcclxuICAgICAgICB0eXBlOlwidGV4dFwiLFxyXG4gICAgICAgIHBvc2l0aW9uOlsyMDAsMjAwXSxcclxuICAgICAgICBmb250OntcclxuICAgICAgICAgICAgc2l6ZTozMFxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgdmFyIG5vcm1hbD1zY2VuZS5jcmVhdGVOb2RlKHtcclxuICAgICAgICB0eXBlOlwibm9ybWFsXCIsXHJcbiAgICAgICAgcG9zaXRpb246WzIwMCwxMDBdLFxyXG4gICAgICAgIGZvbnQ6e1xyXG4gICAgICAgICAgICBzaXplOjMwXHJcbiAgICAgICAgfSxcclxuICAgICAgICBpbWFnZTpcImltZy9tby93bGFuXzQucG5nXCIsXHJcbiAgICAgICAgbmFtZTpcInRlc3QxXCIsXHJcbiAgICAgICAgc2l6ZTpbMTAwLDEwMF1cclxuICAgIH0pO1xyXG4gICAgbm9ybWFsLmlkPVwiYXZzYS4uLlwiO1xyXG4gICAgdmFyIG5vcm1hbDI9c2NlbmUuY3JlYXRlTm9kZSh7XHJcbiAgICAgICAgdHlwZTpcIm5vcm1hbFwiLFxyXG4gICAgICAgIHBvc2l0aW9uOlsyMDAsMTAwXSxcclxuICAgICAgICBmb250OntcclxuICAgICAgICAgICAgc2l6ZTozMFxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgbm9ybWFsMi5pZD1cImF2c2EuLi5cIjtcclxuICAgIHZhciBncm91cD1zY2VuZS5jcmVhdGVDb250YWluZXIoe1xyXG4gICAgICAgIG5hbWU6XCJ0ZXN0IEdyb3VwXCIsXHJcbiAgICAgICAgZm9udDp7XHJcbiAgICAgICAgICAgIHNpemU6MzBcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIGNvbnNvbGUuaW5mbyhzY2VuZSk7XHJcbiAgICB2YXIgbGluaz1zY2VuZS5jcmVhdGVMaW5rKHtcclxuICAgICAgICB0eXBlOlwiZmxleGlvbmFsXCIsXHJcbiAgICAgICAgc3RhcnQ6dGV4dCxcclxuICAgICAgICBlbmQ6bm9ybWFsXHJcbiAgICB9KTtcclxuICAgIGxpbmsuaWQ9XCJhdnNhLi4uXCI7XHJcbiAgICBub3JtYWwuc2V0KHtcclxuICAgICAgICBwb3NpdGlvbjpbNTAwLDIwMF1cclxuICAgIH0pO1xyXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgIHRleHQuc2V0KHtcclxuICAgICAgICAgICAgdGV4dDpcImFhYWFcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIG5vcm1hbC5zZXQoe1xyXG4gICAgICAgICAgICBuYW1lOlwiYWFhXCIsXHJcbiAgICAgICAgICAgIHRleHRQb3NpdGlvbjpcImhpZGVcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGdyb3VwLmFkZChub3JtYWwpO1xyXG4gICAgfSwyMDAwKTtcclxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICBub3JtYWwuc2V0KHtcclxuICAgICAgICAgICAgbmFtZTpcImJiYlwiLFxyXG4gICAgICAgICAgICB0ZXh0UG9zaXRpb246XCJsZWZ0XCJcclxuICAgICAgICB9KTtcclxuICAgICAgICBncm91cC5hZGQodGV4dCk7XHJcbiAgICB9LDMwMDApO1xyXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgIG5vcm1hbC5zZXQoe1xyXG4gICAgICAgICAgICBuYW1lOlwiY2NjXCIsXHJcbiAgICAgICAgICAgIHRleHRQb3NpdGlvbjpcInRvcFwiXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZ3JvdXAucmVtb3ZlKHRleHQpO1xyXG4gICAgICAgIGdyb3VwLmFkZChub3JtYWwyKTtcclxuICAgIH0sNDAwMCk7XHJcbn1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2NvcmUvbWFpbi5qc1xuLy8gbW9kdWxlIGlkID0gMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9')},function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jquery.nicescroll 3.6.8 InuYaksa*2015 MIT http://nicescroll.areaaperta.com */(function(f){ true?!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(2)], __WEBPACK_AMD_DEFINE_FACTORY__ = (f), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === \'function\' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)):"object"===typeof exports?module.exports=f(require("jquery")):f(jQuery)})(function(f){var B=!1,F=!1,O=0,P=2E3,A=0,J=["webkit","ms","moz","o"],v=window.requestAnimationFrame||!1,w=window.cancelAnimationFrame||!1;if(!v)for(var Q in J){var G=J[Q];if(v=window[G+"RequestAnimationFrame"]){w=window[G+"CancelAnimationFrame"]||window[G+"CancelRequestAnimationFrame"];break}}var x=window.MutationObserver||window.WebKitMutationObserver||\r\n!1,K={zindex:"auto",cursoropacitymin:0,cursoropacitymax:1,cursorcolor:"#424242",cursorwidth:"6px",cursorborder:"1px solid #fff",cursorborderradius:"5px",scrollspeed:60,mousescrollstep:24,touchbehavior:!1,hwacceleration:!0,usetransition:!0,boxzoom:!1,dblclickzoom:!0,gesturezoom:!0,grabcursorenabled:!0,autohidemode:!0,background:"",iframeautoresize:!0,cursorminheight:32,preservenativescrolling:!0,railoffset:!1,railhoffset:!1,bouncescroll:!0,spacebarenabled:!0,railpadding:{top:0,right:0,left:0,bottom:0},\r\ndisableoutline:!0,horizrailenabled:!0,railalign:"right",railvalign:"bottom",enabletranslate3d:!0,enablemousewheel:!0,enablekeyboard:!0,smoothscroll:!0,sensitiverail:!0,enablemouselockapi:!0,cursorfixedheight:!1,directionlockdeadzone:6,hidecursordelay:400,nativeparentscrolling:!0,enablescrollonselection:!0,overflowx:!0,overflowy:!0,cursordragspeed:.3,rtlmode:"auto",cursordragontouch:!1,oneaxismousemode:"auto",scriptpath:function(){var f=document.getElementsByTagName("script"),f=f.length?f[f.length-\r\n1].src.split("?")[0]:"";return 0<f.split("/").length?f.split("/").slice(0,-1).join("/")+"/":""}(),preventmultitouchscrolling:!0,disablemutationobserver:!1},H=!1,R=function(){if(H)return H;var f=document.createElement("DIV"),c=f.style,k=navigator.userAgent,l=navigator.platform,d={haspointerlock:"pointerLockElement"in document||"webkitPointerLockElement"in document||"mozPointerLockElement"in document};d.isopera="opera"in window;d.isopera12=d.isopera&&"getUserMedia"in navigator;d.isoperamini="[object OperaMini]"===\r\nObject.prototype.toString.call(window.operamini);d.isie="all"in document&&"attachEvent"in f&&!d.isopera;d.isieold=d.isie&&!("msInterpolationMode"in c);d.isie7=d.isie&&!d.isieold&&(!("documentMode"in document)||7==document.documentMode);d.isie8=d.isie&&"documentMode"in document&&8==document.documentMode;d.isie9=d.isie&&"performance"in window&&9==document.documentMode;d.isie10=d.isie&&"performance"in window&&10==document.documentMode;d.isie11="msRequestFullscreen"in f&&11<=document.documentMode;d.isieedge12=\r\nnavigator.userAgent.match(/Edge\\/12\\./);d.isieedge="msOverflowStyle"in f;d.ismodernie=d.isie11||d.isieedge;d.isie9mobile=/iemobile.9/i.test(k);d.isie9mobile&&(d.isie9=!1);d.isie7mobile=!d.isie9mobile&&d.isie7&&/iemobile/i.test(k);d.ismozilla="MozAppearance"in c;d.iswebkit="WebkitAppearance"in c;d.ischrome="chrome"in window;d.ischrome38=d.ischrome&&"touchAction"in c;d.ischrome22=!d.ischrome38&&d.ischrome&&d.haspointerlock;d.ischrome26=!d.ischrome38&&d.ischrome&&"transition"in c;d.cantouch="ontouchstart"in\r\ndocument.documentElement||"ontouchstart"in window;d.hasw3ctouch=(window.PointerEvent||!1)&&(0<navigator.MaxTouchPoints||0<navigator.msMaxTouchPoints);d.hasmstouch=!d.hasw3ctouch&&(window.MSPointerEvent||!1);d.ismac=/^mac$/i.test(l);d.isios=d.cantouch&&/iphone|ipad|ipod/i.test(l);d.isios4=d.isios&&!("seal"in Object);d.isios7=d.isios&&"webkitHidden"in document;d.isios8=d.isios&&"hidden"in document;d.isandroid=/android/i.test(k);d.haseventlistener="addEventListener"in f;d.trstyle=!1;d.hastransform=!1;\r\nd.hastranslate3d=!1;d.transitionstyle=!1;d.hastransition=!1;d.transitionend=!1;l=["transform","msTransform","webkitTransform","MozTransform","OTransform"];for(k=0;k<l.length;k++)if(void 0!==c[l[k]]){d.trstyle=l[k];break}d.hastransform=!!d.trstyle;d.hastransform&&(c[d.trstyle]="translate3d(1px,2px,3px)",d.hastranslate3d=/translate3d/.test(c[d.trstyle]));d.transitionstyle=!1;d.prefixstyle="";d.transitionend=!1;for(var l="transition webkitTransition msTransition MozTransition OTransition OTransition KhtmlTransition".split(" "),\r\nq=" -webkit- -ms- -moz- -o- -o -khtml-".split(" "),t="transitionend webkitTransitionEnd msTransitionEnd transitionend otransitionend oTransitionEnd KhtmlTransitionEnd".split(" "),k=0;k<l.length;k++)if(l[k]in c){d.transitionstyle=l[k];d.prefixstyle=q[k];d.transitionend=t[k];break}d.ischrome26&&(d.prefixstyle=q[1]);d.hastransition=d.transitionstyle;a:{k=["grab","-webkit-grab","-moz-grab"];if(d.ischrome&&!d.ischrome38||d.isie)k=[];for(l=0;l<k.length;l++)if(q=k[l],c.cursor=q,c.cursor==q){c=q;break a}c=\r\n"url(//patriciaportfolio.googlecode.com/files/openhand.cur),n-resize"}d.cursorgrabvalue=c;d.hasmousecapture="setCapture"in f;d.hasMutationObserver=!1!==x;return H=d},S=function(h,c){function k(){var b=a.doc.css(e.trstyle);return b&&"matrix"==b.substr(0,6)?b.replace(/^.*\\((.*)\\)$/g,"$1").replace(/px/g,"").split(/, +/):!1}function l(){var b=a.win;if("zIndex"in b)return b.zIndex();for(;0<b.length&&9!=b[0].nodeType;){var g=b.css("zIndex");if(!isNaN(g)&&0!=g)return parseInt(g);b=b.parent()}return!1}function d(b,\r\ng,u){g=b.css(g);b=parseFloat(g);return isNaN(b)?(b=z[g]||0,u=3==b?u?a.win.outerHeight()-a.win.innerHeight():a.win.outerWidth()-a.win.innerWidth():1,a.isie8&&b&&(b+=1),u?b:0):b}function q(b,g,u,c){a._bind(b,g,function(a){a=a?a:window.event;var c={original:a,target:a.target||a.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==a.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){a.preventDefault?a.preventDefault():a.returnValue=!1;return!1},stopImmediatePropagation:function(){a.stopImmediatePropagation?\r\na.stopImmediatePropagation():a.cancelBubble=!0}};"mousewheel"==g?(a.wheelDeltaX&&(c.deltaX=-.025*a.wheelDeltaX),a.wheelDeltaY&&(c.deltaY=-.025*a.wheelDeltaY),c.deltaY||c.deltaX||(c.deltaY=-.025*a.wheelDelta)):c.deltaY=a.detail;return u.call(b,c)},c)}function t(b,g,c){var d,e;0==b.deltaMode?(d=-Math.floor(a.opt.mousescrollstep/54*b.deltaX),e=-Math.floor(a.opt.mousescrollstep/54*b.deltaY)):1==b.deltaMode&&(d=-Math.floor(b.deltaX*a.opt.mousescrollstep),e=-Math.floor(b.deltaY*a.opt.mousescrollstep));\r\ng&&a.opt.oneaxismousemode&&0==d&&e&&(d=e,e=0,c&&(0>d?a.getScrollLeft()>=a.page.maxw:0>=a.getScrollLeft())&&(e=d,d=0));a.isrtlmode&&(d=-d);d&&(a.scrollmom&&a.scrollmom.stop(),a.lastdeltax+=d,a.debounced("mousewheelx",function(){var b=a.lastdeltax;a.lastdeltax=0;a.rail.drag||a.doScrollLeftBy(b)},15));if(e){if(a.opt.nativeparentscrolling&&c&&!a.ispage&&!a.zoomactive)if(0>e){if(a.getScrollTop()>=a.page.maxh)return!0}else if(0>=a.getScrollTop())return!0;a.scrollmom&&a.scrollmom.stop();a.lastdeltay+=e;\r\na.synched("mousewheely",function(){var b=a.lastdeltay;a.lastdeltay=0;a.rail.drag||a.doScrollBy(b)},15)}b.stopImmediatePropagation();return b.preventDefault()}var a=this;this.version="3.6.8";this.name="nicescroll";this.me=c;this.opt={doc:f("body"),win:!1};f.extend(this.opt,K);this.opt.snapbackspeed=80;if(h)for(var r in a.opt)void 0!==h[r]&&(a.opt[r]=h[r]);a.opt.disablemutationobserver&&(x=!1);this.iddoc=(this.doc=a.opt.doc)&&this.doc[0]?this.doc[0].id||"":"";this.ispage=/^BODY|HTML/.test(a.opt.win?\r\na.opt.win[0].nodeName:this.doc[0].nodeName);this.haswrapper=!1!==a.opt.win;this.win=a.opt.win||(this.ispage?f(window):this.doc);this.docscroll=this.ispage&&!this.haswrapper?f(window):this.win;this.body=f("body");this.iframe=this.isfixed=this.viewport=!1;this.isiframe="IFRAME"==this.doc[0].nodeName&&"IFRAME"==this.win[0].nodeName;this.istextarea="TEXTAREA"==this.win[0].nodeName;this.forcescreen=!1;this.canshowonmouseevent="scroll"!=a.opt.autohidemode;this.page=this.view=this.onzoomout=this.onzoomin=\r\nthis.onscrollcancel=this.onscrollend=this.onscrollstart=this.onclick=this.ongesturezoom=this.onkeypress=this.onmousewheel=this.onmousemove=this.onmouseup=this.onmousedown=!1;this.scroll={x:0,y:0};this.scrollratio={x:0,y:0};this.cursorheight=20;this.scrollvaluemax=0;if("auto"==this.opt.rtlmode){r=this.win[0]==window?this.body:this.win;var p=r.css("writing-mode")||r.css("-webkit-writing-mode")||r.css("-ms-writing-mode")||r.css("-moz-writing-mode");"horizontal-tb"==p||"lr-tb"==p||""==p?(this.isrtlmode=\r\n"rtl"==r.css("direction"),this.isvertical=!1):(this.isrtlmode="vertical-rl"==p||"tb"==p||"tb-rl"==p||"rl-tb"==p,this.isvertical="vertical-rl"==p||"tb"==p||"tb-rl"==p)}else this.isrtlmode=!0===this.opt.rtlmode,this.isvertical=!1;this.observerbody=this.observerremover=this.observer=this.scrollmom=this.scrollrunning=!1;do this.id="ascrail"+P++;while(document.getElementById(this.id));this.hasmousefocus=this.hasfocus=this.zoomactive=this.zoom=this.selectiondrag=this.cursorfreezed=this.cursor=this.rail=\r\n!1;this.visibility=!0;this.hidden=this.locked=this.railslocked=!1;this.cursoractive=!0;this.wheelprevented=!1;this.overflowx=a.opt.overflowx;this.overflowy=a.opt.overflowy;this.nativescrollingarea=!1;this.checkarea=0;this.events=[];this.saved={};this.delaylist={};this.synclist={};this.lastdeltay=this.lastdeltax=0;this.detected=R();var e=f.extend({},this.detected);this.ishwscroll=(this.canhwscroll=e.hastransform&&a.opt.hwacceleration)&&a.haswrapper;this.hasreversehr=this.isrtlmode?this.isvertical?\r\n!(e.iswebkit||e.isie||e.isie11):!(e.iswebkit||e.isie&&!e.isie10&&!e.isie11):!1;this.istouchcapable=!1;e.cantouch||!e.hasw3ctouch&&!e.hasmstouch?!e.cantouch||e.isios||e.isandroid||!e.iswebkit&&!e.ismozilla||(this.istouchcapable=!0):this.istouchcapable=!0;a.opt.enablemouselockapi||(e.hasmousecapture=!1,e.haspointerlock=!1);this.debounced=function(b,g,c){a&&(a.delaylist[b]||(g.call(a),a.delaylist[b]={h:v(function(){a.delaylist[b].fn.call(a);a.delaylist[b]=!1},c)}),a.delaylist[b].fn=g)};var I=!1;this.synched=\r\nfunction(b,g){a.synclist[b]=g;(function(){I||(v(function(){if(a){I=!1;for(var b in a.synclist){var g=a.synclist[b];g&&g.call(a);a.synclist[b]=!1}}}),I=!0)})();return b};this.unsynched=function(b){a.synclist[b]&&(a.synclist[b]=!1)};this.css=function(b,g){for(var c in g)a.saved.css.push([b,c,b.css(c)]),b.css(c,g[c])};this.scrollTop=function(b){return void 0===b?a.getScrollTop():a.setScrollTop(b)};this.scrollLeft=function(b){return void 0===b?a.getScrollLeft():a.setScrollLeft(b)};var D=function(a,g,\r\nc,d,e,f,k){this.st=a;this.ed=g;this.spd=c;this.p1=d||0;this.p2=e||1;this.p3=f||0;this.p4=k||1;this.ts=(new Date).getTime();this.df=this.ed-this.st};D.prototype={B2:function(a){return 3*a*a*(1-a)},B3:function(a){return 3*a*(1-a)*(1-a)},B4:function(a){return(1-a)*(1-a)*(1-a)},getNow:function(){var a=1-((new Date).getTime()-this.ts)/this.spd,g=this.B2(a)+this.B3(a)+this.B4(a);return 0>a?this.ed:this.st+Math.round(this.df*g)},update:function(a,g){this.st=this.getNow();this.ed=a;this.spd=g;this.ts=(new Date).getTime();\r\nthis.df=this.ed-this.st;return this}};if(this.ishwscroll){this.doc.translate={x:0,y:0,tx:"0px",ty:"0px"};e.hastranslate3d&&e.isios&&this.doc.css("-webkit-backface-visibility","hidden");this.getScrollTop=function(b){if(!b){if(b=k())return 16==b.length?-b[13]:-b[5];if(a.timerscroll&&a.timerscroll.bz)return a.timerscroll.bz.getNow()}return a.doc.translate.y};this.getScrollLeft=function(b){if(!b){if(b=k())return 16==b.length?-b[12]:-b[4];if(a.timerscroll&&a.timerscroll.bh)return a.timerscroll.bh.getNow()}return a.doc.translate.x};\r\nthis.notifyScrollEvent=function(a){var g=document.createEvent("UIEvents");g.initUIEvent("scroll",!1,!0,window,1);g.niceevent=!0;a.dispatchEvent(g)};var y=this.isrtlmode?1:-1;e.hastranslate3d&&a.opt.enabletranslate3d?(this.setScrollTop=function(b,g){a.doc.translate.y=b;a.doc.translate.ty=-1*b+"px";a.doc.css(e.trstyle,"translate3d("+a.doc.translate.tx+","+a.doc.translate.ty+",0px)");g||a.notifyScrollEvent(a.win[0])},this.setScrollLeft=function(b,g){a.doc.translate.x=b;a.doc.translate.tx=b*y+"px";a.doc.css(e.trstyle,\r\n"translate3d("+a.doc.translate.tx+","+a.doc.translate.ty+",0px)");g||a.notifyScrollEvent(a.win[0])}):(this.setScrollTop=function(b,g){a.doc.translate.y=b;a.doc.translate.ty=-1*b+"px";a.doc.css(e.trstyle,"translate("+a.doc.translate.tx+","+a.doc.translate.ty+")");g||a.notifyScrollEvent(a.win[0])},this.setScrollLeft=function(b,g){a.doc.translate.x=b;a.doc.translate.tx=b*y+"px";a.doc.css(e.trstyle,"translate("+a.doc.translate.tx+","+a.doc.translate.ty+")");g||a.notifyScrollEvent(a.win[0])})}else this.getScrollTop=\r\nfunction(){return a.docscroll.scrollTop()},this.setScrollTop=function(b){return setTimeout(function(){a&&a.docscroll.scrollTop(b)},1)},this.getScrollLeft=function(){return a.hasreversehr?a.detected.ismozilla?a.page.maxw-Math.abs(a.docscroll.scrollLeft()):a.page.maxw-a.docscroll.scrollLeft():a.docscroll.scrollLeft()},this.setScrollLeft=function(b){return setTimeout(function(){if(a)return a.hasreversehr&&(b=a.detected.ismozilla?-(a.page.maxw-b):a.page.maxw-b),a.docscroll.scrollLeft(b)},1)};this.getTarget=\r\nfunction(a){return a?a.target?a.target:a.srcElement?a.srcElement:!1:!1};this.hasParent=function(a,g){if(!a)return!1;for(var c=a.target||a.srcElement||a||!1;c&&c.id!=g;)c=c.parentNode||!1;return!1!==c};var z={thin:1,medium:3,thick:5};this.getDocumentScrollOffset=function(){return{top:window.pageYOffset||document.documentElement.scrollTop,left:window.pageXOffset||document.documentElement.scrollLeft}};this.getOffset=function(){if(a.isfixed){var b=a.win.offset(),g=a.getDocumentScrollOffset();b.top-=g.top;\r\nb.left-=g.left;return b}b=a.win.offset();if(!a.viewport)return b;g=a.viewport.offset();return{top:b.top-g.top,left:b.left-g.left}};this.updateScrollBar=function(b){var g,c,e;if(a.ishwscroll)a.rail.css({height:a.win.innerHeight()-(a.opt.railpadding.top+a.opt.railpadding.bottom)}),a.railh&&a.railh.css({width:a.win.innerWidth()-(a.opt.railpadding.left+a.opt.railpadding.right)});else{var f=a.getOffset();g=f.top;c=f.left-(a.opt.railpadding.left+a.opt.railpadding.right);g+=d(a.win,"border-top-width",!0);\r\nc+=a.rail.align?a.win.outerWidth()-d(a.win,"border-right-width")-a.rail.width:d(a.win,"border-left-width");if(e=a.opt.railoffset)e.top&&(g+=e.top),e.left&&(c+=e.left);a.railslocked||a.rail.css({top:g,left:c,height:(b?b.h:a.win.innerHeight())-(a.opt.railpadding.top+a.opt.railpadding.bottom)});a.zoom&&a.zoom.css({top:g+1,left:1==a.rail.align?c-20:c+a.rail.width+4});if(a.railh&&!a.railslocked){g=f.top;c=f.left;if(e=a.opt.railhoffset)e.top&&(g+=e.top),e.left&&(c+=e.left);b=a.railh.align?g+d(a.win,"border-top-width",\r\n!0)+a.win.innerHeight()-a.railh.height:g+d(a.win,"border-top-width",!0);c+=d(a.win,"border-left-width");a.railh.css({top:b-(a.opt.railpadding.top+a.opt.railpadding.bottom),left:c,width:a.railh.width})}}};this.doRailClick=function(b,g,c){var d;a.railslocked||(a.cancelEvent(b),g?(g=c?a.doScrollLeft:a.doScrollTop,d=c?(b.pageX-a.railh.offset().left-a.cursorwidth/2)*a.scrollratio.x:(b.pageY-a.rail.offset().top-a.cursorheight/2)*a.scrollratio.y,g(d)):(g=c?a.doScrollLeftBy:a.doScrollBy,d=c?a.scroll.x:a.scroll.y,\r\nb=c?b.pageX-a.railh.offset().left:b.pageY-a.rail.offset().top,c=c?a.view.w:a.view.h,g(d>=b?c:-c)))};a.hasanimationframe=v;a.hascancelanimationframe=w;a.hasanimationframe?a.hascancelanimationframe||(w=function(){a.cancelAnimationFrame=!0}):(v=function(a){return setTimeout(a,15-Math.floor(+new Date/1E3)%16)},w=clearTimeout);this.init=function(){a.saved.css=[];if(e.isie7mobile||e.isoperamini)return!0;e.hasmstouch&&a.css(a.ispage?f("html"):a.win,{_touchaction:"none"});var b=e.ismodernie||e.isie10?{"-ms-overflow-style":"none"}:\r\n{"overflow-y":"hidden"};a.zindex="auto";a.zindex=a.ispage||"auto"!=a.opt.zindex?a.opt.zindex:l()||"auto";!a.ispage&&"auto"!=a.zindex&&a.zindex>A&&(A=a.zindex);a.isie&&0==a.zindex&&"auto"==a.opt.zindex&&(a.zindex="auto");if(!a.ispage||!e.cantouch&&!e.isieold&&!e.isie9mobile){var c=a.docscroll;a.ispage&&(c=a.haswrapper?a.win:a.doc);e.isie9mobile||a.css(c,b);a.ispage&&e.isie7&&("BODY"==a.doc[0].nodeName?a.css(f("html"),{"overflow-y":"hidden"}):"HTML"==a.doc[0].nodeName&&a.css(f("body"),b));!e.isios||\r\na.ispage||a.haswrapper||a.css(f("body"),{"-webkit-overflow-scrolling":"touch"});var d=f(document.createElement("div"));d.css({position:"relative",top:0,"float":"right",width:a.opt.cursorwidth,height:0,"background-color":a.opt.cursorcolor,border:a.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":a.opt.cursorborderradius,"-moz-border-radius":a.opt.cursorborderradius,"border-radius":a.opt.cursorborderradius});d.hborder=parseFloat(d.outerHeight()-d.innerHeight());d.addClass("nicescroll-cursors");\r\na.cursor=d;var m=f(document.createElement("div"));m.attr("id",a.id);m.addClass("nicescroll-rails nicescroll-rails-vr");var k,h,p=["left","right","top","bottom"],L;for(L in p)h=p[L],(k=a.opt.railpadding[h])?m.css("padding-"+h,k+"px"):a.opt.railpadding[h]=0;m.append(d);m.width=Math.max(parseFloat(a.opt.cursorwidth),d.outerWidth());m.css({width:m.width+"px",zIndex:a.zindex,background:a.opt.background,cursor:"default"});m.visibility=!0;m.scrollable=!0;m.align="left"==a.opt.railalign?0:1;a.rail=m;d=a.rail.drag=\r\n!1;!a.opt.boxzoom||a.ispage||e.isieold||(d=document.createElement("div"),a.bind(d,"click",a.doZoom),a.bind(d,"mouseenter",function(){a.zoom.css("opacity",a.opt.cursoropacitymax)}),a.bind(d,"mouseleave",function(){a.zoom.css("opacity",a.opt.cursoropacitymin)}),a.zoom=f(d),a.zoom.css({cursor:"pointer",zIndex:a.zindex,backgroundImage:"url("+a.opt.scriptpath+"zoomico.png)",height:18,width:18,backgroundPosition:"0px 0px"}),a.opt.dblclickzoom&&a.bind(a.win,"dblclick",a.doZoom),e.cantouch&&a.opt.gesturezoom&&\r\n(a.ongesturezoom=function(b){1.5<b.scale&&a.doZoomIn(b);.8>b.scale&&a.doZoomOut(b);return a.cancelEvent(b)},a.bind(a.win,"gestureend",a.ongesturezoom)));a.railh=!1;var n;a.opt.horizrailenabled&&(a.css(c,{overflowX:"hidden"}),d=f(document.createElement("div")),d.css({position:"absolute",top:0,height:a.opt.cursorwidth,width:0,backgroundColor:a.opt.cursorcolor,border:a.opt.cursorborder,backgroundClip:"padding-box","-webkit-border-radius":a.opt.cursorborderradius,"-moz-border-radius":a.opt.cursorborderradius,\r\n"border-radius":a.opt.cursorborderradius}),e.isieold&&d.css("overflow","hidden"),d.wborder=parseFloat(d.outerWidth()-d.innerWidth()),d.addClass("nicescroll-cursors"),a.cursorh=d,n=f(document.createElement("div")),n.attr("id",a.id+"-hr"),n.addClass("nicescroll-rails nicescroll-rails-hr"),n.height=Math.max(parseFloat(a.opt.cursorwidth),d.outerHeight()),n.css({height:n.height+"px",zIndex:a.zindex,background:a.opt.background}),n.append(d),n.visibility=!0,n.scrollable=!0,n.align="top"==a.opt.railvalign?\r\n0:1,a.railh=n,a.railh.drag=!1);a.ispage?(m.css({position:"fixed",top:0,height:"100%"}),m.align?m.css({right:0}):m.css({left:0}),a.body.append(m),a.railh&&(n.css({position:"fixed",left:0,width:"100%"}),n.align?n.css({bottom:0}):n.css({top:0}),a.body.append(n))):(a.ishwscroll?("static"==a.win.css("position")&&a.css(a.win,{position:"relative"}),c="HTML"==a.win[0].nodeName?a.body:a.win,f(c).scrollTop(0).scrollLeft(0),a.zoom&&(a.zoom.css({position:"absolute",top:1,right:0,"margin-right":m.width+4}),c.append(a.zoom)),\r\nm.css({position:"absolute",top:0}),m.align?m.css({right:0}):m.css({left:0}),c.append(m),n&&(n.css({position:"absolute",left:0,bottom:0}),n.align?n.css({bottom:0}):n.css({top:0}),c.append(n))):(a.isfixed="fixed"==a.win.css("position"),c=a.isfixed?"fixed":"absolute",a.isfixed||(a.viewport=a.getViewport(a.win[0])),a.viewport&&(a.body=a.viewport,0==/fixed|absolute/.test(a.viewport.css("position"))&&a.css(a.viewport,{position:"relative"})),m.css({position:c}),a.zoom&&a.zoom.css({position:c}),a.updateScrollBar(),\r\na.body.append(m),a.zoom&&a.body.append(a.zoom),a.railh&&(n.css({position:c}),a.body.append(n))),e.isios&&a.css(a.win,{"-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"}),e.isie&&a.opt.disableoutline&&a.win.attr("hideFocus","true"),e.iswebkit&&a.opt.disableoutline&&a.win.css("outline","none"));!1===a.opt.autohidemode?(a.autohidedom=!1,a.rail.css({opacity:a.opt.cursoropacitymax}),a.railh&&a.railh.css({opacity:a.opt.cursoropacitymax})):!0===a.opt.autohidemode||"leave"===a.opt.autohidemode?\r\n(a.autohidedom=f().add(a.rail),e.isie8&&(a.autohidedom=a.autohidedom.add(a.cursor)),a.railh&&(a.autohidedom=a.autohidedom.add(a.railh)),a.railh&&e.isie8&&(a.autohidedom=a.autohidedom.add(a.cursorh))):"scroll"==a.opt.autohidemode?(a.autohidedom=f().add(a.rail),a.railh&&(a.autohidedom=a.autohidedom.add(a.railh))):"cursor"==a.opt.autohidemode?(a.autohidedom=f().add(a.cursor),a.railh&&(a.autohidedom=a.autohidedom.add(a.cursorh))):"hidden"==a.opt.autohidemode&&(a.autohidedom=!1,a.hide(),a.railslocked=\r\n!1);if(e.isie9mobile)a.scrollmom=new M(a),a.onmangotouch=function(){var b=a.getScrollTop(),c=a.getScrollLeft();if(b==a.scrollmom.lastscrolly&&c==a.scrollmom.lastscrollx)return!0;var g=b-a.mangotouch.sy,d=c-a.mangotouch.sx;if(0!=Math.round(Math.sqrt(Math.pow(d,2)+Math.pow(g,2)))){var e=0>g?-1:1,f=0>d?-1:1,u=+new Date;a.mangotouch.lazy&&clearTimeout(a.mangotouch.lazy);80<u-a.mangotouch.tm||a.mangotouch.dry!=e||a.mangotouch.drx!=f?(a.scrollmom.stop(),a.scrollmom.reset(c,b),a.mangotouch.sy=b,a.mangotouch.ly=\r\nb,a.mangotouch.sx=c,a.mangotouch.lx=c,a.mangotouch.dry=e,a.mangotouch.drx=f,a.mangotouch.tm=u):(a.scrollmom.stop(),a.scrollmom.update(a.mangotouch.sx-d,a.mangotouch.sy-g),a.mangotouch.tm=u,g=Math.max(Math.abs(a.mangotouch.ly-b),Math.abs(a.mangotouch.lx-c)),a.mangotouch.ly=b,a.mangotouch.lx=c,2<g&&(a.mangotouch.lazy=setTimeout(function(){a.mangotouch.lazy=!1;a.mangotouch.dry=0;a.mangotouch.drx=0;a.mangotouch.tm=0;a.scrollmom.doMomentum(30)},100)))}},m=a.getScrollTop(),n=a.getScrollLeft(),a.mangotouch=\r\n{sy:m,ly:m,dry:0,sx:n,lx:n,drx:0,lazy:!1,tm:0},a.bind(a.docscroll,"scroll",a.onmangotouch);else{if(e.cantouch||a.istouchcapable||a.opt.touchbehavior||e.hasmstouch){a.scrollmom=new M(a);a.ontouchstart=function(b){if(b.pointerType&&2!=b.pointerType&&"touch"!=b.pointerType)return!1;a.hasmoving=!1;if(!a.railslocked){var c;if(e.hasmstouch)for(c=b.target?b.target:!1;c;){var g=f(c).getNiceScroll();if(0<g.length&&g[0].me==a.me)break;if(0<g.length)return!1;if("DIV"==c.nodeName&&c.id==a.id)break;c=c.parentNode?\r\nc.parentNode:!1}a.cancelScroll();if((c=a.getTarget(b))&&/INPUT/i.test(c.nodeName)&&/range/i.test(c.type))return a.stopPropagation(b);!("clientX"in b)&&"changedTouches"in b&&(b.clientX=b.changedTouches[0].clientX,b.clientY=b.changedTouches[0].clientY);a.forcescreen&&(g=b,b={original:b.original?b.original:b},b.clientX=g.screenX,b.clientY=g.screenY);a.rail.drag={x:b.clientX,y:b.clientY,sx:a.scroll.x,sy:a.scroll.y,st:a.getScrollTop(),sl:a.getScrollLeft(),pt:2,dl:!1};if(a.ispage||!a.opt.directionlockdeadzone)a.rail.drag.dl=\r\n"f";else{var g=f(window).width(),d=f(window).height(),d=Math.max(0,Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)-d),g=Math.max(0,Math.max(document.body.scrollWidth,document.documentElement.scrollWidth)-g);a.rail.drag.ck=!a.rail.scrollable&&a.railh.scrollable?0<d?"v":!1:a.rail.scrollable&&!a.railh.scrollable?0<g?"h":!1:!1;a.rail.drag.ck||(a.rail.drag.dl="f")}a.opt.touchbehavior&&a.isiframe&&e.isie&&(g=a.win.position(),a.rail.drag.x+=g.left,a.rail.drag.y+=g.top);a.hasmoving=\r\n!1;a.lastmouseup=!1;a.scrollmom.reset(b.clientX,b.clientY);if(!e.cantouch&&!this.istouchcapable&&!b.pointerType){if(!c||!/INPUT|SELECT|TEXTAREA/i.test(c.nodeName))return!a.ispage&&e.hasmousecapture&&c.setCapture(),a.opt.touchbehavior?(c.onclick&&!c._onclick&&(c._onclick=c.onclick,c.onclick=function(b){if(a.hasmoving)return!1;c._onclick.call(this,b)}),a.cancelEvent(b)):a.stopPropagation(b);/SUBMIT|CANCEL|BUTTON/i.test(f(c).attr("type"))&&(pc={tg:c,click:!1},a.preventclick=pc)}}};a.ontouchend=function(b){if(!a.rail.drag)return!0;\r\nif(2==a.rail.drag.pt){if(b.pointerType&&2!=b.pointerType&&"touch"!=b.pointerType)return!1;a.scrollmom.doMomentum();a.rail.drag=!1;if(a.hasmoving&&(a.lastmouseup=!0,a.hideCursor(),e.hasmousecapture&&document.releaseCapture(),!e.cantouch))return a.cancelEvent(b)}else if(1==a.rail.drag.pt)return a.onmouseup(b)};var q=a.opt.touchbehavior&&a.isiframe&&!e.hasmousecapture;a.ontouchmove=function(b,c){if(!a.rail.drag||b.targetTouches&&a.opt.preventmultitouchscrolling&&1<b.targetTouches.length||b.pointerType&&\r\n2!=b.pointerType&&"touch"!=b.pointerType)return!1;if(2==a.rail.drag.pt){if(e.cantouch&&e.isios&&void 0===b.original)return!0;a.hasmoving=!0;a.preventclick&&!a.preventclick.click&&(a.preventclick.click=a.preventclick.tg.onclick||!1,a.preventclick.tg.onclick=a.onpreventclick);b=f.extend({original:b},b);"changedTouches"in b&&(b.clientX=b.changedTouches[0].clientX,b.clientY=b.changedTouches[0].clientY);if(a.forcescreen){var g=b;b={original:b.original?b.original:b};b.clientX=g.screenX;b.clientY=g.screenY}var d,\r\ng=d=0;q&&!c&&(d=a.win.position(),g=-d.left,d=-d.top);var u=b.clientY+d;d=u-a.rail.drag.y;var m=b.clientX+g,k=m-a.rail.drag.x,h=a.rail.drag.st-d;a.ishwscroll&&a.opt.bouncescroll?0>h?h=Math.round(h/2):h>a.page.maxh&&(h=a.page.maxh+Math.round((h-a.page.maxh)/2)):(0>h&&(u=h=0),h>a.page.maxh&&(h=a.page.maxh,u=0));var l;a.railh&&a.railh.scrollable&&(l=a.isrtlmode?k-a.rail.drag.sl:a.rail.drag.sl-k,a.ishwscroll&&a.opt.bouncescroll?0>l?l=Math.round(l/2):l>a.page.maxw&&(l=a.page.maxw+Math.round((l-a.page.maxw)/\r\n2)):(0>l&&(m=l=0),l>a.page.maxw&&(l=a.page.maxw,m=0)));g=!1;if(a.rail.drag.dl)g=!0,"v"==a.rail.drag.dl?l=a.rail.drag.sl:"h"==a.rail.drag.dl&&(h=a.rail.drag.st);else{d=Math.abs(d);var k=Math.abs(k),C=a.opt.directionlockdeadzone;if("v"==a.rail.drag.ck){if(d>C&&k<=.3*d)return a.rail.drag=!1,!0;k>C&&(a.rail.drag.dl="f",f("body").scrollTop(f("body").scrollTop()))}else if("h"==a.rail.drag.ck){if(k>C&&d<=.3*k)return a.rail.drag=!1,!0;d>C&&(a.rail.drag.dl="f",f("body").scrollLeft(f("body").scrollLeft()))}}a.synched("touchmove",\r\nfunction(){a.rail.drag&&2==a.rail.drag.pt&&(a.prepareTransition&&a.prepareTransition(0),a.rail.scrollable&&a.setScrollTop(h),a.scrollmom.update(m,u),a.railh&&a.railh.scrollable?(a.setScrollLeft(l),a.showCursor(h,l)):a.showCursor(h),e.isie10&&document.selection.clear())});e.ischrome&&a.istouchcapable&&(g=!1);if(g)return a.cancelEvent(b)}else if(1==a.rail.drag.pt)return a.onmousemove(b)}}a.onmousedown=function(b,c){if(!a.rail.drag||1==a.rail.drag.pt){if(a.railslocked)return a.cancelEvent(b);a.cancelScroll();\r\na.rail.drag={x:b.clientX,y:b.clientY,sx:a.scroll.x,sy:a.scroll.y,pt:1,hr:!!c};var g=a.getTarget(b);!a.ispage&&e.hasmousecapture&&g.setCapture();a.isiframe&&!e.hasmousecapture&&(a.saved.csspointerevents=a.doc.css("pointer-events"),a.css(a.doc,{"pointer-events":"none"}));a.hasmoving=!1;return a.cancelEvent(b)}};a.onmouseup=function(b){if(a.rail.drag){if(1!=a.rail.drag.pt)return!0;e.hasmousecapture&&document.releaseCapture();a.isiframe&&!e.hasmousecapture&&a.doc.css("pointer-events",a.saved.csspointerevents);\r\na.rail.drag=!1;a.hasmoving&&a.triggerScrollEnd();return a.cancelEvent(b)}};a.onmousemove=function(b){if(a.rail.drag){if(1==a.rail.drag.pt){if(e.ischrome&&0==b.which)return a.onmouseup(b);a.cursorfreezed=!0;a.hasmoving=!0;if(a.rail.drag.hr){a.scroll.x=a.rail.drag.sx+(b.clientX-a.rail.drag.x);0>a.scroll.x&&(a.scroll.x=0);var c=a.scrollvaluemaxw;a.scroll.x>c&&(a.scroll.x=c)}else a.scroll.y=a.rail.drag.sy+(b.clientY-a.rail.drag.y),0>a.scroll.y&&(a.scroll.y=0),c=a.scrollvaluemax,a.scroll.y>c&&(a.scroll.y=\r\nc);a.synched("mousemove",function(){a.rail.drag&&1==a.rail.drag.pt&&(a.showCursor(),a.rail.drag.hr?a.hasreversehr?a.doScrollLeft(a.scrollvaluemaxw-Math.round(a.scroll.x*a.scrollratio.x),a.opt.cursordragspeed):a.doScrollLeft(Math.round(a.scroll.x*a.scrollratio.x),a.opt.cursordragspeed):a.doScrollTop(Math.round(a.scroll.y*a.scrollratio.y),a.opt.cursordragspeed))});return a.cancelEvent(b)}}else a.checkarea=0};if(e.cantouch||a.opt.touchbehavior)a.onpreventclick=function(b){if(a.preventclick)return a.preventclick.tg.onclick=\r\na.preventclick.click,a.preventclick=!1,a.cancelEvent(b)},a.bind(a.win,"mousedown",a.ontouchstart),a.onclick=e.isios?!1:function(b){return a.lastmouseup?(a.lastmouseup=!1,a.cancelEvent(b)):!0},a.opt.grabcursorenabled&&e.cursorgrabvalue&&(a.css(a.ispage?a.doc:a.win,{cursor:e.cursorgrabvalue}),a.css(a.rail,{cursor:e.cursorgrabvalue}));else{var r=function(b){if(a.selectiondrag){if(b){var c=a.win.outerHeight();b=b.pageY-a.selectiondrag.top;0<b&&b<c&&(b=0);b>=c&&(b-=c);a.selectiondrag.df=b}0!=a.selectiondrag.df&&\r\n(a.doScrollBy(2*-Math.floor(a.selectiondrag.df/6)),a.debounced("doselectionscroll",function(){r()},50))}};a.hasTextSelected="getSelection"in document?function(){return 0<document.getSelection().rangeCount}:"selection"in document?function(){return"None"!=document.selection.type}:function(){return!1};a.onselectionstart=function(b){a.ispage||(a.selectiondrag=a.win.offset())};a.onselectionend=function(b){a.selectiondrag=!1};a.onselectiondrag=function(b){a.selectiondrag&&a.hasTextSelected()&&a.debounced("selectionscroll",\r\nfunction(){r(b)},250)}}e.hasw3ctouch?(a.css(a.rail,{"touch-action":"none"}),a.css(a.cursor,{"touch-action":"none"}),a.bind(a.win,"pointerdown",a.ontouchstart),a.bind(document,"pointerup",a.ontouchend),a.bind(document,"pointermove",a.ontouchmove)):e.hasmstouch?(a.css(a.rail,{"-ms-touch-action":"none"}),a.css(a.cursor,{"-ms-touch-action":"none"}),a.bind(a.win,"MSPointerDown",a.ontouchstart),a.bind(document,"MSPointerUp",a.ontouchend),a.bind(document,"MSPointerMove",a.ontouchmove),a.bind(a.cursor,"MSGestureHold",\r\nfunction(a){a.preventDefault()}),a.bind(a.cursor,"contextmenu",function(a){a.preventDefault()})):this.istouchcapable&&(a.bind(a.win,"touchstart",a.ontouchstart),a.bind(document,"touchend",a.ontouchend),a.bind(document,"touchcancel",a.ontouchend),a.bind(document,"touchmove",a.ontouchmove));if(a.opt.cursordragontouch||!e.cantouch&&!a.opt.touchbehavior)a.rail.css({cursor:"default"}),a.railh&&a.railh.css({cursor:"default"}),a.jqbind(a.rail,"mouseenter",function(){if(!a.ispage&&!a.win.is(":visible"))return!1;\r\na.canshowonmouseevent&&a.showCursor();a.rail.active=!0}),a.jqbind(a.rail,"mouseleave",function(){a.rail.active=!1;a.rail.drag||a.hideCursor()}),a.opt.sensitiverail&&(a.bind(a.rail,"click",function(b){a.doRailClick(b,!1,!1)}),a.bind(a.rail,"dblclick",function(b){a.doRailClick(b,!0,!1)}),a.bind(a.cursor,"click",function(b){a.cancelEvent(b)}),a.bind(a.cursor,"dblclick",function(b){a.cancelEvent(b)})),a.railh&&(a.jqbind(a.railh,"mouseenter",function(){if(!a.ispage&&!a.win.is(":visible"))return!1;a.canshowonmouseevent&&\r\na.showCursor();a.rail.active=!0}),a.jqbind(a.railh,"mouseleave",function(){a.rail.active=!1;a.rail.drag||a.hideCursor()}),a.opt.sensitiverail&&(a.bind(a.railh,"click",function(b){a.doRailClick(b,!1,!0)}),a.bind(a.railh,"dblclick",function(b){a.doRailClick(b,!0,!0)}),a.bind(a.cursorh,"click",function(b){a.cancelEvent(b)}),a.bind(a.cursorh,"dblclick",function(b){a.cancelEvent(b)})));e.cantouch||a.opt.touchbehavior?(a.bind(e.hasmousecapture?a.win:document,"mouseup",a.ontouchend),a.bind(document,"mousemove",\r\na.ontouchmove),a.onclick&&a.bind(document,"click",a.onclick),a.opt.cursordragontouch?(a.bind(a.cursor,"mousedown",a.onmousedown),a.bind(a.cursor,"mouseup",a.onmouseup),a.cursorh&&a.bind(a.cursorh,"mousedown",function(b){a.onmousedown(b,!0)}),a.cursorh&&a.bind(a.cursorh,"mouseup",a.onmouseup)):(a.bind(a.rail,"mousedown",function(a){a.preventDefault()}),a.railh&&a.bind(a.railh,"mousedown",function(a){a.preventDefault()}))):(a.bind(e.hasmousecapture?a.win:document,"mouseup",a.onmouseup),a.bind(document,\r\n"mousemove",a.onmousemove),a.onclick&&a.bind(document,"click",a.onclick),a.bind(a.cursor,"mousedown",a.onmousedown),a.bind(a.cursor,"mouseup",a.onmouseup),a.railh&&(a.bind(a.cursorh,"mousedown",function(b){a.onmousedown(b,!0)}),a.bind(a.cursorh,"mouseup",a.onmouseup)),!a.ispage&&a.opt.enablescrollonselection&&(a.bind(a.win[0],"mousedown",a.onselectionstart),a.bind(document,"mouseup",a.onselectionend),a.bind(a.cursor,"mouseup",a.onselectionend),a.cursorh&&a.bind(a.cursorh,"mouseup",a.onselectionend),\r\na.bind(document,"mousemove",a.onselectiondrag)),a.zoom&&(a.jqbind(a.zoom,"mouseenter",function(){a.canshowonmouseevent&&a.showCursor();a.rail.active=!0}),a.jqbind(a.zoom,"mouseleave",function(){a.rail.active=!1;a.rail.drag||a.hideCursor()})));a.opt.enablemousewheel&&(a.isiframe||a.mousewheel(e.isie&&a.ispage?document:a.win,a.onmousewheel),a.mousewheel(a.rail,a.onmousewheel),a.railh&&a.mousewheel(a.railh,a.onmousewheelhr));a.ispage||e.cantouch||/HTML|^BODY/.test(a.win[0].nodeName)||(a.win.attr("tabindex")||\r\na.win.attr({tabindex:O++}),a.jqbind(a.win,"focus",function(b){B=a.getTarget(b).id||!0;a.hasfocus=!0;a.canshowonmouseevent&&a.noticeCursor()}),a.jqbind(a.win,"blur",function(b){B=!1;a.hasfocus=!1}),a.jqbind(a.win,"mouseenter",function(b){F=a.getTarget(b).id||!0;a.hasmousefocus=!0;a.canshowonmouseevent&&a.noticeCursor()}),a.jqbind(a.win,"mouseleave",function(){F=!1;a.hasmousefocus=!1;a.rail.drag||a.hideCursor()}))}a.onkeypress=function(b){if(a.railslocked&&0==a.page.maxh)return!0;b=b?b:window.e;var c=\r\na.getTarget(b);if(c&&/INPUT|TEXTAREA|SELECT|OPTION/.test(c.nodeName)&&(!c.getAttribute("type")&&!c.type||!/submit|button|cancel/i.tp)||f(c).attr("contenteditable"))return!0;if(a.hasfocus||a.hasmousefocus&&!B||a.ispage&&!B&&!F){c=b.keyCode;if(a.railslocked&&27!=c)return a.cancelEvent(b);var g=b.ctrlKey||!1,d=b.shiftKey||!1,e=!1;switch(c){case 38:case 63233:a.doScrollBy(72);e=!0;break;case 40:case 63235:a.doScrollBy(-72);e=!0;break;case 37:case 63232:a.railh&&(g?a.doScrollLeft(0):a.doScrollLeftBy(72),\r\ne=!0);break;case 39:case 63234:a.railh&&(g?a.doScrollLeft(a.page.maxw):a.doScrollLeftBy(-72),e=!0);break;case 33:case 63276:a.doScrollBy(a.view.h);e=!0;break;case 34:case 63277:a.doScrollBy(-a.view.h);e=!0;break;case 36:case 63273:a.railh&&g?a.doScrollPos(0,0):a.doScrollTo(0);e=!0;break;case 35:case 63275:a.railh&&g?a.doScrollPos(a.page.maxw,a.page.maxh):a.doScrollTo(a.page.maxh);e=!0;break;case 32:a.opt.spacebarenabled&&(d?a.doScrollBy(a.view.h):a.doScrollBy(-a.view.h),e=!0);break;case 27:a.zoomactive&&\r\n(a.doZoom(),e=!0)}if(e)return a.cancelEvent(b)}};a.opt.enablekeyboard&&a.bind(document,e.isopera&&!e.isopera12?"keypress":"keydown",a.onkeypress);a.bind(document,"keydown",function(b){b.ctrlKey&&(a.wheelprevented=!0)});a.bind(document,"keyup",function(b){b.ctrlKey||(a.wheelprevented=!1)});a.bind(window,"blur",function(b){a.wheelprevented=!1});a.bind(window,"resize",a.lazyResize);a.bind(window,"orientationchange",a.lazyResize);a.bind(window,"load",a.lazyResize);if(e.ischrome&&!a.ispage&&!a.haswrapper){var t=\r\na.win.attr("style"),m=parseFloat(a.win.css("width"))+1;a.win.css("width",m);a.synched("chromefix",function(){a.win.attr("style",t)})}a.onAttributeChange=function(b){a.lazyResize(a.isieold?250:30)};a.isie11||!1===x||(a.observerbody=new x(function(b){b.forEach(function(b){if("attributes"==b.type)return f("body").hasClass("modal-open")&&f("body").hasClass("modal-dialog")&&!f.contains(f(".modal-dialog")[0],a.doc[0])?a.hide():a.show()});if(document.body.scrollHeight!=a.page.maxh)return a.lazyResize(30)}),\r\na.observerbody.observe(document.body,{childList:!0,subtree:!0,characterData:!1,attributes:!0,attributeFilter:["class"]}));a.ispage||a.haswrapper||(!1!==x?(a.observer=new x(function(b){b.forEach(a.onAttributeChange)}),a.observer.observe(a.win[0],{childList:!0,characterData:!1,attributes:!0,subtree:!1}),a.observerremover=new x(function(b){b.forEach(function(b){if(0<b.removedNodes.length)for(var c in b.removedNodes)if(a&&b.removedNodes[c]==a.win[0])return a.remove()})}),a.observerremover.observe(a.win[0].parentNode,\r\n{childList:!0,characterData:!1,attributes:!1,subtree:!1})):(a.bind(a.win,e.isie&&!e.isie9?"propertychange":"DOMAttrModified",a.onAttributeChange),e.isie9&&a.win[0].attachEvent("onpropertychange",a.onAttributeChange),a.bind(a.win,"DOMNodeRemoved",function(b){b.target==a.win[0]&&a.remove()})));!a.ispage&&a.opt.boxzoom&&a.bind(window,"resize",a.resizeZoom);a.istextarea&&(a.bind(a.win,"keydown",a.lazyResize),a.bind(a.win,"mouseup",a.lazyResize));a.lazyResize(30)}if("IFRAME"==this.doc[0].nodeName){var N=\r\nfunction(){a.iframexd=!1;var c;try{c="contentDocument"in this?this.contentDocument:this.contentWindow.document}catch(g){a.iframexd=!0,c=!1}if(a.iframexd)return"console"in window&&console.log("NiceScroll error: policy restriced iframe"),!0;a.forcescreen=!0;a.isiframe&&(a.iframe={doc:f(c),html:a.doc.contents().find("html")[0],body:a.doc.contents().find("body")[0]},a.getContentSize=function(){return{w:Math.max(a.iframe.html.scrollWidth,a.iframe.body.scrollWidth),h:Math.max(a.iframe.html.scrollHeight,\r\na.iframe.body.scrollHeight)}},a.docscroll=f(a.iframe.body));if(!e.isios&&a.opt.iframeautoresize&&!a.isiframe){a.win.scrollTop(0);a.doc.height("");var d=Math.max(c.getElementsByTagName("html")[0].scrollHeight,c.body.scrollHeight);a.doc.height(d)}a.lazyResize(30);e.isie7&&a.css(f(a.iframe.html),b);a.css(f(a.iframe.body),b);e.isios&&a.haswrapper&&a.css(f(c.body),{"-webkit-transform":"translate3d(0,0,0)"});"contentWindow"in this?a.bind(this.contentWindow,"scroll",a.onscroll):a.bind(c,"scroll",a.onscroll);\r\na.opt.enablemousewheel&&a.mousewheel(c,a.onmousewheel);a.opt.enablekeyboard&&a.bind(c,e.isopera?"keypress":"keydown",a.onkeypress);if(e.cantouch||a.opt.touchbehavior)a.bind(c,"mousedown",a.ontouchstart),a.bind(c,"mousemove",function(b){return a.ontouchmove(b,!0)}),a.opt.grabcursorenabled&&e.cursorgrabvalue&&a.css(f(c.body),{cursor:e.cursorgrabvalue});a.bind(c,"mouseup",a.ontouchend);a.zoom&&(a.opt.dblclickzoom&&a.bind(c,"dblclick",a.doZoom),a.ongesturezoom&&a.bind(c,"gestureend",a.ongesturezoom))};\r\nthis.doc[0].readyState&&"complete"==this.doc[0].readyState&&setTimeout(function(){N.call(a.doc[0],!1)},500);a.bind(this.doc,"load",N)}};this.showCursor=function(b,c){a.cursortimeout&&(clearTimeout(a.cursortimeout),a.cursortimeout=0);if(a.rail){a.autohidedom&&(a.autohidedom.stop().css({opacity:a.opt.cursoropacitymax}),a.cursoractive=!0);a.rail.drag&&1==a.rail.drag.pt||(void 0!==b&&!1!==b&&(a.scroll.y=Math.round(1*b/a.scrollratio.y)),void 0!==c&&(a.scroll.x=Math.round(1*c/a.scrollratio.x)));a.cursor.css({height:a.cursorheight,\r\ntop:a.scroll.y});if(a.cursorh){var d=a.hasreversehr?a.scrollvaluemaxw-a.scroll.x:a.scroll.x;!a.rail.align&&a.rail.visibility?a.cursorh.css({width:a.cursorwidth,left:d+a.rail.width}):a.cursorh.css({width:a.cursorwidth,left:d});a.cursoractive=!0}a.zoom&&a.zoom.stop().css({opacity:a.opt.cursoropacitymax})}};this.hideCursor=function(b){a.cursortimeout||!a.rail||!a.autohidedom||a.hasmousefocus&&"leave"==a.opt.autohidemode||(a.cursortimeout=setTimeout(function(){a.rail.active&&a.showonmouseevent||(a.autohidedom.stop().animate({opacity:a.opt.cursoropacitymin}),\r\na.zoom&&a.zoom.stop().animate({opacity:a.opt.cursoropacitymin}),a.cursoractive=!1);a.cursortimeout=0},b||a.opt.hidecursordelay))};this.noticeCursor=function(b,c,d){a.showCursor(c,d);a.rail.active||a.hideCursor(b)};this.getContentSize=a.ispage?function(){return{w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}}:a.haswrapper?function(){return{w:a.doc.outerWidth()+parseInt(a.win.css("paddingLeft"))+\r\nparseInt(a.win.css("paddingRight")),h:a.doc.outerHeight()+parseInt(a.win.css("paddingTop"))+parseInt(a.win.css("paddingBottom"))}}:function(){return{w:a.docscroll[0].scrollWidth,h:a.docscroll[0].scrollHeight}};this.onResize=function(b,c){if(!a||!a.win)return!1;if(!a.haswrapper&&!a.ispage){if("none"==a.win.css("display"))return a.visibility&&a.hideRail().hideRailHr(),!1;a.hidden||a.visibility||a.showRail().showRailHr()}var d=a.page.maxh,e=a.page.maxw,f=a.view.h,k=a.view.w;a.view={w:a.ispage?a.win.width():\r\nparseInt(a.win[0].clientWidth),h:a.ispage?a.win.height():parseInt(a.win[0].clientHeight)};a.page=c?c:a.getContentSize();a.page.maxh=Math.max(0,a.page.h-a.view.h);a.page.maxw=Math.max(0,a.page.w-a.view.w);if(a.page.maxh==d&&a.page.maxw==e&&a.view.w==k&&a.view.h==f){if(a.ispage)return a;d=a.win.offset();if(a.lastposition&&(e=a.lastposition,e.top==d.top&&e.left==d.left))return a;a.lastposition=d}0==a.page.maxh?(a.hideRail(),a.scrollvaluemax=0,a.scroll.y=0,a.scrollratio.y=0,a.cursorheight=0,a.setScrollTop(0),\r\na.rail&&(a.rail.scrollable=!1)):(a.page.maxh-=a.opt.railpadding.top+a.opt.railpadding.bottom,a.rail.scrollable=!0);0==a.page.maxw?(a.hideRailHr(),a.scrollvaluemaxw=0,a.scroll.x=0,a.scrollratio.x=0,a.cursorwidth=0,a.setScrollLeft(0),a.railh&&(a.railh.scrollable=!1)):(a.page.maxw-=a.opt.railpadding.left+a.opt.railpadding.right,a.railh&&(a.railh.scrollable=a.opt.horizrailenabled));a.railslocked=a.locked||0==a.page.maxh&&0==a.page.maxw;if(a.railslocked)return a.ispage||a.updateScrollBar(a.view),!1;a.hidden||\r\na.visibility?!a.railh||a.hidden||a.railh.visibility||a.showRailHr():a.showRail().showRailHr();a.istextarea&&a.win.css("resize")&&"none"!=a.win.css("resize")&&(a.view.h-=20);a.cursorheight=Math.min(a.view.h,Math.round(a.view.h/a.page.h*a.view.h));a.cursorheight=a.opt.cursorfixedheight?a.opt.cursorfixedheight:Math.max(a.opt.cursorminheight,a.cursorheight);a.cursorwidth=Math.min(a.view.w,Math.round(a.view.w/a.page.w*a.view.w));a.cursorwidth=a.opt.cursorfixedheight?a.opt.cursorfixedheight:Math.max(a.opt.cursorminheight,\r\na.cursorwidth);a.scrollvaluemax=a.view.h-a.cursorheight-a.cursor.hborder-(a.opt.railpadding.top+a.opt.railpadding.bottom);a.railh&&(a.railh.width=0<a.page.maxh?a.view.w-a.rail.width:a.view.w,a.scrollvaluemaxw=a.railh.width-a.cursorwidth-a.cursorh.wborder-(a.opt.railpadding.left+a.opt.railpadding.right));a.ispage||a.updateScrollBar(a.view);a.scrollratio={x:a.page.maxw/a.scrollvaluemaxw,y:a.page.maxh/a.scrollvaluemax};a.getScrollTop()>a.page.maxh?a.doScrollTop(a.page.maxh):(a.scroll.y=Math.round(a.getScrollTop()*\r\n(1/a.scrollratio.y)),a.scroll.x=Math.round(a.getScrollLeft()*(1/a.scrollratio.x)),a.cursoractive&&a.noticeCursor());a.scroll.y&&0==a.getScrollTop()&&a.doScrollTo(Math.floor(a.scroll.y*a.scrollratio.y));return a};this.resize=a.onResize;this.hlazyresize=0;this.lazyResize=function(b){a.haswrapper||a.hide();a.hlazyresize&&clearTimeout(a.hlazyresize);a.hlazyresize=setTimeout(function(){a&&a.show().resize()},240);return a};this.jqbind=function(b,c,d){a.events.push({e:b,n:c,f:d,q:!0});f(b).bind(c,d)};this.mousewheel=\r\nfunction(b,c,d){b="jquery"in b?b[0]:b;if("onwheel"in document.createElement("div"))a._bind(b,"wheel",c,d||!1);else{var e=void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";q(b,e,c,d||!1);"DOMMouseScroll"==e&&q(b,"MozMousePixelScroll",c,d||!1)}};e.haseventlistener?(this.bind=function(b,c,d,e){a._bind("jquery"in b?b[0]:b,c,d,e||!1)},this._bind=function(b,c,d,e){a.events.push({e:b,n:c,f:d,b:e,q:!1});b.addEventListener(c,d,e||!1)},this.cancelEvent=function(a){if(!a)return!1;a=a.original?a.original:\r\na;a.cancelable&&a.preventDefault();a.stopPropagation();a.preventManipulation&&a.preventManipulation();return!1},this.stopPropagation=function(a){if(!a)return!1;a=a.original?a.original:a;a.stopPropagation();return!1},this._unbind=function(a,c,d,e){a.removeEventListener(c,d,e)}):(this.bind=function(b,c,d,e){var f="jquery"in b?b[0]:b;a._bind(f,c,function(b){(b=b||window.event||!1)&&b.srcElement&&(b.target=b.srcElement);"pageY"in b||(b.pageX=b.clientX+document.documentElement.scrollLeft,b.pageY=b.clientY+\r\ndocument.documentElement.scrollTop);return!1===d.call(f,b)||!1===e?a.cancelEvent(b):!0})},this._bind=function(b,c,d,e){a.events.push({e:b,n:c,f:d,b:e,q:!1});b.attachEvent?b.attachEvent("on"+c,d):b["on"+c]=d},this.cancelEvent=function(a){a=window.event||!1;if(!a)return!1;a.cancelBubble=!0;a.cancel=!0;return a.returnValue=!1},this.stopPropagation=function(a){a=window.event||!1;if(!a)return!1;a.cancelBubble=!0;return!1},this._unbind=function(a,c,d,e){a.detachEvent?a.detachEvent("on"+c,d):a["on"+c]=!1});\r\nthis.unbindAll=function(){for(var b=0;b<a.events.length;b++){var c=a.events[b];c.q?c.e.unbind(c.n,c.f):a._unbind(c.e,c.n,c.f,c.b)}};this.showRail=function(){0==a.page.maxh||!a.ispage&&"none"==a.win.css("display")||(a.visibility=!0,a.rail.visibility=!0,a.rail.css("display","block"));return a};this.showRailHr=function(){if(!a.railh)return a;0==a.page.maxw||!a.ispage&&"none"==a.win.css("display")||(a.railh.visibility=!0,a.railh.css("display","block"));return a};this.hideRail=function(){a.visibility=\r\n!1;a.rail.visibility=!1;a.rail.css("display","none");return a};this.hideRailHr=function(){if(!a.railh)return a;a.railh.visibility=!1;a.railh.css("display","none");return a};this.show=function(){a.hidden=!1;a.railslocked=!1;return a.showRail().showRailHr()};this.hide=function(){a.hidden=!0;a.railslocked=!0;return a.hideRail().hideRailHr()};this.toggle=function(){return a.hidden?a.show():a.hide()};this.remove=function(){a.stop();a.cursortimeout&&clearTimeout(a.cursortimeout);for(var b in a.delaylist)a.delaylist[b]&&\r\nw(a.delaylist[b].h);a.doZoomOut();a.unbindAll();e.isie9&&a.win[0].detachEvent("onpropertychange",a.onAttributeChange);!1!==a.observer&&a.observer.disconnect();!1!==a.observerremover&&a.observerremover.disconnect();!1!==a.observerbody&&a.observerbody.disconnect();a.events=null;a.cursor&&a.cursor.remove();a.cursorh&&a.cursorh.remove();a.rail&&a.rail.remove();a.railh&&a.railh.remove();a.zoom&&a.zoom.remove();for(b=0;b<a.saved.css.length;b++){var c=a.saved.css[b];c[0].css(c[1],void 0===c[2]?"":c[2])}a.saved=\r\n!1;a.me.data("__nicescroll","");var d=f.nicescroll;d.each(function(b){if(this&&this.id===a.id){delete d[b];for(var c=++b;c<d.length;c++,b++)d[b]=d[c];d.length--;d.length&&delete d[d.length]}});for(var k in a)a[k]=null,delete a[k];a=null};this.scrollstart=function(b){this.onscrollstart=b;return a};this.scrollend=function(b){this.onscrollend=b;return a};this.scrollcancel=function(b){this.onscrollcancel=b;return a};this.zoomin=function(b){this.onzoomin=b;return a};this.zoomout=function(b){this.onzoomout=\r\nb;return a};this.isScrollable=function(a){a=a.target?a.target:a;if("OPTION"==a.nodeName)return!0;for(;a&&1==a.nodeType&&!/^BODY|HTML/.test(a.nodeName);){var c=f(a),c=c.css("overflowY")||c.css("overflowX")||c.css("overflow")||"";if(/scroll|auto/.test(c))return a.clientHeight!=a.scrollHeight;a=a.parentNode?a.parentNode:!1}return!1};this.getViewport=function(a){for(a=a&&a.parentNode?a.parentNode:!1;a&&1==a.nodeType&&!/^BODY|HTML/.test(a.nodeName);){var c=f(a);if(/fixed|absolute/.test(c.css("position")))return c;\r\nvar d=c.css("overflowY")||c.css("overflowX")||c.css("overflow")||"";if(/scroll|auto/.test(d)&&a.clientHeight!=a.scrollHeight||0<c.getNiceScroll().length)return c;a=a.parentNode?a.parentNode:!1}return!1};this.triggerScrollEnd=function(){if(a.onscrollend){var b=a.getScrollLeft(),c=a.getScrollTop();a.onscrollend.call(a,{type:"scrollend",current:{x:b,y:c},end:{x:b,y:c}})}};this.onmousewheel=function(b){if(!a.wheelprevented){if(a.railslocked)return a.debounced("checkunlock",a.resize,250),!0;if(a.rail.drag)return a.cancelEvent(b);\r\n"auto"==a.opt.oneaxismousemode&&0!=b.deltaX&&(a.opt.oneaxismousemode=!1);if(a.opt.oneaxismousemode&&0==b.deltaX&&!a.rail.scrollable)return a.railh&&a.railh.scrollable?a.onmousewheelhr(b):!0;var c=+new Date,d=!1;a.opt.preservenativescrolling&&a.checkarea+600<c&&(a.nativescrollingarea=a.isScrollable(b),d=!0);a.checkarea=c;if(a.nativescrollingarea)return!0;if(b=t(b,!1,d))a.checkarea=0;return b}};this.onmousewheelhr=function(b){if(!a.wheelprevented){if(a.railslocked||!a.railh.scrollable)return!0;if(a.rail.drag)return a.cancelEvent(b);\r\nvar c=+new Date,d=!1;a.opt.preservenativescrolling&&a.checkarea+600<c&&(a.nativescrollingarea=a.isScrollable(b),d=!0);a.checkarea=c;return a.nativescrollingarea?!0:a.railslocked?a.cancelEvent(b):t(b,!0,d)}};this.stop=function(){a.cancelScroll();a.scrollmon&&a.scrollmon.stop();a.cursorfreezed=!1;a.scroll.y=Math.round(a.getScrollTop()*(1/a.scrollratio.y));a.noticeCursor();return a};this.getTransitionSpeed=function(b){b=Math.min(Math.round(10*a.opt.scrollspeed),Math.round(b/20*a.opt.scrollspeed));return 20<\r\nb?b:0};a.opt.smoothscroll?a.ishwscroll&&e.hastransition&&a.opt.usetransition&&a.opt.smoothscroll?(this.prepareTransition=function(b,c){var d=c?20<b?b:0:a.getTransitionSpeed(b),f=d?e.prefixstyle+"transform "+d+"ms ease-out":"";a.lasttransitionstyle&&a.lasttransitionstyle==f||(a.lasttransitionstyle=f,a.doc.css(e.transitionstyle,f));return d},this.doScrollLeft=function(b,c){var d=a.scrollrunning?a.newscrolly:a.getScrollTop();a.doScrollPos(b,d,c)},this.doScrollTop=function(b,c){var d=a.scrollrunning?\r\na.newscrollx:a.getScrollLeft();a.doScrollPos(d,b,c)},this.doScrollPos=function(b,c,d){var f=a.getScrollTop(),k=a.getScrollLeft();(0>(a.newscrolly-f)*(c-f)||0>(a.newscrollx-k)*(b-k))&&a.cancelScroll();0==a.opt.bouncescroll&&(0>c?c=0:c>a.page.maxh&&(c=a.page.maxh),0>b?b=0:b>a.page.maxw&&(b=a.page.maxw));if(a.scrollrunning&&b==a.newscrollx&&c==a.newscrolly)return!1;a.newscrolly=c;a.newscrollx=b;a.newscrollspeed=d||!1;if(a.timer)return!1;a.timer=setTimeout(function(){var d=a.getScrollTop(),f=a.getScrollLeft(),\r\nk=Math.round(Math.sqrt(Math.pow(b-f,2)+Math.pow(c-d,2))),k=a.newscrollspeed&&1<a.newscrollspeed?a.newscrollspeed:a.getTransitionSpeed(k);a.newscrollspeed&&1>=a.newscrollspeed&&(k*=a.newscrollspeed);a.prepareTransition(k,!0);a.timerscroll&&a.timerscroll.tm&&clearInterval(a.timerscroll.tm);0<k&&(!a.scrollrunning&&a.onscrollstart&&a.onscrollstart.call(a,{type:"scrollstart",current:{x:f,y:d},request:{x:b,y:c},end:{x:a.newscrollx,y:a.newscrolly},speed:k}),e.transitionend?a.scrollendtrapped||(a.scrollendtrapped=\r\n!0,a.bind(a.doc,e.transitionend,a.onScrollTransitionEnd,!1)):(a.scrollendtrapped&&clearTimeout(a.scrollendtrapped),a.scrollendtrapped=setTimeout(a.onScrollTransitionEnd,k)),a.timerscroll={bz:new D(d,a.newscrolly,k,0,0,.58,1),bh:new D(f,a.newscrollx,k,0,0,.58,1)},a.cursorfreezed||(a.timerscroll.tm=setInterval(function(){a.showCursor(a.getScrollTop(),a.getScrollLeft())},60)));a.synched("doScroll-set",function(){a.timer=0;a.scrollendtrapped&&(a.scrollrunning=!0);a.setScrollTop(a.newscrolly);a.setScrollLeft(a.newscrollx);\r\nif(!a.scrollendtrapped)a.onScrollTransitionEnd()})},50)},this.cancelScroll=function(){if(!a.scrollendtrapped)return!0;var b=a.getScrollTop(),c=a.getScrollLeft();a.scrollrunning=!1;e.transitionend||clearTimeout(e.transitionend);a.scrollendtrapped=!1;a._unbind(a.doc[0],e.transitionend,a.onScrollTransitionEnd);a.prepareTransition(0);a.setScrollTop(b);a.railh&&a.setScrollLeft(c);a.timerscroll&&a.timerscroll.tm&&clearInterval(a.timerscroll.tm);a.timerscroll=!1;a.cursorfreezed=!1;a.showCursor(b,c);return a},\r\nthis.onScrollTransitionEnd=function(){a.scrollendtrapped&&a._unbind(a.doc[0],e.transitionend,a.onScrollTransitionEnd);a.scrollendtrapped=!1;a.prepareTransition(0);a.timerscroll&&a.timerscroll.tm&&clearInterval(a.timerscroll.tm);a.timerscroll=!1;var b=a.getScrollTop(),c=a.getScrollLeft();a.setScrollTop(b);a.railh&&a.setScrollLeft(c);a.noticeCursor(!1,b,c);a.cursorfreezed=!1;0>b?b=0:b>a.page.maxh&&(b=a.page.maxh);0>c?c=0:c>a.page.maxw&&(c=a.page.maxw);if(b!=a.newscrolly||c!=a.newscrollx)return a.doScrollPos(c,\r\nb,a.opt.snapbackspeed);a.onscrollend&&a.scrollrunning&&a.triggerScrollEnd();a.scrollrunning=!1}):(this.doScrollLeft=function(b,c){var d=a.scrollrunning?a.newscrolly:a.getScrollTop();a.doScrollPos(b,d,c)},this.doScrollTop=function(b,c){var d=a.scrollrunning?a.newscrollx:a.getScrollLeft();a.doScrollPos(d,b,c)},this.doScrollPos=function(b,c,d){function e(){if(a.cancelAnimationFrame)return!0;a.scrollrunning=!0;if(p=1-p)return a.timer=v(e)||1;var b=0,c,d,f=d=a.getScrollTop();if(a.dst.ay){f=a.bzscroll?\r\na.dst.py+a.bzscroll.getNow()*a.dst.ay:a.newscrolly;c=f-d;if(0>c&&f<a.newscrolly||0<c&&f>a.newscrolly)f=a.newscrolly;a.setScrollTop(f);f==a.newscrolly&&(b=1)}else b=1;d=c=a.getScrollLeft();if(a.dst.ax){d=a.bzscroll?a.dst.px+a.bzscroll.getNow()*a.dst.ax:a.newscrollx;c=d-c;if(0>c&&d<a.newscrollx||0<c&&d>a.newscrollx)d=a.newscrollx;a.setScrollLeft(d);d==a.newscrollx&&(b+=1)}else b+=1;2==b?(a.timer=0,a.cursorfreezed=!1,a.bzscroll=!1,a.scrollrunning=!1,0>f?f=0:f>a.page.maxh&&(f=Math.max(0,a.page.maxh)),\r\n0>d?d=0:d>a.page.maxw&&(d=a.page.maxw),d!=a.newscrollx||f!=a.newscrolly?a.doScrollPos(d,f):a.onscrollend&&a.triggerScrollEnd()):a.timer=v(e)||1}c=void 0===c||!1===c?a.getScrollTop(!0):c;if(a.timer&&a.newscrolly==c&&a.newscrollx==b)return!0;a.timer&&w(a.timer);a.timer=0;var f=a.getScrollTop(),k=a.getScrollLeft();(0>(a.newscrolly-f)*(c-f)||0>(a.newscrollx-k)*(b-k))&&a.cancelScroll();a.newscrolly=c;a.newscrollx=b;a.bouncescroll&&a.rail.visibility||(0>a.newscrolly?a.newscrolly=0:a.newscrolly>a.page.maxh&&\r\n(a.newscrolly=a.page.maxh));a.bouncescroll&&a.railh.visibility||(0>a.newscrollx?a.newscrollx=0:a.newscrollx>a.page.maxw&&(a.newscrollx=a.page.maxw));a.dst={};a.dst.x=b-k;a.dst.y=c-f;a.dst.px=k;a.dst.py=f;var h=Math.round(Math.sqrt(Math.pow(a.dst.x,2)+Math.pow(a.dst.y,2)));a.dst.ax=a.dst.x/h;a.dst.ay=a.dst.y/h;var l=0,n=h;0==a.dst.x?(l=f,n=c,a.dst.ay=1,a.dst.py=0):0==a.dst.y&&(l=k,n=b,a.dst.ax=1,a.dst.px=0);h=a.getTransitionSpeed(h);d&&1>=d&&(h*=d);a.bzscroll=0<h?a.bzscroll?a.bzscroll.update(n,h):\r\nnew D(l,n,h,0,1,0,1):!1;if(!a.timer){(f==a.page.maxh&&c>=a.page.maxh||k==a.page.maxw&&b>=a.page.maxw)&&a.checkContentSize();var p=1;a.cancelAnimationFrame=!1;a.timer=1;a.onscrollstart&&!a.scrollrunning&&a.onscrollstart.call(a,{type:"scrollstart",current:{x:k,y:f},request:{x:b,y:c},end:{x:a.newscrollx,y:a.newscrolly},speed:h});e();(f==a.page.maxh&&c>=f||k==a.page.maxw&&b>=k)&&a.checkContentSize();a.noticeCursor()}},this.cancelScroll=function(){a.timer&&w(a.timer);a.timer=0;a.bzscroll=!1;a.scrollrunning=\r\n!1;return a}):(this.doScrollLeft=function(b,c){var d=a.getScrollTop();a.doScrollPos(b,d,c)},this.doScrollTop=function(b,c){var d=a.getScrollLeft();a.doScrollPos(d,b,c)},this.doScrollPos=function(b,c,d){var e=b>a.page.maxw?a.page.maxw:b;0>e&&(e=0);var f=c>a.page.maxh?a.page.maxh:c;0>f&&(f=0);a.synched("scroll",function(){a.setScrollTop(f);a.setScrollLeft(e)})},this.cancelScroll=function(){});this.doScrollBy=function(b,c){var d=0,d=c?Math.floor((a.scroll.y-b)*a.scrollratio.y):(a.timer?a.newscrolly:\r\na.getScrollTop(!0))-b;if(a.bouncescroll){var e=Math.round(a.view.h/2);d<-e?d=-e:d>a.page.maxh+e&&(d=a.page.maxh+e)}a.cursorfreezed=!1;e=a.getScrollTop(!0);if(0>d&&0>=e)return a.noticeCursor();if(d>a.page.maxh&&e>=a.page.maxh)return a.checkContentSize(),a.noticeCursor();a.doScrollTop(d)};this.doScrollLeftBy=function(b,c){var d=0,d=c?Math.floor((a.scroll.x-b)*a.scrollratio.x):(a.timer?a.newscrollx:a.getScrollLeft(!0))-b;if(a.bouncescroll){var e=Math.round(a.view.w/2);d<-e?d=-e:d>a.page.maxw+e&&(d=a.page.maxw+\r\ne)}a.cursorfreezed=!1;e=a.getScrollLeft(!0);if(0>d&&0>=e||d>a.page.maxw&&e>=a.page.maxw)return a.noticeCursor();a.doScrollLeft(d)};this.doScrollTo=function(b,c){a.cursorfreezed=!1;a.doScrollTop(b)};this.checkContentSize=function(){var b=a.getContentSize();b.h==a.page.h&&b.w==a.page.w||a.resize(!1,b)};a.onscroll=function(b){a.rail.drag||a.cursorfreezed||a.synched("scroll",function(){a.scroll.y=Math.round(a.getScrollTop()*(1/a.scrollratio.y));a.railh&&(a.scroll.x=Math.round(a.getScrollLeft()*(1/a.scrollratio.x)));\r\na.noticeCursor()})};a.bind(a.docscroll,"scroll",a.onscroll);this.doZoomIn=function(b){if(!a.zoomactive){a.zoomactive=!0;a.zoomrestore={style:{}};var c="position top left zIndex backgroundColor marginTop marginBottom marginLeft marginRight".split(" "),d=a.win[0].style,k;for(k in c){var h=c[k];a.zoomrestore.style[h]=void 0!==d[h]?d[h]:""}a.zoomrestore.style.width=a.win.css("width");a.zoomrestore.style.height=a.win.css("height");a.zoomrestore.padding={w:a.win.outerWidth()-a.win.width(),h:a.win.outerHeight()-\r\na.win.height()};e.isios4&&(a.zoomrestore.scrollTop=f(window).scrollTop(),f(window).scrollTop(0));a.win.css({position:e.isios4?"absolute":"fixed",top:0,left:0,zIndex:A+100,margin:0});c=a.win.css("backgroundColor");(""==c||/transparent|rgba\\(0, 0, 0, 0\\)|rgba\\(0,0,0,0\\)/.test(c))&&a.win.css("backgroundColor","#fff");a.rail.css({zIndex:A+101});a.zoom.css({zIndex:A+102});a.zoom.css("backgroundPosition","0px -18px");a.resizeZoom();a.onzoomin&&a.onzoomin.call(a);return a.cancelEvent(b)}};this.doZoomOut=\r\nfunction(b){if(a.zoomactive)return a.zoomactive=!1,a.win.css("margin",""),a.win.css(a.zoomrestore.style),e.isios4&&f(window).scrollTop(a.zoomrestore.scrollTop),a.rail.css({"z-index":a.zindex}),a.zoom.css({"z-index":a.zindex}),a.zoomrestore=!1,a.zoom.css("backgroundPosition","0px 0px"),a.onResize(),a.onzoomout&&a.onzoomout.call(a),a.cancelEvent(b)};this.doZoom=function(b){return a.zoomactive?a.doZoomOut(b):a.doZoomIn(b)};this.resizeZoom=function(){if(a.zoomactive){var b=a.getScrollTop();a.win.css({width:f(window).width()-\r\na.zoomrestore.padding.w+"px",height:f(window).height()-a.zoomrestore.padding.h+"px"});a.onResize();a.setScrollTop(Math.min(a.page.maxh,b))}};this.init();f.nicescroll.push(this)},M=function(f){var c=this;this.nc=f;this.steptime=this.lasttime=this.speedy=this.speedx=this.lasty=this.lastx=0;this.snapy=this.snapx=!1;this.demuly=this.demulx=0;this.lastscrolly=this.lastscrollx=-1;this.timer=this.chky=this.chkx=0;this.time=function(){return+new Date};this.reset=function(f,h){c.stop();var d=c.time();c.steptime=\r\n0;c.lasttime=d;c.speedx=0;c.speedy=0;c.lastx=f;c.lasty=h;c.lastscrollx=-1;c.lastscrolly=-1};this.update=function(f,h){var d=c.time();c.steptime=d-c.lasttime;c.lasttime=d;var d=h-c.lasty,q=f-c.lastx,t=c.nc.getScrollTop(),a=c.nc.getScrollLeft(),t=t+d,a=a+q;c.snapx=0>a||a>c.nc.page.maxw;c.snapy=0>t||t>c.nc.page.maxh;c.speedx=q;c.speedy=d;c.lastx=f;c.lasty=h};this.stop=function(){c.nc.unsynched("domomentum2d");c.timer&&clearTimeout(c.timer);c.timer=0;c.lastscrollx=-1;c.lastscrolly=-1};this.doSnapy=function(f,\r\nh){var d=!1;0>h?(h=0,d=!0):h>c.nc.page.maxh&&(h=c.nc.page.maxh,d=!0);0>f?(f=0,d=!0):f>c.nc.page.maxw&&(f=c.nc.page.maxw,d=!0);d?c.nc.doScrollPos(f,h,c.nc.opt.snapbackspeed):c.nc.triggerScrollEnd()};this.doMomentum=function(f){var h=c.time(),d=f?h+f:c.lasttime;f=c.nc.getScrollLeft();var q=c.nc.getScrollTop(),t=c.nc.page.maxh,a=c.nc.page.maxw;c.speedx=0<a?Math.min(60,c.speedx):0;c.speedy=0<t?Math.min(60,c.speedy):0;d=d&&60>=h-d;if(0>q||q>t||0>f||f>a)d=!1;f=c.speedx&&d?c.speedx:!1;if(c.speedy&&d&&c.speedy||\r\nf){var r=Math.max(16,c.steptime);50<r&&(f=r/50,c.speedx*=f,c.speedy*=f,r=50);c.demulxy=0;c.lastscrollx=c.nc.getScrollLeft();c.chkx=c.lastscrollx;c.lastscrolly=c.nc.getScrollTop();c.chky=c.lastscrolly;var p=c.lastscrollx,e=c.lastscrolly,v=function(){var d=600<c.time()-h?.04:.02;c.speedx&&(p=Math.floor(c.lastscrollx-c.speedx*(1-c.demulxy)),c.lastscrollx=p,0>p||p>a)&&(d=.1);c.speedy&&(e=Math.floor(c.lastscrolly-c.speedy*(1-c.demulxy)),c.lastscrolly=e,0>e||e>t)&&(d=.1);c.demulxy=Math.min(1,c.demulxy+\r\nd);c.nc.synched("domomentum2d",function(){c.speedx&&(c.nc.getScrollLeft(),c.chkx=p,c.nc.setScrollLeft(p));c.speedy&&(c.nc.getScrollTop(),c.chky=e,c.nc.setScrollTop(e));c.timer||(c.nc.hideCursor(),c.doSnapy(p,e))});1>c.demulxy?c.timer=setTimeout(v,r):(c.stop(),c.nc.hideCursor(),c.doSnapy(p,e))};v()}else c.doSnapy(c.nc.getScrollLeft(),c.nc.getScrollTop())}},y=f.fn.scrollTop;f.cssHooks.pageYOffset={get:function(h,c,k){return(c=f.data(h,"__nicescroll")||!1)&&c.ishwscroll?c.getScrollTop():y.call(h)},set:function(h,\r\nc){var k=f.data(h,"__nicescroll")||!1;k&&k.ishwscroll?k.setScrollTop(parseInt(c)):y.call(h,c);return this}};f.fn.scrollTop=function(h){if(void 0===h){var c=this[0]?f.data(this[0],"__nicescroll")||!1:!1;return c&&c.ishwscroll?c.getScrollTop():y.call(this)}return this.each(function(){var c=f.data(this,"__nicescroll")||!1;c&&c.ishwscroll?c.setScrollTop(parseInt(h)):y.call(f(this),h)})};var z=f.fn.scrollLeft;f.cssHooks.pageXOffset={get:function(h,c,k){return(c=f.data(h,"__nicescroll")||!1)&&c.ishwscroll?\r\nc.getScrollLeft():z.call(h)},set:function(h,c){var k=f.data(h,"__nicescroll")||!1;k&&k.ishwscroll?k.setScrollLeft(parseInt(c)):z.call(h,c);return this}};f.fn.scrollLeft=function(h){if(void 0===h){var c=this[0]?f.data(this[0],"__nicescroll")||!1:!1;return c&&c.ishwscroll?c.getScrollLeft():z.call(this)}return this.each(function(){var c=f.data(this,"__nicescroll")||!1;c&&c.ishwscroll?c.setScrollLeft(parseInt(h)):z.call(f(this),h)})};var E=function(h){var c=this;this.length=0;this.name="nicescrollarray";\r\nthis.each=function(d){f.each(c,d);return c};this.push=function(d){c[c.length]=d;c.length++};this.eq=function(d){return c[d]};if(h)for(var k=0;k<h.length;k++){var l=f.data(h[k],"__nicescroll")||!1;l&&(this[this.length]=l,this.length++)}return this};(function(f,c,k){for(var l=0;l<c.length;l++)k(f,c[l])})(E.prototype,"show hide toggle onResize resize remove stop doScrollPos".split(" "),function(f,c){f[c]=function(){var f=arguments;return this.each(function(){this[c].apply(this,f)})}});f.fn.getNiceScroll=\r\nfunction(h){return void 0===h?new E(this):this[h]&&f.data(this[h],"__nicescroll")||!1};f.expr[":"].nicescroll=function(h){return void 0!==f.data(h,"__nicescroll")};f.fn.niceScroll=function(h,c){void 0!==c||"object"!=typeof h||"jquery"in h||(c=h,h=!1);c=f.extend({},c);var k=new E;void 0===c&&(c={});h&&(c.doc=f(h),c.win=f(this));var l=!("doc"in c);l||"win"in c||(c.win=f(this));this.each(function(){var d=f(this).data("__nicescroll")||!1;d||(c.doc=l?f(this):c.doc,d=new S(c,f(this)),f(this).data("__nicescroll",\r\nd));k.push(d)});return 1==k.length?k[0]:k};window.NiceScroll={getjQuery:function(){return f}};f.nicescroll||(f.nicescroll=new E,f.nicescroll.options=K)});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jb3JlL2xpYi9qcXVlcnktbmljZXNjcm9sbC9qcXVlcnkubmljZXNjcm9sbC5taW4uanM/YjQ4ZCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSw2TEFBNkYseWRBQW9JLGNBQWMsNkhBQTZILHNCQUFzQixXQUFXLHdDQUF3Qyw0RUFBNEUsT0FBTztBQUN4Z0IsTUFBTSxxZEFBcWQsOEJBQThCO0FBQ3pmLGtiQUFrYjtBQUNsYix3QkFBd0IsdUVBQXVFLDREQUE0RCxtQkFBbUIsY0FBYyw0RkFBNEYsMkhBQTJILDJCQUEyQixrREFBa0Q7QUFDaGUsaURBQWlELHVEQUF1RCwrQ0FBK0MscUZBQXFGLG9FQUFvRSxpRUFBaUUsbUVBQW1FLDhEQUE4RDtBQUNsZix3Q0FBd0MsaUNBQWlDLGtDQUFrQyxvQ0FBb0MsNEJBQTRCLDJEQUEyRCxnQ0FBZ0Msa0NBQWtDLDZCQUE2QiwyQ0FBMkMseURBQXlELHlEQUF5RDtBQUNsZSxrREFBa0Qsb0dBQW9HLHlEQUF5RCx5QkFBeUIsZ0RBQWdELHFDQUFxQyw0Q0FBNEMsc0NBQXNDLCtCQUErQiwwQ0FBMEMsYUFBYTtBQUNyZSxvQkFBb0IscUJBQXFCLG1CQUFtQixtQkFBbUIsNEVBQTRFLFFBQVEsV0FBVyx5QkFBeUIsZUFBZSxNQUFNLDJCQUEyQiw0R0FBNEcscUJBQXFCLGlCQUFpQixtQkFBbUI7QUFDNVosdUxBQXVMLFdBQVcsaUJBQWlCLHVCQUF1QixtQkFBbUIscUJBQXFCLE1BQU0sbUNBQW1DLGtDQUFrQyxHQUFHLHNDQUFzQywwQ0FBMEMsUUFBUSxXQUFXLHNDQUFzQyxJQUFJLFFBQVE7QUFDcmYsc0VBQXNFLG9CQUFvQixtQ0FBbUMsNkJBQTZCLFdBQVcsaUJBQWlCLGFBQWEsMkJBQTJCLG9HQUFvRyxhQUFhLFlBQVksa0NBQWtDLEtBQUssNkJBQTZCLEVBQUUsc0JBQXNCLHNDQUFzQyxhQUFhLFNBQVM7QUFDbmYsS0FBSyxXQUFXLGdCQUFnQixnSkFBZ0osb0JBQW9CLHdCQUF3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Lm5pY2VzY3JvbGwgMy42LjggSW51WWFrc2EqMjAxNSBNSVQgaHR0cDovL25pY2VzY3JvbGwuYXJlYWFwZXJ0YS5jb20gKi8oZnVuY3Rpb24oZil7XCJmdW5jdGlvblwiPT09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wianF1ZXJ5XCJdLGYpOlwib2JqZWN0XCI9PT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1mKHJlcXVpcmUoXCJqcXVlcnlcIikpOmYoalF1ZXJ5KX0pKGZ1bmN0aW9uKGYpe3ZhciBCPSExLEY9ITEsTz0wLFA9MkUzLEE9MCxKPVtcIndlYmtpdFwiLFwibXNcIixcIm1velwiLFwib1wiXSx2PXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fCExLHc9d2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lfHwhMTtpZighdilmb3IodmFyIFEgaW4gSil7dmFyIEc9SltRXTtpZih2PXdpbmRvd1tHK1wiUmVxdWVzdEFuaW1hdGlvbkZyYW1lXCJdKXt3PXdpbmRvd1tHK1wiQ2FuY2VsQW5pbWF0aW9uRnJhbWVcIl18fHdpbmRvd1tHK1wiQ2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lXCJdO2JyZWFrfX12YXIgeD13aW5kb3cuTXV0YXRpb25PYnNlcnZlcnx8d2luZG93LldlYktpdE11dGF0aW9uT2JzZXJ2ZXJ8fFxyXG4hMSxLPXt6aW5kZXg6XCJhdXRvXCIsY3Vyc29yb3BhY2l0eW1pbjowLGN1cnNvcm9wYWNpdHltYXg6MSxjdXJzb3Jjb2xvcjpcIiM0MjQyNDJcIixjdXJzb3J3aWR0aDpcIjZweFwiLGN1cnNvcmJvcmRlcjpcIjFweCBzb2xpZCAjZmZmXCIsY3Vyc29yYm9yZGVycmFkaXVzOlwiNXB4XCIsc2Nyb2xsc3BlZWQ6NjAsbW91c2VzY3JvbGxzdGVwOjI0LHRvdWNoYmVoYXZpb3I6ITEsaHdhY2NlbGVyYXRpb246ITAsdXNldHJhbnNpdGlvbjohMCxib3h6b29tOiExLGRibGNsaWNrem9vbTohMCxnZXN0dXJlem9vbTohMCxncmFiY3Vyc29yZW5hYmxlZDohMCxhdXRvaGlkZW1vZGU6ITAsYmFja2dyb3VuZDpcIlwiLGlmcmFtZWF1dG9yZXNpemU6ITAsY3Vyc29ybWluaGVpZ2h0OjMyLHByZXNlcnZlbmF0aXZlc2Nyb2xsaW5nOiEwLHJhaWxvZmZzZXQ6ITEscmFpbGhvZmZzZXQ6ITEsYm91bmNlc2Nyb2xsOiEwLHNwYWNlYmFyZW5hYmxlZDohMCxyYWlscGFkZGluZzp7dG9wOjAscmlnaHQ6MCxsZWZ0OjAsYm90dG9tOjB9LFxyXG5kaXNhYmxlb3V0bGluZTohMCxob3JpenJhaWxlbmFibGVkOiEwLHJhaWxhbGlnbjpcInJpZ2h0XCIscmFpbHZhbGlnbjpcImJvdHRvbVwiLGVuYWJsZXRyYW5zbGF0ZTNkOiEwLGVuYWJsZW1vdXNld2hlZWw6ITAsZW5hYmxla2V5Ym9hcmQ6ITAsc21vb3Roc2Nyb2xsOiEwLHNlbnNpdGl2ZXJhaWw6ITAsZW5hYmxlbW91c2Vsb2NrYXBpOiEwLGN1cnNvcmZpeGVkaGVpZ2h0OiExLGRpcmVjdGlvbmxvY2tkZWFkem9uZTo2LGhpZGVjdXJzb3JkZWxheTo0MDAsbmF0aXZlcGFyZW50c2Nyb2xsaW5nOiEwLGVuYWJsZXNjcm9sbG9uc2VsZWN0aW9uOiEwLG92ZXJmbG93eDohMCxvdmVyZmxvd3k6ITAsY3Vyc29yZHJhZ3NwZWVkOi4zLHJ0bG1vZGU6XCJhdXRvXCIsY3Vyc29yZHJhZ29udG91Y2g6ITEsb25lYXhpc21vdXNlbW9kZTpcImF1dG9cIixzY3JpcHRwYXRoOmZ1bmN0aW9uKCl7dmFyIGY9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIiksZj1mLmxlbmd0aD9mW2YubGVuZ3RoLVxyXG4xXS5zcmMuc3BsaXQoXCI/XCIpWzBdOlwiXCI7cmV0dXJuIDA8Zi5zcGxpdChcIi9cIikubGVuZ3RoP2Yuc3BsaXQoXCIvXCIpLnNsaWNlKDAsLTEpLmpvaW4oXCIvXCIpK1wiL1wiOlwiXCJ9KCkscHJldmVudG11bHRpdG91Y2hzY3JvbGxpbmc6ITAsZGlzYWJsZW11dGF0aW9ub2JzZXJ2ZXI6ITF9LEg9ITEsUj1mdW5jdGlvbigpe2lmKEgpcmV0dXJuIEg7dmFyIGY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIkRJVlwiKSxjPWYuc3R5bGUsaz1uYXZpZ2F0b3IudXNlckFnZW50LGw9bmF2aWdhdG9yLnBsYXRmb3JtLGQ9e2hhc3BvaW50ZXJsb2NrOlwicG9pbnRlckxvY2tFbGVtZW50XCJpbiBkb2N1bWVudHx8XCJ3ZWJraXRQb2ludGVyTG9ja0VsZW1lbnRcImluIGRvY3VtZW50fHxcIm1velBvaW50ZXJMb2NrRWxlbWVudFwiaW4gZG9jdW1lbnR9O2QuaXNvcGVyYT1cIm9wZXJhXCJpbiB3aW5kb3c7ZC5pc29wZXJhMTI9ZC5pc29wZXJhJiZcImdldFVzZXJNZWRpYVwiaW4gbmF2aWdhdG9yO2QuaXNvcGVyYW1pbmk9XCJbb2JqZWN0IE9wZXJhTWluaV1cIj09PVxyXG5PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwod2luZG93Lm9wZXJhbWluaSk7ZC5pc2llPVwiYWxsXCJpbiBkb2N1bWVudCYmXCJhdHRhY2hFdmVudFwiaW4gZiYmIWQuaXNvcGVyYTtkLmlzaWVvbGQ9ZC5pc2llJiYhKFwibXNJbnRlcnBvbGF0aW9uTW9kZVwiaW4gYyk7ZC5pc2llNz1kLmlzaWUmJiFkLmlzaWVvbGQmJighKFwiZG9jdW1lbnRNb2RlXCJpbiBkb2N1bWVudCl8fDc9PWRvY3VtZW50LmRvY3VtZW50TW9kZSk7ZC5pc2llOD1kLmlzaWUmJlwiZG9jdW1lbnRNb2RlXCJpbiBkb2N1bWVudCYmOD09ZG9jdW1lbnQuZG9jdW1lbnRNb2RlO2QuaXNpZTk9ZC5pc2llJiZcInBlcmZvcm1hbmNlXCJpbiB3aW5kb3cmJjk9PWRvY3VtZW50LmRvY3VtZW50TW9kZTtkLmlzaWUxMD1kLmlzaWUmJlwicGVyZm9ybWFuY2VcImluIHdpbmRvdyYmMTA9PWRvY3VtZW50LmRvY3VtZW50TW9kZTtkLmlzaWUxMT1cIm1zUmVxdWVzdEZ1bGxzY3JlZW5cImluIGYmJjExPD1kb2N1bWVudC5kb2N1bWVudE1vZGU7ZC5pc2llZWRnZTEyPVxyXG5uYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9FZGdlXFwvMTJcXC4vKTtkLmlzaWVlZGdlPVwibXNPdmVyZmxvd1N0eWxlXCJpbiBmO2QuaXNtb2Rlcm5pZT1kLmlzaWUxMXx8ZC5pc2llZWRnZTtkLmlzaWU5bW9iaWxlPS9pZW1vYmlsZS45L2kudGVzdChrKTtkLmlzaWU5bW9iaWxlJiYoZC5pc2llOT0hMSk7ZC5pc2llN21vYmlsZT0hZC5pc2llOW1vYmlsZSYmZC5pc2llNyYmL2llbW9iaWxlL2kudGVzdChrKTtkLmlzbW96aWxsYT1cIk1vekFwcGVhcmFuY2VcImluIGM7ZC5pc3dlYmtpdD1cIldlYmtpdEFwcGVhcmFuY2VcImluIGM7ZC5pc2Nocm9tZT1cImNocm9tZVwiaW4gd2luZG93O2QuaXNjaHJvbWUzOD1kLmlzY2hyb21lJiZcInRvdWNoQWN0aW9uXCJpbiBjO2QuaXNjaHJvbWUyMj0hZC5pc2Nocm9tZTM4JiZkLmlzY2hyb21lJiZkLmhhc3BvaW50ZXJsb2NrO2QuaXNjaHJvbWUyNj0hZC5pc2Nocm9tZTM4JiZkLmlzY2hyb21lJiZcInRyYW5zaXRpb25cImluIGM7ZC5jYW50b3VjaD1cIm9udG91Y2hzdGFydFwiaW5cclxuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50fHxcIm9udG91Y2hzdGFydFwiaW4gd2luZG93O2QuaGFzdzNjdG91Y2g9KHdpbmRvdy5Qb2ludGVyRXZlbnR8fCExKSYmKDA8bmF2aWdhdG9yLk1heFRvdWNoUG9pbnRzfHwwPG5hdmlnYXRvci5tc01heFRvdWNoUG9pbnRzKTtkLmhhc21zdG91Y2g9IWQuaGFzdzNjdG91Y2gmJih3aW5kb3cuTVNQb2ludGVyRXZlbnR8fCExKTtkLmlzbWFjPS9ebWFjJC9pLnRlc3QobCk7ZC5pc2lvcz1kLmNhbnRvdWNoJiYvaXBob25lfGlwYWR8aXBvZC9pLnRlc3QobCk7ZC5pc2lvczQ9ZC5pc2lvcyYmIShcInNlYWxcImluIE9iamVjdCk7ZC5pc2lvczc9ZC5pc2lvcyYmXCJ3ZWJraXRIaWRkZW5cImluIGRvY3VtZW50O2QuaXNpb3M4PWQuaXNpb3MmJlwiaGlkZGVuXCJpbiBkb2N1bWVudDtkLmlzYW5kcm9pZD0vYW5kcm9pZC9pLnRlc3Qoayk7ZC5oYXNldmVudGxpc3RlbmVyPVwiYWRkRXZlbnRMaXN0ZW5lclwiaW4gZjtkLnRyc3R5bGU9ITE7ZC5oYXN0cmFuc2Zvcm09ITE7XHJcbmQuaGFzdHJhbnNsYXRlM2Q9ITE7ZC50cmFuc2l0aW9uc3R5bGU9ITE7ZC5oYXN0cmFuc2l0aW9uPSExO2QudHJhbnNpdGlvbmVuZD0hMTtsPVtcInRyYW5zZm9ybVwiLFwibXNUcmFuc2Zvcm1cIixcIndlYmtpdFRyYW5zZm9ybVwiLFwiTW96VHJhbnNmb3JtXCIsXCJPVHJhbnNmb3JtXCJdO2ZvcihrPTA7azxsLmxlbmd0aDtrKyspaWYodm9pZCAwIT09Y1tsW2tdXSl7ZC50cnN0eWxlPWxba107YnJlYWt9ZC5oYXN0cmFuc2Zvcm09ISFkLnRyc3R5bGU7ZC5oYXN0cmFuc2Zvcm0mJihjW2QudHJzdHlsZV09XCJ0cmFuc2xhdGUzZCgxcHgsMnB4LDNweClcIixkLmhhc3RyYW5zbGF0ZTNkPS90cmFuc2xhdGUzZC8udGVzdChjW2QudHJzdHlsZV0pKTtkLnRyYW5zaXRpb25zdHlsZT0hMTtkLnByZWZpeHN0eWxlPVwiXCI7ZC50cmFuc2l0aW9uZW5kPSExO2Zvcih2YXIgbD1cInRyYW5zaXRpb24gd2Via2l0VHJhbnNpdGlvbiBtc1RyYW5zaXRpb24gTW96VHJhbnNpdGlvbiBPVHJhbnNpdGlvbiBPVHJhbnNpdGlvbiBLaHRtbFRyYW5zaXRpb25cIi5zcGxpdChcIiBcIiksXHJcbnE9XCIgLXdlYmtpdC0gLW1zLSAtbW96LSAtby0gLW8gLWtodG1sLVwiLnNwbGl0KFwiIFwiKSx0PVwidHJhbnNpdGlvbmVuZCB3ZWJraXRUcmFuc2l0aW9uRW5kIG1zVHJhbnNpdGlvbkVuZCB0cmFuc2l0aW9uZW5kIG90cmFuc2l0aW9uZW5kIG9UcmFuc2l0aW9uRW5kIEtodG1sVHJhbnNpdGlvbkVuZFwiLnNwbGl0KFwiIFwiKSxrPTA7azxsLmxlbmd0aDtrKyspaWYobFtrXWluIGMpe2QudHJhbnNpdGlvbnN0eWxlPWxba107ZC5wcmVmaXhzdHlsZT1xW2tdO2QudHJhbnNpdGlvbmVuZD10W2tdO2JyZWFrfWQuaXNjaHJvbWUyNiYmKGQucHJlZml4c3R5bGU9cVsxXSk7ZC5oYXN0cmFuc2l0aW9uPWQudHJhbnNpdGlvbnN0eWxlO2E6e2s9W1wiZ3JhYlwiLFwiLXdlYmtpdC1ncmFiXCIsXCItbW96LWdyYWJcIl07aWYoZC5pc2Nocm9tZSYmIWQuaXNjaHJvbWUzOHx8ZC5pc2llKWs9W107Zm9yKGw9MDtsPGsubGVuZ3RoO2wrKylpZihxPWtbbF0sYy5jdXJzb3I9cSxjLmN1cnNvcj09cSl7Yz1xO2JyZWFrIGF9Yz1cclxuXCJ1cmwoLy9wYXRyaWNpYXBvcnRmb2xpby5nb29nbGVjb2RlLmNvbS9maWxlcy9vcGVuaGFuZC5jdXIpLG4tcmVzaXplXCJ9ZC5jdXJzb3JncmFidmFsdWU9YztkLmhhc21vdXNlY2FwdHVyZT1cInNldENhcHR1cmVcImluIGY7ZC5oYXNNdXRhdGlvbk9ic2VydmVyPSExIT09eDtyZXR1cm4gSD1kfSxTPWZ1bmN0aW9uKGgsYyl7ZnVuY3Rpb24gaygpe3ZhciBiPWEuZG9jLmNzcyhlLnRyc3R5bGUpO3JldHVybiBiJiZcIm1hdHJpeFwiPT1iLnN1YnN0cigwLDYpP2IucmVwbGFjZSgvXi4qXFwoKC4qKVxcKSQvZyxcIiQxXCIpLnJlcGxhY2UoL3B4L2csXCJcIikuc3BsaXQoLywgKy8pOiExfWZ1bmN0aW9uIGwoKXt2YXIgYj1hLndpbjtpZihcInpJbmRleFwiaW4gYilyZXR1cm4gYi56SW5kZXgoKTtmb3IoOzA8Yi5sZW5ndGgmJjkhPWJbMF0ubm9kZVR5cGU7KXt2YXIgZz1iLmNzcyhcInpJbmRleFwiKTtpZighaXNOYU4oZykmJjAhPWcpcmV0dXJuIHBhcnNlSW50KGcpO2I9Yi5wYXJlbnQoKX1yZXR1cm4hMX1mdW5jdGlvbiBkKGIsXHJcbmcsdSl7Zz1iLmNzcyhnKTtiPXBhcnNlRmxvYXQoZyk7cmV0dXJuIGlzTmFOKGIpPyhiPXpbZ118fDAsdT0zPT1iP3U/YS53aW4ub3V0ZXJIZWlnaHQoKS1hLndpbi5pbm5lckhlaWdodCgpOmEud2luLm91dGVyV2lkdGgoKS1hLndpbi5pbm5lcldpZHRoKCk6MSxhLmlzaWU4JiZiJiYoYis9MSksdT9iOjApOmJ9ZnVuY3Rpb24gcShiLGcsdSxjKXthLl9iaW5kKGIsZyxmdW5jdGlvbihhKXthPWE/YTp3aW5kb3cuZXZlbnQ7dmFyIGM9e29yaWdpbmFsOmEsdGFyZ2V0OmEudGFyZ2V0fHxhLnNyY0VsZW1lbnQsdHlwZTpcIndoZWVsXCIsZGVsdGFNb2RlOlwiTW96TW91c2VQaXhlbFNjcm9sbFwiPT1hLnR5cGU/MDoxLGRlbHRhWDowLGRlbHRhWjowLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7YS5wcmV2ZW50RGVmYXVsdD9hLnByZXZlbnREZWZhdWx0KCk6YS5yZXR1cm5WYWx1ZT0hMTtyZXR1cm4hMX0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7YS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24/XHJcbmEuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk6YS5jYW5jZWxCdWJibGU9ITB9fTtcIm1vdXNld2hlZWxcIj09Zz8oYS53aGVlbERlbHRhWCYmKGMuZGVsdGFYPS0uMDI1KmEud2hlZWxEZWx0YVgpLGEud2hlZWxEZWx0YVkmJihjLmRlbHRhWT0tLjAyNSphLndoZWVsRGVsdGFZKSxjLmRlbHRhWXx8Yy5kZWx0YVh8fChjLmRlbHRhWT0tLjAyNSphLndoZWVsRGVsdGEpKTpjLmRlbHRhWT1hLmRldGFpbDtyZXR1cm4gdS5jYWxsKGIsYyl9LGMpfWZ1bmN0aW9uIHQoYixnLGMpe3ZhciBkLGU7MD09Yi5kZWx0YU1vZGU/KGQ9LU1hdGguZmxvb3IoYS5vcHQubW91c2VzY3JvbGxzdGVwLzU0KmIuZGVsdGFYKSxlPS1NYXRoLmZsb29yKGEub3B0Lm1vdXNlc2Nyb2xsc3RlcC81NCpiLmRlbHRhWSkpOjE9PWIuZGVsdGFNb2RlJiYoZD0tTWF0aC5mbG9vcihiLmRlbHRhWCphLm9wdC5tb3VzZXNjcm9sbHN0ZXApLGU9LU1hdGguZmxvb3IoYi5kZWx0YVkqYS5vcHQubW91c2VzY3JvbGxzdGVwKSk7XHJcbmcmJmEub3B0Lm9uZWF4aXNtb3VzZW1vZGUmJjA9PWQmJmUmJihkPWUsZT0wLGMmJigwPmQ/YS5nZXRTY3JvbGxMZWZ0KCk+PWEucGFnZS5tYXh3OjA+PWEuZ2V0U2Nyb2xsTGVmdCgpKSYmKGU9ZCxkPTApKTthLmlzcnRsbW9kZSYmKGQ9LWQpO2QmJihhLnNjcm9sbG1vbSYmYS5zY3JvbGxtb20uc3RvcCgpLGEubGFzdGRlbHRheCs9ZCxhLmRlYm91bmNlZChcIm1vdXNld2hlZWx4XCIsZnVuY3Rpb24oKXt2YXIgYj1hLmxhc3RkZWx0YXg7YS5sYXN0ZGVsdGF4PTA7YS5yYWlsLmRyYWd8fGEuZG9TY3JvbGxMZWZ0QnkoYil9LDE1KSk7aWYoZSl7aWYoYS5vcHQubmF0aXZlcGFyZW50c2Nyb2xsaW5nJiZjJiYhYS5pc3BhZ2UmJiFhLnpvb21hY3RpdmUpaWYoMD5lKXtpZihhLmdldFNjcm9sbFRvcCgpPj1hLnBhZ2UubWF4aClyZXR1cm4hMH1lbHNlIGlmKDA+PWEuZ2V0U2Nyb2xsVG9wKCkpcmV0dXJuITA7YS5zY3JvbGxtb20mJmEuc2Nyb2xsbW9tLnN0b3AoKTthLmxhc3RkZWx0YXkrPWU7XHJcbmEuc3luY2hlZChcIm1vdXNld2hlZWx5XCIsZnVuY3Rpb24oKXt2YXIgYj1hLmxhc3RkZWx0YXk7YS5sYXN0ZGVsdGF5PTA7YS5yYWlsLmRyYWd8fGEuZG9TY3JvbGxCeShiKX0sMTUpfWIuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7cmV0dXJuIGIucHJldmVudERlZmF1bHQoKX12YXIgYT10aGlzO3RoaXMudmVyc2lvbj1cIjMuNi44XCI7dGhpcy5uYW1lPVwibmljZXNjcm9sbFwiO3RoaXMubWU9Yzt0aGlzLm9wdD17ZG9jOmYoXCJib2R5XCIpLHdpbjohMX07Zi5leHRlbmQodGhpcy5vcHQsSyk7dGhpcy5vcHQuc25hcGJhY2tzcGVlZD04MDtpZihoKWZvcih2YXIgciBpbiBhLm9wdCl2b2lkIDAhPT1oW3JdJiYoYS5vcHRbcl09aFtyXSk7YS5vcHQuZGlzYWJsZW11dGF0aW9ub2JzZXJ2ZXImJih4PSExKTt0aGlzLmlkZG9jPSh0aGlzLmRvYz1hLm9wdC5kb2MpJiZ0aGlzLmRvY1swXT90aGlzLmRvY1swXS5pZHx8XCJcIjpcIlwiO3RoaXMuaXNwYWdlPS9eQk9EWXxIVE1MLy50ZXN0KGEub3B0Lndpbj9cclxuYS5vcHQud2luWzBdLm5vZGVOYW1lOnRoaXMuZG9jWzBdLm5vZGVOYW1lKTt0aGlzLmhhc3dyYXBwZXI9ITEhPT1hLm9wdC53aW47dGhpcy53aW49YS5vcHQud2lufHwodGhpcy5pc3BhZ2U/Zih3aW5kb3cpOnRoaXMuZG9jKTt0aGlzLmRvY3Njcm9sbD10aGlzLmlzcGFnZSYmIXRoaXMuaGFzd3JhcHBlcj9mKHdpbmRvdyk6dGhpcy53aW47dGhpcy5ib2R5PWYoXCJib2R5XCIpO3RoaXMuaWZyYW1lPXRoaXMuaXNmaXhlZD10aGlzLnZpZXdwb3J0PSExO3RoaXMuaXNpZnJhbWU9XCJJRlJBTUVcIj09dGhpcy5kb2NbMF0ubm9kZU5hbWUmJlwiSUZSQU1FXCI9PXRoaXMud2luWzBdLm5vZGVOYW1lO3RoaXMuaXN0ZXh0YXJlYT1cIlRFWFRBUkVBXCI9PXRoaXMud2luWzBdLm5vZGVOYW1lO3RoaXMuZm9yY2VzY3JlZW49ITE7dGhpcy5jYW5zaG93b25tb3VzZWV2ZW50PVwic2Nyb2xsXCIhPWEub3B0LmF1dG9oaWRlbW9kZTt0aGlzLnBhZ2U9dGhpcy52aWV3PXRoaXMub256b29tb3V0PXRoaXMub256b29taW49XHJcbnRoaXMub25zY3JvbGxjYW5jZWw9dGhpcy5vbnNjcm9sbGVuZD10aGlzLm9uc2Nyb2xsc3RhcnQ9dGhpcy5vbmNsaWNrPXRoaXMub25nZXN0dXJlem9vbT10aGlzLm9ua2V5cHJlc3M9dGhpcy5vbm1vdXNld2hlZWw9dGhpcy5vbm1vdXNlbW92ZT10aGlzLm9ubW91c2V1cD10aGlzLm9ubW91c2Vkb3duPSExO3RoaXMuc2Nyb2xsPXt4OjAseTowfTt0aGlzLnNjcm9sbHJhdGlvPXt4OjAseTowfTt0aGlzLmN1cnNvcmhlaWdodD0yMDt0aGlzLnNjcm9sbHZhbHVlbWF4PTA7aWYoXCJhdXRvXCI9PXRoaXMub3B0LnJ0bG1vZGUpe3I9dGhpcy53aW5bMF09PXdpbmRvdz90aGlzLmJvZHk6dGhpcy53aW47dmFyIHA9ci5jc3MoXCJ3cml0aW5nLW1vZGVcIil8fHIuY3NzKFwiLXdlYmtpdC13cml0aW5nLW1vZGVcIil8fHIuY3NzKFwiLW1zLXdyaXRpbmctbW9kZVwiKXx8ci5jc3MoXCItbW96LXdyaXRpbmctbW9kZVwiKTtcImhvcml6b250YWwtdGJcIj09cHx8XCJsci10YlwiPT1wfHxcIlwiPT1wPyh0aGlzLmlzcnRsbW9kZT1cclxuXCJydGxcIj09ci5jc3MoXCJkaXJlY3Rpb25cIiksdGhpcy5pc3ZlcnRpY2FsPSExKToodGhpcy5pc3J0bG1vZGU9XCJ2ZXJ0aWNhbC1ybFwiPT1wfHxcInRiXCI9PXB8fFwidGItcmxcIj09cHx8XCJybC10YlwiPT1wLHRoaXMuaXN2ZXJ0aWNhbD1cInZlcnRpY2FsLXJsXCI9PXB8fFwidGJcIj09cHx8XCJ0Yi1ybFwiPT1wKX1lbHNlIHRoaXMuaXNydGxtb2RlPSEwPT09dGhpcy5vcHQucnRsbW9kZSx0aGlzLmlzdmVydGljYWw9ITE7dGhpcy5vYnNlcnZlcmJvZHk9dGhpcy5vYnNlcnZlcnJlbW92ZXI9dGhpcy5vYnNlcnZlcj10aGlzLnNjcm9sbG1vbT10aGlzLnNjcm9sbHJ1bm5pbmc9ITE7ZG8gdGhpcy5pZD1cImFzY3JhaWxcIitQKys7d2hpbGUoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5pZCkpO3RoaXMuaGFzbW91c2Vmb2N1cz10aGlzLmhhc2ZvY3VzPXRoaXMuem9vbWFjdGl2ZT10aGlzLnpvb209dGhpcy5zZWxlY3Rpb25kcmFnPXRoaXMuY3Vyc29yZnJlZXplZD10aGlzLmN1cnNvcj10aGlzLnJhaWw9XHJcbiExO3RoaXMudmlzaWJpbGl0eT0hMDt0aGlzLmhpZGRlbj10aGlzLmxvY2tlZD10aGlzLnJhaWxzbG9ja2VkPSExO3RoaXMuY3Vyc29yYWN0aXZlPSEwO3RoaXMud2hlZWxwcmV2ZW50ZWQ9ITE7dGhpcy5vdmVyZmxvd3g9YS5vcHQub3ZlcmZsb3d4O3RoaXMub3ZlcmZsb3d5PWEub3B0Lm92ZXJmbG93eTt0aGlzLm5hdGl2ZXNjcm9sbGluZ2FyZWE9ITE7dGhpcy5jaGVja2FyZWE9MDt0aGlzLmV2ZW50cz1bXTt0aGlzLnNhdmVkPXt9O3RoaXMuZGVsYXlsaXN0PXt9O3RoaXMuc3luY2xpc3Q9e307dGhpcy5sYXN0ZGVsdGF5PXRoaXMubGFzdGRlbHRheD0wO3RoaXMuZGV0ZWN0ZWQ9UigpO3ZhciBlPWYuZXh0ZW5kKHt9LHRoaXMuZGV0ZWN0ZWQpO3RoaXMuaXNod3Njcm9sbD0odGhpcy5jYW5od3Njcm9sbD1lLmhhc3RyYW5zZm9ybSYmYS5vcHQuaHdhY2NlbGVyYXRpb24pJiZhLmhhc3dyYXBwZXI7dGhpcy5oYXNyZXZlcnNlaHI9dGhpcy5pc3J0bG1vZGU/dGhpcy5pc3ZlcnRpY2FsP1xyXG4hKGUuaXN3ZWJraXR8fGUuaXNpZXx8ZS5pc2llMTEpOiEoZS5pc3dlYmtpdHx8ZS5pc2llJiYhZS5pc2llMTAmJiFlLmlzaWUxMSk6ITE7dGhpcy5pc3RvdWNoY2FwYWJsZT0hMTtlLmNhbnRvdWNofHwhZS5oYXN3M2N0b3VjaCYmIWUuaGFzbXN0b3VjaD8hZS5jYW50b3VjaHx8ZS5pc2lvc3x8ZS5pc2FuZHJvaWR8fCFlLmlzd2Via2l0JiYhZS5pc21vemlsbGF8fCh0aGlzLmlzdG91Y2hjYXBhYmxlPSEwKTp0aGlzLmlzdG91Y2hjYXBhYmxlPSEwO2Eub3B0LmVuYWJsZW1vdXNlbG9ja2FwaXx8KGUuaGFzbW91c2VjYXB0dXJlPSExLGUuaGFzcG9pbnRlcmxvY2s9ITEpO3RoaXMuZGVib3VuY2VkPWZ1bmN0aW9uKGIsZyxjKXthJiYoYS5kZWxheWxpc3RbYl18fChnLmNhbGwoYSksYS5kZWxheWxpc3RbYl09e2g6dihmdW5jdGlvbigpe2EuZGVsYXlsaXN0W2JdLmZuLmNhbGwoYSk7YS5kZWxheWxpc3RbYl09ITF9LGMpfSksYS5kZWxheWxpc3RbYl0uZm49Zyl9O3ZhciBJPSExO3RoaXMuc3luY2hlZD1cclxuZnVuY3Rpb24oYixnKXthLnN5bmNsaXN0W2JdPWc7KGZ1bmN0aW9uKCl7SXx8KHYoZnVuY3Rpb24oKXtpZihhKXtJPSExO2Zvcih2YXIgYiBpbiBhLnN5bmNsaXN0KXt2YXIgZz1hLnN5bmNsaXN0W2JdO2cmJmcuY2FsbChhKTthLnN5bmNsaXN0W2JdPSExfX19KSxJPSEwKX0pKCk7cmV0dXJuIGJ9O3RoaXMudW5zeW5jaGVkPWZ1bmN0aW9uKGIpe2Euc3luY2xpc3RbYl0mJihhLnN5bmNsaXN0W2JdPSExKX07dGhpcy5jc3M9ZnVuY3Rpb24oYixnKXtmb3IodmFyIGMgaW4gZylhLnNhdmVkLmNzcy5wdXNoKFtiLGMsYi5jc3MoYyldKSxiLmNzcyhjLGdbY10pfTt0aGlzLnNjcm9sbFRvcD1mdW5jdGlvbihiKXtyZXR1cm4gdm9pZCAwPT09Yj9hLmdldFNjcm9sbFRvcCgpOmEuc2V0U2Nyb2xsVG9wKGIpfTt0aGlzLnNjcm9sbExlZnQ9ZnVuY3Rpb24oYil7cmV0dXJuIHZvaWQgMD09PWI/YS5nZXRTY3JvbGxMZWZ0KCk6YS5zZXRTY3JvbGxMZWZ0KGIpfTt2YXIgRD1mdW5jdGlvbihhLGcsXHJcbmMsZCxlLGYsayl7dGhpcy5zdD1hO3RoaXMuZWQ9Zzt0aGlzLnNwZD1jO3RoaXMucDE9ZHx8MDt0aGlzLnAyPWV8fDE7dGhpcy5wMz1mfHwwO3RoaXMucDQ9a3x8MTt0aGlzLnRzPShuZXcgRGF0ZSkuZ2V0VGltZSgpO3RoaXMuZGY9dGhpcy5lZC10aGlzLnN0fTtELnByb3RvdHlwZT17QjI6ZnVuY3Rpb24oYSl7cmV0dXJuIDMqYSphKigxLWEpfSxCMzpmdW5jdGlvbihhKXtyZXR1cm4gMyphKigxLWEpKigxLWEpfSxCNDpmdW5jdGlvbihhKXtyZXR1cm4oMS1hKSooMS1hKSooMS1hKX0sZ2V0Tm93OmZ1bmN0aW9uKCl7dmFyIGE9MS0oKG5ldyBEYXRlKS5nZXRUaW1lKCktdGhpcy50cykvdGhpcy5zcGQsZz10aGlzLkIyKGEpK3RoaXMuQjMoYSkrdGhpcy5CNChhKTtyZXR1cm4gMD5hP3RoaXMuZWQ6dGhpcy5zdCtNYXRoLnJvdW5kKHRoaXMuZGYqZyl9LHVwZGF0ZTpmdW5jdGlvbihhLGcpe3RoaXMuc3Q9dGhpcy5nZXROb3coKTt0aGlzLmVkPWE7dGhpcy5zcGQ9Zzt0aGlzLnRzPShuZXcgRGF0ZSkuZ2V0VGltZSgpO1xyXG50aGlzLmRmPXRoaXMuZWQtdGhpcy5zdDtyZXR1cm4gdGhpc319O2lmKHRoaXMuaXNod3Njcm9sbCl7dGhpcy5kb2MudHJhbnNsYXRlPXt4OjAseTowLHR4OlwiMHB4XCIsdHk6XCIwcHhcIn07ZS5oYXN0cmFuc2xhdGUzZCYmZS5pc2lvcyYmdGhpcy5kb2MuY3NzKFwiLXdlYmtpdC1iYWNrZmFjZS12aXNpYmlsaXR5XCIsXCJoaWRkZW5cIik7dGhpcy5nZXRTY3JvbGxUb3A9ZnVuY3Rpb24oYil7aWYoIWIpe2lmKGI9aygpKXJldHVybiAxNj09Yi5sZW5ndGg/LWJbMTNdOi1iWzVdO2lmKGEudGltZXJzY3JvbGwmJmEudGltZXJzY3JvbGwuYnopcmV0dXJuIGEudGltZXJzY3JvbGwuYnouZ2V0Tm93KCl9cmV0dXJuIGEuZG9jLnRyYW5zbGF0ZS55fTt0aGlzLmdldFNjcm9sbExlZnQ9ZnVuY3Rpb24oYil7aWYoIWIpe2lmKGI9aygpKXJldHVybiAxNj09Yi5sZW5ndGg/LWJbMTJdOi1iWzRdO2lmKGEudGltZXJzY3JvbGwmJmEudGltZXJzY3JvbGwuYmgpcmV0dXJuIGEudGltZXJzY3JvbGwuYmguZ2V0Tm93KCl9cmV0dXJuIGEuZG9jLnRyYW5zbGF0ZS54fTtcclxudGhpcy5ub3RpZnlTY3JvbGxFdmVudD1mdW5jdGlvbihhKXt2YXIgZz1kb2N1bWVudC5jcmVhdGVFdmVudChcIlVJRXZlbnRzXCIpO2cuaW5pdFVJRXZlbnQoXCJzY3JvbGxcIiwhMSwhMCx3aW5kb3csMSk7Zy5uaWNlZXZlbnQ9ITA7YS5kaXNwYXRjaEV2ZW50KGcpfTt2YXIgeT10aGlzLmlzcnRsbW9kZT8xOi0xO2UuaGFzdHJhbnNsYXRlM2QmJmEub3B0LmVuYWJsZXRyYW5zbGF0ZTNkPyh0aGlzLnNldFNjcm9sbFRvcD1mdW5jdGlvbihiLGcpe2EuZG9jLnRyYW5zbGF0ZS55PWI7YS5kb2MudHJhbnNsYXRlLnR5PS0xKmIrXCJweFwiO2EuZG9jLmNzcyhlLnRyc3R5bGUsXCJ0cmFuc2xhdGUzZChcIithLmRvYy50cmFuc2xhdGUudHgrXCIsXCIrYS5kb2MudHJhbnNsYXRlLnR5K1wiLDBweClcIik7Z3x8YS5ub3RpZnlTY3JvbGxFdmVudChhLndpblswXSl9LHRoaXMuc2V0U2Nyb2xsTGVmdD1mdW5jdGlvbihiLGcpe2EuZG9jLnRyYW5zbGF0ZS54PWI7YS5kb2MudHJhbnNsYXRlLnR4PWIqeStcInB4XCI7YS5kb2MuY3NzKGUudHJzdHlsZSxcclxuXCJ0cmFuc2xhdGUzZChcIithLmRvYy50cmFuc2xhdGUudHgrXCIsXCIrYS5kb2MudHJhbnNsYXRlLnR5K1wiLDBweClcIik7Z3x8YS5ub3RpZnlTY3JvbGxFdmVudChhLndpblswXSl9KToodGhpcy5zZXRTY3JvbGxUb3A9ZnVuY3Rpb24oYixnKXthLmRvYy50cmFuc2xhdGUueT1iO2EuZG9jLnRyYW5zbGF0ZS50eT0tMSpiK1wicHhcIjthLmRvYy5jc3MoZS50cnN0eWxlLFwidHJhbnNsYXRlKFwiK2EuZG9jLnRyYW5zbGF0ZS50eCtcIixcIithLmRvYy50cmFuc2xhdGUudHkrXCIpXCIpO2d8fGEubm90aWZ5U2Nyb2xsRXZlbnQoYS53aW5bMF0pfSx0aGlzLnNldFNjcm9sbExlZnQ9ZnVuY3Rpb24oYixnKXthLmRvYy50cmFuc2xhdGUueD1iO2EuZG9jLnRyYW5zbGF0ZS50eD1iKnkrXCJweFwiO2EuZG9jLmNzcyhlLnRyc3R5bGUsXCJ0cmFuc2xhdGUoXCIrYS5kb2MudHJhbnNsYXRlLnR4K1wiLFwiK2EuZG9jLnRyYW5zbGF0ZS50eStcIilcIik7Z3x8YS5ub3RpZnlTY3JvbGxFdmVudChhLndpblswXSl9KX1lbHNlIHRoaXMuZ2V0U2Nyb2xsVG9wPVxyXG5mdW5jdGlvbigpe3JldHVybiBhLmRvY3Njcm9sbC5zY3JvbGxUb3AoKX0sdGhpcy5zZXRTY3JvbGxUb3A9ZnVuY3Rpb24oYil7cmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKXthJiZhLmRvY3Njcm9sbC5zY3JvbGxUb3AoYil9LDEpfSx0aGlzLmdldFNjcm9sbExlZnQ9ZnVuY3Rpb24oKXtyZXR1cm4gYS5oYXNyZXZlcnNlaHI/YS5kZXRlY3RlZC5pc21vemlsbGE/YS5wYWdlLm1heHctTWF0aC5hYnMoYS5kb2NzY3JvbGwuc2Nyb2xsTGVmdCgpKTphLnBhZ2UubWF4dy1hLmRvY3Njcm9sbC5zY3JvbGxMZWZ0KCk6YS5kb2NzY3JvbGwuc2Nyb2xsTGVmdCgpfSx0aGlzLnNldFNjcm9sbExlZnQ9ZnVuY3Rpb24oYil7cmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtpZihhKXJldHVybiBhLmhhc3JldmVyc2VociYmKGI9YS5kZXRlY3RlZC5pc21vemlsbGE/LShhLnBhZ2UubWF4dy1iKTphLnBhZ2UubWF4dy1iKSxhLmRvY3Njcm9sbC5zY3JvbGxMZWZ0KGIpfSwxKX07dGhpcy5nZXRUYXJnZXQ9XHJcbmZ1bmN0aW9uKGEpe3JldHVybiBhP2EudGFyZ2V0P2EudGFyZ2V0OmEuc3JjRWxlbWVudD9hLnNyY0VsZW1lbnQ6ITE6ITF9O3RoaXMuaGFzUGFyZW50PWZ1bmN0aW9uKGEsZyl7aWYoIWEpcmV0dXJuITE7Zm9yKHZhciBjPWEudGFyZ2V0fHxhLnNyY0VsZW1lbnR8fGF8fCExO2MmJmMuaWQhPWc7KWM9Yy5wYXJlbnROb2RlfHwhMTtyZXR1cm4hMSE9PWN9O3ZhciB6PXt0aGluOjEsbWVkaXVtOjMsdGhpY2s6NX07dGhpcy5nZXREb2N1bWVudFNjcm9sbE9mZnNldD1mdW5jdGlvbigpe3JldHVybnt0b3A6d2luZG93LnBhZ2VZT2Zmc2V0fHxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wLGxlZnQ6d2luZG93LnBhZ2VYT2Zmc2V0fHxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdH19O3RoaXMuZ2V0T2Zmc2V0PWZ1bmN0aW9uKCl7aWYoYS5pc2ZpeGVkKXt2YXIgYj1hLndpbi5vZmZzZXQoKSxnPWEuZ2V0RG9jdW1lbnRTY3JvbGxPZmZzZXQoKTtiLnRvcC09Zy50b3A7XHJcbmIubGVmdC09Zy5sZWZ0O3JldHVybiBifWI9YS53aW4ub2Zmc2V0KCk7aWYoIWEudmlld3BvcnQpcmV0dXJuIGI7Zz1hLnZpZXdwb3J0Lm9mZnNldCgpO3JldHVybnt0b3A6Yi50b3AtZy50b3AsbGVmdDpiLmxlZnQtZy5sZWZ0fX07dGhpcy51cGRhdGVTY3JvbGxCYXI9ZnVuY3Rpb24oYil7dmFyIGcsYyxlO2lmKGEuaXNod3Njcm9sbClhLnJhaWwuY3NzKHtoZWlnaHQ6YS53aW4uaW5uZXJIZWlnaHQoKS0oYS5vcHQucmFpbHBhZGRpbmcudG9wK2Eub3B0LnJhaWxwYWRkaW5nLmJvdHRvbSl9KSxhLnJhaWxoJiZhLnJhaWxoLmNzcyh7d2lkdGg6YS53aW4uaW5uZXJXaWR0aCgpLShhLm9wdC5yYWlscGFkZGluZy5sZWZ0K2Eub3B0LnJhaWxwYWRkaW5nLnJpZ2h0KX0pO2Vsc2V7dmFyIGY9YS5nZXRPZmZzZXQoKTtnPWYudG9wO2M9Zi5sZWZ0LShhLm9wdC5yYWlscGFkZGluZy5sZWZ0K2Eub3B0LnJhaWxwYWRkaW5nLnJpZ2h0KTtnKz1kKGEud2luLFwiYm9yZGVyLXRvcC13aWR0aFwiLCEwKTtcclxuYys9YS5yYWlsLmFsaWduP2Eud2luLm91dGVyV2lkdGgoKS1kKGEud2luLFwiYm9yZGVyLXJpZ2h0LXdpZHRoXCIpLWEucmFpbC53aWR0aDpkKGEud2luLFwiYm9yZGVyLWxlZnQtd2lkdGhcIik7aWYoZT1hLm9wdC5yYWlsb2Zmc2V0KWUudG9wJiYoZys9ZS50b3ApLGUubGVmdCYmKGMrPWUubGVmdCk7YS5yYWlsc2xvY2tlZHx8YS5yYWlsLmNzcyh7dG9wOmcsbGVmdDpjLGhlaWdodDooYj9iLmg6YS53aW4uaW5uZXJIZWlnaHQoKSktKGEub3B0LnJhaWxwYWRkaW5nLnRvcCthLm9wdC5yYWlscGFkZGluZy5ib3R0b20pfSk7YS56b29tJiZhLnpvb20uY3NzKHt0b3A6ZysxLGxlZnQ6MT09YS5yYWlsLmFsaWduP2MtMjA6YythLnJhaWwud2lkdGgrNH0pO2lmKGEucmFpbGgmJiFhLnJhaWxzbG9ja2VkKXtnPWYudG9wO2M9Zi5sZWZ0O2lmKGU9YS5vcHQucmFpbGhvZmZzZXQpZS50b3AmJihnKz1lLnRvcCksZS5sZWZ0JiYoYys9ZS5sZWZ0KTtiPWEucmFpbGguYWxpZ24/ZytkKGEud2luLFwiYm9yZGVyLXRvcC13aWR0aFwiLFxyXG4hMCkrYS53aW4uaW5uZXJIZWlnaHQoKS1hLnJhaWxoLmhlaWdodDpnK2QoYS53aW4sXCJib3JkZXItdG9wLXdpZHRoXCIsITApO2MrPWQoYS53aW4sXCJib3JkZXItbGVmdC13aWR0aFwiKTthLnJhaWxoLmNzcyh7dG9wOmItKGEub3B0LnJhaWxwYWRkaW5nLnRvcCthLm9wdC5yYWlscGFkZGluZy5ib3R0b20pLGxlZnQ6Yyx3aWR0aDphLnJhaWxoLndpZHRofSl9fX07dGhpcy5kb1JhaWxDbGljaz1mdW5jdGlvbihiLGcsYyl7dmFyIGQ7YS5yYWlsc2xvY2tlZHx8KGEuY2FuY2VsRXZlbnQoYiksZz8oZz1jP2EuZG9TY3JvbGxMZWZ0OmEuZG9TY3JvbGxUb3AsZD1jPyhiLnBhZ2VYLWEucmFpbGgub2Zmc2V0KCkubGVmdC1hLmN1cnNvcndpZHRoLzIpKmEuc2Nyb2xscmF0aW8ueDooYi5wYWdlWS1hLnJhaWwub2Zmc2V0KCkudG9wLWEuY3Vyc29yaGVpZ2h0LzIpKmEuc2Nyb2xscmF0aW8ueSxnKGQpKTooZz1jP2EuZG9TY3JvbGxMZWZ0Qnk6YS5kb1Njcm9sbEJ5LGQ9Yz9hLnNjcm9sbC54OmEuc2Nyb2xsLnksXHJcbmI9Yz9iLnBhZ2VYLWEucmFpbGgub2Zmc2V0KCkubGVmdDpiLnBhZ2VZLWEucmFpbC5vZmZzZXQoKS50b3AsYz1jP2Eudmlldy53OmEudmlldy5oLGcoZD49Yj9jOi1jKSkpfTthLmhhc2FuaW1hdGlvbmZyYW1lPXY7YS5oYXNjYW5jZWxhbmltYXRpb25mcmFtZT13O2EuaGFzYW5pbWF0aW9uZnJhbWU/YS5oYXNjYW5jZWxhbmltYXRpb25mcmFtZXx8KHc9ZnVuY3Rpb24oKXthLmNhbmNlbEFuaW1hdGlvbkZyYW1lPSEwfSk6KHY9ZnVuY3Rpb24oYSl7cmV0dXJuIHNldFRpbWVvdXQoYSwxNS1NYXRoLmZsb29yKCtuZXcgRGF0ZS8xRTMpJTE2KX0sdz1jbGVhclRpbWVvdXQpO3RoaXMuaW5pdD1mdW5jdGlvbigpe2Euc2F2ZWQuY3NzPVtdO2lmKGUuaXNpZTdtb2JpbGV8fGUuaXNvcGVyYW1pbmkpcmV0dXJuITA7ZS5oYXNtc3RvdWNoJiZhLmNzcyhhLmlzcGFnZT9mKFwiaHRtbFwiKTphLndpbix7X3RvdWNoYWN0aW9uOlwibm9uZVwifSk7dmFyIGI9ZS5pc21vZGVybmllfHxlLmlzaWUxMD97XCItbXMtb3ZlcmZsb3ctc3R5bGVcIjpcIm5vbmVcIn06XHJcbntcIm92ZXJmbG93LXlcIjpcImhpZGRlblwifTthLnppbmRleD1cImF1dG9cIjthLnppbmRleD1hLmlzcGFnZXx8XCJhdXRvXCIhPWEub3B0LnppbmRleD9hLm9wdC56aW5kZXg6bCgpfHxcImF1dG9cIjshYS5pc3BhZ2UmJlwiYXV0b1wiIT1hLnppbmRleCYmYS56aW5kZXg+QSYmKEE9YS56aW5kZXgpO2EuaXNpZSYmMD09YS56aW5kZXgmJlwiYXV0b1wiPT1hLm9wdC56aW5kZXgmJihhLnppbmRleD1cImF1dG9cIik7aWYoIWEuaXNwYWdlfHwhZS5jYW50b3VjaCYmIWUuaXNpZW9sZCYmIWUuaXNpZTltb2JpbGUpe3ZhciBjPWEuZG9jc2Nyb2xsO2EuaXNwYWdlJiYoYz1hLmhhc3dyYXBwZXI/YS53aW46YS5kb2MpO2UuaXNpZTltb2JpbGV8fGEuY3NzKGMsYik7YS5pc3BhZ2UmJmUuaXNpZTcmJihcIkJPRFlcIj09YS5kb2NbMF0ubm9kZU5hbWU/YS5jc3MoZihcImh0bWxcIikse1wib3ZlcmZsb3cteVwiOlwiaGlkZGVuXCJ9KTpcIkhUTUxcIj09YS5kb2NbMF0ubm9kZU5hbWUmJmEuY3NzKGYoXCJib2R5XCIpLGIpKTshZS5pc2lvc3x8XHJcbmEuaXNwYWdlfHxhLmhhc3dyYXBwZXJ8fGEuY3NzKGYoXCJib2R5XCIpLHtcIi13ZWJraXQtb3ZlcmZsb3ctc2Nyb2xsaW5nXCI6XCJ0b3VjaFwifSk7dmFyIGQ9Zihkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKTtkLmNzcyh7cG9zaXRpb246XCJyZWxhdGl2ZVwiLHRvcDowLFwiZmxvYXRcIjpcInJpZ2h0XCIsd2lkdGg6YS5vcHQuY3Vyc29yd2lkdGgsaGVpZ2h0OjAsXCJiYWNrZ3JvdW5kLWNvbG9yXCI6YS5vcHQuY3Vyc29yY29sb3IsYm9yZGVyOmEub3B0LmN1cnNvcmJvcmRlcixcImJhY2tncm91bmQtY2xpcFwiOlwicGFkZGluZy1ib3hcIixcIi13ZWJraXQtYm9yZGVyLXJhZGl1c1wiOmEub3B0LmN1cnNvcmJvcmRlcnJhZGl1cyxcIi1tb3otYm9yZGVyLXJhZGl1c1wiOmEub3B0LmN1cnNvcmJvcmRlcnJhZGl1cyxcImJvcmRlci1yYWRpdXNcIjphLm9wdC5jdXJzb3Jib3JkZXJyYWRpdXN9KTtkLmhib3JkZXI9cGFyc2VGbG9hdChkLm91dGVySGVpZ2h0KCktZC5pbm5lckhlaWdodCgpKTtkLmFkZENsYXNzKFwibmljZXNjcm9sbC1jdXJzb3JzXCIpO1xyXG5hLmN1cnNvcj1kO3ZhciBtPWYoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSk7bS5hdHRyKFwiaWRcIixhLmlkKTttLmFkZENsYXNzKFwibmljZXNjcm9sbC1yYWlscyBuaWNlc2Nyb2xsLXJhaWxzLXZyXCIpO3ZhciBrLGgscD1bXCJsZWZ0XCIsXCJyaWdodFwiLFwidG9wXCIsXCJib3R0b21cIl0sTDtmb3IoTCBpbiBwKWg9cFtMXSwoaz1hLm9wdC5yYWlscGFkZGluZ1toXSk/bS5jc3MoXCJwYWRkaW5nLVwiK2gsaytcInB4XCIpOmEub3B0LnJhaWxwYWRkaW5nW2hdPTA7bS5hcHBlbmQoZCk7bS53aWR0aD1NYXRoLm1heChwYXJzZUZsb2F0KGEub3B0LmN1cnNvcndpZHRoKSxkLm91dGVyV2lkdGgoKSk7bS5jc3Moe3dpZHRoOm0ud2lkdGgrXCJweFwiLHpJbmRleDphLnppbmRleCxiYWNrZ3JvdW5kOmEub3B0LmJhY2tncm91bmQsY3Vyc29yOlwiZGVmYXVsdFwifSk7bS52aXNpYmlsaXR5PSEwO20uc2Nyb2xsYWJsZT0hMDttLmFsaWduPVwibGVmdFwiPT1hLm9wdC5yYWlsYWxpZ24/MDoxO2EucmFpbD1tO2Q9YS5yYWlsLmRyYWc9XHJcbiExOyFhLm9wdC5ib3h6b29tfHxhLmlzcGFnZXx8ZS5pc2llb2xkfHwoZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGEuYmluZChkLFwiY2xpY2tcIixhLmRvWm9vbSksYS5iaW5kKGQsXCJtb3VzZWVudGVyXCIsZnVuY3Rpb24oKXthLnpvb20uY3NzKFwib3BhY2l0eVwiLGEub3B0LmN1cnNvcm9wYWNpdHltYXgpfSksYS5iaW5kKGQsXCJtb3VzZWxlYXZlXCIsZnVuY3Rpb24oKXthLnpvb20uY3NzKFwib3BhY2l0eVwiLGEub3B0LmN1cnNvcm9wYWNpdHltaW4pfSksYS56b29tPWYoZCksYS56b29tLmNzcyh7Y3Vyc29yOlwicG9pbnRlclwiLHpJbmRleDphLnppbmRleCxiYWNrZ3JvdW5kSW1hZ2U6XCJ1cmwoXCIrYS5vcHQuc2NyaXB0cGF0aCtcInpvb21pY28ucG5nKVwiLGhlaWdodDoxOCx3aWR0aDoxOCxiYWNrZ3JvdW5kUG9zaXRpb246XCIwcHggMHB4XCJ9KSxhLm9wdC5kYmxjbGlja3pvb20mJmEuYmluZChhLndpbixcImRibGNsaWNrXCIsYS5kb1pvb20pLGUuY2FudG91Y2gmJmEub3B0Lmdlc3R1cmV6b29tJiZcclxuKGEub25nZXN0dXJlem9vbT1mdW5jdGlvbihiKXsxLjU8Yi5zY2FsZSYmYS5kb1pvb21JbihiKTsuOD5iLnNjYWxlJiZhLmRvWm9vbU91dChiKTtyZXR1cm4gYS5jYW5jZWxFdmVudChiKX0sYS5iaW5kKGEud2luLFwiZ2VzdHVyZWVuZFwiLGEub25nZXN0dXJlem9vbSkpKTthLnJhaWxoPSExO3ZhciBuO2Eub3B0Lmhvcml6cmFpbGVuYWJsZWQmJihhLmNzcyhjLHtvdmVyZmxvd1g6XCJoaWRkZW5cIn0pLGQ9Zihkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKSxkLmNzcyh7cG9zaXRpb246XCJhYnNvbHV0ZVwiLHRvcDowLGhlaWdodDphLm9wdC5jdXJzb3J3aWR0aCx3aWR0aDowLGJhY2tncm91bmRDb2xvcjphLm9wdC5jdXJzb3Jjb2xvcixib3JkZXI6YS5vcHQuY3Vyc29yYm9yZGVyLGJhY2tncm91bmRDbGlwOlwicGFkZGluZy1ib3hcIixcIi13ZWJraXQtYm9yZGVyLXJhZGl1c1wiOmEub3B0LmN1cnNvcmJvcmRlcnJhZGl1cyxcIi1tb3otYm9yZGVyLXJhZGl1c1wiOmEub3B0LmN1cnNvcmJvcmRlcnJhZGl1cyxcclxuXCJib3JkZXItcmFkaXVzXCI6YS5vcHQuY3Vyc29yYm9yZGVycmFkaXVzfSksZS5pc2llb2xkJiZkLmNzcyhcIm92ZXJmbG93XCIsXCJoaWRkZW5cIiksZC53Ym9yZGVyPXBhcnNlRmxvYXQoZC5vdXRlcldpZHRoKCktZC5pbm5lcldpZHRoKCkpLGQuYWRkQ2xhc3MoXCJuaWNlc2Nyb2xsLWN1cnNvcnNcIiksYS5jdXJzb3JoPWQsbj1mKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpLG4uYXR0cihcImlkXCIsYS5pZCtcIi1oclwiKSxuLmFkZENsYXNzKFwibmljZXNjcm9sbC1yYWlscyBuaWNlc2Nyb2xsLXJhaWxzLWhyXCIpLG4uaGVpZ2h0PU1hdGgubWF4KHBhcnNlRmxvYXQoYS5vcHQuY3Vyc29yd2lkdGgpLGQub3V0ZXJIZWlnaHQoKSksbi5jc3Moe2hlaWdodDpuLmhlaWdodCtcInB4XCIsekluZGV4OmEuemluZGV4LGJhY2tncm91bmQ6YS5vcHQuYmFja2dyb3VuZH0pLG4uYXBwZW5kKGQpLG4udmlzaWJpbGl0eT0hMCxuLnNjcm9sbGFibGU9ITAsbi5hbGlnbj1cInRvcFwiPT1hLm9wdC5yYWlsdmFsaWduP1xyXG4wOjEsYS5yYWlsaD1uLGEucmFpbGguZHJhZz0hMSk7YS5pc3BhZ2U/KG0uY3NzKHtwb3NpdGlvbjpcImZpeGVkXCIsdG9wOjAsaGVpZ2h0OlwiMTAwJVwifSksbS5hbGlnbj9tLmNzcyh7cmlnaHQ6MH0pOm0uY3NzKHtsZWZ0OjB9KSxhLmJvZHkuYXBwZW5kKG0pLGEucmFpbGgmJihuLmNzcyh7cG9zaXRpb246XCJmaXhlZFwiLGxlZnQ6MCx3aWR0aDpcIjEwMCVcIn0pLG4uYWxpZ24/bi5jc3Moe2JvdHRvbTowfSk6bi5jc3Moe3RvcDowfSksYS5ib2R5LmFwcGVuZChuKSkpOihhLmlzaHdzY3JvbGw/KFwic3RhdGljXCI9PWEud2luLmNzcyhcInBvc2l0aW9uXCIpJiZhLmNzcyhhLndpbix7cG9zaXRpb246XCJyZWxhdGl2ZVwifSksYz1cIkhUTUxcIj09YS53aW5bMF0ubm9kZU5hbWU/YS5ib2R5OmEud2luLGYoYykuc2Nyb2xsVG9wKDApLnNjcm9sbExlZnQoMCksYS56b29tJiYoYS56b29tLmNzcyh7cG9zaXRpb246XCJhYnNvbHV0ZVwiLHRvcDoxLHJpZ2h0OjAsXCJtYXJnaW4tcmlnaHRcIjptLndpZHRoKzR9KSxjLmFwcGVuZChhLnpvb20pKSxcclxubS5jc3Moe3Bvc2l0aW9uOlwiYWJzb2x1dGVcIix0b3A6MH0pLG0uYWxpZ24/bS5jc3Moe3JpZ2h0OjB9KTptLmNzcyh7bGVmdDowfSksYy5hcHBlbmQobSksbiYmKG4uY3NzKHtwb3NpdGlvbjpcImFic29sdXRlXCIsbGVmdDowLGJvdHRvbTowfSksbi5hbGlnbj9uLmNzcyh7Ym90dG9tOjB9KTpuLmNzcyh7dG9wOjB9KSxjLmFwcGVuZChuKSkpOihhLmlzZml4ZWQ9XCJmaXhlZFwiPT1hLndpbi5jc3MoXCJwb3NpdGlvblwiKSxjPWEuaXNmaXhlZD9cImZpeGVkXCI6XCJhYnNvbHV0ZVwiLGEuaXNmaXhlZHx8KGEudmlld3BvcnQ9YS5nZXRWaWV3cG9ydChhLndpblswXSkpLGEudmlld3BvcnQmJihhLmJvZHk9YS52aWV3cG9ydCwwPT0vZml4ZWR8YWJzb2x1dGUvLnRlc3QoYS52aWV3cG9ydC5jc3MoXCJwb3NpdGlvblwiKSkmJmEuY3NzKGEudmlld3BvcnQse3Bvc2l0aW9uOlwicmVsYXRpdmVcIn0pKSxtLmNzcyh7cG9zaXRpb246Y30pLGEuem9vbSYmYS56b29tLmNzcyh7cG9zaXRpb246Y30pLGEudXBkYXRlU2Nyb2xsQmFyKCksXHJcbmEuYm9keS5hcHBlbmQobSksYS56b29tJiZhLmJvZHkuYXBwZW5kKGEuem9vbSksYS5yYWlsaCYmKG4uY3NzKHtwb3NpdGlvbjpjfSksYS5ib2R5LmFwcGVuZChuKSkpLGUuaXNpb3MmJmEuY3NzKGEud2luLHtcIi13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvclwiOlwicmdiYSgwLDAsMCwwKVwiLFwiLXdlYmtpdC10b3VjaC1jYWxsb3V0XCI6XCJub25lXCJ9KSxlLmlzaWUmJmEub3B0LmRpc2FibGVvdXRsaW5lJiZhLndpbi5hdHRyKFwiaGlkZUZvY3VzXCIsXCJ0cnVlXCIpLGUuaXN3ZWJraXQmJmEub3B0LmRpc2FibGVvdXRsaW5lJiZhLndpbi5jc3MoXCJvdXRsaW5lXCIsXCJub25lXCIpKTshMT09PWEub3B0LmF1dG9oaWRlbW9kZT8oYS5hdXRvaGlkZWRvbT0hMSxhLnJhaWwuY3NzKHtvcGFjaXR5OmEub3B0LmN1cnNvcm9wYWNpdHltYXh9KSxhLnJhaWxoJiZhLnJhaWxoLmNzcyh7b3BhY2l0eTphLm9wdC5jdXJzb3JvcGFjaXR5bWF4fSkpOiEwPT09YS5vcHQuYXV0b2hpZGVtb2RlfHxcImxlYXZlXCI9PT1hLm9wdC5hdXRvaGlkZW1vZGU/XHJcbihhLmF1dG9oaWRlZG9tPWYoKS5hZGQoYS5yYWlsKSxlLmlzaWU4JiYoYS5hdXRvaGlkZWRvbT1hLmF1dG9oaWRlZG9tLmFkZChhLmN1cnNvcikpLGEucmFpbGgmJihhLmF1dG9oaWRlZG9tPWEuYXV0b2hpZGVkb20uYWRkKGEucmFpbGgpKSxhLnJhaWxoJiZlLmlzaWU4JiYoYS5hdXRvaGlkZWRvbT1hLmF1dG9oaWRlZG9tLmFkZChhLmN1cnNvcmgpKSk6XCJzY3JvbGxcIj09YS5vcHQuYXV0b2hpZGVtb2RlPyhhLmF1dG9oaWRlZG9tPWYoKS5hZGQoYS5yYWlsKSxhLnJhaWxoJiYoYS5hdXRvaGlkZWRvbT1hLmF1dG9oaWRlZG9tLmFkZChhLnJhaWxoKSkpOlwiY3Vyc29yXCI9PWEub3B0LmF1dG9oaWRlbW9kZT8oYS5hdXRvaGlkZWRvbT1mKCkuYWRkKGEuY3Vyc29yKSxhLnJhaWxoJiYoYS5hdXRvaGlkZWRvbT1hLmF1dG9oaWRlZG9tLmFkZChhLmN1cnNvcmgpKSk6XCJoaWRkZW5cIj09YS5vcHQuYXV0b2hpZGVtb2RlJiYoYS5hdXRvaGlkZWRvbT0hMSxhLmhpZGUoKSxhLnJhaWxzbG9ja2VkPVxyXG4hMSk7aWYoZS5pc2llOW1vYmlsZSlhLnNjcm9sbG1vbT1uZXcgTShhKSxhLm9ubWFuZ290b3VjaD1mdW5jdGlvbigpe3ZhciBiPWEuZ2V0U2Nyb2xsVG9wKCksYz1hLmdldFNjcm9sbExlZnQoKTtpZihiPT1hLnNjcm9sbG1vbS5sYXN0c2Nyb2xseSYmYz09YS5zY3JvbGxtb20ubGFzdHNjcm9sbHgpcmV0dXJuITA7dmFyIGc9Yi1hLm1hbmdvdG91Y2guc3ksZD1jLWEubWFuZ290b3VjaC5zeDtpZigwIT1NYXRoLnJvdW5kKE1hdGguc3FydChNYXRoLnBvdyhkLDIpK01hdGgucG93KGcsMikpKSl7dmFyIGU9MD5nPy0xOjEsZj0wPmQ/LTE6MSx1PStuZXcgRGF0ZTthLm1hbmdvdG91Y2gubGF6eSYmY2xlYXJUaW1lb3V0KGEubWFuZ290b3VjaC5sYXp5KTs4MDx1LWEubWFuZ290b3VjaC50bXx8YS5tYW5nb3RvdWNoLmRyeSE9ZXx8YS5tYW5nb3RvdWNoLmRyeCE9Zj8oYS5zY3JvbGxtb20uc3RvcCgpLGEuc2Nyb2xsbW9tLnJlc2V0KGMsYiksYS5tYW5nb3RvdWNoLnN5PWIsYS5tYW5nb3RvdWNoLmx5PVxyXG5iLGEubWFuZ290b3VjaC5zeD1jLGEubWFuZ290b3VjaC5seD1jLGEubWFuZ290b3VjaC5kcnk9ZSxhLm1hbmdvdG91Y2guZHJ4PWYsYS5tYW5nb3RvdWNoLnRtPXUpOihhLnNjcm9sbG1vbS5zdG9wKCksYS5zY3JvbGxtb20udXBkYXRlKGEubWFuZ290b3VjaC5zeC1kLGEubWFuZ290b3VjaC5zeS1nKSxhLm1hbmdvdG91Y2gudG09dSxnPU1hdGgubWF4KE1hdGguYWJzKGEubWFuZ290b3VjaC5seS1iKSxNYXRoLmFicyhhLm1hbmdvdG91Y2gubHgtYykpLGEubWFuZ290b3VjaC5seT1iLGEubWFuZ290b3VjaC5seD1jLDI8ZyYmKGEubWFuZ290b3VjaC5sYXp5PXNldFRpbWVvdXQoZnVuY3Rpb24oKXthLm1hbmdvdG91Y2gubGF6eT0hMTthLm1hbmdvdG91Y2guZHJ5PTA7YS5tYW5nb3RvdWNoLmRyeD0wO2EubWFuZ290b3VjaC50bT0wO2Euc2Nyb2xsbW9tLmRvTW9tZW50dW0oMzApfSwxMDApKSl9fSxtPWEuZ2V0U2Nyb2xsVG9wKCksbj1hLmdldFNjcm9sbExlZnQoKSxhLm1hbmdvdG91Y2g9XHJcbntzeTptLGx5Om0sZHJ5OjAsc3g6bixseDpuLGRyeDowLGxhenk6ITEsdG06MH0sYS5iaW5kKGEuZG9jc2Nyb2xsLFwic2Nyb2xsXCIsYS5vbm1hbmdvdG91Y2gpO2Vsc2V7aWYoZS5jYW50b3VjaHx8YS5pc3RvdWNoY2FwYWJsZXx8YS5vcHQudG91Y2hiZWhhdmlvcnx8ZS5oYXNtc3RvdWNoKXthLnNjcm9sbG1vbT1uZXcgTShhKTthLm9udG91Y2hzdGFydD1mdW5jdGlvbihiKXtpZihiLnBvaW50ZXJUeXBlJiYyIT1iLnBvaW50ZXJUeXBlJiZcInRvdWNoXCIhPWIucG9pbnRlclR5cGUpcmV0dXJuITE7YS5oYXNtb3Zpbmc9ITE7aWYoIWEucmFpbHNsb2NrZWQpe3ZhciBjO2lmKGUuaGFzbXN0b3VjaClmb3IoYz1iLnRhcmdldD9iLnRhcmdldDohMTtjOyl7dmFyIGc9ZihjKS5nZXROaWNlU2Nyb2xsKCk7aWYoMDxnLmxlbmd0aCYmZ1swXS5tZT09YS5tZSlicmVhaztpZigwPGcubGVuZ3RoKXJldHVybiExO2lmKFwiRElWXCI9PWMubm9kZU5hbWUmJmMuaWQ9PWEuaWQpYnJlYWs7Yz1jLnBhcmVudE5vZGU/XHJcbmMucGFyZW50Tm9kZTohMX1hLmNhbmNlbFNjcm9sbCgpO2lmKChjPWEuZ2V0VGFyZ2V0KGIpKSYmL0lOUFVUL2kudGVzdChjLm5vZGVOYW1lKSYmL3JhbmdlL2kudGVzdChjLnR5cGUpKXJldHVybiBhLnN0b3BQcm9wYWdhdGlvbihiKTshKFwiY2xpZW50WFwiaW4gYikmJlwiY2hhbmdlZFRvdWNoZXNcImluIGImJihiLmNsaWVudFg9Yi5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYLGIuY2xpZW50WT1iLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFkpO2EuZm9yY2VzY3JlZW4mJihnPWIsYj17b3JpZ2luYWw6Yi5vcmlnaW5hbD9iLm9yaWdpbmFsOmJ9LGIuY2xpZW50WD1nLnNjcmVlblgsYi5jbGllbnRZPWcuc2NyZWVuWSk7YS5yYWlsLmRyYWc9e3g6Yi5jbGllbnRYLHk6Yi5jbGllbnRZLHN4OmEuc2Nyb2xsLngsc3k6YS5zY3JvbGwueSxzdDphLmdldFNjcm9sbFRvcCgpLHNsOmEuZ2V0U2Nyb2xsTGVmdCgpLHB0OjIsZGw6ITF9O2lmKGEuaXNwYWdlfHwhYS5vcHQuZGlyZWN0aW9ubG9ja2RlYWR6b25lKWEucmFpbC5kcmFnLmRsPVxyXG5cImZcIjtlbHNle3ZhciBnPWYod2luZG93KS53aWR0aCgpLGQ9Zih3aW5kb3cpLmhlaWdodCgpLGQ9TWF0aC5tYXgoMCxNYXRoLm1heChkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodCxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0KS1kKSxnPU1hdGgubWF4KDAsTWF0aC5tYXgoZG9jdW1lbnQuYm9keS5zY3JvbGxXaWR0aCxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsV2lkdGgpLWcpO2EucmFpbC5kcmFnLmNrPSFhLnJhaWwuc2Nyb2xsYWJsZSYmYS5yYWlsaC5zY3JvbGxhYmxlPzA8ZD9cInZcIjohMTphLnJhaWwuc2Nyb2xsYWJsZSYmIWEucmFpbGguc2Nyb2xsYWJsZT8wPGc/XCJoXCI6ITE6ITE7YS5yYWlsLmRyYWcuY2t8fChhLnJhaWwuZHJhZy5kbD1cImZcIil9YS5vcHQudG91Y2hiZWhhdmlvciYmYS5pc2lmcmFtZSYmZS5pc2llJiYoZz1hLndpbi5wb3NpdGlvbigpLGEucmFpbC5kcmFnLngrPWcubGVmdCxhLnJhaWwuZHJhZy55Kz1nLnRvcCk7YS5oYXNtb3Zpbmc9XHJcbiExO2EubGFzdG1vdXNldXA9ITE7YS5zY3JvbGxtb20ucmVzZXQoYi5jbGllbnRYLGIuY2xpZW50WSk7aWYoIWUuY2FudG91Y2gmJiF0aGlzLmlzdG91Y2hjYXBhYmxlJiYhYi5wb2ludGVyVHlwZSl7aWYoIWN8fCEvSU5QVVR8U0VMRUNUfFRFWFRBUkVBL2kudGVzdChjLm5vZGVOYW1lKSlyZXR1cm4hYS5pc3BhZ2UmJmUuaGFzbW91c2VjYXB0dXJlJiZjLnNldENhcHR1cmUoKSxhLm9wdC50b3VjaGJlaGF2aW9yPyhjLm9uY2xpY2smJiFjLl9vbmNsaWNrJiYoYy5fb25jbGljaz1jLm9uY2xpY2ssYy5vbmNsaWNrPWZ1bmN0aW9uKGIpe2lmKGEuaGFzbW92aW5nKXJldHVybiExO2MuX29uY2xpY2suY2FsbCh0aGlzLGIpfSksYS5jYW5jZWxFdmVudChiKSk6YS5zdG9wUHJvcGFnYXRpb24oYik7L1NVQk1JVHxDQU5DRUx8QlVUVE9OL2kudGVzdChmKGMpLmF0dHIoXCJ0eXBlXCIpKSYmKHBjPXt0ZzpjLGNsaWNrOiExfSxhLnByZXZlbnRjbGljaz1wYyl9fX07YS5vbnRvdWNoZW5kPWZ1bmN0aW9uKGIpe2lmKCFhLnJhaWwuZHJhZylyZXR1cm4hMDtcclxuaWYoMj09YS5yYWlsLmRyYWcucHQpe2lmKGIucG9pbnRlclR5cGUmJjIhPWIucG9pbnRlclR5cGUmJlwidG91Y2hcIiE9Yi5wb2ludGVyVHlwZSlyZXR1cm4hMTthLnNjcm9sbG1vbS5kb01vbWVudHVtKCk7YS5yYWlsLmRyYWc9ITE7aWYoYS5oYXNtb3ZpbmcmJihhLmxhc3Rtb3VzZXVwPSEwLGEuaGlkZUN1cnNvcigpLGUuaGFzbW91c2VjYXB0dXJlJiZkb2N1bWVudC5yZWxlYXNlQ2FwdHVyZSgpLCFlLmNhbnRvdWNoKSlyZXR1cm4gYS5jYW5jZWxFdmVudChiKX1lbHNlIGlmKDE9PWEucmFpbC5kcmFnLnB0KXJldHVybiBhLm9ubW91c2V1cChiKX07dmFyIHE9YS5vcHQudG91Y2hiZWhhdmlvciYmYS5pc2lmcmFtZSYmIWUuaGFzbW91c2VjYXB0dXJlO2Eub250b3VjaG1vdmU9ZnVuY3Rpb24oYixjKXtpZighYS5yYWlsLmRyYWd8fGIudGFyZ2V0VG91Y2hlcyYmYS5vcHQucHJldmVudG11bHRpdG91Y2hzY3JvbGxpbmcmJjE8Yi50YXJnZXRUb3VjaGVzLmxlbmd0aHx8Yi5wb2ludGVyVHlwZSYmXHJcbjIhPWIucG9pbnRlclR5cGUmJlwidG91Y2hcIiE9Yi5wb2ludGVyVHlwZSlyZXR1cm4hMTtpZigyPT1hLnJhaWwuZHJhZy5wdCl7aWYoZS5jYW50b3VjaCYmZS5pc2lvcyYmdm9pZCAwPT09Yi5vcmlnaW5hbClyZXR1cm4hMDthLmhhc21vdmluZz0hMDthLnByZXZlbnRjbGljayYmIWEucHJldmVudGNsaWNrLmNsaWNrJiYoYS5wcmV2ZW50Y2xpY2suY2xpY2s9YS5wcmV2ZW50Y2xpY2sudGcub25jbGlja3x8ITEsYS5wcmV2ZW50Y2xpY2sudGcub25jbGljaz1hLm9ucHJldmVudGNsaWNrKTtiPWYuZXh0ZW5kKHtvcmlnaW5hbDpifSxiKTtcImNoYW5nZWRUb3VjaGVzXCJpbiBiJiYoYi5jbGllbnRYPWIuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WCxiLmNsaWVudFk9Yi5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZKTtpZihhLmZvcmNlc2NyZWVuKXt2YXIgZz1iO2I9e29yaWdpbmFsOmIub3JpZ2luYWw/Yi5vcmlnaW5hbDpifTtiLmNsaWVudFg9Zy5zY3JlZW5YO2IuY2xpZW50WT1nLnNjcmVlbll9dmFyIGQsXHJcbmc9ZD0wO3EmJiFjJiYoZD1hLndpbi5wb3NpdGlvbigpLGc9LWQubGVmdCxkPS1kLnRvcCk7dmFyIHU9Yi5jbGllbnRZK2Q7ZD11LWEucmFpbC5kcmFnLnk7dmFyIG09Yi5jbGllbnRYK2csaz1tLWEucmFpbC5kcmFnLngsaD1hLnJhaWwuZHJhZy5zdC1kO2EuaXNod3Njcm9sbCYmYS5vcHQuYm91bmNlc2Nyb2xsPzA+aD9oPU1hdGgucm91bmQoaC8yKTpoPmEucGFnZS5tYXhoJiYoaD1hLnBhZ2UubWF4aCtNYXRoLnJvdW5kKChoLWEucGFnZS5tYXhoKS8yKSk6KDA+aCYmKHU9aD0wKSxoPmEucGFnZS5tYXhoJiYoaD1hLnBhZ2UubWF4aCx1PTApKTt2YXIgbDthLnJhaWxoJiZhLnJhaWxoLnNjcm9sbGFibGUmJihsPWEuaXNydGxtb2RlP2stYS5yYWlsLmRyYWcuc2w6YS5yYWlsLmRyYWcuc2wtayxhLmlzaHdzY3JvbGwmJmEub3B0LmJvdW5jZXNjcm9sbD8wPmw/bD1NYXRoLnJvdW5kKGwvMik6bD5hLnBhZ2UubWF4dyYmKGw9YS5wYWdlLm1heHcrTWF0aC5yb3VuZCgobC1hLnBhZ2UubWF4dykvXHJcbjIpKTooMD5sJiYobT1sPTApLGw+YS5wYWdlLm1heHcmJihsPWEucGFnZS5tYXh3LG09MCkpKTtnPSExO2lmKGEucmFpbC5kcmFnLmRsKWc9ITAsXCJ2XCI9PWEucmFpbC5kcmFnLmRsP2w9YS5yYWlsLmRyYWcuc2w6XCJoXCI9PWEucmFpbC5kcmFnLmRsJiYoaD1hLnJhaWwuZHJhZy5zdCk7ZWxzZXtkPU1hdGguYWJzKGQpO3ZhciBrPU1hdGguYWJzKGspLEM9YS5vcHQuZGlyZWN0aW9ubG9ja2RlYWR6b25lO2lmKFwidlwiPT1hLnJhaWwuZHJhZy5jayl7aWYoZD5DJiZrPD0uMypkKXJldHVybiBhLnJhaWwuZHJhZz0hMSwhMDtrPkMmJihhLnJhaWwuZHJhZy5kbD1cImZcIixmKFwiYm9keVwiKS5zY3JvbGxUb3AoZihcImJvZHlcIikuc2Nyb2xsVG9wKCkpKX1lbHNlIGlmKFwiaFwiPT1hLnJhaWwuZHJhZy5jayl7aWYoaz5DJiZkPD0uMyprKXJldHVybiBhLnJhaWwuZHJhZz0hMSwhMDtkPkMmJihhLnJhaWwuZHJhZy5kbD1cImZcIixmKFwiYm9keVwiKS5zY3JvbGxMZWZ0KGYoXCJib2R5XCIpLnNjcm9sbExlZnQoKSkpfX1hLnN5bmNoZWQoXCJ0b3VjaG1vdmVcIixcclxuZnVuY3Rpb24oKXthLnJhaWwuZHJhZyYmMj09YS5yYWlsLmRyYWcucHQmJihhLnByZXBhcmVUcmFuc2l0aW9uJiZhLnByZXBhcmVUcmFuc2l0aW9uKDApLGEucmFpbC5zY3JvbGxhYmxlJiZhLnNldFNjcm9sbFRvcChoKSxhLnNjcm9sbG1vbS51cGRhdGUobSx1KSxhLnJhaWxoJiZhLnJhaWxoLnNjcm9sbGFibGU/KGEuc2V0U2Nyb2xsTGVmdChsKSxhLnNob3dDdXJzb3IoaCxsKSk6YS5zaG93Q3Vyc29yKGgpLGUuaXNpZTEwJiZkb2N1bWVudC5zZWxlY3Rpb24uY2xlYXIoKSl9KTtlLmlzY2hyb21lJiZhLmlzdG91Y2hjYXBhYmxlJiYoZz0hMSk7aWYoZylyZXR1cm4gYS5jYW5jZWxFdmVudChiKX1lbHNlIGlmKDE9PWEucmFpbC5kcmFnLnB0KXJldHVybiBhLm9ubW91c2Vtb3ZlKGIpfX1hLm9ubW91c2Vkb3duPWZ1bmN0aW9uKGIsYyl7aWYoIWEucmFpbC5kcmFnfHwxPT1hLnJhaWwuZHJhZy5wdCl7aWYoYS5yYWlsc2xvY2tlZClyZXR1cm4gYS5jYW5jZWxFdmVudChiKTthLmNhbmNlbFNjcm9sbCgpO1xyXG5hLnJhaWwuZHJhZz17eDpiLmNsaWVudFgseTpiLmNsaWVudFksc3g6YS5zY3JvbGwueCxzeTphLnNjcm9sbC55LHB0OjEsaHI6ISFjfTt2YXIgZz1hLmdldFRhcmdldChiKTshYS5pc3BhZ2UmJmUuaGFzbW91c2VjYXB0dXJlJiZnLnNldENhcHR1cmUoKTthLmlzaWZyYW1lJiYhZS5oYXNtb3VzZWNhcHR1cmUmJihhLnNhdmVkLmNzc3BvaW50ZXJldmVudHM9YS5kb2MuY3NzKFwicG9pbnRlci1ldmVudHNcIiksYS5jc3MoYS5kb2Mse1wicG9pbnRlci1ldmVudHNcIjpcIm5vbmVcIn0pKTthLmhhc21vdmluZz0hMTtyZXR1cm4gYS5jYW5jZWxFdmVudChiKX19O2Eub25tb3VzZXVwPWZ1bmN0aW9uKGIpe2lmKGEucmFpbC5kcmFnKXtpZigxIT1hLnJhaWwuZHJhZy5wdClyZXR1cm4hMDtlLmhhc21vdXNlY2FwdHVyZSYmZG9jdW1lbnQucmVsZWFzZUNhcHR1cmUoKTthLmlzaWZyYW1lJiYhZS5oYXNtb3VzZWNhcHR1cmUmJmEuZG9jLmNzcyhcInBvaW50ZXItZXZlbnRzXCIsYS5zYXZlZC5jc3Nwb2ludGVyZXZlbnRzKTtcclxuYS5yYWlsLmRyYWc9ITE7YS5oYXNtb3ZpbmcmJmEudHJpZ2dlclNjcm9sbEVuZCgpO3JldHVybiBhLmNhbmNlbEV2ZW50KGIpfX07YS5vbm1vdXNlbW92ZT1mdW5jdGlvbihiKXtpZihhLnJhaWwuZHJhZyl7aWYoMT09YS5yYWlsLmRyYWcucHQpe2lmKGUuaXNjaHJvbWUmJjA9PWIud2hpY2gpcmV0dXJuIGEub25tb3VzZXVwKGIpO2EuY3Vyc29yZnJlZXplZD0hMDthLmhhc21vdmluZz0hMDtpZihhLnJhaWwuZHJhZy5ocil7YS5zY3JvbGwueD1hLnJhaWwuZHJhZy5zeCsoYi5jbGllbnRYLWEucmFpbC5kcmFnLngpOzA+YS5zY3JvbGwueCYmKGEuc2Nyb2xsLng9MCk7dmFyIGM9YS5zY3JvbGx2YWx1ZW1heHc7YS5zY3JvbGwueD5jJiYoYS5zY3JvbGwueD1jKX1lbHNlIGEuc2Nyb2xsLnk9YS5yYWlsLmRyYWcuc3krKGIuY2xpZW50WS1hLnJhaWwuZHJhZy55KSwwPmEuc2Nyb2xsLnkmJihhLnNjcm9sbC55PTApLGM9YS5zY3JvbGx2YWx1ZW1heCxhLnNjcm9sbC55PmMmJihhLnNjcm9sbC55PVxyXG5jKTthLnN5bmNoZWQoXCJtb3VzZW1vdmVcIixmdW5jdGlvbigpe2EucmFpbC5kcmFnJiYxPT1hLnJhaWwuZHJhZy5wdCYmKGEuc2hvd0N1cnNvcigpLGEucmFpbC5kcmFnLmhyP2EuaGFzcmV2ZXJzZWhyP2EuZG9TY3JvbGxMZWZ0KGEuc2Nyb2xsdmFsdWVtYXh3LU1hdGgucm91bmQoYS5zY3JvbGwueCphLnNjcm9sbHJhdGlvLngpLGEub3B0LmN1cnNvcmRyYWdzcGVlZCk6YS5kb1Njcm9sbExlZnQoTWF0aC5yb3VuZChhLnNjcm9sbC54KmEuc2Nyb2xscmF0aW8ueCksYS5vcHQuY3Vyc29yZHJhZ3NwZWVkKTphLmRvU2Nyb2xsVG9wKE1hdGgucm91bmQoYS5zY3JvbGwueSphLnNjcm9sbHJhdGlvLnkpLGEub3B0LmN1cnNvcmRyYWdzcGVlZCkpfSk7cmV0dXJuIGEuY2FuY2VsRXZlbnQoYil9fWVsc2UgYS5jaGVja2FyZWE9MH07aWYoZS5jYW50b3VjaHx8YS5vcHQudG91Y2hiZWhhdmlvcilhLm9ucHJldmVudGNsaWNrPWZ1bmN0aW9uKGIpe2lmKGEucHJldmVudGNsaWNrKXJldHVybiBhLnByZXZlbnRjbGljay50Zy5vbmNsaWNrPVxyXG5hLnByZXZlbnRjbGljay5jbGljayxhLnByZXZlbnRjbGljaz0hMSxhLmNhbmNlbEV2ZW50KGIpfSxhLmJpbmQoYS53aW4sXCJtb3VzZWRvd25cIixhLm9udG91Y2hzdGFydCksYS5vbmNsaWNrPWUuaXNpb3M/ITE6ZnVuY3Rpb24oYil7cmV0dXJuIGEubGFzdG1vdXNldXA/KGEubGFzdG1vdXNldXA9ITEsYS5jYW5jZWxFdmVudChiKSk6ITB9LGEub3B0LmdyYWJjdXJzb3JlbmFibGVkJiZlLmN1cnNvcmdyYWJ2YWx1ZSYmKGEuY3NzKGEuaXNwYWdlP2EuZG9jOmEud2luLHtjdXJzb3I6ZS5jdXJzb3JncmFidmFsdWV9KSxhLmNzcyhhLnJhaWwse2N1cnNvcjplLmN1cnNvcmdyYWJ2YWx1ZX0pKTtlbHNle3ZhciByPWZ1bmN0aW9uKGIpe2lmKGEuc2VsZWN0aW9uZHJhZyl7aWYoYil7dmFyIGM9YS53aW4ub3V0ZXJIZWlnaHQoKTtiPWIucGFnZVktYS5zZWxlY3Rpb25kcmFnLnRvcDswPGImJmI8YyYmKGI9MCk7Yj49YyYmKGItPWMpO2Euc2VsZWN0aW9uZHJhZy5kZj1ifTAhPWEuc2VsZWN0aW9uZHJhZy5kZiYmXHJcbihhLmRvU2Nyb2xsQnkoMiotTWF0aC5mbG9vcihhLnNlbGVjdGlvbmRyYWcuZGYvNikpLGEuZGVib3VuY2VkKFwiZG9zZWxlY3Rpb25zY3JvbGxcIixmdW5jdGlvbigpe3IoKX0sNTApKX19O2EuaGFzVGV4dFNlbGVjdGVkPVwiZ2V0U2VsZWN0aW9uXCJpbiBkb2N1bWVudD9mdW5jdGlvbigpe3JldHVybiAwPGRvY3VtZW50LmdldFNlbGVjdGlvbigpLnJhbmdlQ291bnR9Olwic2VsZWN0aW9uXCJpbiBkb2N1bWVudD9mdW5jdGlvbigpe3JldHVyblwiTm9uZVwiIT1kb2N1bWVudC5zZWxlY3Rpb24udHlwZX06ZnVuY3Rpb24oKXtyZXR1cm4hMX07YS5vbnNlbGVjdGlvbnN0YXJ0PWZ1bmN0aW9uKGIpe2EuaXNwYWdlfHwoYS5zZWxlY3Rpb25kcmFnPWEud2luLm9mZnNldCgpKX07YS5vbnNlbGVjdGlvbmVuZD1mdW5jdGlvbihiKXthLnNlbGVjdGlvbmRyYWc9ITF9O2Eub25zZWxlY3Rpb25kcmFnPWZ1bmN0aW9uKGIpe2Euc2VsZWN0aW9uZHJhZyYmYS5oYXNUZXh0U2VsZWN0ZWQoKSYmYS5kZWJvdW5jZWQoXCJzZWxlY3Rpb25zY3JvbGxcIixcclxuZnVuY3Rpb24oKXtyKGIpfSwyNTApfX1lLmhhc3czY3RvdWNoPyhhLmNzcyhhLnJhaWwse1widG91Y2gtYWN0aW9uXCI6XCJub25lXCJ9KSxhLmNzcyhhLmN1cnNvcix7XCJ0b3VjaC1hY3Rpb25cIjpcIm5vbmVcIn0pLGEuYmluZChhLndpbixcInBvaW50ZXJkb3duXCIsYS5vbnRvdWNoc3RhcnQpLGEuYmluZChkb2N1bWVudCxcInBvaW50ZXJ1cFwiLGEub250b3VjaGVuZCksYS5iaW5kKGRvY3VtZW50LFwicG9pbnRlcm1vdmVcIixhLm9udG91Y2htb3ZlKSk6ZS5oYXNtc3RvdWNoPyhhLmNzcyhhLnJhaWwse1wiLW1zLXRvdWNoLWFjdGlvblwiOlwibm9uZVwifSksYS5jc3MoYS5jdXJzb3Ise1wiLW1zLXRvdWNoLWFjdGlvblwiOlwibm9uZVwifSksYS5iaW5kKGEud2luLFwiTVNQb2ludGVyRG93blwiLGEub250b3VjaHN0YXJ0KSxhLmJpbmQoZG9jdW1lbnQsXCJNU1BvaW50ZXJVcFwiLGEub250b3VjaGVuZCksYS5iaW5kKGRvY3VtZW50LFwiTVNQb2ludGVyTW92ZVwiLGEub250b3VjaG1vdmUpLGEuYmluZChhLmN1cnNvcixcIk1TR2VzdHVyZUhvbGRcIixcclxuZnVuY3Rpb24oYSl7YS5wcmV2ZW50RGVmYXVsdCgpfSksYS5iaW5kKGEuY3Vyc29yLFwiY29udGV4dG1lbnVcIixmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCl9KSk6dGhpcy5pc3RvdWNoY2FwYWJsZSYmKGEuYmluZChhLndpbixcInRvdWNoc3RhcnRcIixhLm9udG91Y2hzdGFydCksYS5iaW5kKGRvY3VtZW50LFwidG91Y2hlbmRcIixhLm9udG91Y2hlbmQpLGEuYmluZChkb2N1bWVudCxcInRvdWNoY2FuY2VsXCIsYS5vbnRvdWNoZW5kKSxhLmJpbmQoZG9jdW1lbnQsXCJ0b3VjaG1vdmVcIixhLm9udG91Y2htb3ZlKSk7aWYoYS5vcHQuY3Vyc29yZHJhZ29udG91Y2h8fCFlLmNhbnRvdWNoJiYhYS5vcHQudG91Y2hiZWhhdmlvcilhLnJhaWwuY3NzKHtjdXJzb3I6XCJkZWZhdWx0XCJ9KSxhLnJhaWxoJiZhLnJhaWxoLmNzcyh7Y3Vyc29yOlwiZGVmYXVsdFwifSksYS5qcWJpbmQoYS5yYWlsLFwibW91c2VlbnRlclwiLGZ1bmN0aW9uKCl7aWYoIWEuaXNwYWdlJiYhYS53aW4uaXMoXCI6dmlzaWJsZVwiKSlyZXR1cm4hMTtcclxuYS5jYW5zaG93b25tb3VzZWV2ZW50JiZhLnNob3dDdXJzb3IoKTthLnJhaWwuYWN0aXZlPSEwfSksYS5qcWJpbmQoYS5yYWlsLFwibW91c2VsZWF2ZVwiLGZ1bmN0aW9uKCl7YS5yYWlsLmFjdGl2ZT0hMTthLnJhaWwuZHJhZ3x8YS5oaWRlQ3Vyc29yKCl9KSxhLm9wdC5zZW5zaXRpdmVyYWlsJiYoYS5iaW5kKGEucmFpbCxcImNsaWNrXCIsZnVuY3Rpb24oYil7YS5kb1JhaWxDbGljayhiLCExLCExKX0pLGEuYmluZChhLnJhaWwsXCJkYmxjbGlja1wiLGZ1bmN0aW9uKGIpe2EuZG9SYWlsQ2xpY2soYiwhMCwhMSl9KSxhLmJpbmQoYS5jdXJzb3IsXCJjbGlja1wiLGZ1bmN0aW9uKGIpe2EuY2FuY2VsRXZlbnQoYil9KSxhLmJpbmQoYS5jdXJzb3IsXCJkYmxjbGlja1wiLGZ1bmN0aW9uKGIpe2EuY2FuY2VsRXZlbnQoYil9KSksYS5yYWlsaCYmKGEuanFiaW5kKGEucmFpbGgsXCJtb3VzZWVudGVyXCIsZnVuY3Rpb24oKXtpZighYS5pc3BhZ2UmJiFhLndpbi5pcyhcIjp2aXNpYmxlXCIpKXJldHVybiExO2EuY2Fuc2hvd29ubW91c2VldmVudCYmXHJcbmEuc2hvd0N1cnNvcigpO2EucmFpbC5hY3RpdmU9ITB9KSxhLmpxYmluZChhLnJhaWxoLFwibW91c2VsZWF2ZVwiLGZ1bmN0aW9uKCl7YS5yYWlsLmFjdGl2ZT0hMTthLnJhaWwuZHJhZ3x8YS5oaWRlQ3Vyc29yKCl9KSxhLm9wdC5zZW5zaXRpdmVyYWlsJiYoYS5iaW5kKGEucmFpbGgsXCJjbGlja1wiLGZ1bmN0aW9uKGIpe2EuZG9SYWlsQ2xpY2soYiwhMSwhMCl9KSxhLmJpbmQoYS5yYWlsaCxcImRibGNsaWNrXCIsZnVuY3Rpb24oYil7YS5kb1JhaWxDbGljayhiLCEwLCEwKX0pLGEuYmluZChhLmN1cnNvcmgsXCJjbGlja1wiLGZ1bmN0aW9uKGIpe2EuY2FuY2VsRXZlbnQoYil9KSxhLmJpbmQoYS5jdXJzb3JoLFwiZGJsY2xpY2tcIixmdW5jdGlvbihiKXthLmNhbmNlbEV2ZW50KGIpfSkpKTtlLmNhbnRvdWNofHxhLm9wdC50b3VjaGJlaGF2aW9yPyhhLmJpbmQoZS5oYXNtb3VzZWNhcHR1cmU/YS53aW46ZG9jdW1lbnQsXCJtb3VzZXVwXCIsYS5vbnRvdWNoZW5kKSxhLmJpbmQoZG9jdW1lbnQsXCJtb3VzZW1vdmVcIixcclxuYS5vbnRvdWNobW92ZSksYS5vbmNsaWNrJiZhLmJpbmQoZG9jdW1lbnQsXCJjbGlja1wiLGEub25jbGljayksYS5vcHQuY3Vyc29yZHJhZ29udG91Y2g/KGEuYmluZChhLmN1cnNvcixcIm1vdXNlZG93blwiLGEub25tb3VzZWRvd24pLGEuYmluZChhLmN1cnNvcixcIm1vdXNldXBcIixhLm9ubW91c2V1cCksYS5jdXJzb3JoJiZhLmJpbmQoYS5jdXJzb3JoLFwibW91c2Vkb3duXCIsZnVuY3Rpb24oYil7YS5vbm1vdXNlZG93bihiLCEwKX0pLGEuY3Vyc29yaCYmYS5iaW5kKGEuY3Vyc29yaCxcIm1vdXNldXBcIixhLm9ubW91c2V1cCkpOihhLmJpbmQoYS5yYWlsLFwibW91c2Vkb3duXCIsZnVuY3Rpb24oYSl7YS5wcmV2ZW50RGVmYXVsdCgpfSksYS5yYWlsaCYmYS5iaW5kKGEucmFpbGgsXCJtb3VzZWRvd25cIixmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCl9KSkpOihhLmJpbmQoZS5oYXNtb3VzZWNhcHR1cmU/YS53aW46ZG9jdW1lbnQsXCJtb3VzZXVwXCIsYS5vbm1vdXNldXApLGEuYmluZChkb2N1bWVudCxcclxuXCJtb3VzZW1vdmVcIixhLm9ubW91c2Vtb3ZlKSxhLm9uY2xpY2smJmEuYmluZChkb2N1bWVudCxcImNsaWNrXCIsYS5vbmNsaWNrKSxhLmJpbmQoYS5jdXJzb3IsXCJtb3VzZWRvd25cIixhLm9ubW91c2Vkb3duKSxhLmJpbmQoYS5jdXJzb3IsXCJtb3VzZXVwXCIsYS5vbm1vdXNldXApLGEucmFpbGgmJihhLmJpbmQoYS5jdXJzb3JoLFwibW91c2Vkb3duXCIsZnVuY3Rpb24oYil7YS5vbm1vdXNlZG93bihiLCEwKX0pLGEuYmluZChhLmN1cnNvcmgsXCJtb3VzZXVwXCIsYS5vbm1vdXNldXApKSwhYS5pc3BhZ2UmJmEub3B0LmVuYWJsZXNjcm9sbG9uc2VsZWN0aW9uJiYoYS5iaW5kKGEud2luWzBdLFwibW91c2Vkb3duXCIsYS5vbnNlbGVjdGlvbnN0YXJ0KSxhLmJpbmQoZG9jdW1lbnQsXCJtb3VzZXVwXCIsYS5vbnNlbGVjdGlvbmVuZCksYS5iaW5kKGEuY3Vyc29yLFwibW91c2V1cFwiLGEub25zZWxlY3Rpb25lbmQpLGEuY3Vyc29yaCYmYS5iaW5kKGEuY3Vyc29yaCxcIm1vdXNldXBcIixhLm9uc2VsZWN0aW9uZW5kKSxcclxuYS5iaW5kKGRvY3VtZW50LFwibW91c2Vtb3ZlXCIsYS5vbnNlbGVjdGlvbmRyYWcpKSxhLnpvb20mJihhLmpxYmluZChhLnpvb20sXCJtb3VzZWVudGVyXCIsZnVuY3Rpb24oKXthLmNhbnNob3dvbm1vdXNlZXZlbnQmJmEuc2hvd0N1cnNvcigpO2EucmFpbC5hY3RpdmU9ITB9KSxhLmpxYmluZChhLnpvb20sXCJtb3VzZWxlYXZlXCIsZnVuY3Rpb24oKXthLnJhaWwuYWN0aXZlPSExO2EucmFpbC5kcmFnfHxhLmhpZGVDdXJzb3IoKX0pKSk7YS5vcHQuZW5hYmxlbW91c2V3aGVlbCYmKGEuaXNpZnJhbWV8fGEubW91c2V3aGVlbChlLmlzaWUmJmEuaXNwYWdlP2RvY3VtZW50OmEud2luLGEub25tb3VzZXdoZWVsKSxhLm1vdXNld2hlZWwoYS5yYWlsLGEub25tb3VzZXdoZWVsKSxhLnJhaWxoJiZhLm1vdXNld2hlZWwoYS5yYWlsaCxhLm9ubW91c2V3aGVlbGhyKSk7YS5pc3BhZ2V8fGUuY2FudG91Y2h8fC9IVE1MfF5CT0RZLy50ZXN0KGEud2luWzBdLm5vZGVOYW1lKXx8KGEud2luLmF0dHIoXCJ0YWJpbmRleFwiKXx8XHJcbmEud2luLmF0dHIoe3RhYmluZGV4Ok8rK30pLGEuanFiaW5kKGEud2luLFwiZm9jdXNcIixmdW5jdGlvbihiKXtCPWEuZ2V0VGFyZ2V0KGIpLmlkfHwhMDthLmhhc2ZvY3VzPSEwO2EuY2Fuc2hvd29ubW91c2VldmVudCYmYS5ub3RpY2VDdXJzb3IoKX0pLGEuanFiaW5kKGEud2luLFwiYmx1clwiLGZ1bmN0aW9uKGIpe0I9ITE7YS5oYXNmb2N1cz0hMX0pLGEuanFiaW5kKGEud2luLFwibW91c2VlbnRlclwiLGZ1bmN0aW9uKGIpe0Y9YS5nZXRUYXJnZXQoYikuaWR8fCEwO2EuaGFzbW91c2Vmb2N1cz0hMDthLmNhbnNob3dvbm1vdXNlZXZlbnQmJmEubm90aWNlQ3Vyc29yKCl9KSxhLmpxYmluZChhLndpbixcIm1vdXNlbGVhdmVcIixmdW5jdGlvbigpe0Y9ITE7YS5oYXNtb3VzZWZvY3VzPSExO2EucmFpbC5kcmFnfHxhLmhpZGVDdXJzb3IoKX0pKX1hLm9ua2V5cHJlc3M9ZnVuY3Rpb24oYil7aWYoYS5yYWlsc2xvY2tlZCYmMD09YS5wYWdlLm1heGgpcmV0dXJuITA7Yj1iP2I6d2luZG93LmU7dmFyIGM9XHJcbmEuZ2V0VGFyZ2V0KGIpO2lmKGMmJi9JTlBVVHxURVhUQVJFQXxTRUxFQ1R8T1BUSU9OLy50ZXN0KGMubm9kZU5hbWUpJiYoIWMuZ2V0QXR0cmlidXRlKFwidHlwZVwiKSYmIWMudHlwZXx8IS9zdWJtaXR8YnV0dG9ufGNhbmNlbC9pLnRwKXx8ZihjKS5hdHRyKFwiY29udGVudGVkaXRhYmxlXCIpKXJldHVybiEwO2lmKGEuaGFzZm9jdXN8fGEuaGFzbW91c2Vmb2N1cyYmIUJ8fGEuaXNwYWdlJiYhQiYmIUYpe2M9Yi5rZXlDb2RlO2lmKGEucmFpbHNsb2NrZWQmJjI3IT1jKXJldHVybiBhLmNhbmNlbEV2ZW50KGIpO3ZhciBnPWIuY3RybEtleXx8ITEsZD1iLnNoaWZ0S2V5fHwhMSxlPSExO3N3aXRjaChjKXtjYXNlIDM4OmNhc2UgNjMyMzM6YS5kb1Njcm9sbEJ5KDcyKTtlPSEwO2JyZWFrO2Nhc2UgNDA6Y2FzZSA2MzIzNTphLmRvU2Nyb2xsQnkoLTcyKTtlPSEwO2JyZWFrO2Nhc2UgMzc6Y2FzZSA2MzIzMjphLnJhaWxoJiYoZz9hLmRvU2Nyb2xsTGVmdCgwKTphLmRvU2Nyb2xsTGVmdEJ5KDcyKSxcclxuZT0hMCk7YnJlYWs7Y2FzZSAzOTpjYXNlIDYzMjM0OmEucmFpbGgmJihnP2EuZG9TY3JvbGxMZWZ0KGEucGFnZS5tYXh3KTphLmRvU2Nyb2xsTGVmdEJ5KC03MiksZT0hMCk7YnJlYWs7Y2FzZSAzMzpjYXNlIDYzMjc2OmEuZG9TY3JvbGxCeShhLnZpZXcuaCk7ZT0hMDticmVhaztjYXNlIDM0OmNhc2UgNjMyNzc6YS5kb1Njcm9sbEJ5KC1hLnZpZXcuaCk7ZT0hMDticmVhaztjYXNlIDM2OmNhc2UgNjMyNzM6YS5yYWlsaCYmZz9hLmRvU2Nyb2xsUG9zKDAsMCk6YS5kb1Njcm9sbFRvKDApO2U9ITA7YnJlYWs7Y2FzZSAzNTpjYXNlIDYzMjc1OmEucmFpbGgmJmc/YS5kb1Njcm9sbFBvcyhhLnBhZ2UubWF4dyxhLnBhZ2UubWF4aCk6YS5kb1Njcm9sbFRvKGEucGFnZS5tYXhoKTtlPSEwO2JyZWFrO2Nhc2UgMzI6YS5vcHQuc3BhY2ViYXJlbmFibGVkJiYoZD9hLmRvU2Nyb2xsQnkoYS52aWV3LmgpOmEuZG9TY3JvbGxCeSgtYS52aWV3LmgpLGU9ITApO2JyZWFrO2Nhc2UgMjc6YS56b29tYWN0aXZlJiZcclxuKGEuZG9ab29tKCksZT0hMCl9aWYoZSlyZXR1cm4gYS5jYW5jZWxFdmVudChiKX19O2Eub3B0LmVuYWJsZWtleWJvYXJkJiZhLmJpbmQoZG9jdW1lbnQsZS5pc29wZXJhJiYhZS5pc29wZXJhMTI/XCJrZXlwcmVzc1wiOlwia2V5ZG93blwiLGEub25rZXlwcmVzcyk7YS5iaW5kKGRvY3VtZW50LFwia2V5ZG93blwiLGZ1bmN0aW9uKGIpe2IuY3RybEtleSYmKGEud2hlZWxwcmV2ZW50ZWQ9ITApfSk7YS5iaW5kKGRvY3VtZW50LFwia2V5dXBcIixmdW5jdGlvbihiKXtiLmN0cmxLZXl8fChhLndoZWVscHJldmVudGVkPSExKX0pO2EuYmluZCh3aW5kb3csXCJibHVyXCIsZnVuY3Rpb24oYil7YS53aGVlbHByZXZlbnRlZD0hMX0pO2EuYmluZCh3aW5kb3csXCJyZXNpemVcIixhLmxhenlSZXNpemUpO2EuYmluZCh3aW5kb3csXCJvcmllbnRhdGlvbmNoYW5nZVwiLGEubGF6eVJlc2l6ZSk7YS5iaW5kKHdpbmRvdyxcImxvYWRcIixhLmxhenlSZXNpemUpO2lmKGUuaXNjaHJvbWUmJiFhLmlzcGFnZSYmIWEuaGFzd3JhcHBlcil7dmFyIHQ9XHJcbmEud2luLmF0dHIoXCJzdHlsZVwiKSxtPXBhcnNlRmxvYXQoYS53aW4uY3NzKFwid2lkdGhcIikpKzE7YS53aW4uY3NzKFwid2lkdGhcIixtKTthLnN5bmNoZWQoXCJjaHJvbWVmaXhcIixmdW5jdGlvbigpe2Eud2luLmF0dHIoXCJzdHlsZVwiLHQpfSl9YS5vbkF0dHJpYnV0ZUNoYW5nZT1mdW5jdGlvbihiKXthLmxhenlSZXNpemUoYS5pc2llb2xkPzI1MDozMCl9O2EuaXNpZTExfHwhMT09PXh8fChhLm9ic2VydmVyYm9keT1uZXcgeChmdW5jdGlvbihiKXtiLmZvckVhY2goZnVuY3Rpb24oYil7aWYoXCJhdHRyaWJ1dGVzXCI9PWIudHlwZSlyZXR1cm4gZihcImJvZHlcIikuaGFzQ2xhc3MoXCJtb2RhbC1vcGVuXCIpJiZmKFwiYm9keVwiKS5oYXNDbGFzcyhcIm1vZGFsLWRpYWxvZ1wiKSYmIWYuY29udGFpbnMoZihcIi5tb2RhbC1kaWFsb2dcIilbMF0sYS5kb2NbMF0pP2EuaGlkZSgpOmEuc2hvdygpfSk7aWYoZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQhPWEucGFnZS5tYXhoKXJldHVybiBhLmxhenlSZXNpemUoMzApfSksXHJcbmEub2JzZXJ2ZXJib2R5Lm9ic2VydmUoZG9jdW1lbnQuYm9keSx7Y2hpbGRMaXN0OiEwLHN1YnRyZWU6ITAsY2hhcmFjdGVyRGF0YTohMSxhdHRyaWJ1dGVzOiEwLGF0dHJpYnV0ZUZpbHRlcjpbXCJjbGFzc1wiXX0pKTthLmlzcGFnZXx8YS5oYXN3cmFwcGVyfHwoITEhPT14PyhhLm9ic2VydmVyPW5ldyB4KGZ1bmN0aW9uKGIpe2IuZm9yRWFjaChhLm9uQXR0cmlidXRlQ2hhbmdlKX0pLGEub2JzZXJ2ZXIub2JzZXJ2ZShhLndpblswXSx7Y2hpbGRMaXN0OiEwLGNoYXJhY3RlckRhdGE6ITEsYXR0cmlidXRlczohMCxzdWJ0cmVlOiExfSksYS5vYnNlcnZlcnJlbW92ZXI9bmV3IHgoZnVuY3Rpb24oYil7Yi5mb3JFYWNoKGZ1bmN0aW9uKGIpe2lmKDA8Yi5yZW1vdmVkTm9kZXMubGVuZ3RoKWZvcih2YXIgYyBpbiBiLnJlbW92ZWROb2RlcylpZihhJiZiLnJlbW92ZWROb2Rlc1tjXT09YS53aW5bMF0pcmV0dXJuIGEucmVtb3ZlKCl9KX0pLGEub2JzZXJ2ZXJyZW1vdmVyLm9ic2VydmUoYS53aW5bMF0ucGFyZW50Tm9kZSxcclxue2NoaWxkTGlzdDohMCxjaGFyYWN0ZXJEYXRhOiExLGF0dHJpYnV0ZXM6ITEsc3VidHJlZTohMX0pKTooYS5iaW5kKGEud2luLGUuaXNpZSYmIWUuaXNpZTk/XCJwcm9wZXJ0eWNoYW5nZVwiOlwiRE9NQXR0ck1vZGlmaWVkXCIsYS5vbkF0dHJpYnV0ZUNoYW5nZSksZS5pc2llOSYmYS53aW5bMF0uYXR0YWNoRXZlbnQoXCJvbnByb3BlcnR5Y2hhbmdlXCIsYS5vbkF0dHJpYnV0ZUNoYW5nZSksYS5iaW5kKGEud2luLFwiRE9NTm9kZVJlbW92ZWRcIixmdW5jdGlvbihiKXtiLnRhcmdldD09YS53aW5bMF0mJmEucmVtb3ZlKCl9KSkpOyFhLmlzcGFnZSYmYS5vcHQuYm94em9vbSYmYS5iaW5kKHdpbmRvdyxcInJlc2l6ZVwiLGEucmVzaXplWm9vbSk7YS5pc3RleHRhcmVhJiYoYS5iaW5kKGEud2luLFwia2V5ZG93blwiLGEubGF6eVJlc2l6ZSksYS5iaW5kKGEud2luLFwibW91c2V1cFwiLGEubGF6eVJlc2l6ZSkpO2EubGF6eVJlc2l6ZSgzMCl9aWYoXCJJRlJBTUVcIj09dGhpcy5kb2NbMF0ubm9kZU5hbWUpe3ZhciBOPVxyXG5mdW5jdGlvbigpe2EuaWZyYW1leGQ9ITE7dmFyIGM7dHJ5e2M9XCJjb250ZW50RG9jdW1lbnRcImluIHRoaXM/dGhpcy5jb250ZW50RG9jdW1lbnQ6dGhpcy5jb250ZW50V2luZG93LmRvY3VtZW50fWNhdGNoKGcpe2EuaWZyYW1leGQ9ITAsYz0hMX1pZihhLmlmcmFtZXhkKXJldHVyblwiY29uc29sZVwiaW4gd2luZG93JiZjb25zb2xlLmxvZyhcIk5pY2VTY3JvbGwgZXJyb3I6IHBvbGljeSByZXN0cmljZWQgaWZyYW1lXCIpLCEwO2EuZm9yY2VzY3JlZW49ITA7YS5pc2lmcmFtZSYmKGEuaWZyYW1lPXtkb2M6ZihjKSxodG1sOmEuZG9jLmNvbnRlbnRzKCkuZmluZChcImh0bWxcIilbMF0sYm9keTphLmRvYy5jb250ZW50cygpLmZpbmQoXCJib2R5XCIpWzBdfSxhLmdldENvbnRlbnRTaXplPWZ1bmN0aW9uKCl7cmV0dXJue3c6TWF0aC5tYXgoYS5pZnJhbWUuaHRtbC5zY3JvbGxXaWR0aCxhLmlmcmFtZS5ib2R5LnNjcm9sbFdpZHRoKSxoOk1hdGgubWF4KGEuaWZyYW1lLmh0bWwuc2Nyb2xsSGVpZ2h0LFxyXG5hLmlmcmFtZS5ib2R5LnNjcm9sbEhlaWdodCl9fSxhLmRvY3Njcm9sbD1mKGEuaWZyYW1lLmJvZHkpKTtpZighZS5pc2lvcyYmYS5vcHQuaWZyYW1lYXV0b3Jlc2l6ZSYmIWEuaXNpZnJhbWUpe2Eud2luLnNjcm9sbFRvcCgwKTthLmRvYy5oZWlnaHQoXCJcIik7dmFyIGQ9TWF0aC5tYXgoYy5nZXRFbGVtZW50c0J5VGFnTmFtZShcImh0bWxcIilbMF0uc2Nyb2xsSGVpZ2h0LGMuYm9keS5zY3JvbGxIZWlnaHQpO2EuZG9jLmhlaWdodChkKX1hLmxhenlSZXNpemUoMzApO2UuaXNpZTcmJmEuY3NzKGYoYS5pZnJhbWUuaHRtbCksYik7YS5jc3MoZihhLmlmcmFtZS5ib2R5KSxiKTtlLmlzaW9zJiZhLmhhc3dyYXBwZXImJmEuY3NzKGYoYy5ib2R5KSx7XCItd2Via2l0LXRyYW5zZm9ybVwiOlwidHJhbnNsYXRlM2QoMCwwLDApXCJ9KTtcImNvbnRlbnRXaW5kb3dcImluIHRoaXM/YS5iaW5kKHRoaXMuY29udGVudFdpbmRvdyxcInNjcm9sbFwiLGEub25zY3JvbGwpOmEuYmluZChjLFwic2Nyb2xsXCIsYS5vbnNjcm9sbCk7XHJcbmEub3B0LmVuYWJsZW1vdXNld2hlZWwmJmEubW91c2V3aGVlbChjLGEub25tb3VzZXdoZWVsKTthLm9wdC5lbmFibGVrZXlib2FyZCYmYS5iaW5kKGMsZS5pc29wZXJhP1wia2V5cHJlc3NcIjpcImtleWRvd25cIixhLm9ua2V5cHJlc3MpO2lmKGUuY2FudG91Y2h8fGEub3B0LnRvdWNoYmVoYXZpb3IpYS5iaW5kKGMsXCJtb3VzZWRvd25cIixhLm9udG91Y2hzdGFydCksYS5iaW5kKGMsXCJtb3VzZW1vdmVcIixmdW5jdGlvbihiKXtyZXR1cm4gYS5vbnRvdWNobW92ZShiLCEwKX0pLGEub3B0LmdyYWJjdXJzb3JlbmFibGVkJiZlLmN1cnNvcmdyYWJ2YWx1ZSYmYS5jc3MoZihjLmJvZHkpLHtjdXJzb3I6ZS5jdXJzb3JncmFidmFsdWV9KTthLmJpbmQoYyxcIm1vdXNldXBcIixhLm9udG91Y2hlbmQpO2Euem9vbSYmKGEub3B0LmRibGNsaWNrem9vbSYmYS5iaW5kKGMsXCJkYmxjbGlja1wiLGEuZG9ab29tKSxhLm9uZ2VzdHVyZXpvb20mJmEuYmluZChjLFwiZ2VzdHVyZWVuZFwiLGEub25nZXN0dXJlem9vbSkpfTtcclxudGhpcy5kb2NbMF0ucmVhZHlTdGF0ZSYmXCJjb21wbGV0ZVwiPT10aGlzLmRvY1swXS5yZWFkeVN0YXRlJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Ti5jYWxsKGEuZG9jWzBdLCExKX0sNTAwKTthLmJpbmQodGhpcy5kb2MsXCJsb2FkXCIsTil9fTt0aGlzLnNob3dDdXJzb3I9ZnVuY3Rpb24oYixjKXthLmN1cnNvcnRpbWVvdXQmJihjbGVhclRpbWVvdXQoYS5jdXJzb3J0aW1lb3V0KSxhLmN1cnNvcnRpbWVvdXQ9MCk7aWYoYS5yYWlsKXthLmF1dG9oaWRlZG9tJiYoYS5hdXRvaGlkZWRvbS5zdG9wKCkuY3NzKHtvcGFjaXR5OmEub3B0LmN1cnNvcm9wYWNpdHltYXh9KSxhLmN1cnNvcmFjdGl2ZT0hMCk7YS5yYWlsLmRyYWcmJjE9PWEucmFpbC5kcmFnLnB0fHwodm9pZCAwIT09YiYmITEhPT1iJiYoYS5zY3JvbGwueT1NYXRoLnJvdW5kKDEqYi9hLnNjcm9sbHJhdGlvLnkpKSx2b2lkIDAhPT1jJiYoYS5zY3JvbGwueD1NYXRoLnJvdW5kKDEqYy9hLnNjcm9sbHJhdGlvLngpKSk7YS5jdXJzb3IuY3NzKHtoZWlnaHQ6YS5jdXJzb3JoZWlnaHQsXHJcbnRvcDphLnNjcm9sbC55fSk7aWYoYS5jdXJzb3JoKXt2YXIgZD1hLmhhc3JldmVyc2Vocj9hLnNjcm9sbHZhbHVlbWF4dy1hLnNjcm9sbC54OmEuc2Nyb2xsLng7IWEucmFpbC5hbGlnbiYmYS5yYWlsLnZpc2liaWxpdHk/YS5jdXJzb3JoLmNzcyh7d2lkdGg6YS5jdXJzb3J3aWR0aCxsZWZ0OmQrYS5yYWlsLndpZHRofSk6YS5jdXJzb3JoLmNzcyh7d2lkdGg6YS5jdXJzb3J3aWR0aCxsZWZ0OmR9KTthLmN1cnNvcmFjdGl2ZT0hMH1hLnpvb20mJmEuem9vbS5zdG9wKCkuY3NzKHtvcGFjaXR5OmEub3B0LmN1cnNvcm9wYWNpdHltYXh9KX19O3RoaXMuaGlkZUN1cnNvcj1mdW5jdGlvbihiKXthLmN1cnNvcnRpbWVvdXR8fCFhLnJhaWx8fCFhLmF1dG9oaWRlZG9tfHxhLmhhc21vdXNlZm9jdXMmJlwibGVhdmVcIj09YS5vcHQuYXV0b2hpZGVtb2RlfHwoYS5jdXJzb3J0aW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXthLnJhaWwuYWN0aXZlJiZhLnNob3dvbm1vdXNlZXZlbnR8fChhLmF1dG9oaWRlZG9tLnN0b3AoKS5hbmltYXRlKHtvcGFjaXR5OmEub3B0LmN1cnNvcm9wYWNpdHltaW59KSxcclxuYS56b29tJiZhLnpvb20uc3RvcCgpLmFuaW1hdGUoe29wYWNpdHk6YS5vcHQuY3Vyc29yb3BhY2l0eW1pbn0pLGEuY3Vyc29yYWN0aXZlPSExKTthLmN1cnNvcnRpbWVvdXQ9MH0sYnx8YS5vcHQuaGlkZWN1cnNvcmRlbGF5KSl9O3RoaXMubm90aWNlQ3Vyc29yPWZ1bmN0aW9uKGIsYyxkKXthLnNob3dDdXJzb3IoYyxkKTthLnJhaWwuYWN0aXZlfHxhLmhpZGVDdXJzb3IoYil9O3RoaXMuZ2V0Q29udGVudFNpemU9YS5pc3BhZ2U/ZnVuY3Rpb24oKXtyZXR1cm57dzpNYXRoLm1heChkb2N1bWVudC5ib2R5LnNjcm9sbFdpZHRoLGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxXaWR0aCksaDpNYXRoLm1heChkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodCxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0KX19OmEuaGFzd3JhcHBlcj9mdW5jdGlvbigpe3JldHVybnt3OmEuZG9jLm91dGVyV2lkdGgoKStwYXJzZUludChhLndpbi5jc3MoXCJwYWRkaW5nTGVmdFwiKSkrXHJcbnBhcnNlSW50KGEud2luLmNzcyhcInBhZGRpbmdSaWdodFwiKSksaDphLmRvYy5vdXRlckhlaWdodCgpK3BhcnNlSW50KGEud2luLmNzcyhcInBhZGRpbmdUb3BcIikpK3BhcnNlSW50KGEud2luLmNzcyhcInBhZGRpbmdCb3R0b21cIikpfX06ZnVuY3Rpb24oKXtyZXR1cm57dzphLmRvY3Njcm9sbFswXS5zY3JvbGxXaWR0aCxoOmEuZG9jc2Nyb2xsWzBdLnNjcm9sbEhlaWdodH19O3RoaXMub25SZXNpemU9ZnVuY3Rpb24oYixjKXtpZighYXx8IWEud2luKXJldHVybiExO2lmKCFhLmhhc3dyYXBwZXImJiFhLmlzcGFnZSl7aWYoXCJub25lXCI9PWEud2luLmNzcyhcImRpc3BsYXlcIikpcmV0dXJuIGEudmlzaWJpbGl0eSYmYS5oaWRlUmFpbCgpLmhpZGVSYWlsSHIoKSwhMTthLmhpZGRlbnx8YS52aXNpYmlsaXR5fHxhLnNob3dSYWlsKCkuc2hvd1JhaWxIcigpfXZhciBkPWEucGFnZS5tYXhoLGU9YS5wYWdlLm1heHcsZj1hLnZpZXcuaCxrPWEudmlldy53O2Eudmlldz17dzphLmlzcGFnZT9hLndpbi53aWR0aCgpOlxyXG5wYXJzZUludChhLndpblswXS5jbGllbnRXaWR0aCksaDphLmlzcGFnZT9hLndpbi5oZWlnaHQoKTpwYXJzZUludChhLndpblswXS5jbGllbnRIZWlnaHQpfTthLnBhZ2U9Yz9jOmEuZ2V0Q29udGVudFNpemUoKTthLnBhZ2UubWF4aD1NYXRoLm1heCgwLGEucGFnZS5oLWEudmlldy5oKTthLnBhZ2UubWF4dz1NYXRoLm1heCgwLGEucGFnZS53LWEudmlldy53KTtpZihhLnBhZ2UubWF4aD09ZCYmYS5wYWdlLm1heHc9PWUmJmEudmlldy53PT1rJiZhLnZpZXcuaD09Zil7aWYoYS5pc3BhZ2UpcmV0dXJuIGE7ZD1hLndpbi5vZmZzZXQoKTtpZihhLmxhc3Rwb3NpdGlvbiYmKGU9YS5sYXN0cG9zaXRpb24sZS50b3A9PWQudG9wJiZlLmxlZnQ9PWQubGVmdCkpcmV0dXJuIGE7YS5sYXN0cG9zaXRpb249ZH0wPT1hLnBhZ2UubWF4aD8oYS5oaWRlUmFpbCgpLGEuc2Nyb2xsdmFsdWVtYXg9MCxhLnNjcm9sbC55PTAsYS5zY3JvbGxyYXRpby55PTAsYS5jdXJzb3JoZWlnaHQ9MCxhLnNldFNjcm9sbFRvcCgwKSxcclxuYS5yYWlsJiYoYS5yYWlsLnNjcm9sbGFibGU9ITEpKTooYS5wYWdlLm1heGgtPWEub3B0LnJhaWxwYWRkaW5nLnRvcCthLm9wdC5yYWlscGFkZGluZy5ib3R0b20sYS5yYWlsLnNjcm9sbGFibGU9ITApOzA9PWEucGFnZS5tYXh3PyhhLmhpZGVSYWlsSHIoKSxhLnNjcm9sbHZhbHVlbWF4dz0wLGEuc2Nyb2xsLng9MCxhLnNjcm9sbHJhdGlvLng9MCxhLmN1cnNvcndpZHRoPTAsYS5zZXRTY3JvbGxMZWZ0KDApLGEucmFpbGgmJihhLnJhaWxoLnNjcm9sbGFibGU9ITEpKTooYS5wYWdlLm1heHctPWEub3B0LnJhaWxwYWRkaW5nLmxlZnQrYS5vcHQucmFpbHBhZGRpbmcucmlnaHQsYS5yYWlsaCYmKGEucmFpbGguc2Nyb2xsYWJsZT1hLm9wdC5ob3JpenJhaWxlbmFibGVkKSk7YS5yYWlsc2xvY2tlZD1hLmxvY2tlZHx8MD09YS5wYWdlLm1heGgmJjA9PWEucGFnZS5tYXh3O2lmKGEucmFpbHNsb2NrZWQpcmV0dXJuIGEuaXNwYWdlfHxhLnVwZGF0ZVNjcm9sbEJhcihhLnZpZXcpLCExO2EuaGlkZGVufHxcclxuYS52aXNpYmlsaXR5PyFhLnJhaWxofHxhLmhpZGRlbnx8YS5yYWlsaC52aXNpYmlsaXR5fHxhLnNob3dSYWlsSHIoKTphLnNob3dSYWlsKCkuc2hvd1JhaWxIcigpO2EuaXN0ZXh0YXJlYSYmYS53aW4uY3NzKFwicmVzaXplXCIpJiZcIm5vbmVcIiE9YS53aW4uY3NzKFwicmVzaXplXCIpJiYoYS52aWV3LmgtPTIwKTthLmN1cnNvcmhlaWdodD1NYXRoLm1pbihhLnZpZXcuaCxNYXRoLnJvdW5kKGEudmlldy5oL2EucGFnZS5oKmEudmlldy5oKSk7YS5jdXJzb3JoZWlnaHQ9YS5vcHQuY3Vyc29yZml4ZWRoZWlnaHQ/YS5vcHQuY3Vyc29yZml4ZWRoZWlnaHQ6TWF0aC5tYXgoYS5vcHQuY3Vyc29ybWluaGVpZ2h0LGEuY3Vyc29yaGVpZ2h0KTthLmN1cnNvcndpZHRoPU1hdGgubWluKGEudmlldy53LE1hdGgucm91bmQoYS52aWV3LncvYS5wYWdlLncqYS52aWV3LncpKTthLmN1cnNvcndpZHRoPWEub3B0LmN1cnNvcmZpeGVkaGVpZ2h0P2Eub3B0LmN1cnNvcmZpeGVkaGVpZ2h0Ok1hdGgubWF4KGEub3B0LmN1cnNvcm1pbmhlaWdodCxcclxuYS5jdXJzb3J3aWR0aCk7YS5zY3JvbGx2YWx1ZW1heD1hLnZpZXcuaC1hLmN1cnNvcmhlaWdodC1hLmN1cnNvci5oYm9yZGVyLShhLm9wdC5yYWlscGFkZGluZy50b3ArYS5vcHQucmFpbHBhZGRpbmcuYm90dG9tKTthLnJhaWxoJiYoYS5yYWlsaC53aWR0aD0wPGEucGFnZS5tYXhoP2Eudmlldy53LWEucmFpbC53aWR0aDphLnZpZXcudyxhLnNjcm9sbHZhbHVlbWF4dz1hLnJhaWxoLndpZHRoLWEuY3Vyc29yd2lkdGgtYS5jdXJzb3JoLndib3JkZXItKGEub3B0LnJhaWxwYWRkaW5nLmxlZnQrYS5vcHQucmFpbHBhZGRpbmcucmlnaHQpKTthLmlzcGFnZXx8YS51cGRhdGVTY3JvbGxCYXIoYS52aWV3KTthLnNjcm9sbHJhdGlvPXt4OmEucGFnZS5tYXh3L2Euc2Nyb2xsdmFsdWVtYXh3LHk6YS5wYWdlLm1heGgvYS5zY3JvbGx2YWx1ZW1heH07YS5nZXRTY3JvbGxUb3AoKT5hLnBhZ2UubWF4aD9hLmRvU2Nyb2xsVG9wKGEucGFnZS5tYXhoKTooYS5zY3JvbGwueT1NYXRoLnJvdW5kKGEuZ2V0U2Nyb2xsVG9wKCkqXHJcbigxL2Euc2Nyb2xscmF0aW8ueSkpLGEuc2Nyb2xsLng9TWF0aC5yb3VuZChhLmdldFNjcm9sbExlZnQoKSooMS9hLnNjcm9sbHJhdGlvLngpKSxhLmN1cnNvcmFjdGl2ZSYmYS5ub3RpY2VDdXJzb3IoKSk7YS5zY3JvbGwueSYmMD09YS5nZXRTY3JvbGxUb3AoKSYmYS5kb1Njcm9sbFRvKE1hdGguZmxvb3IoYS5zY3JvbGwueSphLnNjcm9sbHJhdGlvLnkpKTtyZXR1cm4gYX07dGhpcy5yZXNpemU9YS5vblJlc2l6ZTt0aGlzLmhsYXp5cmVzaXplPTA7dGhpcy5sYXp5UmVzaXplPWZ1bmN0aW9uKGIpe2EuaGFzd3JhcHBlcnx8YS5oaWRlKCk7YS5obGF6eXJlc2l6ZSYmY2xlYXJUaW1lb3V0KGEuaGxhenlyZXNpemUpO2EuaGxhenlyZXNpemU9c2V0VGltZW91dChmdW5jdGlvbigpe2EmJmEuc2hvdygpLnJlc2l6ZSgpfSwyNDApO3JldHVybiBhfTt0aGlzLmpxYmluZD1mdW5jdGlvbihiLGMsZCl7YS5ldmVudHMucHVzaCh7ZTpiLG46YyxmOmQscTohMH0pO2YoYikuYmluZChjLGQpfTt0aGlzLm1vdXNld2hlZWw9XHJcbmZ1bmN0aW9uKGIsYyxkKXtiPVwianF1ZXJ5XCJpbiBiP2JbMF06YjtpZihcIm9ud2hlZWxcImluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpYS5fYmluZChiLFwid2hlZWxcIixjLGR8fCExKTtlbHNle3ZhciBlPXZvaWQgMCE9PWRvY3VtZW50Lm9ubW91c2V3aGVlbD9cIm1vdXNld2hlZWxcIjpcIkRPTU1vdXNlU2Nyb2xsXCI7cShiLGUsYyxkfHwhMSk7XCJET01Nb3VzZVNjcm9sbFwiPT1lJiZxKGIsXCJNb3pNb3VzZVBpeGVsU2Nyb2xsXCIsYyxkfHwhMSl9fTtlLmhhc2V2ZW50bGlzdGVuZXI/KHRoaXMuYmluZD1mdW5jdGlvbihiLGMsZCxlKXthLl9iaW5kKFwianF1ZXJ5XCJpbiBiP2JbMF06YixjLGQsZXx8ITEpfSx0aGlzLl9iaW5kPWZ1bmN0aW9uKGIsYyxkLGUpe2EuZXZlbnRzLnB1c2goe2U6YixuOmMsZjpkLGI6ZSxxOiExfSk7Yi5hZGRFdmVudExpc3RlbmVyKGMsZCxlfHwhMSl9LHRoaXMuY2FuY2VsRXZlbnQ9ZnVuY3Rpb24oYSl7aWYoIWEpcmV0dXJuITE7YT1hLm9yaWdpbmFsP2Eub3JpZ2luYWw6XHJcbmE7YS5jYW5jZWxhYmxlJiZhLnByZXZlbnREZWZhdWx0KCk7YS5zdG9wUHJvcGFnYXRpb24oKTthLnByZXZlbnRNYW5pcHVsYXRpb24mJmEucHJldmVudE1hbmlwdWxhdGlvbigpO3JldHVybiExfSx0aGlzLnN0b3BQcm9wYWdhdGlvbj1mdW5jdGlvbihhKXtpZighYSlyZXR1cm4hMTthPWEub3JpZ2luYWw/YS5vcmlnaW5hbDphO2Euc3RvcFByb3BhZ2F0aW9uKCk7cmV0dXJuITF9LHRoaXMuX3VuYmluZD1mdW5jdGlvbihhLGMsZCxlKXthLnJlbW92ZUV2ZW50TGlzdGVuZXIoYyxkLGUpfSk6KHRoaXMuYmluZD1mdW5jdGlvbihiLGMsZCxlKXt2YXIgZj1cImpxdWVyeVwiaW4gYj9iWzBdOmI7YS5fYmluZChmLGMsZnVuY3Rpb24oYil7KGI9Ynx8d2luZG93LmV2ZW50fHwhMSkmJmIuc3JjRWxlbWVudCYmKGIudGFyZ2V0PWIuc3JjRWxlbWVudCk7XCJwYWdlWVwiaW4gYnx8KGIucGFnZVg9Yi5jbGllbnRYK2RvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0LGIucGFnZVk9Yi5jbGllbnRZK1xyXG5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wKTtyZXR1cm4hMT09PWQuY2FsbChmLGIpfHwhMT09PWU/YS5jYW5jZWxFdmVudChiKTohMH0pfSx0aGlzLl9iaW5kPWZ1bmN0aW9uKGIsYyxkLGUpe2EuZXZlbnRzLnB1c2goe2U6YixuOmMsZjpkLGI6ZSxxOiExfSk7Yi5hdHRhY2hFdmVudD9iLmF0dGFjaEV2ZW50KFwib25cIitjLGQpOmJbXCJvblwiK2NdPWR9LHRoaXMuY2FuY2VsRXZlbnQ9ZnVuY3Rpb24oYSl7YT13aW5kb3cuZXZlbnR8fCExO2lmKCFhKXJldHVybiExO2EuY2FuY2VsQnViYmxlPSEwO2EuY2FuY2VsPSEwO3JldHVybiBhLnJldHVyblZhbHVlPSExfSx0aGlzLnN0b3BQcm9wYWdhdGlvbj1mdW5jdGlvbihhKXthPXdpbmRvdy5ldmVudHx8ITE7aWYoIWEpcmV0dXJuITE7YS5jYW5jZWxCdWJibGU9ITA7cmV0dXJuITF9LHRoaXMuX3VuYmluZD1mdW5jdGlvbihhLGMsZCxlKXthLmRldGFjaEV2ZW50P2EuZGV0YWNoRXZlbnQoXCJvblwiK2MsZCk6YVtcIm9uXCIrY109ITF9KTtcclxudGhpcy51bmJpbmRBbGw9ZnVuY3Rpb24oKXtmb3IodmFyIGI9MDtiPGEuZXZlbnRzLmxlbmd0aDtiKyspe3ZhciBjPWEuZXZlbnRzW2JdO2MucT9jLmUudW5iaW5kKGMubixjLmYpOmEuX3VuYmluZChjLmUsYy5uLGMuZixjLmIpfX07dGhpcy5zaG93UmFpbD1mdW5jdGlvbigpezA9PWEucGFnZS5tYXhofHwhYS5pc3BhZ2UmJlwibm9uZVwiPT1hLndpbi5jc3MoXCJkaXNwbGF5XCIpfHwoYS52aXNpYmlsaXR5PSEwLGEucmFpbC52aXNpYmlsaXR5PSEwLGEucmFpbC5jc3MoXCJkaXNwbGF5XCIsXCJibG9ja1wiKSk7cmV0dXJuIGF9O3RoaXMuc2hvd1JhaWxIcj1mdW5jdGlvbigpe2lmKCFhLnJhaWxoKXJldHVybiBhOzA9PWEucGFnZS5tYXh3fHwhYS5pc3BhZ2UmJlwibm9uZVwiPT1hLndpbi5jc3MoXCJkaXNwbGF5XCIpfHwoYS5yYWlsaC52aXNpYmlsaXR5PSEwLGEucmFpbGguY3NzKFwiZGlzcGxheVwiLFwiYmxvY2tcIikpO3JldHVybiBhfTt0aGlzLmhpZGVSYWlsPWZ1bmN0aW9uKCl7YS52aXNpYmlsaXR5PVxyXG4hMTthLnJhaWwudmlzaWJpbGl0eT0hMTthLnJhaWwuY3NzKFwiZGlzcGxheVwiLFwibm9uZVwiKTtyZXR1cm4gYX07dGhpcy5oaWRlUmFpbEhyPWZ1bmN0aW9uKCl7aWYoIWEucmFpbGgpcmV0dXJuIGE7YS5yYWlsaC52aXNpYmlsaXR5PSExO2EucmFpbGguY3NzKFwiZGlzcGxheVwiLFwibm9uZVwiKTtyZXR1cm4gYX07dGhpcy5zaG93PWZ1bmN0aW9uKCl7YS5oaWRkZW49ITE7YS5yYWlsc2xvY2tlZD0hMTtyZXR1cm4gYS5zaG93UmFpbCgpLnNob3dSYWlsSHIoKX07dGhpcy5oaWRlPWZ1bmN0aW9uKCl7YS5oaWRkZW49ITA7YS5yYWlsc2xvY2tlZD0hMDtyZXR1cm4gYS5oaWRlUmFpbCgpLmhpZGVSYWlsSHIoKX07dGhpcy50b2dnbGU9ZnVuY3Rpb24oKXtyZXR1cm4gYS5oaWRkZW4/YS5zaG93KCk6YS5oaWRlKCl9O3RoaXMucmVtb3ZlPWZ1bmN0aW9uKCl7YS5zdG9wKCk7YS5jdXJzb3J0aW1lb3V0JiZjbGVhclRpbWVvdXQoYS5jdXJzb3J0aW1lb3V0KTtmb3IodmFyIGIgaW4gYS5kZWxheWxpc3QpYS5kZWxheWxpc3RbYl0mJlxyXG53KGEuZGVsYXlsaXN0W2JdLmgpO2EuZG9ab29tT3V0KCk7YS51bmJpbmRBbGwoKTtlLmlzaWU5JiZhLndpblswXS5kZXRhY2hFdmVudChcIm9ucHJvcGVydHljaGFuZ2VcIixhLm9uQXR0cmlidXRlQ2hhbmdlKTshMSE9PWEub2JzZXJ2ZXImJmEub2JzZXJ2ZXIuZGlzY29ubmVjdCgpOyExIT09YS5vYnNlcnZlcnJlbW92ZXImJmEub2JzZXJ2ZXJyZW1vdmVyLmRpc2Nvbm5lY3QoKTshMSE9PWEub2JzZXJ2ZXJib2R5JiZhLm9ic2VydmVyYm9keS5kaXNjb25uZWN0KCk7YS5ldmVudHM9bnVsbDthLmN1cnNvciYmYS5jdXJzb3IucmVtb3ZlKCk7YS5jdXJzb3JoJiZhLmN1cnNvcmgucmVtb3ZlKCk7YS5yYWlsJiZhLnJhaWwucmVtb3ZlKCk7YS5yYWlsaCYmYS5yYWlsaC5yZW1vdmUoKTthLnpvb20mJmEuem9vbS5yZW1vdmUoKTtmb3IoYj0wO2I8YS5zYXZlZC5jc3MubGVuZ3RoO2IrKyl7dmFyIGM9YS5zYXZlZC5jc3NbYl07Y1swXS5jc3MoY1sxXSx2b2lkIDA9PT1jWzJdP1wiXCI6Y1syXSl9YS5zYXZlZD1cclxuITE7YS5tZS5kYXRhKFwiX19uaWNlc2Nyb2xsXCIsXCJcIik7dmFyIGQ9Zi5uaWNlc2Nyb2xsO2QuZWFjaChmdW5jdGlvbihiKXtpZih0aGlzJiZ0aGlzLmlkPT09YS5pZCl7ZGVsZXRlIGRbYl07Zm9yKHZhciBjPSsrYjtjPGQubGVuZ3RoO2MrKyxiKyspZFtiXT1kW2NdO2QubGVuZ3RoLS07ZC5sZW5ndGgmJmRlbGV0ZSBkW2QubGVuZ3RoXX19KTtmb3IodmFyIGsgaW4gYSlhW2tdPW51bGwsZGVsZXRlIGFba107YT1udWxsfTt0aGlzLnNjcm9sbHN0YXJ0PWZ1bmN0aW9uKGIpe3RoaXMub25zY3JvbGxzdGFydD1iO3JldHVybiBhfTt0aGlzLnNjcm9sbGVuZD1mdW5jdGlvbihiKXt0aGlzLm9uc2Nyb2xsZW5kPWI7cmV0dXJuIGF9O3RoaXMuc2Nyb2xsY2FuY2VsPWZ1bmN0aW9uKGIpe3RoaXMub25zY3JvbGxjYW5jZWw9YjtyZXR1cm4gYX07dGhpcy56b29taW49ZnVuY3Rpb24oYil7dGhpcy5vbnpvb21pbj1iO3JldHVybiBhfTt0aGlzLnpvb21vdXQ9ZnVuY3Rpb24oYil7dGhpcy5vbnpvb21vdXQ9XHJcbmI7cmV0dXJuIGF9O3RoaXMuaXNTY3JvbGxhYmxlPWZ1bmN0aW9uKGEpe2E9YS50YXJnZXQ/YS50YXJnZXQ6YTtpZihcIk9QVElPTlwiPT1hLm5vZGVOYW1lKXJldHVybiEwO2Zvcig7YSYmMT09YS5ub2RlVHlwZSYmIS9eQk9EWXxIVE1MLy50ZXN0KGEubm9kZU5hbWUpOyl7dmFyIGM9ZihhKSxjPWMuY3NzKFwib3ZlcmZsb3dZXCIpfHxjLmNzcyhcIm92ZXJmbG93WFwiKXx8Yy5jc3MoXCJvdmVyZmxvd1wiKXx8XCJcIjtpZigvc2Nyb2xsfGF1dG8vLnRlc3QoYykpcmV0dXJuIGEuY2xpZW50SGVpZ2h0IT1hLnNjcm9sbEhlaWdodDthPWEucGFyZW50Tm9kZT9hLnBhcmVudE5vZGU6ITF9cmV0dXJuITF9O3RoaXMuZ2V0Vmlld3BvcnQ9ZnVuY3Rpb24oYSl7Zm9yKGE9YSYmYS5wYXJlbnROb2RlP2EucGFyZW50Tm9kZTohMTthJiYxPT1hLm5vZGVUeXBlJiYhL15CT0RZfEhUTUwvLnRlc3QoYS5ub2RlTmFtZSk7KXt2YXIgYz1mKGEpO2lmKC9maXhlZHxhYnNvbHV0ZS8udGVzdChjLmNzcyhcInBvc2l0aW9uXCIpKSlyZXR1cm4gYztcclxudmFyIGQ9Yy5jc3MoXCJvdmVyZmxvd1lcIil8fGMuY3NzKFwib3ZlcmZsb3dYXCIpfHxjLmNzcyhcIm92ZXJmbG93XCIpfHxcIlwiO2lmKC9zY3JvbGx8YXV0by8udGVzdChkKSYmYS5jbGllbnRIZWlnaHQhPWEuc2Nyb2xsSGVpZ2h0fHwwPGMuZ2V0TmljZVNjcm9sbCgpLmxlbmd0aClyZXR1cm4gYzthPWEucGFyZW50Tm9kZT9hLnBhcmVudE5vZGU6ITF9cmV0dXJuITF9O3RoaXMudHJpZ2dlclNjcm9sbEVuZD1mdW5jdGlvbigpe2lmKGEub25zY3JvbGxlbmQpe3ZhciBiPWEuZ2V0U2Nyb2xsTGVmdCgpLGM9YS5nZXRTY3JvbGxUb3AoKTthLm9uc2Nyb2xsZW5kLmNhbGwoYSx7dHlwZTpcInNjcm9sbGVuZFwiLGN1cnJlbnQ6e3g6Yix5OmN9LGVuZDp7eDpiLHk6Y319KX19O3RoaXMub25tb3VzZXdoZWVsPWZ1bmN0aW9uKGIpe2lmKCFhLndoZWVscHJldmVudGVkKXtpZihhLnJhaWxzbG9ja2VkKXJldHVybiBhLmRlYm91bmNlZChcImNoZWNrdW5sb2NrXCIsYS5yZXNpemUsMjUwKSwhMDtpZihhLnJhaWwuZHJhZylyZXR1cm4gYS5jYW5jZWxFdmVudChiKTtcclxuXCJhdXRvXCI9PWEub3B0Lm9uZWF4aXNtb3VzZW1vZGUmJjAhPWIuZGVsdGFYJiYoYS5vcHQub25lYXhpc21vdXNlbW9kZT0hMSk7aWYoYS5vcHQub25lYXhpc21vdXNlbW9kZSYmMD09Yi5kZWx0YVgmJiFhLnJhaWwuc2Nyb2xsYWJsZSlyZXR1cm4gYS5yYWlsaCYmYS5yYWlsaC5zY3JvbGxhYmxlP2Eub25tb3VzZXdoZWVsaHIoYik6ITA7dmFyIGM9K25ldyBEYXRlLGQ9ITE7YS5vcHQucHJlc2VydmVuYXRpdmVzY3JvbGxpbmcmJmEuY2hlY2thcmVhKzYwMDxjJiYoYS5uYXRpdmVzY3JvbGxpbmdhcmVhPWEuaXNTY3JvbGxhYmxlKGIpLGQ9ITApO2EuY2hlY2thcmVhPWM7aWYoYS5uYXRpdmVzY3JvbGxpbmdhcmVhKXJldHVybiEwO2lmKGI9dChiLCExLGQpKWEuY2hlY2thcmVhPTA7cmV0dXJuIGJ9fTt0aGlzLm9ubW91c2V3aGVlbGhyPWZ1bmN0aW9uKGIpe2lmKCFhLndoZWVscHJldmVudGVkKXtpZihhLnJhaWxzbG9ja2VkfHwhYS5yYWlsaC5zY3JvbGxhYmxlKXJldHVybiEwO2lmKGEucmFpbC5kcmFnKXJldHVybiBhLmNhbmNlbEV2ZW50KGIpO1xyXG52YXIgYz0rbmV3IERhdGUsZD0hMTthLm9wdC5wcmVzZXJ2ZW5hdGl2ZXNjcm9sbGluZyYmYS5jaGVja2FyZWErNjAwPGMmJihhLm5hdGl2ZXNjcm9sbGluZ2FyZWE9YS5pc1Njcm9sbGFibGUoYiksZD0hMCk7YS5jaGVja2FyZWE9YztyZXR1cm4gYS5uYXRpdmVzY3JvbGxpbmdhcmVhPyEwOmEucmFpbHNsb2NrZWQ/YS5jYW5jZWxFdmVudChiKTp0KGIsITAsZCl9fTt0aGlzLnN0b3A9ZnVuY3Rpb24oKXthLmNhbmNlbFNjcm9sbCgpO2Euc2Nyb2xsbW9uJiZhLnNjcm9sbG1vbi5zdG9wKCk7YS5jdXJzb3JmcmVlemVkPSExO2Euc2Nyb2xsLnk9TWF0aC5yb3VuZChhLmdldFNjcm9sbFRvcCgpKigxL2Euc2Nyb2xscmF0aW8ueSkpO2Eubm90aWNlQ3Vyc29yKCk7cmV0dXJuIGF9O3RoaXMuZ2V0VHJhbnNpdGlvblNwZWVkPWZ1bmN0aW9uKGIpe2I9TWF0aC5taW4oTWF0aC5yb3VuZCgxMCphLm9wdC5zY3JvbGxzcGVlZCksTWF0aC5yb3VuZChiLzIwKmEub3B0LnNjcm9sbHNwZWVkKSk7cmV0dXJuIDIwPFxyXG5iP2I6MH07YS5vcHQuc21vb3Roc2Nyb2xsP2EuaXNod3Njcm9sbCYmZS5oYXN0cmFuc2l0aW9uJiZhLm9wdC51c2V0cmFuc2l0aW9uJiZhLm9wdC5zbW9vdGhzY3JvbGw/KHRoaXMucHJlcGFyZVRyYW5zaXRpb249ZnVuY3Rpb24oYixjKXt2YXIgZD1jPzIwPGI/YjowOmEuZ2V0VHJhbnNpdGlvblNwZWVkKGIpLGY9ZD9lLnByZWZpeHN0eWxlK1widHJhbnNmb3JtIFwiK2QrXCJtcyBlYXNlLW91dFwiOlwiXCI7YS5sYXN0dHJhbnNpdGlvbnN0eWxlJiZhLmxhc3R0cmFuc2l0aW9uc3R5bGU9PWZ8fChhLmxhc3R0cmFuc2l0aW9uc3R5bGU9ZixhLmRvYy5jc3MoZS50cmFuc2l0aW9uc3R5bGUsZikpO3JldHVybiBkfSx0aGlzLmRvU2Nyb2xsTGVmdD1mdW5jdGlvbihiLGMpe3ZhciBkPWEuc2Nyb2xscnVubmluZz9hLm5ld3Njcm9sbHk6YS5nZXRTY3JvbGxUb3AoKTthLmRvU2Nyb2xsUG9zKGIsZCxjKX0sdGhpcy5kb1Njcm9sbFRvcD1mdW5jdGlvbihiLGMpe3ZhciBkPWEuc2Nyb2xscnVubmluZz9cclxuYS5uZXdzY3JvbGx4OmEuZ2V0U2Nyb2xsTGVmdCgpO2EuZG9TY3JvbGxQb3MoZCxiLGMpfSx0aGlzLmRvU2Nyb2xsUG9zPWZ1bmN0aW9uKGIsYyxkKXt2YXIgZj1hLmdldFNjcm9sbFRvcCgpLGs9YS5nZXRTY3JvbGxMZWZ0KCk7KDA+KGEubmV3c2Nyb2xseS1mKSooYy1mKXx8MD4oYS5uZXdzY3JvbGx4LWspKihiLWspKSYmYS5jYW5jZWxTY3JvbGwoKTswPT1hLm9wdC5ib3VuY2VzY3JvbGwmJigwPmM/Yz0wOmM+YS5wYWdlLm1heGgmJihjPWEucGFnZS5tYXhoKSwwPmI/Yj0wOmI+YS5wYWdlLm1heHcmJihiPWEucGFnZS5tYXh3KSk7aWYoYS5zY3JvbGxydW5uaW5nJiZiPT1hLm5ld3Njcm9sbHgmJmM9PWEubmV3c2Nyb2xseSlyZXR1cm4hMTthLm5ld3Njcm9sbHk9YzthLm5ld3Njcm9sbHg9YjthLm5ld3Njcm9sbHNwZWVkPWR8fCExO2lmKGEudGltZXIpcmV0dXJuITE7YS50aW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIGQ9YS5nZXRTY3JvbGxUb3AoKSxmPWEuZ2V0U2Nyb2xsTGVmdCgpLFxyXG5rPU1hdGgucm91bmQoTWF0aC5zcXJ0KE1hdGgucG93KGItZiwyKStNYXRoLnBvdyhjLWQsMikpKSxrPWEubmV3c2Nyb2xsc3BlZWQmJjE8YS5uZXdzY3JvbGxzcGVlZD9hLm5ld3Njcm9sbHNwZWVkOmEuZ2V0VHJhbnNpdGlvblNwZWVkKGspO2EubmV3c2Nyb2xsc3BlZWQmJjE+PWEubmV3c2Nyb2xsc3BlZWQmJihrKj1hLm5ld3Njcm9sbHNwZWVkKTthLnByZXBhcmVUcmFuc2l0aW9uKGssITApO2EudGltZXJzY3JvbGwmJmEudGltZXJzY3JvbGwudG0mJmNsZWFySW50ZXJ2YWwoYS50aW1lcnNjcm9sbC50bSk7MDxrJiYoIWEuc2Nyb2xscnVubmluZyYmYS5vbnNjcm9sbHN0YXJ0JiZhLm9uc2Nyb2xsc3RhcnQuY2FsbChhLHt0eXBlOlwic2Nyb2xsc3RhcnRcIixjdXJyZW50Ont4OmYseTpkfSxyZXF1ZXN0Ont4OmIseTpjfSxlbmQ6e3g6YS5uZXdzY3JvbGx4LHk6YS5uZXdzY3JvbGx5fSxzcGVlZDprfSksZS50cmFuc2l0aW9uZW5kP2Euc2Nyb2xsZW5kdHJhcHBlZHx8KGEuc2Nyb2xsZW5kdHJhcHBlZD1cclxuITAsYS5iaW5kKGEuZG9jLGUudHJhbnNpdGlvbmVuZCxhLm9uU2Nyb2xsVHJhbnNpdGlvbkVuZCwhMSkpOihhLnNjcm9sbGVuZHRyYXBwZWQmJmNsZWFyVGltZW91dChhLnNjcm9sbGVuZHRyYXBwZWQpLGEuc2Nyb2xsZW5kdHJhcHBlZD1zZXRUaW1lb3V0KGEub25TY3JvbGxUcmFuc2l0aW9uRW5kLGspKSxhLnRpbWVyc2Nyb2xsPXtiejpuZXcgRChkLGEubmV3c2Nyb2xseSxrLDAsMCwuNTgsMSksYmg6bmV3IEQoZixhLm5ld3Njcm9sbHgsaywwLDAsLjU4LDEpfSxhLmN1cnNvcmZyZWV6ZWR8fChhLnRpbWVyc2Nyb2xsLnRtPXNldEludGVydmFsKGZ1bmN0aW9uKCl7YS5zaG93Q3Vyc29yKGEuZ2V0U2Nyb2xsVG9wKCksYS5nZXRTY3JvbGxMZWZ0KCkpfSw2MCkpKTthLnN5bmNoZWQoXCJkb1Njcm9sbC1zZXRcIixmdW5jdGlvbigpe2EudGltZXI9MDthLnNjcm9sbGVuZHRyYXBwZWQmJihhLnNjcm9sbHJ1bm5pbmc9ITApO2Euc2V0U2Nyb2xsVG9wKGEubmV3c2Nyb2xseSk7YS5zZXRTY3JvbGxMZWZ0KGEubmV3c2Nyb2xseCk7XHJcbmlmKCFhLnNjcm9sbGVuZHRyYXBwZWQpYS5vblNjcm9sbFRyYW5zaXRpb25FbmQoKX0pfSw1MCl9LHRoaXMuY2FuY2VsU2Nyb2xsPWZ1bmN0aW9uKCl7aWYoIWEuc2Nyb2xsZW5kdHJhcHBlZClyZXR1cm4hMDt2YXIgYj1hLmdldFNjcm9sbFRvcCgpLGM9YS5nZXRTY3JvbGxMZWZ0KCk7YS5zY3JvbGxydW5uaW5nPSExO2UudHJhbnNpdGlvbmVuZHx8Y2xlYXJUaW1lb3V0KGUudHJhbnNpdGlvbmVuZCk7YS5zY3JvbGxlbmR0cmFwcGVkPSExO2EuX3VuYmluZChhLmRvY1swXSxlLnRyYW5zaXRpb25lbmQsYS5vblNjcm9sbFRyYW5zaXRpb25FbmQpO2EucHJlcGFyZVRyYW5zaXRpb24oMCk7YS5zZXRTY3JvbGxUb3AoYik7YS5yYWlsaCYmYS5zZXRTY3JvbGxMZWZ0KGMpO2EudGltZXJzY3JvbGwmJmEudGltZXJzY3JvbGwudG0mJmNsZWFySW50ZXJ2YWwoYS50aW1lcnNjcm9sbC50bSk7YS50aW1lcnNjcm9sbD0hMTthLmN1cnNvcmZyZWV6ZWQ9ITE7YS5zaG93Q3Vyc29yKGIsYyk7cmV0dXJuIGF9LFxyXG50aGlzLm9uU2Nyb2xsVHJhbnNpdGlvbkVuZD1mdW5jdGlvbigpe2Euc2Nyb2xsZW5kdHJhcHBlZCYmYS5fdW5iaW5kKGEuZG9jWzBdLGUudHJhbnNpdGlvbmVuZCxhLm9uU2Nyb2xsVHJhbnNpdGlvbkVuZCk7YS5zY3JvbGxlbmR0cmFwcGVkPSExO2EucHJlcGFyZVRyYW5zaXRpb24oMCk7YS50aW1lcnNjcm9sbCYmYS50aW1lcnNjcm9sbC50bSYmY2xlYXJJbnRlcnZhbChhLnRpbWVyc2Nyb2xsLnRtKTthLnRpbWVyc2Nyb2xsPSExO3ZhciBiPWEuZ2V0U2Nyb2xsVG9wKCksYz1hLmdldFNjcm9sbExlZnQoKTthLnNldFNjcm9sbFRvcChiKTthLnJhaWxoJiZhLnNldFNjcm9sbExlZnQoYyk7YS5ub3RpY2VDdXJzb3IoITEsYixjKTthLmN1cnNvcmZyZWV6ZWQ9ITE7MD5iP2I9MDpiPmEucGFnZS5tYXhoJiYoYj1hLnBhZ2UubWF4aCk7MD5jP2M9MDpjPmEucGFnZS5tYXh3JiYoYz1hLnBhZ2UubWF4dyk7aWYoYiE9YS5uZXdzY3JvbGx5fHxjIT1hLm5ld3Njcm9sbHgpcmV0dXJuIGEuZG9TY3JvbGxQb3MoYyxcclxuYixhLm9wdC5zbmFwYmFja3NwZWVkKTthLm9uc2Nyb2xsZW5kJiZhLnNjcm9sbHJ1bm5pbmcmJmEudHJpZ2dlclNjcm9sbEVuZCgpO2Euc2Nyb2xscnVubmluZz0hMX0pOih0aGlzLmRvU2Nyb2xsTGVmdD1mdW5jdGlvbihiLGMpe3ZhciBkPWEuc2Nyb2xscnVubmluZz9hLm5ld3Njcm9sbHk6YS5nZXRTY3JvbGxUb3AoKTthLmRvU2Nyb2xsUG9zKGIsZCxjKX0sdGhpcy5kb1Njcm9sbFRvcD1mdW5jdGlvbihiLGMpe3ZhciBkPWEuc2Nyb2xscnVubmluZz9hLm5ld3Njcm9sbHg6YS5nZXRTY3JvbGxMZWZ0KCk7YS5kb1Njcm9sbFBvcyhkLGIsYyl9LHRoaXMuZG9TY3JvbGxQb3M9ZnVuY3Rpb24oYixjLGQpe2Z1bmN0aW9uIGUoKXtpZihhLmNhbmNlbEFuaW1hdGlvbkZyYW1lKXJldHVybiEwO2Euc2Nyb2xscnVubmluZz0hMDtpZihwPTEtcClyZXR1cm4gYS50aW1lcj12KGUpfHwxO3ZhciBiPTAsYyxkLGY9ZD1hLmdldFNjcm9sbFRvcCgpO2lmKGEuZHN0LmF5KXtmPWEuYnpzY3JvbGw/XHJcbmEuZHN0LnB5K2EuYnpzY3JvbGwuZ2V0Tm93KCkqYS5kc3QuYXk6YS5uZXdzY3JvbGx5O2M9Zi1kO2lmKDA+YyYmZjxhLm5ld3Njcm9sbHl8fDA8YyYmZj5hLm5ld3Njcm9sbHkpZj1hLm5ld3Njcm9sbHk7YS5zZXRTY3JvbGxUb3AoZik7Zj09YS5uZXdzY3JvbGx5JiYoYj0xKX1lbHNlIGI9MTtkPWM9YS5nZXRTY3JvbGxMZWZ0KCk7aWYoYS5kc3QuYXgpe2Q9YS5ienNjcm9sbD9hLmRzdC5weCthLmJ6c2Nyb2xsLmdldE5vdygpKmEuZHN0LmF4OmEubmV3c2Nyb2xseDtjPWQtYztpZigwPmMmJmQ8YS5uZXdzY3JvbGx4fHwwPGMmJmQ+YS5uZXdzY3JvbGx4KWQ9YS5uZXdzY3JvbGx4O2Euc2V0U2Nyb2xsTGVmdChkKTtkPT1hLm5ld3Njcm9sbHgmJihiKz0xKX1lbHNlIGIrPTE7Mj09Yj8oYS50aW1lcj0wLGEuY3Vyc29yZnJlZXplZD0hMSxhLmJ6c2Nyb2xsPSExLGEuc2Nyb2xscnVubmluZz0hMSwwPmY/Zj0wOmY+YS5wYWdlLm1heGgmJihmPU1hdGgubWF4KDAsYS5wYWdlLm1heGgpKSxcclxuMD5kP2Q9MDpkPmEucGFnZS5tYXh3JiYoZD1hLnBhZ2UubWF4dyksZCE9YS5uZXdzY3JvbGx4fHxmIT1hLm5ld3Njcm9sbHk/YS5kb1Njcm9sbFBvcyhkLGYpOmEub25zY3JvbGxlbmQmJmEudHJpZ2dlclNjcm9sbEVuZCgpKTphLnRpbWVyPXYoZSl8fDF9Yz12b2lkIDA9PT1jfHwhMT09PWM/YS5nZXRTY3JvbGxUb3AoITApOmM7aWYoYS50aW1lciYmYS5uZXdzY3JvbGx5PT1jJiZhLm5ld3Njcm9sbHg9PWIpcmV0dXJuITA7YS50aW1lciYmdyhhLnRpbWVyKTthLnRpbWVyPTA7dmFyIGY9YS5nZXRTY3JvbGxUb3AoKSxrPWEuZ2V0U2Nyb2xsTGVmdCgpOygwPihhLm5ld3Njcm9sbHktZikqKGMtZil8fDA+KGEubmV3c2Nyb2xseC1rKSooYi1rKSkmJmEuY2FuY2VsU2Nyb2xsKCk7YS5uZXdzY3JvbGx5PWM7YS5uZXdzY3JvbGx4PWI7YS5ib3VuY2VzY3JvbGwmJmEucmFpbC52aXNpYmlsaXR5fHwoMD5hLm5ld3Njcm9sbHk/YS5uZXdzY3JvbGx5PTA6YS5uZXdzY3JvbGx5PmEucGFnZS5tYXhoJiZcclxuKGEubmV3c2Nyb2xseT1hLnBhZ2UubWF4aCkpO2EuYm91bmNlc2Nyb2xsJiZhLnJhaWxoLnZpc2liaWxpdHl8fCgwPmEubmV3c2Nyb2xseD9hLm5ld3Njcm9sbHg9MDphLm5ld3Njcm9sbHg+YS5wYWdlLm1heHcmJihhLm5ld3Njcm9sbHg9YS5wYWdlLm1heHcpKTthLmRzdD17fTthLmRzdC54PWItazthLmRzdC55PWMtZjthLmRzdC5weD1rO2EuZHN0LnB5PWY7dmFyIGg9TWF0aC5yb3VuZChNYXRoLnNxcnQoTWF0aC5wb3coYS5kc3QueCwyKStNYXRoLnBvdyhhLmRzdC55LDIpKSk7YS5kc3QuYXg9YS5kc3QueC9oO2EuZHN0LmF5PWEuZHN0LnkvaDt2YXIgbD0wLG49aDswPT1hLmRzdC54PyhsPWYsbj1jLGEuZHN0LmF5PTEsYS5kc3QucHk9MCk6MD09YS5kc3QueSYmKGw9ayxuPWIsYS5kc3QuYXg9MSxhLmRzdC5weD0wKTtoPWEuZ2V0VHJhbnNpdGlvblNwZWVkKGgpO2QmJjE+PWQmJihoKj1kKTthLmJ6c2Nyb2xsPTA8aD9hLmJ6c2Nyb2xsP2EuYnpzY3JvbGwudXBkYXRlKG4saCk6XHJcbm5ldyBEKGwsbixoLDAsMSwwLDEpOiExO2lmKCFhLnRpbWVyKXsoZj09YS5wYWdlLm1heGgmJmM+PWEucGFnZS5tYXhofHxrPT1hLnBhZ2UubWF4dyYmYj49YS5wYWdlLm1heHcpJiZhLmNoZWNrQ29udGVudFNpemUoKTt2YXIgcD0xO2EuY2FuY2VsQW5pbWF0aW9uRnJhbWU9ITE7YS50aW1lcj0xO2Eub25zY3JvbGxzdGFydCYmIWEuc2Nyb2xscnVubmluZyYmYS5vbnNjcm9sbHN0YXJ0LmNhbGwoYSx7dHlwZTpcInNjcm9sbHN0YXJ0XCIsY3VycmVudDp7eDprLHk6Zn0scmVxdWVzdDp7eDpiLHk6Y30sZW5kOnt4OmEubmV3c2Nyb2xseCx5OmEubmV3c2Nyb2xseX0sc3BlZWQ6aH0pO2UoKTsoZj09YS5wYWdlLm1heGgmJmM+PWZ8fGs9PWEucGFnZS5tYXh3JiZiPj1rKSYmYS5jaGVja0NvbnRlbnRTaXplKCk7YS5ub3RpY2VDdXJzb3IoKX19LHRoaXMuY2FuY2VsU2Nyb2xsPWZ1bmN0aW9uKCl7YS50aW1lciYmdyhhLnRpbWVyKTthLnRpbWVyPTA7YS5ienNjcm9sbD0hMTthLnNjcm9sbHJ1bm5pbmc9XHJcbiExO3JldHVybiBhfSk6KHRoaXMuZG9TY3JvbGxMZWZ0PWZ1bmN0aW9uKGIsYyl7dmFyIGQ9YS5nZXRTY3JvbGxUb3AoKTthLmRvU2Nyb2xsUG9zKGIsZCxjKX0sdGhpcy5kb1Njcm9sbFRvcD1mdW5jdGlvbihiLGMpe3ZhciBkPWEuZ2V0U2Nyb2xsTGVmdCgpO2EuZG9TY3JvbGxQb3MoZCxiLGMpfSx0aGlzLmRvU2Nyb2xsUG9zPWZ1bmN0aW9uKGIsYyxkKXt2YXIgZT1iPmEucGFnZS5tYXh3P2EucGFnZS5tYXh3OmI7MD5lJiYoZT0wKTt2YXIgZj1jPmEucGFnZS5tYXhoP2EucGFnZS5tYXhoOmM7MD5mJiYoZj0wKTthLnN5bmNoZWQoXCJzY3JvbGxcIixmdW5jdGlvbigpe2Euc2V0U2Nyb2xsVG9wKGYpO2Euc2V0U2Nyb2xsTGVmdChlKX0pfSx0aGlzLmNhbmNlbFNjcm9sbD1mdW5jdGlvbigpe30pO3RoaXMuZG9TY3JvbGxCeT1mdW5jdGlvbihiLGMpe3ZhciBkPTAsZD1jP01hdGguZmxvb3IoKGEuc2Nyb2xsLnktYikqYS5zY3JvbGxyYXRpby55KTooYS50aW1lcj9hLm5ld3Njcm9sbHk6XHJcbmEuZ2V0U2Nyb2xsVG9wKCEwKSktYjtpZihhLmJvdW5jZXNjcm9sbCl7dmFyIGU9TWF0aC5yb3VuZChhLnZpZXcuaC8yKTtkPC1lP2Q9LWU6ZD5hLnBhZ2UubWF4aCtlJiYoZD1hLnBhZ2UubWF4aCtlKX1hLmN1cnNvcmZyZWV6ZWQ9ITE7ZT1hLmdldFNjcm9sbFRvcCghMCk7aWYoMD5kJiYwPj1lKXJldHVybiBhLm5vdGljZUN1cnNvcigpO2lmKGQ+YS5wYWdlLm1heGgmJmU+PWEucGFnZS5tYXhoKXJldHVybiBhLmNoZWNrQ29udGVudFNpemUoKSxhLm5vdGljZUN1cnNvcigpO2EuZG9TY3JvbGxUb3AoZCl9O3RoaXMuZG9TY3JvbGxMZWZ0Qnk9ZnVuY3Rpb24oYixjKXt2YXIgZD0wLGQ9Yz9NYXRoLmZsb29yKChhLnNjcm9sbC54LWIpKmEuc2Nyb2xscmF0aW8ueCk6KGEudGltZXI/YS5uZXdzY3JvbGx4OmEuZ2V0U2Nyb2xsTGVmdCghMCkpLWI7aWYoYS5ib3VuY2VzY3JvbGwpe3ZhciBlPU1hdGgucm91bmQoYS52aWV3LncvMik7ZDwtZT9kPS1lOmQ+YS5wYWdlLm1heHcrZSYmKGQ9YS5wYWdlLm1heHcrXHJcbmUpfWEuY3Vyc29yZnJlZXplZD0hMTtlPWEuZ2V0U2Nyb2xsTGVmdCghMCk7aWYoMD5kJiYwPj1lfHxkPmEucGFnZS5tYXh3JiZlPj1hLnBhZ2UubWF4dylyZXR1cm4gYS5ub3RpY2VDdXJzb3IoKTthLmRvU2Nyb2xsTGVmdChkKX07dGhpcy5kb1Njcm9sbFRvPWZ1bmN0aW9uKGIsYyl7YS5jdXJzb3JmcmVlemVkPSExO2EuZG9TY3JvbGxUb3AoYil9O3RoaXMuY2hlY2tDb250ZW50U2l6ZT1mdW5jdGlvbigpe3ZhciBiPWEuZ2V0Q29udGVudFNpemUoKTtiLmg9PWEucGFnZS5oJiZiLnc9PWEucGFnZS53fHxhLnJlc2l6ZSghMSxiKX07YS5vbnNjcm9sbD1mdW5jdGlvbihiKXthLnJhaWwuZHJhZ3x8YS5jdXJzb3JmcmVlemVkfHxhLnN5bmNoZWQoXCJzY3JvbGxcIixmdW5jdGlvbigpe2Euc2Nyb2xsLnk9TWF0aC5yb3VuZChhLmdldFNjcm9sbFRvcCgpKigxL2Euc2Nyb2xscmF0aW8ueSkpO2EucmFpbGgmJihhLnNjcm9sbC54PU1hdGgucm91bmQoYS5nZXRTY3JvbGxMZWZ0KCkqKDEvYS5zY3JvbGxyYXRpby54KSkpO1xyXG5hLm5vdGljZUN1cnNvcigpfSl9O2EuYmluZChhLmRvY3Njcm9sbCxcInNjcm9sbFwiLGEub25zY3JvbGwpO3RoaXMuZG9ab29tSW49ZnVuY3Rpb24oYil7aWYoIWEuem9vbWFjdGl2ZSl7YS56b29tYWN0aXZlPSEwO2Euem9vbXJlc3RvcmU9e3N0eWxlOnt9fTt2YXIgYz1cInBvc2l0aW9uIHRvcCBsZWZ0IHpJbmRleCBiYWNrZ3JvdW5kQ29sb3IgbWFyZ2luVG9wIG1hcmdpbkJvdHRvbSBtYXJnaW5MZWZ0IG1hcmdpblJpZ2h0XCIuc3BsaXQoXCIgXCIpLGQ9YS53aW5bMF0uc3R5bGUsaztmb3IoayBpbiBjKXt2YXIgaD1jW2tdO2Euem9vbXJlc3RvcmUuc3R5bGVbaF09dm9pZCAwIT09ZFtoXT9kW2hdOlwiXCJ9YS56b29tcmVzdG9yZS5zdHlsZS53aWR0aD1hLndpbi5jc3MoXCJ3aWR0aFwiKTthLnpvb21yZXN0b3JlLnN0eWxlLmhlaWdodD1hLndpbi5jc3MoXCJoZWlnaHRcIik7YS56b29tcmVzdG9yZS5wYWRkaW5nPXt3OmEud2luLm91dGVyV2lkdGgoKS1hLndpbi53aWR0aCgpLGg6YS53aW4ub3V0ZXJIZWlnaHQoKS1cclxuYS53aW4uaGVpZ2h0KCl9O2UuaXNpb3M0JiYoYS56b29tcmVzdG9yZS5zY3JvbGxUb3A9Zih3aW5kb3cpLnNjcm9sbFRvcCgpLGYod2luZG93KS5zY3JvbGxUb3AoMCkpO2Eud2luLmNzcyh7cG9zaXRpb246ZS5pc2lvczQ/XCJhYnNvbHV0ZVwiOlwiZml4ZWRcIix0b3A6MCxsZWZ0OjAsekluZGV4OkErMTAwLG1hcmdpbjowfSk7Yz1hLndpbi5jc3MoXCJiYWNrZ3JvdW5kQ29sb3JcIik7KFwiXCI9PWN8fC90cmFuc3BhcmVudHxyZ2JhXFwoMCwgMCwgMCwgMFxcKXxyZ2JhXFwoMCwwLDAsMFxcKS8udGVzdChjKSkmJmEud2luLmNzcyhcImJhY2tncm91bmRDb2xvclwiLFwiI2ZmZlwiKTthLnJhaWwuY3NzKHt6SW5kZXg6QSsxMDF9KTthLnpvb20uY3NzKHt6SW5kZXg6QSsxMDJ9KTthLnpvb20uY3NzKFwiYmFja2dyb3VuZFBvc2l0aW9uXCIsXCIwcHggLTE4cHhcIik7YS5yZXNpemVab29tKCk7YS5vbnpvb21pbiYmYS5vbnpvb21pbi5jYWxsKGEpO3JldHVybiBhLmNhbmNlbEV2ZW50KGIpfX07dGhpcy5kb1pvb21PdXQ9XHJcbmZ1bmN0aW9uKGIpe2lmKGEuem9vbWFjdGl2ZSlyZXR1cm4gYS56b29tYWN0aXZlPSExLGEud2luLmNzcyhcIm1hcmdpblwiLFwiXCIpLGEud2luLmNzcyhhLnpvb21yZXN0b3JlLnN0eWxlKSxlLmlzaW9zNCYmZih3aW5kb3cpLnNjcm9sbFRvcChhLnpvb21yZXN0b3JlLnNjcm9sbFRvcCksYS5yYWlsLmNzcyh7XCJ6LWluZGV4XCI6YS56aW5kZXh9KSxhLnpvb20uY3NzKHtcInotaW5kZXhcIjphLnppbmRleH0pLGEuem9vbXJlc3RvcmU9ITEsYS56b29tLmNzcyhcImJhY2tncm91bmRQb3NpdGlvblwiLFwiMHB4IDBweFwiKSxhLm9uUmVzaXplKCksYS5vbnpvb21vdXQmJmEub256b29tb3V0LmNhbGwoYSksYS5jYW5jZWxFdmVudChiKX07dGhpcy5kb1pvb209ZnVuY3Rpb24oYil7cmV0dXJuIGEuem9vbWFjdGl2ZT9hLmRvWm9vbU91dChiKTphLmRvWm9vbUluKGIpfTt0aGlzLnJlc2l6ZVpvb209ZnVuY3Rpb24oKXtpZihhLnpvb21hY3RpdmUpe3ZhciBiPWEuZ2V0U2Nyb2xsVG9wKCk7YS53aW4uY3NzKHt3aWR0aDpmKHdpbmRvdykud2lkdGgoKS1cclxuYS56b29tcmVzdG9yZS5wYWRkaW5nLncrXCJweFwiLGhlaWdodDpmKHdpbmRvdykuaGVpZ2h0KCktYS56b29tcmVzdG9yZS5wYWRkaW5nLmgrXCJweFwifSk7YS5vblJlc2l6ZSgpO2Euc2V0U2Nyb2xsVG9wKE1hdGgubWluKGEucGFnZS5tYXhoLGIpKX19O3RoaXMuaW5pdCgpO2YubmljZXNjcm9sbC5wdXNoKHRoaXMpfSxNPWZ1bmN0aW9uKGYpe3ZhciBjPXRoaXM7dGhpcy5uYz1mO3RoaXMuc3RlcHRpbWU9dGhpcy5sYXN0dGltZT10aGlzLnNwZWVkeT10aGlzLnNwZWVkeD10aGlzLmxhc3R5PXRoaXMubGFzdHg9MDt0aGlzLnNuYXB5PXRoaXMuc25hcHg9ITE7dGhpcy5kZW11bHk9dGhpcy5kZW11bHg9MDt0aGlzLmxhc3RzY3JvbGx5PXRoaXMubGFzdHNjcm9sbHg9LTE7dGhpcy50aW1lcj10aGlzLmNoa3k9dGhpcy5jaGt4PTA7dGhpcy50aW1lPWZ1bmN0aW9uKCl7cmV0dXJuK25ldyBEYXRlfTt0aGlzLnJlc2V0PWZ1bmN0aW9uKGYsaCl7Yy5zdG9wKCk7dmFyIGQ9Yy50aW1lKCk7Yy5zdGVwdGltZT1cclxuMDtjLmxhc3R0aW1lPWQ7Yy5zcGVlZHg9MDtjLnNwZWVkeT0wO2MubGFzdHg9ZjtjLmxhc3R5PWg7Yy5sYXN0c2Nyb2xseD0tMTtjLmxhc3RzY3JvbGx5PS0xfTt0aGlzLnVwZGF0ZT1mdW5jdGlvbihmLGgpe3ZhciBkPWMudGltZSgpO2Muc3RlcHRpbWU9ZC1jLmxhc3R0aW1lO2MubGFzdHRpbWU9ZDt2YXIgZD1oLWMubGFzdHkscT1mLWMubGFzdHgsdD1jLm5jLmdldFNjcm9sbFRvcCgpLGE9Yy5uYy5nZXRTY3JvbGxMZWZ0KCksdD10K2QsYT1hK3E7Yy5zbmFweD0wPmF8fGE+Yy5uYy5wYWdlLm1heHc7Yy5zbmFweT0wPnR8fHQ+Yy5uYy5wYWdlLm1heGg7Yy5zcGVlZHg9cTtjLnNwZWVkeT1kO2MubGFzdHg9ZjtjLmxhc3R5PWh9O3RoaXMuc3RvcD1mdW5jdGlvbigpe2MubmMudW5zeW5jaGVkKFwiZG9tb21lbnR1bTJkXCIpO2MudGltZXImJmNsZWFyVGltZW91dChjLnRpbWVyKTtjLnRpbWVyPTA7Yy5sYXN0c2Nyb2xseD0tMTtjLmxhc3RzY3JvbGx5PS0xfTt0aGlzLmRvU25hcHk9ZnVuY3Rpb24oZixcclxuaCl7dmFyIGQ9ITE7MD5oPyhoPTAsZD0hMCk6aD5jLm5jLnBhZ2UubWF4aCYmKGg9Yy5uYy5wYWdlLm1heGgsZD0hMCk7MD5mPyhmPTAsZD0hMCk6Zj5jLm5jLnBhZ2UubWF4dyYmKGY9Yy5uYy5wYWdlLm1heHcsZD0hMCk7ZD9jLm5jLmRvU2Nyb2xsUG9zKGYsaCxjLm5jLm9wdC5zbmFwYmFja3NwZWVkKTpjLm5jLnRyaWdnZXJTY3JvbGxFbmQoKX07dGhpcy5kb01vbWVudHVtPWZ1bmN0aW9uKGYpe3ZhciBoPWMudGltZSgpLGQ9Zj9oK2Y6Yy5sYXN0dGltZTtmPWMubmMuZ2V0U2Nyb2xsTGVmdCgpO3ZhciBxPWMubmMuZ2V0U2Nyb2xsVG9wKCksdD1jLm5jLnBhZ2UubWF4aCxhPWMubmMucGFnZS5tYXh3O2Muc3BlZWR4PTA8YT9NYXRoLm1pbig2MCxjLnNwZWVkeCk6MDtjLnNwZWVkeT0wPHQ/TWF0aC5taW4oNjAsYy5zcGVlZHkpOjA7ZD1kJiY2MD49aC1kO2lmKDA+cXx8cT50fHwwPmZ8fGY+YSlkPSExO2Y9Yy5zcGVlZHgmJmQ/Yy5zcGVlZHg6ITE7aWYoYy5zcGVlZHkmJmQmJmMuc3BlZWR5fHxcclxuZil7dmFyIHI9TWF0aC5tYXgoMTYsYy5zdGVwdGltZSk7NTA8ciYmKGY9ci81MCxjLnNwZWVkeCo9ZixjLnNwZWVkeSo9ZixyPTUwKTtjLmRlbXVseHk9MDtjLmxhc3RzY3JvbGx4PWMubmMuZ2V0U2Nyb2xsTGVmdCgpO2MuY2hreD1jLmxhc3RzY3JvbGx4O2MubGFzdHNjcm9sbHk9Yy5uYy5nZXRTY3JvbGxUb3AoKTtjLmNoa3k9Yy5sYXN0c2Nyb2xseTt2YXIgcD1jLmxhc3RzY3JvbGx4LGU9Yy5sYXN0c2Nyb2xseSx2PWZ1bmN0aW9uKCl7dmFyIGQ9NjAwPGMudGltZSgpLWg/LjA0Oi4wMjtjLnNwZWVkeCYmKHA9TWF0aC5mbG9vcihjLmxhc3RzY3JvbGx4LWMuc3BlZWR4KigxLWMuZGVtdWx4eSkpLGMubGFzdHNjcm9sbHg9cCwwPnB8fHA+YSkmJihkPS4xKTtjLnNwZWVkeSYmKGU9TWF0aC5mbG9vcihjLmxhc3RzY3JvbGx5LWMuc3BlZWR5KigxLWMuZGVtdWx4eSkpLGMubGFzdHNjcm9sbHk9ZSwwPmV8fGU+dCkmJihkPS4xKTtjLmRlbXVseHk9TWF0aC5taW4oMSxjLmRlbXVseHkrXHJcbmQpO2MubmMuc3luY2hlZChcImRvbW9tZW50dW0yZFwiLGZ1bmN0aW9uKCl7Yy5zcGVlZHgmJihjLm5jLmdldFNjcm9sbExlZnQoKSxjLmNoa3g9cCxjLm5jLnNldFNjcm9sbExlZnQocCkpO2Muc3BlZWR5JiYoYy5uYy5nZXRTY3JvbGxUb3AoKSxjLmNoa3k9ZSxjLm5jLnNldFNjcm9sbFRvcChlKSk7Yy50aW1lcnx8KGMubmMuaGlkZUN1cnNvcigpLGMuZG9TbmFweShwLGUpKX0pOzE+Yy5kZW11bHh5P2MudGltZXI9c2V0VGltZW91dCh2LHIpOihjLnN0b3AoKSxjLm5jLmhpZGVDdXJzb3IoKSxjLmRvU25hcHkocCxlKSl9O3YoKX1lbHNlIGMuZG9TbmFweShjLm5jLmdldFNjcm9sbExlZnQoKSxjLm5jLmdldFNjcm9sbFRvcCgpKX19LHk9Zi5mbi5zY3JvbGxUb3A7Zi5jc3NIb29rcy5wYWdlWU9mZnNldD17Z2V0OmZ1bmN0aW9uKGgsYyxrKXtyZXR1cm4oYz1mLmRhdGEoaCxcIl9fbmljZXNjcm9sbFwiKXx8ITEpJiZjLmlzaHdzY3JvbGw/Yy5nZXRTY3JvbGxUb3AoKTp5LmNhbGwoaCl9LHNldDpmdW5jdGlvbihoLFxyXG5jKXt2YXIgaz1mLmRhdGEoaCxcIl9fbmljZXNjcm9sbFwiKXx8ITE7ayYmay5pc2h3c2Nyb2xsP2suc2V0U2Nyb2xsVG9wKHBhcnNlSW50KGMpKTp5LmNhbGwoaCxjKTtyZXR1cm4gdGhpc319O2YuZm4uc2Nyb2xsVG9wPWZ1bmN0aW9uKGgpe2lmKHZvaWQgMD09PWgpe3ZhciBjPXRoaXNbMF0/Zi5kYXRhKHRoaXNbMF0sXCJfX25pY2VzY3JvbGxcIil8fCExOiExO3JldHVybiBjJiZjLmlzaHdzY3JvbGw/Yy5nZXRTY3JvbGxUb3AoKTp5LmNhbGwodGhpcyl9cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBjPWYuZGF0YSh0aGlzLFwiX19uaWNlc2Nyb2xsXCIpfHwhMTtjJiZjLmlzaHdzY3JvbGw/Yy5zZXRTY3JvbGxUb3AocGFyc2VJbnQoaCkpOnkuY2FsbChmKHRoaXMpLGgpfSl9O3ZhciB6PWYuZm4uc2Nyb2xsTGVmdDtmLmNzc0hvb2tzLnBhZ2VYT2Zmc2V0PXtnZXQ6ZnVuY3Rpb24oaCxjLGspe3JldHVybihjPWYuZGF0YShoLFwiX19uaWNlc2Nyb2xsXCIpfHwhMSkmJmMuaXNod3Njcm9sbD9cclxuYy5nZXRTY3JvbGxMZWZ0KCk6ei5jYWxsKGgpfSxzZXQ6ZnVuY3Rpb24oaCxjKXt2YXIgaz1mLmRhdGEoaCxcIl9fbmljZXNjcm9sbFwiKXx8ITE7ayYmay5pc2h3c2Nyb2xsP2suc2V0U2Nyb2xsTGVmdChwYXJzZUludChjKSk6ei5jYWxsKGgsYyk7cmV0dXJuIHRoaXN9fTtmLmZuLnNjcm9sbExlZnQ9ZnVuY3Rpb24oaCl7aWYodm9pZCAwPT09aCl7dmFyIGM9dGhpc1swXT9mLmRhdGEodGhpc1swXSxcIl9fbmljZXNjcm9sbFwiKXx8ITE6ITE7cmV0dXJuIGMmJmMuaXNod3Njcm9sbD9jLmdldFNjcm9sbExlZnQoKTp6LmNhbGwodGhpcyl9cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBjPWYuZGF0YSh0aGlzLFwiX19uaWNlc2Nyb2xsXCIpfHwhMTtjJiZjLmlzaHdzY3JvbGw/Yy5zZXRTY3JvbGxMZWZ0KHBhcnNlSW50KGgpKTp6LmNhbGwoZih0aGlzKSxoKX0pfTt2YXIgRT1mdW5jdGlvbihoKXt2YXIgYz10aGlzO3RoaXMubGVuZ3RoPTA7dGhpcy5uYW1lPVwibmljZXNjcm9sbGFycmF5XCI7XHJcbnRoaXMuZWFjaD1mdW5jdGlvbihkKXtmLmVhY2goYyxkKTtyZXR1cm4gY307dGhpcy5wdXNoPWZ1bmN0aW9uKGQpe2NbYy5sZW5ndGhdPWQ7Yy5sZW5ndGgrK307dGhpcy5lcT1mdW5jdGlvbihkKXtyZXR1cm4gY1tkXX07aWYoaClmb3IodmFyIGs9MDtrPGgubGVuZ3RoO2srKyl7dmFyIGw9Zi5kYXRhKGhba10sXCJfX25pY2VzY3JvbGxcIil8fCExO2wmJih0aGlzW3RoaXMubGVuZ3RoXT1sLHRoaXMubGVuZ3RoKyspfXJldHVybiB0aGlzfTsoZnVuY3Rpb24oZixjLGspe2Zvcih2YXIgbD0wO2w8Yy5sZW5ndGg7bCsrKWsoZixjW2xdKX0pKEUucHJvdG90eXBlLFwic2hvdyBoaWRlIHRvZ2dsZSBvblJlc2l6ZSByZXNpemUgcmVtb3ZlIHN0b3AgZG9TY3JvbGxQb3NcIi5zcGxpdChcIiBcIiksZnVuY3Rpb24oZixjKXtmW2NdPWZ1bmN0aW9uKCl7dmFyIGY9YXJndW1lbnRzO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt0aGlzW2NdLmFwcGx5KHRoaXMsZil9KX19KTtmLmZuLmdldE5pY2VTY3JvbGw9XHJcbmZ1bmN0aW9uKGgpe3JldHVybiB2b2lkIDA9PT1oP25ldyBFKHRoaXMpOnRoaXNbaF0mJmYuZGF0YSh0aGlzW2hdLFwiX19uaWNlc2Nyb2xsXCIpfHwhMX07Zi5leHByW1wiOlwiXS5uaWNlc2Nyb2xsPWZ1bmN0aW9uKGgpe3JldHVybiB2b2lkIDAhPT1mLmRhdGEoaCxcIl9fbmljZXNjcm9sbFwiKX07Zi5mbi5uaWNlU2Nyb2xsPWZ1bmN0aW9uKGgsYyl7dm9pZCAwIT09Y3x8XCJvYmplY3RcIiE9dHlwZW9mIGh8fFwianF1ZXJ5XCJpbiBofHwoYz1oLGg9ITEpO2M9Zi5leHRlbmQoe30sYyk7dmFyIGs9bmV3IEU7dm9pZCAwPT09YyYmKGM9e30pO2gmJihjLmRvYz1mKGgpLGMud2luPWYodGhpcykpO3ZhciBsPSEoXCJkb2NcImluIGMpO2x8fFwid2luXCJpbiBjfHwoYy53aW49Zih0aGlzKSk7dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGQ9Zih0aGlzKS5kYXRhKFwiX19uaWNlc2Nyb2xsXCIpfHwhMTtkfHwoYy5kb2M9bD9mKHRoaXMpOmMuZG9jLGQ9bmV3IFMoYyxmKHRoaXMpKSxmKHRoaXMpLmRhdGEoXCJfX25pY2VzY3JvbGxcIixcclxuZCkpO2sucHVzaChkKX0pO3JldHVybiAxPT1rLmxlbmd0aD9rWzBdOmt9O3dpbmRvdy5OaWNlU2Nyb2xsPXtnZXRqUXVlcnk6ZnVuY3Rpb24oKXtyZXR1cm4gZn19O2YubmljZXNjcm9sbHx8KGYubmljZXNjcm9sbD1uZXcgRSxmLm5pY2VzY3JvbGwub3B0aW9ucz1LKX0pO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vY29yZS9saWIvanF1ZXJ5LW5pY2VzY3JvbGwvanF1ZXJ5Lm5pY2VzY3JvbGwubWluLmpzXG4vLyBtb2R1bGUgaWQgPSAxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=');
},function(module,exports){eval("module.exports = window.$;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJ3aW5kb3cuJFwiP2Y4ZDIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiMi5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gd2luZG93LiQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJ3aW5kb3cuJFwiXG4vLyBtb2R1bGUgaWQgPSAyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=")},function(module,exports){eval('!function (window) {\r\n    function Element() {\r\n        this.initialize = function () {\r\n            this.elementType = "element", this.serializedProperties = ["elementType"], this.propertiesStack = [], this._id = "" + (new Date).getTime()\r\n        }, this.distroy = function () {\r\n        }, this.removeHandler = function () {\r\n        }, this.attr = function (a, b) {\r\n            if (null != a && null != b)this[a] = b; else if (null != a)return this[a];\r\n            return this\r\n        }, this.save = function () {\r\n            var a = this, b = {};\r\n            this.serializedProperties.forEach(function (c) {\r\n                b[c] = a[c]\r\n            }), this.propertiesStack.push(b)\r\n        }, this.restore = function () {\r\n            if (null != this.propertiesStack && 0 != this.propertiesStack.length) {\r\n                var a = this, b = this.propertiesStack.pop();\r\n                this.serializedProperties.forEach(function (c) {\r\n                    a[c] = b[c]\r\n                })\r\n            }\r\n        }, this.toJson = function () {\r\n            var a = this, b = "{", c = this.serializedProperties.length;\r\n            return this.serializedProperties.forEach(function (d, e) {\r\n                var f = a[d];\r\n                "string" == typeof f && (f = \'"\' + f + \'"\'), b += \'"\' + d + \'":\' + f, c > e + 1 && (b += ",")\r\n            }), b += "}"\r\n        }\r\n    }\r\n\r\n    CanvasRenderingContext2D.prototype.JTopoRoundRect = function (a, b, c, d, e) {\r\n        "undefined" == typeof e && (e = 5), this.beginPath(), this.moveTo(a + e, b), this.lineTo(a + c - e, b), this.quadraticCurveTo(a + c, b, a + c, b + e), this.lineTo(a + c, b + d - e), this.quadraticCurveTo(a + c, b + d, a + c - e, b + d), this.lineTo(a + e, b + d), this.quadraticCurveTo(a, b + d, a, b + d - e), this.lineTo(a, b + e), this.quadraticCurveTo(a, b, a + e, b), this.closePath()\r\n    }, CanvasRenderingContext2D.prototype.JTopoDashedLineTo = function (a, b, c, d, e) {\r\n        "undefined" == typeof e && (e = 5);\r\n        var f = c - a, g = d - b, h = Math.floor(Math.sqrt(f * f + g * g)), i = 0 >= e ? h : h / e, j = g / h * e, k = f / h * e;\r\n        this.beginPath();\r\n        for (var l = 0; i > l; l++)l % 2 ? this.lineTo(a + l * k, b + l * j) : this.moveTo(a + l * k, b + l * j);\r\n        this.stroke()\r\n    }, JTopo = {\r\n        version: "0.4.8_01",\r\n        zIndex_Container: 1,\r\n        zIndex_Link: 2,\r\n        zIndex_Node: 3,\r\n        SceneMode: {normal: "normal", drag: "drag", edit: "edit", select: "select"},\r\n        MouseCursor: {\r\n            normal: "default",\r\n            pointer: "pointer",\r\n            top_left: "nw-resize",\r\n            top_center: "n-resize",\r\n            top_right: "ne-resize",\r\n            middle_left: "e-resize",\r\n            middle_right: "e-resize",\r\n            bottom_left: "ne-resize",\r\n            bottom_center: "n-resize",\r\n            bottom_right: "nw-resize",\r\n            move: "move",\r\n            open_hand: "url(./img/cur/openhand.cur) 8 8, default",\r\n            closed_hand: "url(./img/cur/closedhand.cur) 8 8, default"\r\n        },\r\n        createStageFromJson: function (jsonStr, canvas) {\r\n            eval("var jsonObj = " + jsonStr);\r\n            var stage = new JTopo.Stage(canvas);\r\n            for (var k in jsonObj)"childs" != k && (stage[k] = jsonObj[k]);\r\n            var scenes = jsonObj.childs;\r\n            return scenes.forEach(function (a) {\r\n                var b = new JTopo.Scene(stage);\r\n                for (var c in a)"childs" != c && (b[c] = a[c]), "background" == c && (b.background = a[c]);\r\n                var d = a.childs;\r\n                d.forEach(function (a) {\r\n                    var c = null, d = a.elementType;\r\n                    "node" == d ? c = new JTopo.Node : "CircleNode" == d && (c = new JTopo.CircleNode);\r\n                    for (var e in a)c[e] = a[e];\r\n                    b.add(c)\r\n                })\r\n            }), stage\r\n        }\r\n    }, JTopo.Element = Element, window.JTopo = JTopo\r\n}(window), function (JTopo) {\r\n    function MessageBus(a) {\r\n        var b = this;\r\n        this.name = a, this.messageMap = {}, this.messageCount = 0, this.subscribe = function (a, c) {\r\n            var d = b.messageMap[a];\r\n            null == d && (b.messageMap[a] = []), b.messageMap[a].push(c), b.messageCount++\r\n        }, this.unsubscribe = function (a) {\r\n            var c = b.messageMap[a];\r\n            null != c && (b.messageMap[a] = null, delete b.messageMap[a], b.messageCount--)\r\n        }, this.publish = function (a, c, d) {\r\n            var e = b.messageMap[a];\r\n            if (null != e)for (var f = 0; f < e.length; f++)d ? !function (a, b) {\r\n                setTimeout(function () {\r\n                    a(b)\r\n                }, 10)\r\n            }(e[f], c) : e[f](c)\r\n        }\r\n    }\r\n\r\n    function getDistance(a, b, c, d) {\r\n        var e, f;\r\n        return null == c && null == d ? (e = b.x - a.x, f = b.y - a.y) : (e = c - a, f = d - b), Math.sqrt(e * e + f * f)\r\n    }\r\n\r\n    function getElementsBound(a) {\r\n        for (var b = {left: Number.MAX_VALUE, right: Number.MIN_VALUE, top: Number.MAX_VALUE, bottom: Number.MIN_VALUE}, c = 0; c < a.length; c++) {\r\n            var d = a[c];\r\n            d instanceof JTopo.Link || (b.left > d.x && (b.left = d.x, b.leftNode = d), b.right < d.x + d.width && (b.right = d.x + d.width, b.rightNode = d), b.top > d.y && (b.top = d.y, b.topNode = d), b.bottom < d.y + d.height && (b.bottom = d.y + d.height, b.bottomNode = d))\r\n        }\r\n        return b.width = b.right - b.left, b.height = b.bottom - b.top, b\r\n    }\r\n\r\n    function mouseCoords(a) {\r\n        return a = cloneEvent(a), a.pageX || (a.pageX = a.clientX + document.body.scrollLeft - document.body.clientLeft, a.pageY = a.clientY + document.body.scrollTop - document.body.clientTop), a\r\n    }\r\n\r\n    function getEventPosition(a) {\r\n        return a = mouseCoords(a)\r\n    }\r\n\r\n    function rotatePoint(a, b, c, d, e) {\r\n        var f = c - a, g = d - b, h = Math.sqrt(f * f + g * g), i = Math.atan2(g, f) + e;\r\n        return {x: a + Math.cos(i) * h, y: b + Math.sin(i) * h}\r\n    }\r\n\r\n    function rotatePoints(a, b, c) {\r\n        for (var d = [], e = 0; e < b.length; e++) {\r\n            var f = rotatePoint(a.x, a.y, b[e].x, b[e].y, c);\r\n            d.push(f)\r\n        }\r\n        return d\r\n    }\r\n\r\n    function $foreach(a, b, c) {\r\n        function d(e) {\r\n            e != a.length && (b(a[e]), setTimeout(function () {\r\n                d(++e)\r\n            }, c))\r\n        }\r\n\r\n        if (0 != a.length) {\r\n            var e = 0;\r\n            d(e)\r\n        }\r\n    }\r\n\r\n    function $for(a, b, c, d) {\r\n        function e(a) {\r\n            a != b && (c(b), setTimeout(function () {\r\n                e(++a)\r\n            }, d))\r\n        }\r\n\r\n        if (!(a > b)) {\r\n            var f = 0;\r\n            e(f)\r\n        }\r\n    }\r\n\r\n    function cloneEvent(a) {\r\n        var b = {};\r\n        for (var c in a)"returnValue" != c && "keyLocation" != c && (b[c] = a[c]);\r\n        return b\r\n    }\r\n\r\n    function clone(a) {\r\n        var b = {};\r\n        for (var c in a)b[c] = a[c];\r\n        return b\r\n    }\r\n\r\n    function isPointInRect(a, b) {\r\n        var c = b.x, d = b.y, e = b.width, f = b.height;\r\n        return a.x > c && a.x < c + e && a.y > d && a.y < d + f\r\n    }\r\n\r\n    function isPointInLine(a, b, c) {\r\n        var d = JTopo.util.getDistance(b, c), e = JTopo.util.getDistance(b, a), f = JTopo.util.getDistance(c, a), g = Math.abs(e + f - d) <= .5;\r\n        return g\r\n    }\r\n\r\n    function removeFromArray(a, b) {\r\n        for (var c = 0; c < a.length; c++) {\r\n            var d = a[c];\r\n            if (d === b) {\r\n                a = a.del(c);\r\n                break\r\n            }\r\n        }\r\n        return a\r\n    }\r\n\r\n    function randomColor() {\r\n        return Math.floor(255 * Math.random()) + "," + Math.floor(255 * Math.random()) + "," + Math.floor(255 * Math.random())\r\n    }\r\n\r\n    function isIntsect() {\r\n    }\r\n\r\n    function getProperties(a, b) {\r\n        for (var c = "", d = 0; d < b.length; d++) {\r\n            d > 0 && (c += ",");\r\n            var e = a[b[d]];\r\n            "string" == typeof e ? e = \'"\' + e + \'"\' : void 0 == e && (e = null), c += b[d] + ":" + e\r\n        }\r\n        return c\r\n    }\r\n\r\n    function loadStageFromJson(json, canvas) {\r\n        var obj = eval(json), stage = new JTopo.Stage(canvas);\r\n        for (var k in stageObj)if ("scenes" != k)stage[k] = obj[k]; else for (var scenes = obj.scenes, i = 0; i < scenes.length; i++) {\r\n            var sceneObj = scenes[i], scene = new JTopo.Scene(stage);\r\n            for (var p in sceneObj)if ("elements" != p)scene[p] = sceneObj[p]; else for (var nodeMap = {}, elements = sceneObj.elements, m = 0; m < elements.length; m++) {\r\n                var elementObj = elements[m], type = elementObj.elementType, element;\r\n                "Node" == type && (element = new JTopo.Node);\r\n                for (var mk in elementObj)element[mk] = elementObj[mk];\r\n                nodeMap[element.text] = element, scene.add(element)\r\n            }\r\n        }\r\n        return console.log(stage), stage\r\n    }\r\n\r\n    function toJson(a) {\r\n        var b = "backgroundColor,visible,mode,rotate,alpha,scaleX,scaleY,shadow,translateX,translateY,areaSelect,paintAll".split(","), c = "text,elementType,x,y,width,height,visible,alpha,rotate,scaleX,scaleY,fillColor,shadow,transformAble,zIndex,dragable,selected,showSelected,font,fontColor,textPosition,textOffsetX,textOffsetY".split(","), d = "{";\r\n        d += "frames:" + a.frames, d += ", scenes:[";\r\n        for (var e = 0; e < a.childs.length; e++) {\r\n            var f = a.childs[e];\r\n            d += "{", d += getProperties(f, b), d += ", elements:[";\r\n            for (var g = 0; g < f.childs.length; g++) {\r\n                var h = f.childs[g];\r\n                g > 0 && (d += ","), d += "{", d += getProperties(h, c), d += "}"\r\n            }\r\n            d += "]}"\r\n        }\r\n        return d += "]", d += "}"\r\n    }\r\n\r\n    function changeColor(a, b, c) {\r\n        var d = c.split(","), e = parseInt(d[0]), f = parseInt(d[1]), g = parseInt(d[2]), h = canvas.width = b.width, i = canvas.height = b.height;\r\n        a.clearRect(0, 0, canvas.width, canvas.height), a.drawImage(b, 0, 0);\r\n        for (var j = a.getImageData(0, 0, b.width, b.height), k = j.data, l = 0; h > l; l++)for (var m = 0; i > m; m++) {\r\n            var n = 4 * (l + m * h);\r\n            0 != k[n + 3] && (null != e && (k[n + 0] += e), null != f && (k[n + 1] += f), null != g && (k[n + 2] += g))\r\n        }\r\n        a.putImageData(j, 0, 0, 0, 0, b.width, b.height);\r\n        var o = canvas.toDataURL();\r\n        return o\r\n    }\r\n\r\n    function genImageAlarm(a, b) {\r\n        var c = a.src + b;\r\n        if (alarmImageCache[c])return alarmImageCache[c];\r\n        var d = new Image;\r\n        return d.src = changeColor(graphics, a, b), alarmImageCache[c] = d, d\r\n    }\r\n\r\n    function getOffsetPosition(a) {\r\n        if (!a)return {left: 0, top: 0};\r\n        var b = 0, c = 0;\r\n        if ("getBoundingClientRect" in document.documentElement)var d = a.getBoundingClientRect(), e = a.ownerDocument, f = e.body, g = e.documentElement, h = g.clientTop || f.clientTop || 0, i = g.clientLeft || f.clientLeft || 0, b = d.top + (self.pageYOffset || g && g.scrollTop || f.scrollTop) - h, c = d.left + (self.pageXOffset || g && g.scrollLeft || f.scrollLeft) - i; else do b += a.offsetTop || 0, c += a.offsetLeft || 0, a = a.offsetParent; while (a);\r\n        return {left: c, top: b}\r\n    }\r\n\r\n    function lineF(a, b, c, d) {\r\n        function e(a) {\r\n            return a * f + g\r\n        }\r\n\r\n        var f = (d - b) / (c - a), g = b - a * f;\r\n        return e.k = f, e.b = g, e.x1 = a, e.x2 = c, e.y1 = b, e.y2 = d, e\r\n    }\r\n\r\n    function inRange(a, b, c) {\r\n        var d = Math.abs(b - c), e = Math.abs(b - a), f = Math.abs(c - a), g = Math.abs(d - (e + f));\r\n        return 1e-6 > g ? !0 : !1\r\n    }\r\n\r\n    function isPointInLineSeg(a, b, c) {\r\n        return inRange(a, c.x1, c.x2) && inRange(b, c.y1, c.y2)\r\n    }\r\n\r\n    function intersection(a, b) {\r\n        var c, d;\r\n        return a.k == b.k ? null : (1 / 0 == a.k || a.k == -1 / 0 ? (c = a.x1, d = b(a.x1)) : 1 / 0 == b.k || b.k == -1 / 0 ? (c = b.x1, d = a(b.x1)) : (c = (b.b - a.b) / (a.k - b.k), d = a(c)), 0 == isPointInLineSeg(c, d, a) ? null : 0 == isPointInLineSeg(c, d, b) ? null : {\r\n            x: c,\r\n            y: d\r\n        })\r\n    }\r\n\r\n    function intersectionLineBound(a, b) {\r\n        var c = JTopo.util.lineF(b.left, b.top, b.left, b.bottom), d = JTopo.util.intersection(a, c);\r\n        return null == d && (c = JTopo.util.lineF(b.left, b.top, b.right, b.top), d = JTopo.util.intersection(a, c), null == d && (c = JTopo.util.lineF(b.right, b.top, b.right, b.bottom), d = JTopo.util.intersection(a, c), null == d && (c = JTopo.util.lineF(b.left, b.bottom, b.right, b.bottom), d = JTopo.util.intersection(a, c)))), d\r\n    }\r\n\r\n    requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame || window.oRequestAnimationFrame || function (a) {\r\n            setTimeout(a, 1e3 / 24)\r\n        }, Array.prototype.del = function (a) {\r\n        if ("number" != typeof a) {\r\n            for (var b = 0; b < this.length; b++)if (this[b] === a)return this.slice(0, b).concat(this.slice(b + 1, this.length));\r\n            return this\r\n        }\r\n        return 0 > a ? this : this.slice(0, a).concat(this.slice(a + 1, this.length))\r\n    }, [].indexOf || (Array.prototype.indexOf = function (a) {\r\n        for (var b = 0; b < this.length; b++)if (this[b] === a)return b;\r\n        return -1\r\n    }), window.console || (window.console = {\r\n        log: function () {\r\n        }, info: function () {\r\n        }, debug: function () {\r\n        }, warn: function () {\r\n        }, error: function () {\r\n        }\r\n    });\r\n    var canvas = document.createElement("canvas"), graphics = canvas.getContext("2d"), alarmImageCache = {};\r\n    JTopo.util = {\r\n        rotatePoint: rotatePoint,\r\n        rotatePoints: rotatePoints,\r\n        getDistance: getDistance,\r\n        getEventPosition: getEventPosition,\r\n        mouseCoords: mouseCoords,\r\n        MessageBus: MessageBus,\r\n        isFirefox: navigator.userAgent.indexOf("Firefox") > 0,\r\n        isIE: !(!window.attachEvent || -1 !== navigator.userAgent.indexOf("Opera")),\r\n        isChrome: null != navigator.userAgent.toLowerCase().match(/chrome/),\r\n        clone: clone,\r\n        isPointInRect: isPointInRect,\r\n        isPointInLine: isPointInLine,\r\n        removeFromArray: removeFromArray,\r\n        cloneEvent: cloneEvent,\r\n        randomColor: randomColor,\r\n        isIntsect: isIntsect,\r\n        toJson: toJson,\r\n        loadStageFromJson: loadStageFromJson,\r\n        getElementsBound: getElementsBound,\r\n        genImageAlarm: genImageAlarm,\r\n        getOffsetPosition: getOffsetPosition,\r\n        lineF: lineF,\r\n        intersection: intersection,\r\n        intersectionLineBound: intersectionLineBound\r\n    }, window.$for = $for, window.$foreach = $foreach\r\n}(JTopo), function (a) {\r\n    function b(a) {\r\n        return {\r\n            hgap: 16, visible: !1, exportCanvas: document.createElement("canvas"), getImage: function (b, c) {\r\n                var d = a.getBound(), e = 1, f = 1;\r\n                this.exportCanvas.width = a.canvas.width, this.exportCanvas.height = a.canvas.height, null != b && null != c ? (this.exportCanvas.width = b, this.exportCanvas.height = c, e = b / d.width, f = c / d.height) : (d.width > a.canvas.width && (this.exportCanvas.width = d.width), d.height > a.canvas.height && (this.exportCanvas.height = d.height));\r\n                var g = this.exportCanvas.getContext("2d");\r\n                return a.childs.length > 0 && (g.save(), g.clearRect(0, 0, this.exportCanvas.width, this.exportCanvas.height), a.childs.forEach(function (a) {\r\n                    1 == a.visible && (a.save(), a.translateX = 0, a.translateY = 0, a.scaleX = 1, a.scaleY = 1, g.scale(e, f), d.left < 0 && (a.translateX = Math.abs(d.left)), d.top < 0 && (a.translateY = Math.abs(d.top)), a.paintAll = !0, a.repaint(g), a.paintAll = !1, a.restore())\r\n                }), g.restore()), this.exportCanvas.toDataURL("image/png")\r\n            }, canvas: document.createElement("canvas"), update: function () {\r\n                this.eagleImageDatas = this.getData(a)\r\n            }, setSize: function (a, b) {\r\n                this.width = this.canvas.width = a, this.height = this.canvas.height = b\r\n            }, getData: function (b, c) {\r\n                function d(a) {\r\n                    var b = a.stage.canvas.width, c = a.stage.canvas.height, d = b / a.scaleX / 2, e = c / a.scaleY / 2;\r\n                    return {translateX: a.translateX + d - d * a.scaleX, translateY: a.translateY + e - e * a.scaleY}\r\n                }\r\n\r\n                null != j && null != k ? this.setSize(b, c) : this.setSize(200, 160);\r\n                var e = this.canvas.getContext("2d");\r\n                if (a.childs.length > 0) {\r\n                    e.save(), e.clearRect(0, 0, this.canvas.width, this.canvas.height), a.childs.forEach(function (a) {\r\n                        1 == a.visible && (a.save(), a.centerAndZoom(null, null, e), a.repaint(e), a.restore())\r\n                    });\r\n                    var f = d(a.childs[0]), g = f.translateX * (this.canvas.width / a.canvas.width) * a.childs[0].scaleX, h = f.translateY * (this.canvas.height / a.canvas.height) * a.childs[0].scaleY, i = a.getBound(), j = a.canvas.width / a.childs[0].scaleX / i.width, k = a.canvas.height / a.childs[0].scaleY / i.height;\r\n                    j > 1 && (j = 1), k > 1 && (j = 1), g *= j, h *= k, i.left < 0 && (g -= Math.abs(i.left) * (this.width / i.width)), i.top < 0 && (h -= Math.abs(i.top) * (this.height / i.height)), e.save(), e.lineWidth = 1, e.strokeStyle = "rgba(255,0,0,1)", e.strokeRect(-g, -h, e.canvas.width * j, e.canvas.height * k), e.restore();\r\n                    var l = null;\r\n                    try {\r\n                        l = e.getImageData(0, 0, e.canvas.width, e.canvas.height)\r\n                    } catch (m) {\r\n                    }\r\n                    return l\r\n                }\r\n                return null\r\n            }, paint: function () {\r\n                if (null != this.eagleImageDatas) {\r\n                    var b = a.graphics;\r\n                    b.save(), b.fillStyle = "rgba(211,211,211,0.3)", b.fillRect(a.canvas.width - this.canvas.width - 2 * this.hgap, a.canvas.height - this.canvas.height - 1, a.canvas.width - this.canvas.width, this.canvas.height + 1), b.fill(), b.save(), b.lineWidth = 1, b.strokeStyle = "rgba(0,0,0,1)", b.rect(a.canvas.width - this.canvas.width - 2 * this.hgap, a.canvas.height - this.canvas.height - 1, a.canvas.width - this.canvas.width, this.canvas.height + 1), b.stroke(), b.restore(), b.putImageData(this.eagleImageDatas, a.canvas.width - this.canvas.width - this.hgap, a.canvas.height - this.canvas.height), b.restore()\r\n                } else this.eagleImageDatas = this.getData(a)\r\n            }, eventHandler: function (a, b, c) {\r\n                var d = b.x, e = b.y;\r\n                if (d > c.canvas.width - this.canvas.width && e > c.canvas.height - this.canvas.height) {\r\n                    if (d = b.x - this.canvas.width, e = b.y - this.canvas.height, "mousedown" == a && (this.lastTranslateX = c.childs[0].translateX, this.lastTranslateY = c.childs[0].translateY), "mousedrag" == a && c.childs.length > 0) {\r\n                        var f = b.dx, g = b.dy, h = c.getBound(), i = this.canvas.width / c.childs[0].scaleX / h.width, j = this.canvas.height / c.childs[0].scaleY / h.height;\r\n                        c.childs[0].translateX = this.lastTranslateX - f / i, c.childs[0].translateY = this.lastTranslateY - g / j\r\n                    }\r\n                } else;\r\n            }\r\n        }\r\n    }\r\n\r\n    function c(c) {\r\n        function d(b) {\r\n            var c = a.util.getEventPosition(b), d = a.util.getOffsetPosition(n.canvas);\r\n            return c.offsetLeft = c.pageX - d.left, c.offsetTop = c.pageY - d.top, c.x = c.offsetLeft, c.y = c.offsetTop, c.target = null, c\r\n        }\r\n\r\n        function e(a) {\r\n            document.onselectstart = function () {\r\n                return !1\r\n            }, this.mouseOver = !0;\r\n            var b = d(a);\r\n            n.dispatchEventToScenes("mouseover", b), n.dispatchEvent("mouseover", b)\r\n        }\r\n\r\n        function f(a) {\r\n            p = setTimeout(function () {\r\n                o = !0\r\n            }, 500), document.onselectstart = function () {\r\n                return !0\r\n            };\r\n            var b = d(a);\r\n            n.dispatchEventToScenes("mouseout", b), n.dispatchEvent("mouseout", b), n.needRepaint = 0 == n.animate ? !1 : !0\r\n        }\r\n\r\n        function g(a) {\r\n            var b = d(a);\r\n            n.mouseDown = !0, n.mouseDownX = b.x, n.mouseDownY = b.y, n.dispatchEventToScenes("mousedown", b), n.dispatchEvent("mousedown", b)\r\n        }\r\n\r\n        function h(a) {\r\n            var b = d(a);\r\n            n.dispatchEventToScenes("mouseup", b), n.dispatchEvent("mouseup", b), n.mouseDown = !1, n.needRepaint = 0 == n.animate ? !1 : !0\r\n        }\r\n\r\n        function i(a) {\r\n            p && (window.clearTimeout(p), p = null), o = !1;\r\n            var b = d(a);\r\n            n.mouseDown ? 0 == a.button && (b.dx = b.x - n.mouseDownX, b.dy = b.y - n.mouseDownY, n.dispatchEventToScenes("mousedrag", b), n.dispatchEvent("mousedrag", b), 1 == n.eagleEye.visible && n.eagleEye.update()) : (n.dispatchEventToScenes("mousemove", b), n.dispatchEvent("mousemove", b))\r\n        }\r\n\r\n        function j(a) {\r\n            var b = d(a);\r\n            n.dispatchEventToScenes("click", b), n.dispatchEvent("click", b)\r\n        }\r\n\r\n        function k(a) {\r\n            var b = d(a);\r\n            n.dispatchEventToScenes("dbclick", b), n.dispatchEvent("dbclick", b)\r\n        }\r\n\r\n        function l(a) {\r\n            var b = d(a);\r\n            n.dispatchEventToScenes("mousewheel", b), n.dispatchEvent("mousewheel", b), null != n.wheelZoom && (a.preventDefault ? a.preventDefault() : (a = a || window.event, a.returnValue = !1), 1 == n.eagleEye.visible && n.eagleEye.update())\r\n        }\r\n\r\n        function m(b) {\r\n            a.util.isIE || !window.addEventListener ? (b.onmouseout = f, b.onmouseover = e, b.onmousedown = g, b.onmouseup = h, b.onmousemove = i, b.onclick = j, b.ondblclick = k, b.onmousewheel = l, b.touchstart = g, b.touchmove = i, b.touchend = h) : (b.addEventListener("mouseout", f), b.addEventListener("mouseover", e), b.addEventListener("mousedown", g), b.addEventListener("mouseup", h), b.addEventListener("mousemove", i), b.addEventListener("click", j), b.addEventListener("dblclick", k), a.util.isFirefox ? b.addEventListener("DOMMouseScroll", l) : b.addEventListener("mousewheel", l)), window.addEventListener && (window.addEventListener("keydown", function (b) {\r\n                n.dispatchEventToScenes("keydown", a.util.cloneEvent(b));\r\n                var c = b.keyCode;\r\n                (37 == c || 38 == c || 39 == c || 40 == c) && (b.preventDefault ? b.preventDefault() : (b = b || window.event, b.returnValue = !1))\r\n            }, !0), window.addEventListener("keyup", function (b) {\r\n                n.dispatchEventToScenes("keyup", a.util.cloneEvent(b));\r\n                var c = b.keyCode;\r\n                (37 == c || 38 == c || 39 == c || 40 == c) && (b.preventDefault ? b.preventDefault() : (b = b || window.event, b.returnValue = !1))\r\n            }, !0))\r\n        }\r\n\r\n        a.stage = this;\r\n        var n = this;\r\n        this.initialize = function (c) {\r\n            m(c), this.canvas = c, this.graphics = c.getContext("2d"), this.childs = [], this.frames = 24, this.messageBus = new a.util.MessageBus, this.eagleEye = b(this), this.wheelZoom = null, this.mouseDownX = 0, this.mouseDownY = 0, this.mouseDown = !1, this.mouseOver = !1, this.needRepaint = !0, this.serializedProperties = ["frames", "wheelZoom"]\r\n        }, null != c && this.initialize(c);\r\n        var o = !0, p = null;\r\n        document.oncontextmenu = function () {\r\n            return o\r\n        }, this.dispatchEventToScenes = function (a, b) {\r\n            if (0 != this.frames && (this.needRepaint = !0), 1 == this.eagleEye.visible && -1 != a.indexOf("mouse")) {\r\n                var c = b.x, d = b.y;\r\n                if (c > this.width - this.eagleEye.width && d > this.height - this.eagleEye.height)return void this.eagleEye.eventHandler(a, b, this)\r\n            }\r\n            this.childs.forEach(function (c) {\r\n                if (1 == c.visible) {\r\n                    var d = c[a + "Handler"];\r\n                    if (null == d)throw new Error("Function not found:" + a + "Handler");\r\n                    d.call(c, b)\r\n                }\r\n            })\r\n        }, this.add = function (a) {\r\n            for (var b = 0; b < this.childs.length; b++)if (this.childs[b] === a)return;\r\n            a.addTo(this), this.childs.push(a)\r\n        }, this.remove = function (a) {\r\n            if (null == a)throw new Error("Stage.remove出错: 参数为null!");\r\n            for (var b = 0; b < this.childs.length; b++)if (this.childs[b] === a)return a.stage = null, this.childs = this.childs.del(b), this;\r\n            return this\r\n        }, this.clear = function () {\r\n            this.childs = []\r\n        }, this.addEventListener = function (a, b) {\r\n            var c = this, d = function (a) {\r\n                b.call(c, a)\r\n            };\r\n            return this.messageBus.subscribe(a, d), this\r\n        }, this.removeEventListener = function (a) {\r\n            this.messageBus.unsubscribe(a)\r\n        }, this.removeAllEventListener = function () {\r\n            this.messageBus = new a.util.MessageBus\r\n        }, this.dispatchEvent = function (a, b) {\r\n            return this.messageBus.publish(a, b), this\r\n        };\r\n        var q = "click,dbclick,mousedown,mouseup,mouseover,mouseout,mousemove,mousedrag,mousewheel,touchstart,touchmove,touchend,keydown,keyup".split(","), r = this;\r\n        q.forEach(function (a) {\r\n            r[a] = function (b) {\r\n                null != b ? this.addEventListener(a, b) : this.dispatchEvent(a)\r\n            }\r\n        }), this.saveImageInfo = function (a, b) {\r\n            var c = this.eagleEye.getImage(a, b), d = window.open("about:blank");\r\n            return d.document.write("<img src=\'" + c + "\' alt=\'from canvas\'/>"), this\r\n        }, this.saveAsLocalImage = function (a, b) {\r\n            var c = this.eagleEye.getImage(a, b);\r\n            return c.replace("image/png", "image/octet-stream"), window.location.href = c, this\r\n        }, this.paint = function () {\r\n            null != this.canvas && (this.graphics.save(), this.graphics.clearRect(0, 0, this.width, this.height), this.childs.forEach(function (a) {\r\n                1 == a.visible && a.repaint(n.graphics)\r\n            }), 1 == this.eagleEye.visible && this.eagleEye.paint(this), this.graphics.restore())\r\n        }, this.repaint = function () {\r\n            0 != this.frames && (this.frames < 0 && 0 == this.needRepaint || (this.paint(), this.frames < 0 && (this.needRepaint = !1)))\r\n        }, this.zoom = function (a) {\r\n            this.childs.forEach(function (b) {\r\n                0 != b.visible && b.zoom(a)\r\n            })\r\n        }, this.zoomOut = function (a) {\r\n            this.childs.forEach(function (b) {\r\n                0 != b.visible && b.zoomOut(a)\r\n            })\r\n        }, this.zoomIn = function (a) {\r\n            this.childs.forEach(function (b) {\r\n                0 != b.visible && b.zoomIn(a)\r\n            })\r\n        }, this.centerAndZoom = function () {\r\n            this.childs.forEach(function (a) {\r\n                0 != a.visible && a.centerAndZoom()\r\n            })\r\n        }, this.setCenter = function (a, b) {\r\n            var c = this;\r\n            this.childs.forEach(function (d) {\r\n                var e = a - c.canvas.width / 2, f = b - c.canvas.height / 2;\r\n                d.translateX = -e, d.translateY = -f\r\n            })\r\n        }, this.getBound = function () {\r\n            var a = {left: Number.MAX_VALUE, right: Number.MIN_VALUE, top: Number.MAX_VALUE, bottom: Number.MIN_VALUE};\r\n            return this.childs.forEach(function (b) {\r\n                var c = b.getElementsBound();\r\n                c.left < a.left && (a.left = c.left, a.leftNode = c.leftNode), c.top < a.top && (a.top = c.top, a.topNode = c.topNode), c.right > a.right && (a.right = c.right, a.rightNode = c.rightNode), c.bottom > a.bottom && (a.bottom = c.bottom, a.bottomNode = c.bottomNode)\r\n            }), a.width = a.right - a.left, a.height = a.bottom - a.top, a\r\n        }, this.toJson = function () {\r\n            {\r\n                var b = this, c = \'{"version":"\' + a.version + \'",\';\r\n                this.serializedProperties.length\r\n            }\r\n            return this.serializedProperties.forEach(function (a) {\r\n                var d = b[a];\r\n                "string" == typeof d && (d = \'"\' + d + \'"\'), c += \'"\' + a + \'":\' + d + ","\r\n            }), c += \'"childs":[\', this.childs.forEach(function (a) {\r\n                c += a.toJson()\r\n            }), c += "]", c += "}"\r\n        }, function () {\r\n            0 == n.frames ? setTimeout(arguments.callee, 100) : n.frames < 0 ? (n.repaint(), setTimeout(arguments.callee, 1e3 / -n.frames)) : (n.repaint(), setTimeout(arguments.callee, 1e3 / n.frames))\r\n        }(), setTimeout(function () {\r\n            n.mousewheel(function (a) {\r\n                var b = null == a.wheelDelta ? a.detail : a.wheelDelta;\r\n                null != this.wheelZoom && (b > 0 ? this.zoomIn(this.wheelZoom) : this.zoomOut(this.wheelZoom))\r\n            }), n.paint()\r\n        }, 300), setTimeout(function () {\r\n            n.paint()\r\n        }, 1e3), setTimeout(function () {\r\n            n.paint()\r\n        }, 3e3)\r\n    }\r\n\r\n    c.prototype = {\r\n        get width() {\r\n            return this.canvas.width\r\n        }, get height() {\r\n            return this.canvas.height\r\n        }, set cursor(a) {\r\n            this.canvas.style.cursor = a\r\n        }, get cursor() {\r\n            return this.canvas.style.cursor\r\n        }, set mode(a) {\r\n            this.childs.forEach(function (b) {\r\n                b.mode = a\r\n            })\r\n        }\r\n    }, a.Stage = c\r\n}(JTopo), function (a) {\r\n    function b(c) {\r\n        function d(a, b, c, d) {\r\n            return function (e) {\r\n                e.beginPath(), e.strokeStyle = "rgba(0,0,236,0.5)", e.fillStyle = "rgba(0,0,236,0.1)", e.rect(a, b, c, d), e.fill(), e.stroke(), e.closePath()\r\n            }\r\n        }\r\n\r\n        var e = this;\r\n        this.initialize = function () {\r\n            b.prototype.initialize.apply(this, arguments), this.messageBus = new a.util.MessageBus, this.elementType = "scene", this.childs = [], this.zIndexMap = {}, this.zIndexArray = [], this.backgroundColor = "255,255,255", this.visible = !0, this.alpha = 0, this.scaleX = 1, this.scaleY = 1, this.mode = a.SceneMode.normal, this.translate = !0, this.translateX = 0, this.translateY = 0, this.lastTranslateX = 0, this.lastTranslateY = 0, this.mouseDown = !1, this.mouseDownX = null, this.mouseDownY = null, this.mouseDownEvent = null, this.areaSelect = !0, this.operations = [], this.selectedElements = [], this.paintAll = !1;\r\n            var c = "background,backgroundColor,mode,paintAll,areaSelect,translate,translateX,translateY,lastTranslatedX,lastTranslatedY,alpha,visible,scaleX,scaleY".split(",");\r\n            this.serializedProperties = this.serializedProperties.concat(c)\r\n        }, this.initialize(), this.setBackground = function (a) {\r\n            this.background = a\r\n        }, this.addTo = function (a) {\r\n            this.stage !== a && null != a && (this.stage = a)\r\n        }, null != c && (c.add(this), this.addTo(c)), this.show = function () {\r\n            this.visible = !0\r\n        }, this.hide = function () {\r\n            this.visible = !1\r\n        }, this.paint = function (a) {\r\n            if (0 != this.visible && null != this.stage) {\r\n                if (a.save(), this.paintBackgroud(a), a.restore(), a.save(), a.scale(this.scaleX, this.scaleY), 1 == this.translate) {\r\n                    var b = this.getOffsetTranslate(a);\r\n                    a.translate(b.translateX, b.translateY)\r\n                }\r\n                this.paintChilds(a), a.restore(), a.save(), this.paintOperations(a, this.operations), a.restore()\r\n            }\r\n        }, this.repaint = function (a) {\r\n            0 != this.visible && this.paint(a)\r\n        }, this.paintBackgroud = function (a) {\r\n            null != this.background ? a.drawImage(this.background, 0, 0, a.canvas.width, a.canvas.height) : (a.beginPath(), a.fillStyle = "rgba(" + this.backgroundColor + "," + this.alpha + ")", a.fillRect(0, 0, a.canvas.width, a.canvas.height), a.closePath())\r\n        }, this.getDisplayedElements = function () {\r\n            for (var a = [], b = 0; b < this.zIndexArray.length; b++)for (var c = this.zIndexArray[b], d = this.zIndexMap[c], e = 0; e < d.length; e++) {\r\n                var f = d[e];\r\n                this.isVisiable(f) && a.push(f)\r\n            }\r\n            return a\r\n        }, this.getDisplayedNodes = function () {\r\n            for (var b = [], c = 0; c < this.childs.length; c++) {\r\n                var d = this.childs[c];\r\n                d instanceof a.Node && this.isVisiable(d) && b.push(d)\r\n            }\r\n            return b\r\n        }, this.paintChilds = function (b) {\r\n            for (var c = 0; c < this.zIndexArray.length; c++)for (var d = this.zIndexArray[c], e = this.zIndexMap[d], f = 0; f < e.length; f++) {\r\n                var g = e[f];\r\n                if (1 == this.paintAll || this.isVisiable(g)) {\r\n                    if (b.save(), 1 == g.transformAble) {\r\n                        var h = g.getCenterLocation();\r\n                        b.translate(h.x, h.y), g.rotate && b.rotate(g.rotate), g.scaleX && g.scaleY ? b.scale(g.scaleX, g.scaleY) : g.scaleX ? b.scale(g.scaleX, 1) : g.scaleY && b.scale(1, g.scaleY)\r\n                    }\r\n                    1 == g.shadow && (b.shadowBlur = g.shadowBlur, b.shadowColor = g.shadowColor, b.shadowOffsetX = g.shadowOffsetX, b.shadowOffsetY = g.shadowOffsetY), g instanceof a.InteractiveElement && (g.selected && 1 == g.showSelected && g.paintSelected(b), 1 == g.isMouseOver && g.paintMouseover(b)), g.paint(b), b.restore()\r\n                }\r\n            }\r\n        }, this.getOffsetTranslate = function (a) {\r\n            var b = this.stage.canvas.width, c = this.stage.canvas.height;\r\n            null != a && "move" != a && (b = a.canvas.width, c = a.canvas.height);\r\n            var d = b / this.scaleX / 2, e = c / this.scaleY / 2, f = {translateX: this.translateX + (d - d * this.scaleX), translateY: this.translateY + (e - e * this.scaleY)};\r\n            return f\r\n        }, this.isVisiable = function (b) {\r\n            if (1 != b.visible)return !1;\r\n            if (b instanceof a.Link)return !0;\r\n            var c = this.getOffsetTranslate(), d = b.x + c.translateX, e = b.y + c.translateY;\r\n            d *= this.scaleX, e *= this.scaleY;\r\n            var f = d + b.width * this.scaleX, g = e + b.height * this.scaleY;\r\n            return d > this.stage.canvas.width || e > this.stage.canvas.height || 0 > f || 0 > g ? !1 : !0\r\n        }, this.paintOperations = function (a, b) {\r\n            for (var c = 0; c < b.length; c++)b[c](a)\r\n        }, this.findElements = function (a) {\r\n            for (var b = [], c = 0; c < this.childs.length; c++)1 == a(this.childs[c]) && b.push(this.childs[c]);\r\n            return b\r\n        }, this.getElementsByClass = function (a) {\r\n            return this.findElements(function (b) {\r\n                return b instanceof a\r\n            })\r\n        }, this.addOperation = function (a) {\r\n            return this.operations.push(a), this\r\n        }, this.clearOperations = function () {\r\n            return this.operations = [], this\r\n        }, this.getElementByXY = function (b, c) {\r\n            for (var d = null, e = this.zIndexArray.length - 1; e >= 0; e--)for (var f = this.zIndexArray[e], g = this.zIndexMap[f], h = g.length - 1; h >= 0; h--) {\r\n                var i = g[h];\r\n                if (i instanceof a.InteractiveElement && this.isVisiable(i) && i.isInBound(b, c))return d = i\r\n            }\r\n            return d\r\n        }, this.add = function (a) {\r\n            this.childs.push(a), null == this.zIndexMap[a.zIndex] && (this.zIndexMap[a.zIndex] = [], this.zIndexArray.push(a.zIndex), this.zIndexArray.sort(function (a, b) {\r\n                return a - b\r\n            })), this.zIndexMap["" + a.zIndex].push(a)\r\n        }, this.remove = function (b) {\r\n            this.childs = a.util.removeFromArray(this.childs, b);\r\n            var c = this.zIndexMap[b.zIndex];\r\n            c && (this.zIndexMap[b.zIndex] = a.util.removeFromArray(c, b)), b.removeHandler(this)\r\n        }, this.clear = function () {\r\n            var a = this;\r\n            this.childs.forEach(function (b) {\r\n                b.removeHandler(a)\r\n            }), this.childs = [], this.operations = [], this.zIndexArray = [], this.zIndexMap = {}\r\n        }, this.addToSelected = function (a) {\r\n            this.selectedElements.push(a)\r\n        }, this.cancleAllSelected = function (a) {\r\n            for (var b = 0; b < this.selectedElements.length; b++)this.selectedElements[b].unselectedHandler(a);\r\n            this.selectedElements = []\r\n        }, this.notInSelectedNodes = function (a) {\r\n            for (var b = 0; b < this.selectedElements.length; b++)if (a === this.selectedElements[b])return !1;\r\n            return !0\r\n        }, this.removeFromSelected = function (a) {\r\n            for (var b = 0; b < this.selectedElements.length; b++) {\r\n                var c = this.selectedElements[b];\r\n                a === c && (this.selectedElements = this.selectedElements.del(b))\r\n            }\r\n        }, this.toSceneEvent = function (b) {\r\n            var c = a.util.clone(b);\r\n            if (c.x /= this.scaleX, c.y /= this.scaleY, 1 == this.translate) {\r\n                var d = this.getOffsetTranslate();\r\n                c.x -= d.translateX, c.y -= d.translateY\r\n            }\r\n            return null != c.dx && (c.dx /= this.scaleX, c.dy /= this.scaleY), null != this.currentElement && (c.target = this.currentElement), c.scene = this, c\r\n        }, this.selectElement = function (a) {\r\n            var b = e.getElementByXY(a.x, a.y);\r\n            if (null != b)if (a.target = b, b.mousedownHander(a), b.selectedHandler(a), e.notInSelectedNodes(b))a.ctrlKey || e.cancleAllSelected(), e.addToSelected(b); else {\r\n                1 == a.ctrlKey && (b.unselectedHandler(), this.removeFromSelected(b));\r\n                for (var c = 0; c < this.selectedElements.length; c++) {\r\n                    var d = this.selectedElements[c];\r\n                    d.selectedHandler(a)\r\n                }\r\n            } else a.ctrlKey || e.cancleAllSelected();\r\n            this.currentElement = b\r\n        }, this.mousedownHandler = function (b) {\r\n            var c = this.toSceneEvent(b);\r\n            if (this.mouseDown = !0, this.mouseDownX = c.x, this.mouseDownY = c.y, this.mouseDownEvent = c, this.mode == a.SceneMode.normal)this.selectElement(c), (null == this.currentElement || this.currentElement instanceof a.Link) && 1 == this.translate && (this.lastTranslateX = this.translateX, this.lastTranslateY = this.translateY); else {\r\n                if (this.mode == a.SceneMode.drag && 1 == this.translate)return this.lastTranslateX = this.translateX, void(this.lastTranslateY = this.translateY);\r\n                this.mode == a.SceneMode.select ? this.selectElement(c) : this.mode == a.SceneMode.edit && (this.selectElement(c), (null == this.currentElement || this.currentElement instanceof a.Link) && 1 == this.translate && (this.lastTranslateX = this.translateX, this.lastTranslateY = this.translateY))\r\n            }\r\n            e.dispatchEvent("mousedown", c)\r\n        }, this.mouseupHandler = function (b) {\r\n            this.stage.cursor != a.MouseCursor.normal && (this.stage.cursor = a.MouseCursor.normal), e.clearOperations();\r\n            var c = this.toSceneEvent(b);\r\n            null != this.currentElement && (c.target = e.currentElement, this.currentElement.mouseupHandler(c)), this.dispatchEvent("mouseup", c), this.mouseDown = !1\r\n        }, this.dragElements = function (b) {\r\n            if (null != this.currentElement && 1 == this.currentElement.dragable)for (var c = 0; c < this.selectedElements.length; c++) {\r\n                var d = this.selectedElements[c];\r\n                if (0 != d.dragable) {\r\n                    var e = a.util.clone(b);\r\n                    e.target = d, d.mousedragHandler(e)\r\n                }\r\n            }\r\n        }, this.mousedragHandler = function (b) {\r\n            var c = this.toSceneEvent(b);\r\n            this.mode == a.SceneMode.normal ? null == this.currentElement || this.currentElement instanceof a.Link ? 1 == this.translate && (this.stage.cursor = a.MouseCursor.closed_hand, this.translateX = this.lastTranslateX + c.dx, this.translateY = this.lastTranslateY + c.dy) : this.dragElements(c) : this.mode == a.SceneMode.drag ? 1 == this.translate && (this.stage.cursor = a.MouseCursor.closed_hand, this.translateX = this.lastTranslateX + c.dx, this.translateY = this.lastTranslateY + c.dy) : this.mode == a.SceneMode.select ? null != this.currentElement ? 1 == this.currentElement.dragable && this.dragElements(c) : 1 == this.areaSelect && this.areaSelectHandle(c) : this.mode == a.SceneMode.edit && (null == this.currentElement || this.currentElement instanceof a.Link ? 1 == this.translate && (this.stage.cursor = a.MouseCursor.closed_hand, this.translateX = this.lastTranslateX + c.dx, this.translateY = this.lastTranslateY + c.dy) : this.dragElements(c)), this.dispatchEvent("mousedrag", c)\r\n        }, this.areaSelectHandle = function (a) {\r\n            var b = a.offsetLeft, c = a.offsetTop, f = this.mouseDownEvent.offsetLeft, g = this.mouseDownEvent.offsetTop, h = b >= f ? f : b, i = c >= g ? g : c, j = Math.abs(a.dx) * this.scaleX, k = Math.abs(a.dy) * this.scaleY, l = new d(h, i, j, k);\r\n            e.clearOperations().addOperation(l), b = a.x, c = a.y, f = this.mouseDownEvent.x, g = this.mouseDownEvent.y, h = b >= f ? f : b, i = c >= g ? g : c, j = Math.abs(a.dx), k = Math.abs(a.dy);\r\n            for (var m = h + j, n = i + k, o = 0; o < e.childs.length; o++) {\r\n                var p = e.childs[o];\r\n                p.x > h && p.x + p.width < m && p.y > i && p.y + p.height < n && e.notInSelectedNodes(p) && (p.selectedHandler(a), e.addToSelected(p))\r\n            }\r\n        }, this.mousemoveHandler = function (b) {\r\n            this.mousecoord = {x: b.x, y: b.y};\r\n            var c = this.toSceneEvent(b);\r\n            if (this.mode == a.SceneMode.drag)return void(this.stage.cursor = a.MouseCursor.open_hand);\r\n            this.mode == a.SceneMode.normal ? this.stage.cursor = a.MouseCursor.normal : this.mode == a.SceneMode.select && (this.stage.cursor = a.MouseCursor.normal);\r\n            var d = e.getElementByXY(c.x, c.y);\r\n            null != d ? (e.mouseOverelement && e.mouseOverelement !== d && (c.target = d, e.mouseOverelement.mouseoutHandler(c)), e.mouseOverelement = d, 0 == d.isMouseOver ? (c.target = d, d.mouseoverHandler(c), e.dispatchEvent("mouseover", c)) : (c.target = d, d.mousemoveHandler(c), e.dispatchEvent("mousemove", c))) : e.mouseOverelement ? (c.target = d, e.mouseOverelement.mouseoutHandler(c), e.mouseOverelement = null, e.dispatchEvent("mouseout", c)) : (c.target = null, e.dispatchEvent("mousemove", c))\r\n        }, this.mouseoverHandler = function (a) {\r\n            var b = this.toSceneEvent(a);\r\n            this.dispatchEvent("mouseover", b)\r\n        }, this.mouseoutHandler = function (a) {\r\n            var b = this.toSceneEvent(a);\r\n            this.dispatchEvent("mouseout", b)\r\n        }, this.clickHandler = function (a) {\r\n            var b = this.toSceneEvent(a);\r\n            this.currentElement && (b.target = this.currentElement, this.currentElement.clickHandler(b)), this.dispatchEvent("click", b)\r\n        }, this.dbclickHandler = function (a) {\r\n            var b = this.toSceneEvent(a);\r\n            this.currentElement ? (b.target = this.currentElement, this.currentElement.dbclickHandler(b)) : e.cancleAllSelected(), this.dispatchEvent("dbclick", b)\r\n        }, this.mousewheelHandler = function (a) {\r\n            var b = this.toSceneEvent(a);\r\n            this.dispatchEvent("mousewheel", b)\r\n        }, this.touchstart = this.mousedownHander, this.touchmove = this.mousedragHandler, this.touchend = this.mousedownHander, this.keydownHandler = function (a) {\r\n            this.dispatchEvent("keydown", a)\r\n        }, this.keyupHandler = function (a) {\r\n            this.dispatchEvent("keyup", a)\r\n        }, this.addEventListener = function (a, b) {\r\n            var c = this, d = function (a) {\r\n                b.call(c, a)\r\n            };\r\n            return this.messageBus.subscribe(a, d), this\r\n        }, this.removeEventListener = function (a) {\r\n            this.messageBus.unsubscribe(a)\r\n        }, this.removeAllEventListener = function () {\r\n            this.messageBus = new a.util.MessageBus\r\n        }, this.dispatchEvent = function (a, b) {\r\n            return this.messageBus.publish(a, b), this\r\n        };\r\n        var f = "click,dbclick,mousedown,mouseup,mouseover,mouseout,mousemove,mousedrag,mousewheel,touchstart,touchmove,touchend,keydown,keyup".split(","), g = this;\r\n        return f.forEach(function (a) {\r\n            g[a] = function (b) {\r\n                null != b ? this.addEventListener(a, b) : this.dispatchEvent(a)\r\n            }\r\n        }), this.zoom = function (a, b) {\r\n            null != a && 0 != a && (this.scaleX = a), null != b && 0 != b && (this.scaleY = b)\r\n        }, this.zoomOut = function (a) {\r\n            0 != a && (null == a && (a = .8), this.scaleX /= a, this.scaleY /= a)\r\n        }, this.zoomIn = function (a) {\r\n            0 != a && (null == a && (a = .8), this.scaleX *= a, this.scaleY *= a)\r\n        }, this.getBound = function () {\r\n            return {left: 0, top: 0, right: this.stage.canvas.width, bottom: this.stage.canvas.height, width: this.stage.canvas.width, height: this.stage.canvas.height}\r\n        }, this.getElementsBound = function () {\r\n            return a.util.getElementsBound(this.childs)\r\n        }, this.translateToCenter = function (a) {\r\n            var b = this.getElementsBound(), c = this.stage.canvas.width / 2 - (b.left + b.right) / 2, d = this.stage.canvas.height / 2 - (b.top + b.bottom) / 2;\r\n            a && (c = a.canvas.width / 2 - (b.left + b.right) / 2, d = a.canvas.height / 2 - (b.top + b.bottom) / 2), this.translateX = c, this.translateY = d\r\n        }, this.setCenter = function (a, b) {\r\n            var c = a - this.stage.canvas.width / 2, d = b - this.stage.canvas.height / 2;\r\n            this.translateX = -c, this.translateY = -d\r\n        }, this.centerAndZoom = function (a, b, c) {\r\n            if (this.translateToCenter(c), null == a || null == b) {\r\n                var d = this.getElementsBound(), e = d.right - d.left, f = d.bottom - d.top, g = this.stage.canvas.width / e, h = this.stage.canvas.height / f;\r\n                c && (g = c.canvas.width / e, h = c.canvas.height / f);\r\n                var i = Math.min(g, h);\r\n                if (i > 1)return;\r\n                this.zoom(i, i)\r\n            }\r\n            this.zoom(a, b)\r\n        }, this.getCenterLocation = function () {\r\n            return {x: e.stage.canvas.width / 2, y: e.stage.canvas.height / 2}\r\n        }, this.doLayout = function (a) {\r\n            a && a(this, this.childs)\r\n        }, this.toJson = function () {\r\n            {\r\n                var a = this, b = "{";\r\n                this.serializedProperties.length\r\n            }\r\n            this.serializedProperties.forEach(function (c) {\r\n                var d = a[c];\r\n                "background" == c && (d = a._background.src), "string" == typeof d && (d = \'"\' + d + \'"\'), b += \'"\' + c + \'":\' + d + ","\r\n            }), b += \'"childs":[\';\r\n            var c = this.childs.length;\r\n            return this.childs.forEach(function (a, d) {\r\n                b += a.toJson(), c > d + 1 && (b += ",")\r\n            }), b += "]", b += "}"\r\n        }, e\r\n    }\r\n\r\n    b.prototype = new a.Element;\r\n    var c = {};\r\n    Object.defineProperties(b.prototype, {\r\n        background: {\r\n            get: function () {\r\n                return this._background\r\n            }, set: function (a) {\r\n                if ("string" == typeof a) {\r\n                    var b = c[a];\r\n                    null == b && (b = new Image, b.src = a, b.onload = function () {\r\n                        c[a] = b\r\n                    }), this._background = b\r\n                } else this._background = a\r\n            }\r\n        }\r\n    }), a.Scene = b\r\n}(JTopo), function (a) {\r\n    function b() {\r\n        this.initialize = function () {\r\n            b.prototype.initialize.apply(this, arguments), this.elementType = "displayElement", this.x = 0, this.y = 0, this.width = 32, this.height = 32, this.visible = !0, this.alpha = 1, this.rotate = 0, this.scaleX = 1, this.scaleY = 1, this.strokeColor = "22,124,255", this.borderColor = "22,124,255", this.fillColor = "22,124,255", this.shadow = !1, this.shadowBlur = 5, this.shadowColor = "rgba(0,0,0,0.5)", this.shadowOffsetX = 3, this.shadowOffsetY = 6, this.transformAble = !1, this.zIndex = 0;\r\n            var a = "x,y,width,height,visible,alpha,rotate,scaleX,scaleY,strokeColor,fillColor,shadow,shadowColor,shadowOffsetX,shadowOffsetY,transformAble,zIndex".split(",");\r\n            this.serializedProperties = this.serializedProperties.concat(a)\r\n        }, this.initialize(), this.paint = function (a) {\r\n            a.beginPath(), a.fillStyle = "rgba(" + this.fillColor + "," + this.alpha + ")", a.rect(-this.width / 2, -this.height / 2, this.width, this.height), a.fill(), a.stroke(), a.closePath()\r\n        }, this.getLocation = function () {\r\n            return {x: this.x, y: this.y}\r\n        }, this.setLocation = function (a, b) {\r\n            return this.x = a, this.y = b, this\r\n        }, this.getCenterLocation = function () {\r\n            return {x: this.x + this.width / 2, y: this.y + this.height / 2}\r\n        }, this.setCenterLocation = function (a, b) {\r\n            return this.x = a - this.width / 2, this.y = b - this.height / 2, this\r\n        }, this.getSize = function () {\r\n            return {width: this.width, height: this.heith}\r\n        }, this.setSize = function (a, b) {\r\n            return this.width = a, this.height = b, this\r\n        }, this.getBound = function () {\r\n            return {left: this.x, top: this.y, right: this.x + this.width, bottom: this.y + this.height, width: this.width, height: this.height}\r\n        }, this.setBound = function (a, b, c, d) {\r\n            return this.setLocation(a, b), this.setSize(c, d), this\r\n        }, this.getDisplayBound = function () {\r\n            return {left: this.x, top: this.y, right: this.x + this.width * this.scaleX, bottom: this.y + this.height * this.scaleY}\r\n        }, this.getDisplaySize = function () {\r\n            return {width: this.width * this.scaleX, height: this.height * this.scaleY}\r\n        }, this.getPosition = function (a) {\r\n            var b, c = this.getBound();\r\n            return "Top_Left" == a ? b = {x: c.left, y: c.top} : "Top_Center" == a ? b = {x: this.cx, y: c.top} : "Top_Right" == a ? b = {x: c.right, y: c.top} : "Middle_Left" == a ? b = {\r\n                x: c.left,\r\n                y: this.cy\r\n            } : "Middle_Center" == a ? b = {x: this.cx, y: this.cy} : "Middle_Right" == a ? b = {x: c.right, y: this.cy} : "Bottom_Left" == a ? b = {\r\n                x: c.left,\r\n                y: c.bottom\r\n            } : "Bottom_Center" == a ? b = {x: this.cx, y: c.bottom} : "Bottom_Right" == a && (b = {x: c.right, y: c.bottom}), b\r\n        }\r\n    }\r\n\r\n    function c() {\r\n        this.initialize = function () {\r\n            c.prototype.initialize.apply(this, arguments), this.elementType = "interactiveElement", this.dragable = !1, this.selected = !1, this.showSelected = !0, this.selectedLocation = null, this.isMouseOver = !1;\r\n            var a = "dragable,selected,showSelected,isMouseOver".split(",");\r\n            this.serializedProperties = this.serializedProperties.concat(a)\r\n        }, this.initialize(), this.paintSelected = function (a) {\r\n            0 != this.showSelected && (a.save(), a.beginPath(), a.strokeStyle = "rgba(168,202,255, 0.9)", a.fillStyle = "rgba(168,202,236,0.7)", a.rect(-this.width / 2 - 3, -this.height / 2 - 3, this.width + 6, this.height + 6), a.fill(), a.stroke(), a.closePath(), a.restore())\r\n        }, this.paintMouseover = function (a) {\r\n            return this.paintSelected(a)\r\n        }, this.isInBound = function (a, b) {\r\n            return a > this.x && a < this.x + this.width * Math.abs(this.scaleX) && b > this.y && b < this.y + this.height * Math.abs(this.scaleY)\r\n        }, this.selectedHandler = function () {\r\n            this.selected = !0, this.selectedLocation = {x: this.x, y: this.y}\r\n        }, this.unselectedHandler = function () {\r\n            this.selected = !1, this.selectedLocation = null\r\n        }, this.dbclickHandler = function (a) {\r\n            this.dispatchEvent("dbclick", a)\r\n        }, this.clickHandler = function (a) {\r\n            this.dispatchEvent("click", a)\r\n        }, this.mousedownHander = function (a) {\r\n            this.dispatchEvent("mousedown", a)\r\n        }, this.mouseupHandler = function (a) {\r\n            this.dispatchEvent("mouseup", a)\r\n        }, this.mouseoverHandler = function (a) {\r\n            this.isMouseOver = !0, this.dispatchEvent("mouseover", a)\r\n        }, this.mousemoveHandler = function (a) {\r\n            this.dispatchEvent("mousemove", a)\r\n        }, this.mouseoutHandler = function (a) {\r\n            this.isMouseOver = !1, this.dispatchEvent("mouseout", a)\r\n        }, this.mousedragHandler = function (a) {\r\n            var b = this.selectedLocation.x + a.dx, c = this.selectedLocation.y + a.dy;\r\n            this.setLocation(b, c), this.dispatchEvent("mousedrag", a)\r\n        }, this.addEventListener = function (b, c) {\r\n            var d = this, e = function (a) {\r\n                c.call(d, a)\r\n            };\r\n            return this.messageBus || (this.messageBus = new a.util.MessageBus), this.messageBus.subscribe(b, e), this\r\n        }, this.dispatchEvent = function (a, b) {\r\n            return this.messageBus ? (this.messageBus.publish(a, b), this) : null\r\n        }, this.removeEventListener = function (a) {\r\n            this.messageBus.unsubscribe(a)\r\n        }, this.removeAllEventListener = function () {\r\n            this.messageBus = new a.util.MessageBus\r\n        };\r\n        var b = "click,dbclick,mousedown,mouseup,mouseover,mouseout,mousemove,mousedrag,touchstart,touchmove,touchend".split(","), d = this;\r\n        b.forEach(function (a) {\r\n            d[a] = function (b) {\r\n                null != b ? this.addEventListener(a, b) : this.dispatchEvent(a)\r\n            }\r\n        })\r\n    }\r\n\r\n    function d() {\r\n        this.initialize = function () {\r\n            d.prototype.initialize.apply(this, arguments), this.editAble = !1, this.selectedPoint = null\r\n        }, this.getCtrlPosition = function (a) {\r\n            var b = 5, c = 5, d = this.getPosition(a);\r\n            return {left: d.x - b, top: d.y - c, right: d.x + b, bottom: d.y + c}\r\n        }, this.selectedHandler = function (b) {\r\n            d.prototype.selectedHandler.apply(this, arguments), this.selectedSize = {width: this.width, height: this.height}, b.scene.mode == a.SceneMode.edit && (this.editAble = !0)\r\n        }, this.unselectedHandler = function () {\r\n            d.prototype.unselectedHandler.apply(this, arguments), this.selectedSize = null, this.editAble = !1\r\n        };\r\n        var b = ["Top_Left", "Top_Center", "Top_Right", "Middle_Left", "Middle_Right", "Bottom_Left", "Bottom_Center", "Bottom_Right"];\r\n        this.paintCtrl = function (a) {\r\n            if (0 != this.editAble) {\r\n                a.save();\r\n                for (var c = 0; c < b.length; c++) {\r\n                    var d = this.getCtrlPosition(b[c]);\r\n                    d.left -= this.cx, d.right -= this.cx, d.top -= this.cy, d.bottom -= this.cy;\r\n                    var e = d.right - d.left, f = d.bottom - d.top;\r\n                    a.beginPath(), a.strokeStyle = "rgba(0,0,0,0.8)", a.rect(d.left, d.top, e, f), a.stroke(), a.closePath(), a.beginPath(), a.strokeStyle = "rgba(255,255,255,0.3)", a.rect(d.left + 1, d.top + 1, e - 2, f - 2), a.stroke(), a.closePath()\r\n                }\r\n                a.restore()\r\n            }\r\n        }, this.isInBound = function (a, c) {\r\n            if (this.selectedPoint = null, 1 == this.editAble)for (var e = 0; e < b.length; e++) {\r\n                var f = this.getCtrlPosition(b[e]);\r\n                if (a > f.left && a < f.right && c > f.top && c < f.bottom)return this.selectedPoint = b[e], !0\r\n            }\r\n            return d.prototype.isInBound.apply(this, arguments)\r\n        }, this.mousedragHandler = function (a) {\r\n            if (null == this.selectedPoint) {\r\n                var b = this.selectedLocation.x + a.dx, c = this.selectedLocation.y + a.dy;\r\n                this.setLocation(b, c), this.dispatchEvent("mousedrag", a)\r\n            } else {\r\n                if ("Top_Left" == this.selectedPoint) {\r\n                    var d = this.selectedSize.width - a.dx, e = this.selectedSize.height - a.dy, b = this.selectedLocation.x + a.dx, c = this.selectedLocation.y + a.dy;\r\n                    b < this.x + this.width && (this.x = b, this.width = d), c < this.y + this.height && (this.y = c, this.height = e)\r\n                } else if ("Top_Center" == this.selectedPoint) {\r\n                    var e = this.selectedSize.height - a.dy, c = this.selectedLocation.y + a.dy;\r\n                    c < this.y + this.height && (this.y = c, this.height = e)\r\n                } else if ("Top_Right" == this.selectedPoint) {\r\n                    var d = this.selectedSize.width + a.dx, c = this.selectedLocation.y + a.dy;\r\n                    c < this.y + this.height && (this.y = c, this.height = this.selectedSize.height - a.dy), d > 1 && (this.width = d)\r\n                } else if ("Middle_Left" == this.selectedPoint) {\r\n                    var d = this.selectedSize.width - a.dx, b = this.selectedLocation.x + a.dx;\r\n                    b < this.x + this.width && (this.x = b), d > 1 && (this.width = d)\r\n                } else if ("Middle_Right" == this.selectedPoint) {\r\n                    var d = this.selectedSize.width + a.dx;\r\n                    d > 1 && (this.width = d)\r\n                } else if ("Bottom_Left" == this.selectedPoint) {\r\n                    var d = this.selectedSize.width - a.dx, b = this.selectedLocation.x + a.dx;\r\n                    d > 1 && (this.x = b, this.width = d);\r\n                    var e = this.selectedSize.height + a.dy;\r\n                    e > 1 && (this.height = e)\r\n                } else if ("Bottom_Center" == this.selectedPoint) {\r\n                    var e = this.selectedSize.height + a.dy;\r\n                    e > 1 && (this.height = e)\r\n                } else if ("Bottom_Right" == this.selectedPoint) {\r\n                    var d = this.selectedSize.width + a.dx;\r\n                    d > 1 && (this.width = d);\r\n                    var e = this.selectedSize.height + a.dy;\r\n                    e > 1 && (this.height = e)\r\n                }\r\n                this.dispatchEvent("resize", a)\r\n            }\r\n        }\r\n    }\r\n\r\n    b.prototype = new a.Element, Object.defineProperties(b.prototype, {\r\n        cx: {\r\n            get: function () {\r\n                return this.x + this.width / 2\r\n            }, set: function (a) {\r\n                this.x = a - this.width / 2\r\n            }\r\n        }, cy: {\r\n            get: function () {\r\n                return this.y + this.height / 2\r\n            }, set: function (a) {\r\n                this.y = a - this.height / 2\r\n            }\r\n        }\r\n    }), c.prototype = new b, d.prototype = new c, a.DisplayElement = b, a.InteractiveElement = c, a.EditableElement = d\r\n}(JTopo), function (a) {\r\n    function b(c) {\r\n        this.initialize = function (c) {\r\n            b.prototype.initialize.apply(this, arguments), this.elementType = "node", this.zIndex = a.zIndex_Node, this.text = c, this.font = "12px Consolas", this.fontColor = "255,255,255", this.borderWidth = 0, this.borderColor = "255,255,255", this.borderRadius = null, this.dragable = !0, this.textPosition = "Bottom_Center", this.textOffsetX = 0, this.textOffsetY = 0, this.transformAble = !0, this.inLinks = null, this.outLinks = null;\r\n            var d = "text,font,fontColor,textPosition,textOffsetX,textOffsetY,borderRadius".split(",");\r\n            this.serializedProperties = this.serializedProperties.concat(d)\r\n        }, this.initialize(c), this.paint = function (a) {\r\n            if (this.image) {\r\n                var b = a.globalAlpha;\r\n                a.globalAlpha = this.alpha, null != this.alarmImage && null != this.alarm ? a.drawImage(this.alarmImage, -this.width / 2, -this.height / 2, this.width, this.height) : a.drawImage(this.image, -this.width / 2, -this.height / 2, this.width, this.height), a.globalAlpha = b\r\n            } else a.beginPath(), a.fillStyle = "rgba(" + this.fillColor + "," + this.alpha + ")", null == this.borderRadius || 0 == this.borderRadius ? a.rect(-this.width / 2, -this.height / 2, this.width, this.height) : a.JTopoRoundRect(-this.width / 2, -this.height / 2, this.width, this.height, this.borderRadius), a.fill(), a.closePath();\r\n            this.paintText(a), this.paintBorder(a), this.paintCtrl(a), this.paintAlarmText(a)\r\n        }, this.paintAlarmText = function (a) {\r\n            if (null != this.alarm && "" != this.alarm) {\r\n                var b = this.alarmColor || "255,0,0", c = this.alarmAlpha || .5;\r\n                a.beginPath(), a.font = this.alarmFont || "10px 微软雅黑";\r\n                var d = a.measureText(this.alarm).width + 6, e = a.measureText("田").width + 6, f = this.width / 2 - d / 2, g = -this.height / 2 - e - 8;\r\n                a.strokeStyle = "rgba(" + b + ", " + c + ")", a.fillStyle = "rgba(" + b + ", " + c + ")", a.lineCap = "round", a.lineWidth = 1, a.moveTo(f, g), a.lineTo(f + d, g), a.lineTo(f + d, g + e), a.lineTo(f + d / 2 + 6, g + e), a.lineTo(f + d / 2, g + e + 8), a.lineTo(f + d / 2 - 6, g + e), a.lineTo(f, g + e), a.lineTo(f, g), a.fill(), a.stroke(), a.closePath(), a.beginPath(), a.strokeStyle = "rgba(" + this.fontColor + ", " + this.alpha + ")", a.fillStyle = "rgba(" + this.fontColor + ", " + this.alpha + ")", a.fillText(this.alarm, f + 2, g + e - 4), a.closePath()\r\n            }\r\n        }, this.paintText = function (a) {\r\n            var b = this.text;\r\n            if (null != b && "" != b) {\r\n                a.beginPath(), a.font = this.font;\r\n                var c = a.measureText(b).width, d = a.measureText("田").width;\r\n                a.fillStyle = "rgba(" + this.fontColor + ", " + this.alpha + ")";\r\n                var e = this.getTextPostion(this.textPosition, c, d);\r\n                a.fillText(b, e.x, e.y), a.closePath()\r\n            }\r\n        }, this.paintBorder = function (a) {\r\n            if (0 != this.borderWidth) {\r\n                a.beginPath(), a.lineWidth = this.borderWidth, a.strokeStyle = "rgba(" + this.borderColor + "," + this.alpha + ")";\r\n                var b = this.borderWidth / 2;\r\n                null == this.borderRadius || 0 == this.borderRadius ? a.rect(-this.width / 2 - b, -this.height / 2 - b, this.width + this.borderWidth, this.height + this.borderWidth) : a.JTopoRoundRect(-this.width / 2 - b, -this.height / 2 - b, this.width + this.borderWidth, this.height + this.borderWidth, this.borderRadius), a.stroke(), a.closePath()\r\n            }\r\n        }, this.getTextPostion = function (a, b, c) {\r\n            var d = null;\r\n            return null == a || "Bottom_Center" == a ? d = {x: -this.width / 2 + (this.width - b) / 2, y: this.height / 2 + c} : "Top_Center" == a ? d = {\r\n                x: -this.width / 2 + (this.width - b) / 2,\r\n                y: -this.height / 2 - c / 2\r\n            } : "Top_Right" == a ? d = {x: this.width / 2, y: -this.height / 2 - c / 2} : "Top_Left" == a ? d = {\r\n                x: -this.width / 2 - b,\r\n                y: -this.height / 2 - c / 2\r\n            } : "Bottom_Right" == a ? d = {x: this.width / 2, y: this.height / 2 + c} : "Bottom_Left" == a ? d = {\r\n                x: -this.width / 2 - b,\r\n                y: this.height / 2 + c\r\n            } : "Middle_Center" == a ? d = {x: -this.width / 2 + (this.width - b) / 2, y: c / 2} : "Middle_Right" == a ? d = {\r\n                x: this.width / 2,\r\n                y: c / 2\r\n            } : "Middle_Left" == a && (d = {x: -this.width / 2 - b, y: c / 2}), null != this.textOffsetX && (d.x += this.textOffsetX), null != this.textOffsetY && (d.y += this.textOffsetY), d\r\n        }, this.setImage = function (a, b) {\r\n            if (null == a)throw new Error("Node.setImage(): 参数Image对象为空!");\r\n            var c = this;\r\n            if ("string" == typeof a) {\r\n                var d = j[a];\r\n                null == d ? (d = new Image, d.src = a, d.onload = function () {\r\n                    j[a] = d, 1 == b && c.setSize(d.width, d.height), c.image = d, c.alarmColor = null == c.alarmColor ? "255,0,0" : c.alarmColor\r\n                }) : (b && this.setSize(d.width, d.height), c.image = d, c.alarmColor = null == c.alarmColor ? "255,0,0" : c.alarmColor)\r\n            } else this.image = a, c.alarmColor = null == c.alarmColor ? "255,0,0" : c.alarmColor, 1 == b && this.setSize(a.width, a.height)\r\n        }, this.removeHandler = function (a) {\r\n            var b = this;\r\n            this.outLinks && (this.outLinks.forEach(function (c) {\r\n                c.nodeA === b && a.remove(c)\r\n            }), this.outLinks = null), this.inLinks && (this.inLinks.forEach(function (c) {\r\n                c.nodeZ === b && a.remove(c)\r\n            }), this.inLinks = null)\r\n        }\r\n    }\r\n\r\n    function c() {\r\n        c.prototype.initialize.apply(this, arguments)\r\n    }\r\n\r\n    function d(a) {\r\n        this.initialize(), this.text = a, this.elementType = "TextNode", this.paint = function (a) {\r\n            a.beginPath(), a.font = this.font, this.width = a.measureText(this.text).width, this.height = a.measureText("田").width, a.strokeStyle = "rgba(" + this.fontColor + ", " + this.alpha + ")", a.fillStyle = "rgba(" + this.fontColor + ", " + this.alpha + ")", a.fillText(this.text, -this.width / 2, this.height / 2), a.closePath(), this.paintBorder(a), this.paintCtrl(a), this.paintAlarmText(a)\r\n        }\r\n    }\r\n\r\n    function e(a, b, c) {\r\n        this.initialize(), this.text = a, this.href = b, this.target = c, this.elementType = "LinkNode", this.isVisited = !1, this.visitedColor = null, this.paint = function (a) {\r\n            a.beginPath(), a.font = this.font, this.width = a.measureText(this.text).width, this.height = a.measureText("田").width, this.isVisited && null != this.visitedColor ? (a.strokeStyle = "rgba(" + this.visitedColor + ", " + this.alpha + ")", a.fillStyle = "rgba(" + this.visitedColor + ", " + this.alpha + ")") : (a.strokeStyle = "rgba(" + this.fontColor + ", " + this.alpha + ")", a.fillStyle = "rgba(" + this.fontColor + ", " + this.alpha + ")"), a.fillText(this.text, -this.width / 2, this.height / 2), this.isMouseOver && (a.moveTo(-this.width / 2, this.height), a.lineTo(this.width / 2, this.height), a.stroke()), a.closePath(), this.paintBorder(a), this.paintCtrl(a), this.paintAlarmText(a)\r\n        }, this.mousemove(function () {\r\n            var a = document.getElementsByTagName("canvas");\r\n            if (a && a.length > 0)for (var b = 0; b < a.length; b++)a[b].style.cursor = "pointer"\r\n        }), this.mouseout(function () {\r\n            var a = document.getElementsByTagName("canvas");\r\n            if (a && a.length > 0)for (var b = 0; b < a.length; b++)a[b].style.cursor = "default"\r\n        }), this.click(function () {\r\n            "_blank" == this.target ? window.open(this.href) : location = this.href, this.isVisited = !0\r\n        })\r\n    }\r\n\r\n    function f(a) {\r\n        this.initialize(arguments), this._radius = 20, this.beginDegree = 0, this.endDegree = 2 * Math.PI, this.text = a, this.paint = function (a) {\r\n            a.save(), a.beginPath(), a.fillStyle = "rgba(" + this.fillColor + "," + this.alpha + ")", a.arc(0, 0, this.radius, this.beginDegree, this.endDegree, !0), a.fill(), a.closePath(), a.restore(), this.paintText(a), this.paintBorder(a), this.paintCtrl(a), this.paintAlarmText(a)\r\n        }, this.paintSelected = function (a) {\r\n            a.save(), a.beginPath(), a.strokeStyle = "rgba(168,202,255, 0.9)", a.fillStyle = "rgba(168,202,236,0.7)", a.arc(0, 0, this.radius + 3, this.beginDegree, this.endDegree, !0), a.fill(), a.stroke(), a.closePath(), a.restore()\r\n        }\r\n    }\r\n\r\n    function g(a, b, c) {\r\n        this.initialize(), this.frameImages = a || [], this.frameIndex = 0, this.isStop = !0;\r\n        var d = b || 1e3;\r\n        this.repeatPlay = !1;\r\n        var e = this;\r\n        this.nextFrame = function () {\r\n            if (!this.isStop && null != this.frameImages.length) {\r\n                if (this.frameIndex++, this.frameIndex >= this.frameImages.length) {\r\n                    if (!this.repeatPlay)return;\r\n                    this.frameIndex = 0\r\n                }\r\n                this.setImage(this.frameImages[this.frameIndex], c), setTimeout(function () {\r\n                    e.nextFrame()\r\n                }, d / a.length)\r\n            }\r\n        }\r\n    }\r\n\r\n    function h(a, b, c, d, e) {\r\n        this.initialize();\r\n        var f = this;\r\n        this.setImage(a), this.frameIndex = 0, this.isPause = !0, this.repeatPlay = !1;\r\n        var g = d || 1e3;\r\n        e = e || 0, this.paint = function (a) {\r\n            if (this.image) {\r\n                var b = this.width, d = this.height;\r\n                a.save(), a.beginPath(), a.fillStyle = "rgba(" + this.fillColor + "," + this.alpha + ")";\r\n                var f = (Math.floor(this.frameIndex / c) + e) * d, g = Math.floor(this.frameIndex % c) * b;\r\n                a.drawImage(this.image, g, f, b, d, -b / 2, -d / 2, b, d), a.fill(), a.closePath(), a.restore(), this.paintText(a), this.paintBorder(a), this.paintCtrl(a), this.paintAlarmText(a)\r\n            }\r\n        }, this.nextFrame = function () {\r\n            if (!this.isStop) {\r\n                if (this.frameIndex++, this.frameIndex >= b * c) {\r\n                    if (!this.repeatPlay)return;\r\n                    this.frameIndex = 0\r\n                }\r\n                setTimeout(function () {\r\n                    f.isStop || f.nextFrame()\r\n                }, g / (b * c))\r\n            }\r\n        }\r\n    }\r\n\r\n    function i() {\r\n        var a = null;\r\n        return a = arguments.length <= 3 ? new g(arguments[0], arguments[1], arguments[2]) : new h(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4], arguments[5]), a.stop = function () {\r\n            a.isStop = !0\r\n        }, a.play = function () {\r\n            a.isStop = !1, a.frameIndex = 0, a.nextFrame()\r\n        }, a\r\n    }\r\n\r\n    var j = {};\r\n    b.prototype = new a.EditableElement, c.prototype = new b, Object.defineProperties(c.prototype, {\r\n        alarmColor: {\r\n            get: function () {\r\n                return this._alarmColor\r\n            }, set: function (b) {\r\n                if (this._alarmColor = b, null != this.image) {\r\n                    var c = a.util.genImageAlarm(this.image, b);\r\n                    c && (this.alarmImage = c)\r\n                }\r\n            }\r\n        }\r\n    }), d.prototype = new c, e.prototype = new d, f.prototype = new c, Object.defineProperties(f.prototype, {\r\n        radius: {\r\n            get: function () {\r\n                return this._radius\r\n            }, set: function (a) {\r\n                this._radius = a;\r\n                var b = 2 * this.radius, c = 2 * this.radius;\r\n                this.width = b, this.height = c\r\n            }\r\n        }, width: {\r\n            get: function () {\r\n                return this._width\r\n            }, set: function (a) {\r\n                this._radius = a / 2, this._width = a\r\n            }\r\n        }, height: {\r\n            get: function () {\r\n                return this._height\r\n            }, set: function (a) {\r\n                this._radius = a / 2, this._height = a\r\n            }\r\n        }\r\n    }), g.prototype = new c, h.prototype = new c, i.prototype = new c, a.Node = c, a.TextNode = d, a.LinkNode = e, a.CircleNode = f, a.AnimateNode = i\r\n}(JTopo), function (a) {\r\n    function b(a, b) {\r\n        var c = [];\r\n        if (null == a || null == b)return c;\r\n        if (a && b && a.outLinks && b.inLinks)for (var d = 0; d < a.outLinks.length; d++)for (var e = a.outLinks[d], f = 0; f < b.inLinks.length; f++) {\r\n            var g = b.inLinks[f];\r\n            e === g && c.push(g)\r\n        }\r\n        return c\r\n    }\r\n\r\n    function c(a, c) {\r\n        var d = b(a, c), e = b(c, a), f = d.concat(e);\r\n        return f\r\n    }\r\n\r\n    function d(a) {\r\n        var b = c(a.nodeA, a.nodeZ);\r\n        return b = b.filter(function (b) {\r\n            return a !== b\r\n        })\r\n    }\r\n\r\n    function e(a, b) {\r\n        return c(a, b).length\r\n    }\r\n\r\n    function f(b, c, g) {\r\n        function h(b, c) {\r\n            var d = a.util.lineF(b.cx, b.cy, c.cx, c.cy), e = b.getBound(), f = a.util.intersectionLineBound(d, e);\r\n            return f\r\n        }\r\n\r\n        this.initialize = function (b, c, d) {\r\n            if (f.prototype.initialize.apply(this, arguments), this.elementType = "link", this.zIndex = a.zIndex_Link, 0 != arguments.length) {\r\n                this.text = d, this.nodeA = b, this.nodeZ = c, this.nodeA && null == this.nodeA.outLinks && (this.nodeA.outLinks = []), this.nodeA && null == this.nodeA.inLinks && (this.nodeA.inLinks = []), this.nodeZ && null == this.nodeZ.inLinks && (this.nodeZ.inLinks = []), this.nodeZ && null == this.nodeZ.outLinks && (this.nodeZ.outLinks = []), null != this.nodeA && this.nodeA.outLinks.push(this), null != this.nodeZ && this.nodeZ.inLinks.push(this), this.caculateIndex(), this.font = "12px Consolas", this.fontColor = "255,255,255", this.lineWidth = 2, this.lineJoin = "miter", this.transformAble = !1, this.bundleOffset = 20, this.bundleGap = 12, this.textOffsetX = 0, this.textOffsetY = 0, this.arrowsRadius = null, this.arrowsOffset = 0, this.dashedPattern = null, this.path = [];\r\n                var e = "text,font,fontColor,lineWidth,lineJoin".split(",");\r\n                this.serializedProperties = this.serializedProperties.concat(e)\r\n            }\r\n        }, this.caculateIndex = function () {\r\n            var a = e(this.nodeA, this.nodeZ);\r\n            a > 0 && (this.nodeIndex = a - 1)\r\n        }, this.initialize(b, c, g), this.removeHandler = function () {\r\n            var a = this;\r\n            this.nodeA && this.nodeA.outLinks && (this.nodeA.outLinks = this.nodeA.outLinks.filter(function (b) {\r\n                return b !== a\r\n            })), this.nodeZ && this.nodeZ.inLinks && (this.nodeZ.inLinks = this.nodeZ.inLinks.filter(function (b) {\r\n                return b !== a\r\n            }));\r\n            var b = d(this);\r\n            b.forEach(function (a, b) {\r\n                a.nodeIndex = b\r\n            })\r\n        }, this.getStartPosition = function () {\r\n            var a = {x: this.nodeA.cx, y: this.nodeA.cy};\r\n            return a\r\n        }, this.getEndPosition = function () {\r\n            var a;\r\n            return null != this.arrowsRadius && (a = h(this.nodeZ, this.nodeA)), null == a && (a = {x: this.nodeZ.cx, y: this.nodeZ.cy}), a\r\n        }, this.getPath = function () {\r\n            var a = [], b = this.getStartPosition(), c = this.getEndPosition();\r\n            if (this.nodeA === this.nodeZ)return [b, c];\r\n            var d = e(this.nodeA, this.nodeZ);\r\n            if (1 == d)return [b, c];\r\n            var f = Math.atan2(c.y - b.y, c.x - b.x), g = {x: b.x + this.bundleOffset * Math.cos(f), y: b.y + this.bundleOffset * Math.sin(f)}, h = {\r\n                x: c.x + this.bundleOffset * Math.cos(f - Math.PI),\r\n                y: c.y + this.bundleOffset * Math.sin(f - Math.PI)\r\n            }, i = f - Math.PI / 2, j = f - Math.PI / 2, k = d * this.bundleGap / 2 - this.bundleGap / 2, l = this.bundleGap * this.nodeIndex, m = {\r\n                x: g.x + l * Math.cos(i),\r\n                y: g.y + l * Math.sin(i)\r\n            }, n = {x: h.x + l * Math.cos(j), y: h.y + l * Math.sin(j)};\r\n            return m = {x: m.x + k * Math.cos(i - Math.PI), y: m.y + k * Math.sin(i - Math.PI)}, n = {x: n.x + k * Math.cos(j - Math.PI), y: n.y + k * Math.sin(j - Math.PI)}, a.push({\r\n                x: b.x,\r\n                y: b.y\r\n            }), a.push({x: m.x, y: m.y}), a.push({x: n.x, y: n.y}), a.push({x: c.x, y: c.y}), a\r\n        }, this.paintPath = function (a, b) {\r\n            if (this.nodeA === this.nodeZ)return void this.paintLoop(a);\r\n            a.beginPath(), a.moveTo(b[0].x, b[0].y);\r\n            for (var c = 1; c < b.length; c++)null == this.dashedPattern ? a.lineTo(b[c].x, b[c].y) : a.JTopoDashedLineTo(b[c - 1].x, b[c - 1].y, b[c].x, b[c].y, this.dashedPattern);\r\n            if (a.stroke(), a.closePath(), null != this.arrowsRadius) {\r\n                var d = b[b.length - 2], e = b[b.length - 1];\r\n                this.paintArrow(a, d, e)\r\n            }\r\n        }, this.paintLoop = function (a) {\r\n            a.beginPath();\r\n            {\r\n                var b = this.bundleGap * (this.nodeIndex + 1) / 2;\r\n                Math.PI + Math.PI / 2\r\n            }\r\n            a.arc(this.nodeA.x, this.nodeA.y, b, Math.PI / 2, 2 * Math.PI), a.stroke(), a.closePath()\r\n        }, this.paintArrow = function (b, c, d) {\r\n            var e = this.arrowsOffset, f = this.arrowsRadius / 2, g = c, h = d, i = Math.atan2(h.y - g.y, h.x - g.x), j = a.util.getDistance(g, h) - this.arrowsRadius, k = g.x + (j + e) * Math.cos(i), l = g.y + (j + e) * Math.sin(i), m = h.x + e * Math.cos(i), n = h.y + e * Math.sin(i);\r\n            i -= Math.PI / 2;\r\n            var o = {x: k + f * Math.cos(i), y: l + f * Math.sin(i)}, p = {x: k + f * Math.cos(i - Math.PI), y: l + f * Math.sin(i - Math.PI)};\r\n            b.beginPath(), b.fillStyle = "rgba(" + this.strokeColor + "," + this.alpha + ")", b.moveTo(o.x, o.y), b.lineTo(m, n), b.lineTo(p.x, p.y), b.stroke(), b.closePath()\r\n        }, this.paint = function (a) {\r\n            if (null != this.nodeA && null != !this.nodeZ) {\r\n                var b = this.getPath(this.nodeIndex);\r\n                this.path = b, a.strokeStyle = "rgba(" + this.strokeColor + "," + this.alpha + ")", a.lineWidth = this.lineWidth, this.paintPath(a, b), b && b.length > 0 && this.paintText(a, b)\r\n            }\r\n        };\r\n        var i = -(Math.PI / 2 + Math.PI / 4);\r\n        this.paintText = function (a, b) {\r\n            var c = b[0], d = b[b.length - 1];\r\n            if (4 == b.length && (c = b[1], d = b[2]), this.text && this.text.length > 0) {\r\n                var e = (d.x + c.x) / 2 + this.textOffsetX, f = (d.y + c.y) / 2 + this.textOffsetY;\r\n                a.save(), a.beginPath(), a.font = this.font;\r\n                var g = a.measureText(this.text).width, h = a.measureText("田").width;\r\n                if (a.fillStyle = "rgba(" + this.fontColor + ", " + this.alpha + ")", this.nodeA === this.nodeZ) {\r\n                    var j = this.bundleGap * (this.nodeIndex + 1) / 2, e = this.nodeA.x + j * Math.cos(i), f = this.nodeA.y + j * Math.sin(i);\r\n                    a.fillText(this.text, e, f)\r\n                } else a.fillText(this.text, e - g / 2, f - h / 2);\r\n                a.stroke(), a.closePath(), a.restore()\r\n            }\r\n        }, this.paintSelected = function (a) {\r\n            a.shadowBlur = 10, a.shadowColor = "rgba(0,0,0,1)", a.shadowOffsetX = 0, a.shadowOffsetY = 0\r\n        }, this.isInBound = function (b, c) {\r\n            if (this.nodeA === this.nodeZ) {\r\n                var d = this.bundleGap * (this.nodeIndex + 1) / 2, e = a.util.getDistance(this.nodeA, {x: b, y: c}) - d;\r\n                return Math.abs(e) <= 3\r\n            }\r\n            for (var f = !1, g = 1; g < this.path.length; g++) {\r\n                var h = this.path[g - 1], i = this.path[g];\r\n                if (1 == a.util.isPointInLine({x: b, y: c}, h, i)) {\r\n                    f = !0;\r\n                    break\r\n                }\r\n            }\r\n            return f\r\n        }\r\n    }\r\n\r\n    function g(a, b, c) {\r\n        this.initialize = function () {\r\n            g.prototype.initialize.apply(this, arguments), this.direction = "horizontal"\r\n        }, this.initialize(a, b, c), this.getStartPosition = function () {\r\n            var a = {x: this.nodeA.cx, y: this.nodeA.cy};\r\n            return "horizontal" == this.direction ? this.nodeZ.cx > a.x ? a.x += this.nodeA.width / 2 : a.x -= this.nodeA.width / 2 : this.nodeZ.cy > a.y ? a.y += this.nodeA.height / 2 : a.y -= this.nodeA.height / 2, a\r\n        }, this.getEndPosition = function () {\r\n            var a = {x: this.nodeZ.cx, y: this.nodeZ.cy};\r\n            return "horizontal" == this.direction ? this.nodeA.cy < a.y ? a.y -= this.nodeZ.height / 2 : a.y += this.nodeZ.height / 2 : a.x = this.nodeA.cx < a.x ? this.nodeZ.x : this.nodeZ.x + this.nodeZ.width, a\r\n        }, this.getPath = function (a) {\r\n            var b = [], c = this.getStartPosition(), d = this.getEndPosition();\r\n            if (this.nodeA === this.nodeZ)return [c, d];\r\n            var f, g, h = e(this.nodeA, this.nodeZ), i = (h - 1) * this.bundleGap, j = this.bundleGap * a - i / 2;\r\n            return "horizontal" == this.direction ? (f = d.x + j, g = c.y - j, b.push({x: c.x, y: g}), b.push({x: f, y: g}), b.push({x: f, y: d.y})) : (f = c.x + j, g = d.y - j, b.push({\r\n                x: f,\r\n                y: c.y\r\n            }), b.push({x: f, y: g}), b.push({x: d.x, y: g})), b\r\n        }, this.paintText = function (a, b) {\r\n            if (this.text && this.text.length > 0) {\r\n                var c = b[1], d = c.x + this.textOffsetX, e = c.y + this.textOffsetY;\r\n                a.save(), a.beginPath(), a.font = this.font;\r\n                var f = a.measureText(this.text).width, g = a.measureText("田").width;\r\n                a.fillStyle = "rgba(" + this.fontColor + ", " + this.alpha + ")", a.fillText(this.text, d - f / 2, e - g / 2), a.stroke(), a.closePath(), a.restore()\r\n            }\r\n        }\r\n    }\r\n\r\n    function h(a, b, c) {\r\n        this.initialize = function () {\r\n            h.prototype.initialize.apply(this, arguments), this.direction = "vertical", this.offsetGap = 44\r\n        }, this.initialize(a, b, c), this.getStartPosition = function () {\r\n            var a = {x: this.nodeA.cx, y: this.nodeA.cy};\r\n            return "horizontal" == this.direction ? a.x = this.nodeZ.cx < a.x ? this.nodeA.x : this.nodeA.x + this.nodeA.width : a.y = this.nodeZ.cy < a.y ? this.nodeA.y : this.nodeA.y + this.nodeA.height, a\r\n        }, this.getEndPosition = function () {\r\n            var a = {x: this.nodeZ.cx, y: this.nodeZ.cy};\r\n            return "horizontal" == this.direction ? a.x = this.nodeA.cx < a.x ? this.nodeZ.x : this.nodeZ.x + this.nodeZ.width : a.y = this.nodeA.cy < a.y ? this.nodeZ.y : this.nodeZ.y + this.nodeZ.height, a\r\n        }, this.getPath = function (a) {\r\n            var b = this.getStartPosition(), c = this.getEndPosition();\r\n            if (this.nodeA === this.nodeZ)return [b, c];\r\n            var d = [], f = e(this.nodeA, this.nodeZ), g = (f - 1) * this.bundleGap, h = this.bundleGap * a - g / 2, i = this.offsetGap;\r\n            return "horizontal" == this.direction ? (this.nodeA.cx > this.nodeZ.cx && (i = -i), d.push({x: b.x, y: b.y + h}), d.push({x: b.x + i, y: b.y + h}), d.push({\r\n                x: c.x - i,\r\n                y: c.y + h\r\n            }), d.push({x: c.x, y: c.y + h})) : (this.nodeA.cy > this.nodeZ.cy && (i = -i), d.push({x: b.x + h, y: b.y}), d.push({x: b.x + h, y: b.y + i}), d.push({\r\n                x: c.x + h,\r\n                y: c.y - i\r\n            }), d.push({x: c.x + h, y: c.y})), d\r\n        }\r\n    }\r\n\r\n    function i(a, b, c) {\r\n        this.initialize = function () {\r\n            i.prototype.initialize.apply(this, arguments)\r\n        }, this.initialize(a, b, c), this.paintPath = function (a, b) {\r\n            if (this.nodeA === this.nodeZ)return void this.paintLoop(a);\r\n            a.beginPath(), a.moveTo(b[0].x, b[0].y);\r\n            for (var c = 1; c < b.length; c++) {\r\n                var d = b[c - 1], e = b[c], f = (d.x + e.x) / 2, g = (d.y + e.y) / 2;\r\n                g += (e.y - d.y) / 2, a.strokeStyle = "rgba(" + this.strokeColor + "," + this.alpha + ")", a.lineWidth = this.lineWidth, a.moveTo(d.x, d.cy), a.quadraticCurveTo(f, g, e.x, e.y), a.stroke()\r\n            }\r\n            if (a.stroke(), a.closePath(), null != this.arrowsRadius) {\r\n                var h = b[b.length - 2], i = b[b.length - 1];\r\n                this.paintArrow(a, h, i)\r\n            }\r\n        }\r\n    }\r\n\r\n    f.prototype = new a.InteractiveElement, g.prototype = new f, h.prototype = new f, i.prototype = new f, a.Link = f, a.FoldLink = g, a.FlexionalLink = h, a.CurveLink = i\r\n}(JTopo), function (a) {\r\n    function b(c) {\r\n        this.initialize = function (c) {\r\n            b.prototype.initialize.apply(this, null), this.elementType = "container", this.zIndex = a.zIndex_Container, this.width = 100, this.height = 100, this.childs = [], this.alpha = .5, this.dragable = !0, this.childDragble = !0, this.visible = !0, this.fillColor = "10,100,80", this.borderWidth = 0, this.borderColor = "255,255,255", this.borderRadius = null, this.font = "12px Consolas", this.fontColor = "255,255,255", this.text = c, this.textPosition = "Bottom_Center", this.textOffsetX = 0, this.textOffsetY = 0, this.layout = new a.layout.AutoBoundLayout\r\n        }, this.initialize(c), this.add = function (a) {\r\n            this.childs.push(a), a.dragable = this.childDragble\r\n        }, this.remove = function (a) {\r\n            for (var b = 0; b < this.childs.length; b++)if (this.childs[b] === a) {\r\n                a.parentContainer = null, this.childs = this.childs.del(b), a.lastParentContainer = this;\r\n                break\r\n            }\r\n        }, this.removeAll = function () {\r\n            this.childs = []\r\n        }, this.setLocation = function (a, b) {\r\n            var c = a - this.x, d = b - this.y;\r\n            this.x = a, this.y = b;\r\n            for (var e = 0; e < this.childs.length; e++) {\r\n                var f = this.childs[e];\r\n                f.setLocation(f.x + c, f.y + d)\r\n            }\r\n        }, this.doLayout = function (a) {\r\n            a && a(this, this.childs)\r\n        }, this.paint = function (a) {\r\n            this.visible && (this.layout && this.layout(this, this.childs), a.beginPath(), a.fillStyle = "rgba(" + this.fillColor + "," + this.alpha + ")", null == this.borderRadius || 0 == this.borderRadius ? a.rect(this.x, this.y, this.width, this.height) : a.JTopoRoundRect(this.x, this.y, this.width, this.height, this.borderRadius), a.fill(), a.closePath(), this.paintText(a), this.paintBorder(a))\r\n        }, this.paintBorder = function (a) {\r\n            if (0 != this.borderWidth) {\r\n                a.beginPath(), a.lineWidth = this.borderWidth, a.strokeStyle = "rgba(" + this.borderColor + "," + this.alpha + ")";\r\n                var b = this.borderWidth / 2;\r\n                null == this.borderRadius || 0 == this.borderRadius ? a.rect(this.x - b, this.y - b, this.width + this.borderWidth, this.height + this.borderWidth) : a.JTopoRoundRect(this.x - b, this.y - b, this.width + this.borderWidth, this.height + this.borderWidth, this.borderRadius), a.stroke(), a.closePath()\r\n            }\r\n        }, this.paintText = function (a) {\r\n            var b = this.text;\r\n            if (null != b && "" != b) {\r\n                a.beginPath(), a.font = this.font;\r\n                var c = a.measureText(b).width, d = a.measureText("田").width;\r\n                a.fillStyle = "rgba(" + this.fontColor + ", " + this.alpha + ")";\r\n                var e = this.getTextPostion(this.textPosition, c, d);\r\n                a.fillText(b, e.x, e.y), a.closePath()\r\n            }\r\n        }, this.getTextPostion = function (a, b, c) {\r\n            var d = null;\r\n            return null == a || "Bottom_Center" == a ? d = {x: this.x + this.width / 2 - b / 2, y: this.y + this.height + c} : "Top_Center" == a ? d = {\r\n                x: this.x + this.width / 2 - b / 2,\r\n                y: this.y - c / 2\r\n            } : "Top_Right" == a ? d = {x: this.x + this.width - b, y: this.y - c / 2} : "Top_Left" == a ? d = {x: this.x, y: this.y - c / 2} : "Bottom_Right" == a ? d = {\r\n                x: this.x + this.width - b,\r\n                y: this.y + this.height + c\r\n            } : "Bottom_Left" == a ? d = {x: this.x, y: this.y + this.height + c} : "Middle_Center" == a ? d = {\r\n                x: this.x + this.width / 2 - b / 2,\r\n                y: this.y + this.height / 2 + c / 2\r\n            } : "Middle_Right" == a ? d = {x: this.x + this.width - b, y: this.y + this.height / 2 + c / 2} : "Middle_Left" == a && (d = {\r\n                x: this.x,\r\n                y: this.y + this.height / 2 + c / 2\r\n            }), null != this.textOffsetX && (d.x += this.textOffsetX), null != this.textOffsetY && (d.y += this.textOffsetY), d\r\n        }, this.paintMouseover = function () {\r\n        }, this.paintSelected = function (a) {\r\n            a.shadowBlur = 10, a.shadowColor = "rgba(0,0,0,1)", a.shadowOffsetX = 0, a.shadowOffsetY = 0\r\n        }\r\n    }\r\n\r\n    b.prototype = new a.InteractiveElement, a.Container = b\r\n}(JTopo), function (a) {\r\n    function b(a) {\r\n        var b = 0, c = 0;\r\n        a.forEach(function (a) {\r\n            b += a.cx, c += a.cy\r\n        });\r\n        var d = {x: b / a.length, y: c / a.length};\r\n        return d\r\n    }\r\n\r\n    function c(c, d) {\r\n        null == d && (d = {});\r\n        {\r\n            var e = d.cx, f = d.cy, g = d.minRadius, h = d.nodeDiameter, i = d.hScale || 1, j = d.vScale || 1;\r\n            d.beginAngle || 0, d.endAngle || 2 * Math.PI\r\n        }\r\n        if (null == e || null == f) {\r\n            var k = b(c);\r\n            e = k.x, f = k.y\r\n        }\r\n        var l = 0, m = [], n = [];\r\n        c.forEach(function (a) {\r\n            null == d.nodeDiameter ? (a.diameter && (h = a.diameter), h = a.radius ? 2 * a.radius : Math.sqrt(2 * a.width * a.height), n.push(h)) : n.push(h), l += h\r\n        }), c.forEach(function (a, b) {\r\n            var c = n[b] / l;\r\n            m.push(Math.PI * c)\r\n        });\r\n        var o = (c.length, m[0] + m[1]), p = n[0] / 2 + n[1] / 2, q = p / 2 / Math.sin(o / 2);\r\n        null != g && g > q && (q = g);\r\n        var r = q * i, s = q * j, t = d.animate;\r\n        if (t) {\r\n            var u = t.time || 1e3, v = 0;\r\n            c.forEach(function (b, c) {\r\n                v += 0 == c ? m[c] : m[c - 1] + m[c];\r\n                var d = e + Math.cos(v) * r, g = f + Math.sin(v) * s;\r\n                a.Animate.stepByStep(b, {x: d - b.width / 2, y: g - b.height / 2}, u).start()\r\n            })\r\n        } else {\r\n            var v = 0;\r\n            c.forEach(function (a, b) {\r\n                v += 0 == b ? m[b] : m[b - 1] + m[b];\r\n                var c = e + Math.cos(v) * r, d = f + Math.sin(v) * s;\r\n                a.cx = c, a.cy = d\r\n            })\r\n        }\r\n        return {cx: e, cy: f, radius: r, radiusA: r, radiusB: s}\r\n    }\r\n\r\n    function d(a, b) {\r\n        return function (c) {\r\n            var d = c.childs;\r\n            if (!(d.length <= 0))for (var e = c.getBound(), f = d[0], g = (e.width - f.width) / b, h = (e.height - f.height) / a, i = (d.length, 0), j = 0; a > j; j++)for (var k = 0; b > k; k++) {\r\n                var l = d[i++], m = e.left + g / 2 + k * g, n = e.top + h / 2 + j * h;\r\n                if (l.setLocation(m, n), i >= d.length)return\r\n            }\r\n        }\r\n    }\r\n\r\n    function e(a, b) {\r\n        return null == a && (a = 0), null == b && (b = 0), function (c) {\r\n            var d = c.childs;\r\n            if (!(d.length <= 0))for (var e = c.getBound(), f = e.left, g = e.top, h = 0; h < d.length; h++) {\r\n                var i = d[h];\r\n                f + i.width >= e.right && (f = e.left, g += b + i.height), i.setLocation(f, g), f += a + i.width\r\n            }\r\n        }\r\n    }\r\n\r\n    function f() {\r\n        return function (a, b) {\r\n            if (b.length > 0) {\r\n                for (var c = 1e7, d = -1e7, e = 1e7, f = -1e7, g = d - c, h = f - e, i = 0; i < b.length; i++) {\r\n                    var j = b[i];\r\n                    j.x <= c && (c = j.x), j.x >= d && (d = j.x), j.y <= e && (e = j.y), j.y >= f && (f = j.y), g = d - c + j.width, h = f - e + j.height\r\n                }\r\n                a.x = c, a.y = e, a.width = g, a.height = h\r\n            }\r\n        }\r\n    }\r\n\r\n    function g(b) {\r\n        var c = [], d = b.filter(function (b) {\r\n            return b instanceof a.Link ? !0 : (c.push(b), !1)\r\n        });\r\n        return b = c.filter(function (a) {\r\n            for (var b = 0; b < d.length; b++)if (d[b].nodeZ === a)return !1;\r\n            return !0\r\n        }), b = b.filter(function (a) {\r\n            for (var b = 0; b < d.length; b++)if (d[b].nodeA === a)return !0;\r\n            return !1\r\n        })\r\n    }\r\n\r\n    function h(a) {\r\n        var b = 0, c = 0;\r\n        return a.forEach(function (a) {\r\n            b += a.width, c += a.height\r\n        }), {width: b / a.length, height: c / a.length}\r\n    }\r\n\r\n    function i(a, b, c, d) {\r\n        b.x += c, b.y += d;\r\n        for (var e = q(a, b), f = 0; f < e.length; f++)i(a, e[f], c, d)\r\n    }\r\n\r\n    function j(a, b) {\r\n        function c(b, e) {\r\n            var f = q(a, b);\r\n            null == d[e] && (d[e] = {}, d[e].nodes = [], d[e].childs = []), d[e].nodes.push(b), d[e].childs.push(f);\r\n            for (var g = 0; g < f.length; g++)c(f[g], e + 1), f[g].parent = b\r\n        }\r\n\r\n        var d = [];\r\n        return c(b, 0), d\r\n    }\r\n\r\n    function k(b, c, d) {\r\n        return function (e) {\r\n            function f(f, g) {\r\n                for (var h = a.layout.getTreeDeep(f, g), k = j(f, g), l = k["" + h].nodes, m = 0; m < l.length; m++) {\r\n                    var n = l[m], o = (m + 1) * (c + 10), p = h * d;\r\n                    "down" == b || ("up" == b ? p = -p : "left" == b ? (o = -h * d, p = (m + 1) * (c + 10)) : "right" == b && (o = h * d, p = (m + 1) * (c + 10))), n.setLocation(o, p)\r\n                }\r\n                for (var q = h - 1; q >= 0; q--)for (var r = k["" + q].nodes, s = k["" + q].childs, m = 0; m < r.length; m++) {\r\n                    var t = r[m], u = s[m];\r\n                    if ("down" == b ? t.y = q * d : "up" == b ? t.y = -q * d : "left" == b ? t.x = -q * d : "right" == b && (t.x = q * d), u.length > 0 ? "down" == b || "up" == b ? t.x = (u[0].x + u[u.length - 1].x) / 2 : ("left" == b || "right" == b) && (t.y = (u[0].y + u[u.length - 1].y) / 2) : m > 0 && ("down" == b || "up" == b ? t.x = r[m - 1].x + r[m - 1].width + c : ("left" == b || "right" == b) && (t.y = r[m - 1].y + r[m - 1].height + c)), m > 0)if ("down" == b || "up" == b) {\r\n                        if (t.x < r[m - 1].x + r[m - 1].width)for (var v = r[m - 1].x + r[m - 1].width + c, w = Math.abs(v - t.x), x = m; x < r.length; x++)i(e.childs, r[x], w, 0)\r\n                    } else if (("left" == b || "right" == b) && t.y < r[m - 1].y + r[m - 1].height)for (var y = r[m - 1].y + r[m - 1].height + c, z = Math.abs(y - t.y), x = m; x < r.length; x++)i(e.childs, r[x], 0, z)\r\n                }\r\n            }\r\n\r\n            var g = null;\r\n            null == c && (g = h(e.childs), c = g.width, ("left" == b || "right" == b) && (c = g.width + 10)), null == d && (null == g && (g = h(e.childs)), d = 2 * g.height), null == b && (b = "down");\r\n            var k = a.layout.getRootNodes(e.childs);\r\n            if (k.length > 0) {\r\n                f(e.childs, k[0]);\r\n                var l = a.util.getElementsBound(e.childs), m = e.getCenterLocation(), n = m.x - (l.left + l.right) / 2, o = m.y - (l.top + l.bottom) / 2;\r\n                e.childs.forEach(function (b) {\r\n                    b instanceof a.Node && (b.x += n, b.y += o)\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    function l(b) {\r\n        return function (c) {\r\n            function d(a, c, e) {\r\n                var f = q(a, c);\r\n                if (0 != f.length) {\r\n                    null == e && (e = b);\r\n                    var g = 2 * Math.PI / f.length;\r\n                    f.forEach(function (b, f) {\r\n                        var h = c.x + e * Math.cos(g * f), i = c.y + e * Math.sin(g * f);\r\n                        b.setLocation(h, i);\r\n                        var j = e / 2;\r\n                        d(a, b, j)\r\n                    })\r\n                }\r\n            }\r\n\r\n            var e = a.layout.getRootNodes(c.childs);\r\n            if (e.length > 0) {\r\n                d(c.childs, e[0]);\r\n                var f = a.util.getElementsBound(c.childs), g = c.getCenterLocation(), h = g.x - (f.left + f.right) / 2, i = g.y - (f.top + f.bottom) / 2;\r\n                c.childs.forEach(function (b) {\r\n                    b instanceof a.Node && (b.x += h, b.y += i)\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    function m(a, b, c, d, e, f) {\r\n        for (var g = [], h = 0; c > h; h++)for (var i = 0; d > i; i++)g.push({x: a + i * e, y: b + h * f});\r\n        return g\r\n    }\r\n\r\n    function n(a, b, c, d, e, f) {\r\n        var g = e ? e : 0, h = f ? f : 2 * Math.PI, i = h - g, j = i / c, k = [];\r\n        g += j / 2;\r\n        for (var l = g; h >= l; l += j) {\r\n            var m = a + Math.cos(l) * d, n = b + Math.sin(l) * d;\r\n            k.push({x: m, y: n})\r\n        }\r\n        return k\r\n    }\r\n\r\n    function o(a, b, c, d, e, f) {\r\n        var g = f || "bottom", h = [];\r\n        if ("bottom" == g)for (var i = a - c / 2 * d + d / 2, j = 0; c >= j; j++)h.push({\r\n            x: i + j * d,\r\n            y: b + e\r\n        }); else if ("top" == g)for (var i = a - c / 2 * d + d / 2, j = 0; c >= j; j++)h.push({\r\n            x: i + j * d,\r\n            y: b - e\r\n        }); else if ("right" == g)for (var i = b - c / 2 * d + d / 2, j = 0; c >= j; j++)h.push({\r\n            x: a + e,\r\n            y: i + j * d\r\n        }); else if ("left" == g)for (var i = b - c / 2 * d + d / 2, j = 0; c >= j; j++)h.push({x: a - e, y: i + j * d});\r\n        return h\r\n    }\r\n\r\n    function m(a, b, c, d, e, f) {\r\n        for (var g = [], h = 0; c > h; h++)for (var i = 0; d > i; i++)g.push({x: a + i * e, y: b + h * f});\r\n        return g\r\n    }\r\n\r\n    function p(a, b) {\r\n        if (a.layout) {\r\n            var c = a.layout, d = c.type, e = null;\r\n            if ("circle" == d) {\r\n                var f = c.radius || Math.max(a.width, a.height);\r\n                e = n(a.cx, a.cy, b.length, f, a.layout.beginAngle, a.layout.endAngle)\r\n            } else if ("tree" == d) {\r\n                var g = c.width || 50, h = c.height || 50, i = c.direction;\r\n                e = o(a.cx, a.cy, b.length, g, h, i)\r\n            } else {\r\n                if ("grid" != d)return;\r\n                e = m(a.x, a.y, c.rows, c.cols, c.horizontal || 0, c.vertical || 0)\r\n            }\r\n            for (var j = 0; j < b.length; j++)b[j].setCenterLocation(e[j].x, e[j].y)\r\n        }\r\n    }\r\n\r\n    function q(b, c) {\r\n        for (var d = [], e = 0; e < b.length; e++)b[e] instanceof a.Link && b[e].nodeA === c && d.push(b[e].nodeZ);\r\n        return d\r\n    }\r\n\r\n    function r(a, b, c) {\r\n        var d = q(a.childs, b);\r\n        if (0 == d.length)return null;\r\n        if (p(b, d), 1 == c)for (var e = 0; e < d.length; e++)r(a, d[e], c);\r\n        return null\r\n    }\r\n\r\n    function s(b, c) {\r\n        function d(a, b) {\r\n            var c = a.x - b.x, d = a.y - b.y;\r\n            i += c * f, j += d * f, i *= g, j *= g, j += h, b.x += i, b.y += j\r\n        }\r\n\r\n        function e() {\r\n            if (!(++k > 150)) {\r\n                for (var a = 0; a < l.length; a++)l[a] != b && d(b, l[a], l);\r\n                setTimeout(e, 1e3 / 24)\r\n            }\r\n        }\r\n\r\n        var f = .01, g = .95, h = -5, i = 0, j = 0, k = 0, l = c.getElementsByClass(a.Node);\r\n        e()\r\n    }\r\n\r\n    function t(a, b) {\r\n        function c(a, b, e) {\r\n            var f = q(a, b);\r\n            e > d && (d = e);\r\n            for (var g = 0; g < f.length; g++)c(a, f[g], e + 1)\r\n        }\r\n\r\n        var d = 0;\r\n        return c(a, b, 0), d\r\n    }\r\n\r\n    a.layout = a.Layout = {\r\n        layoutNode: r,\r\n        getNodeChilds: q,\r\n        adjustPosition: p,\r\n        springLayout: s,\r\n        getTreeDeep: t,\r\n        getRootNodes: g,\r\n        GridLayout: d,\r\n        FlowLayout: e,\r\n        AutoBoundLayout: f,\r\n        CircleLayout: l,\r\n        TreeLayout: k,\r\n        getNodesCenter: b,\r\n        circleLayoutNodes: c\r\n    }\r\n}(JTopo), function (a) {\r\n    function b() {\r\n        var b = new a.CircleNode;\r\n        return b.radius = 150, b.colors = ["#3666B0", "#2CA8E0", "#77D1F6"], b.datas = [.3, .3, .4], b.titles = ["A", "B", "C"], b.paint = function (a) {\r\n            var c = 2 * b.radius, d = 2 * b.radius;\r\n            b.width = c, b.height = d;\r\n            for (var e = 0, f = 0; f < this.datas.length; f++) {\r\n                var g = this.datas[f] * Math.PI * 2;\r\n                a.save(), a.beginPath(), a.fillStyle = b.colors[f], a.moveTo(0, 0), a.arc(0, 0, this.radius, e, e + g, !1), a.fill(), a.closePath(), a.restore(), a.beginPath(), a.font = this.font;\r\n                var h = this.titles[f] + ": " + (100 * this.datas[f]).toFixed(2) + "%", i = a.measureText(h).width, j = (a.measureText("田").width, (e + e + g) / 2), k = this.radius * Math.cos(j), l = this.radius * Math.sin(j);\r\n                j > Math.PI / 2 && j <= Math.PI ? k -= i : j > Math.PI && j < 2 * Math.PI * 3 / 4 ? k -= i : j > 2 * Math.PI * .75, a.fillStyle = "#FFFFFF", a.fillText(h, k, l), a.moveTo(this.radius * Math.cos(j), this.radius * Math.sin(j)), j > Math.PI / 2 && j < 2 * Math.PI * 3 / 4 && (k -= i), j > Math.PI, a.fill(), a.stroke(), a.closePath(), e += g\r\n            }\r\n        }, b\r\n    }\r\n\r\n    function c() {\r\n        var b = new a.Node;\r\n        return b.showSelected = !1, b.width = 250, b.height = 180, b.colors = ["#3666B0", "#2CA8E0", "#77D1F6"], b.datas = [.3, .3, .4], b.titles = ["A", "B", "C"], b.paint = function (a) {\r\n            var c = 3, d = (this.width - c) / this.datas.length;\r\n            a.save(), a.beginPath(), a.fillStyle = "#FFFFFF", a.strokeStyle = "#FFFFFF", a.moveTo(-this.width / 2 - 1, -this.height / 2), a.lineTo(-this.width / 2 - 1, this.height / 2 + 3), a.lineTo(this.width / 2 + c + 1, this.height / 2 + 3), a.stroke(), a.closePath(), a.restore();\r\n            for (var e = 0; e < this.datas.length; e++) {\r\n                a.save(), a.beginPath(), a.fillStyle = b.colors[e];\r\n                var f = this.datas[e], g = e * (d + c) - this.width / 2, h = this.height - f - this.height / 2;\r\n                a.fillRect(g, h, d, f);\r\n                var i = "" + parseInt(this.datas[e]), j = a.measureText(i).width, k = a.measureText("田").width;\r\n                a.fillStyle = "#FFFFFF", a.fillText(i, g + (d - j) / 2, h - k), a.fillText(this.titles[e], g + (d - j) / 2, this.height / 2 + k), a.fill(), a.closePath(), a.restore()\r\n            }\r\n        }, b\r\n    }\r\n\r\n    a.BarChartNode = c, a.PieChartNode = b\r\n}(JTopo), function (a) {\r\n    function b(b, c) {\r\n        var d, e = null;\r\n        return {\r\n            stop: function () {\r\n                return d ? (window.clearInterval(d), e && e.publish("stop"), this) : this\r\n            }, start: function () {\r\n                var a = this;\r\n                return d = setInterval(function () {\r\n                    b.call(a)\r\n                }, c), this\r\n            }, onStop: function (b) {\r\n                return null == e && (e = new a.util.MessageBus), e.subscribe("stop", b), this\r\n            }\r\n        }\r\n    }\r\n\r\n    function c(a, c) {\r\n        c = c || {};\r\n        var d = c.gravity || .1, e = c.dx || 0, f = c.dy || 5, g = c.stop, h = c.interval || 30, i = new b(function () {\r\n            g && g() ? (f = .5, this.stop()) : (f += d, a.setLocation(a.x + e, a.y + f))\r\n        }, h);\r\n        return i\r\n    }\r\n\r\n    function d(a, c, d, e, f) {\r\n        var g = 1e3 / 24, h = {};\r\n        for (var i in c) {\r\n            var j = c[i], k = j - a[i];\r\n            h[i] = {\r\n                oldValue: a[i], targetValue: j, step: k / d * g, isDone: function (b) {\r\n                    var c = this.step > 0 && a[b] >= this.targetValue || this.step < 0 && a[b] <= this.targetValue;\r\n                    return c\r\n                }\r\n            }\r\n        }\r\n        var l = new b(function () {\r\n            var b = !0;\r\n            for (var d in c)h[d].isDone(d) || (a[d] += h[d].step, b = !1);\r\n            if (b) {\r\n                if (!e)return this.stop();\r\n                for (var d in c)if (f) {\r\n                    var g = h[d].targetValue;\r\n                    h[d].targetValue = h[d].oldValue, h[d].oldValue = g, h[d].step = -h[d].step\r\n                } else a[d] = h[d].oldValue\r\n            }\r\n            return this\r\n        }, g);\r\n        return l\r\n    }\r\n\r\n    function e(a) {\r\n        null == a && (a = {});\r\n        var b = a.spring || .1, c = a.friction || .8, d = a.grivity || 0, e = (a.wind || 0, a.minLength || 0);\r\n        return {\r\n            items: [], timer: null, isPause: !1, addNode: function (a, b) {\r\n                var c = {node: a, target: b, vx: 0, vy: 0};\r\n                return this.items.push(c), this\r\n            }, play: function (a) {\r\n                this.stop(), a = null == a ? 1e3 / 24 : a;\r\n                var b = this;\r\n                this.timer = setInterval(function () {\r\n                    b.nextFrame()\r\n                }, a)\r\n            }, stop: function () {\r\n                null != this.timer && window.clearInterval(this.timer)\r\n            }, nextFrame: function () {\r\n                for (var a = 0; a < this.items.length; a++) {\r\n                    var f = this.items[a], g = f.node, h = f.target, i = f.vx, j = f.vy, k = h.x - g.x, l = h.y - g.y, m = Math.atan2(l, k);\r\n                    if (0 != e) {\r\n                        var n = h.x - Math.cos(m) * e, o = h.y - Math.sin(m) * e;\r\n                        i += (n - g.x) * b, j += (o - g.y) * b\r\n                    } else i += k * b, j += l * b;\r\n                    i *= c, j *= c, j += d, g.x += i, g.y += j, f.vx = i, f.vy = j\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function f(a, b) {\r\n        function c() {\r\n            return e = setInterval(function () {\r\n                return o ? void f.stop() : (a.rotate += g || .2, void(a.rotate > 2 * Math.PI && (a.rotate = 0)))\r\n            }, 100), f\r\n        }\r\n\r\n        function d() {\r\n            return window.clearInterval(e), f.onStop && f.onStop(a), f\r\n        }\r\n\r\n        var e = (b.context, null), f = {}, g = b.v;\r\n        return f.run = c, f.stop = d, f.onStop = function (a) {\r\n            return f.onStop = a, f\r\n        }, f\r\n    }\r\n\r\n    function g(a, b) {\r\n        function c() {\r\n            return window.clearInterval(g), h.onStop && h.onStop(a), h\r\n        }\r\n\r\n        function d() {\r\n            var d = b.dx || 0, i = b.dy || 2;\r\n            return g = setInterval(function () {\r\n                return o ? void h.stop() : (i += f, void(a.y + a.height < e.stage.canvas.height ? a.setLocation(a.x + d, a.y + i) : (i = 0, c())))\r\n            }, 20), h\r\n        }\r\n\r\n        var e = b.context, f = b.gravity || .1, g = null, h = {};\r\n        return h.run = d, h.stop = c, h.onStop = function (a) {\r\n            return h.onStop = a, h\r\n        }, h\r\n    }\r\n\r\n    function h(b, c) {\r\n        function d(c, d, e, f, g) {\r\n            var h = new a.Node;\r\n            return h.setImage(b.image), h.setSize(b.width, b.height), h.setLocation(c, d), h.showSelected = !1, h.dragable = !1, h.paint = function (a) {\r\n                a.save(), a.arc(0, 0, e, f, g), a.clip(), a.beginPath(), null != this.image ? a.drawImage(this.image, -this.width / 2, -this.height / 2) : (a.fillStyle = "rgba(" + this.style.fillStyle + "," + this.alpha + ")", a.rect(-this.width / 2, -this.height / 2, this.width / 2, this.height / 2), a.fill()), a.closePath(), a.restore()\r\n            }, h\r\n        }\r\n\r\n        function e(c, e) {\r\n            var f = c, g = c + Math.PI, h = d(b.x, b.y, b.width, f, g), j = d(b.x - 2 + 4 * Math.random(), b.y, b.width, f + Math.PI, f);\r\n            b.visible = !1, e.add(h), e.add(j), a.Animate.gravity(h, {context: e, dx: .3}).run().onStop(function () {\r\n                e.remove(h), e.remove(j), i.stop()\r\n            }), a.Animate.gravity(j, {context: e, dx: -.2}).run()\r\n        }\r\n\r\n        function f() {\r\n            return e(c.angle, h), i\r\n        }\r\n\r\n        function g() {\r\n            return i.onStop && i.onStop(b), i\r\n        }\r\n\r\n        var h = c.context, i = (b.style, {});\r\n        return i.onStop = function (a) {\r\n            return i.onStop = a, i\r\n        }, i.run = f, i.stop = g, i\r\n    }\r\n\r\n    function i(a, b) {\r\n        function c(a) {\r\n            a.visible = !0, a.rotate = Math.random();\r\n            var b = g.stage.canvas.width / 2;\r\n            a.x = b + Math.random() * (b - 100) - Math.random() * (b - 100), a.y = g.stage.canvas.height, a.vx = 5 * Math.random() - 5 * Math.random(), a.vy = -25\r\n        }\r\n\r\n        function d() {\r\n            return c(a), h = setInterval(function () {\r\n                return o ? void i.stop() : (a.vy += f, a.x += a.vx, a.y += a.vy, void((a.x < 0 || a.x > g.stage.canvas.width || a.y > g.stage.canvas.height) && (i.onStop && i.onStop(a), c(a))))\r\n            }, 50), i\r\n        }\r\n\r\n        function e() {\r\n            window.clearInterval(h)\r\n        }\r\n\r\n        var f = .8, g = b.context, h = null, i = {};\r\n        return i.onStop = function (a) {\r\n            return i.onStop = a, i\r\n        }, i.run = d, i.stop = e, i\r\n    }\r\n\r\n    function j() {\r\n        o = !0\r\n    }\r\n\r\n    function k() {\r\n        o = !1\r\n    }\r\n\r\n    function l(b, c) {\r\n        function d() {\r\n            return n = setInterval(function () {\r\n                if (o)return void m.stop();\r\n                var a = f.y + h + Math.sin(k) * j;\r\n                b.setLocation(b.x, a), k += l\r\n            }, 100), m\r\n        }\r\n\r\n        function e() {\r\n            window.clearInterval(n)\r\n        }\r\n\r\n        var f = c.p1, g = c.p2, h = (c.context, f.x + (g.x - f.x) / 2), i = f.y + (g.y - f.y) / 2, j = a.util.getDistance(f, g) / 2, k = Math.atan2(i, h), l = c.speed || .2, m = {}, n = null;\r\n        return m.run = d, m.stop = e, m\r\n    }\r\n\r\n    function m(a, b) {\r\n        function c() {\r\n            return h = setInterval(function () {\r\n                if (o)return void g.stop();\r\n                var b = e.x - a.x, c = e.y - a.y, h = b * f, i = c * f;\r\n                a.x += h, a.y += i, .01 > h && .1 > i && d()\r\n            }, 100), g\r\n        }\r\n\r\n        function d() {\r\n            window.clearInterval(h)\r\n        }\r\n\r\n        var e = b.position, f = (b.context, b.easing || .2), g = {}, h = null;\r\n        return g.onStop = function (a) {\r\n            return g.onStop = a, g\r\n        }, g.run = c, g.stop = d, g\r\n    }\r\n\r\n    function n(a, b) {\r\n        function c() {\r\n            return j = setInterval(function () {\r\n                a.scaleX += f, a.scaleY += f, a.scaleX >= e && d()\r\n            }, 100), i\r\n        }\r\n\r\n        function d() {\r\n            i.onStop && i.onStop(a), a.scaleX = g, a.scaleY = h, window.clearInterval(j)\r\n        }\r\n\r\n        var e = (b.position, b.context, b.scale || 1), f = .06, g = a.scaleX, h = a.scaleY, i = {}, j = null;\r\n        return i.onStop = function (a) {\r\n            return i.onStop = a, i\r\n        }, i.run = c, i.stop = d, i\r\n    }\r\n\r\n    a.Animate = {}, a.Effect = {};\r\n    var o = !1;\r\n    a.Effect.spring = e, a.Effect.gravity = c, a.Animate.stepByStep = d, a.Animate.rotate = f, a.Animate.scale = n, a.Animate.move = m, a.Animate.cycle = l, a.Animate.repeatThrow = i, a.Animate.dividedTwoPiece = h, a.Animate.gravity = g, a.Animate.startAll = k, a.Animate.stopAll = j\r\n}(JTopo), function (a) {\r\n    function b(a, b) {\r\n        var c = [];\r\n        if (0 == a.length)return c;\r\n        var d = b.match(/^\\s*(\\w+)\\s*$/);\r\n        if (null != d) {\r\n            var e = a.filter(function (a) {\r\n                return a.elementType == d[1]\r\n            });\r\n            null != e && e.length > 0 && (c = c.concat(e))\r\n        } else {\r\n            var f = !1;\r\n            if (d = b.match(/\\s*(\\w+)\\s*\\[\\s*(\\w+)\\s*([>=<])\\s*[\'"](\\S+)[\'"]\\s*\\]\\s*/), (null == d || d.length < 5) && (d = b.match(/\\s*(\\w+)\\s*\\[\\s*(\\w+)\\s*([>=<])\\s*(\\d+(\\.\\d+)?)\\s*\\]\\s*/), f = !0), null != d && d.length >= 5) {\r\n                var g = d[1], h = d[2], i = d[3], j = d[4];\r\n                e = a.filter(function (a) {\r\n                    if (a.elementType != g)return !1;\r\n                    var b = a[h];\r\n                    return 1 == f && (b = parseInt(b)), "=" == i ? b == j : ">" == i ? b > j : "<" == i ? j > b : "<=" == i ? j >= b : ">=" == i ? b >= j : "!=" == i ? b != j : !1\r\n                }), null != e && e.length > 0 && (c = c.concat(e))\r\n            }\r\n        }\r\n        return c\r\n    }\r\n\r\n    function c(a) {\r\n        if (a.find = function (a) {\r\n                return d.call(this, a)\r\n            }, e.forEach(function (b) {\r\n                a[b] = function (a) {\r\n                    for (var c = 0; c < this.length; c++)this[c][b](a);\r\n                    return this\r\n                }\r\n            }), a.length > 0) {\r\n            var b = a[0];\r\n            for (var c in b) {\r\n                var f = b[c];\r\n                "function" == typeof f && !function (b) {\r\n                    a[c] = function () {\r\n                        for (var c = [], d = 0; d < a.length; d++)c.push(b.apply(a[d], arguments));\r\n                        return c\r\n                    }\r\n                }(f)\r\n            }\r\n        }\r\n        return a.attr = function (a, b) {\r\n            if (null != a && null != b)for (var c = 0; c < this.length; c++)this[c][a] = b; else {\r\n                if (null != a && "string" == typeof a) {\r\n                    for (var d = [], c = 0; c < this.length; c++)d.push(this[c][a]);\r\n                    return d\r\n                }\r\n                if (null != a)for (var c = 0; c < this.length; c++)for (var e in a)this[c][e] = a[e]\r\n            }\r\n            return this\r\n        }, a\r\n    }\r\n\r\n    function d(d) {\r\n        var e = [], f = [];\r\n        this instanceof a.Stage ? (e = this.childs, f = f.concat(e)) : this instanceof a.Scene ? e = [this] : f = this, e.forEach(function (a) {\r\n            f = f.concat(a.childs)\r\n        });\r\n        var g = null;\r\n        return g = "function" == typeof d ? f.filter(d) : b(f, d), g = c(g)\r\n    }\r\n\r\n    var e = "click,mousedown,mouseup,mouseover,mouseout,mousedrag,keydown,keyup".split(",");\r\n    a.Stage.prototype.find = d, a.Scene.prototype.find = d\r\n}(JTopo), function (a) {\r\n    function b(a, b) {\r\n        this.x = a, this.y = b\r\n    }\r\n\r\n    function c(a) {\r\n        this.p = new b(0, 0), this.w = new b(1, 0), this.paint = a\r\n    }\r\n\r\n    function d(a, b, c) {\r\n        return function (d) {\r\n            for (var e = 0; b > e; e++)a(), c && d.turn(c), d.move(3)\r\n        }\r\n    }\r\n\r\n    function e(a, b) {\r\n        var c = 2 * Math.PI;\r\n        return function (d) {\r\n            for (var e = 0; b > e; e++)a(), d.turn(c / b)\r\n        }\r\n    }\r\n\r\n    function f(a, b, c) {\r\n        return function (d) {\r\n            for (var e = 0; b > e; e++)a(), d.resize(c)\r\n        }\r\n    }\r\n\r\n    function g(a) {\r\n        var b = 2 * Math.PI;\r\n        return function (c) {\r\n            for (var d = 0; a > d; d++)c.forward(1), c.turn(b / a)\r\n        }\r\n    }\r\n\r\n    function h(a) {\r\n        var b = 4 * Math.PI;\r\n        return function (c) {\r\n            for (var d = 0; a > d; d++)c.forward(1), c.turn(b / a)\r\n        }\r\n    }\r\n\r\n    function i(a, b, c, d) {\r\n        return function (e) {\r\n            for (var f = 0; b > f; f++)a(), e.forward(1), e.turn(c), e.resize(d)\r\n        }\r\n    }\r\n\r\n    var j = {};\r\n    c.prototype.forward = function (a) {\r\n        var b = this.p, c = this.w;\r\n        return b.x = b.x + a * c.x, b.y = b.y + a * c.y, this.paint && this.paint(b.x, b.y), this\r\n    }, c.prototype.move = function (a) {\r\n        var b = this.p, c = this.w;\r\n        return b.x = b.x + a * c.x, b.y = b.y + a * c.y, this\r\n    }, c.prototype.moveTo = function (a, b) {\r\n        return this.p.x = a, this.p.y = b, this\r\n    }, c.prototype.turn = function (a) {\r\n        var b = (this.p, this.w), c = Math.cos(a) * b.x - Math.sin(a) * b.y, d = Math.sin(a) * b.x + Math.cos(a) * b.y;\r\n        return b.x = c, b.y = d, this\r\n    }, c.prototype.resize = function (a) {\r\n        var b = this.w;\r\n        return b.x = b.x * a, b.y = b.y * a, this\r\n    }, c.prototype.save = function () {\r\n        return null == this._stack && (this._stack = []), this._stack.push([this.p, this.w]), this\r\n    }, c.prototype.restore = function () {\r\n        if (null != this._stack && this._stack.length > 0) {\r\n            var a = this._stack.pop();\r\n            this.p = a[0], this.w = a[1]\r\n        }\r\n        return this\r\n    }, j.Tortoise = c, j.shift = d, j.spin = e, j.polygon = g, j.spiral = i, j.star = h, j.scale = f, a.Logo = j\r\n}(window);//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jb3JlL2xpYi9qdG9wby9qdG9wby1taW4uanM/OTE2OCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxTQUFTO0FBQ1QsU0FBUztBQUNULG1EQUFtRDtBQUNuRDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsU0FBUztBQUNULGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQSxhQUFhLFVBQVU7QUFDdkI7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixPQUFPO0FBQzlCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLCtEQUErRDtBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0EsS0FBSztBQUNMLENBQUM7QUFDRDtBQUNBO0FBQ0EsMkNBQTJDO0FBQzNDO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLHlDQUF5QyxjQUFjO0FBQ3ZEO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxzQkFBc0IsaUdBQWlHLFFBQVEsY0FBYztBQUM3STtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjs7QUFFQTtBQUNB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LEtBQUs7QUFDTCxDQUFDIiwiZmlsZSI6IjMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIhZnVuY3Rpb24gKHdpbmRvdykge1xyXG4gICAgZnVuY3Rpb24gRWxlbWVudCgpIHtcclxuICAgICAgICB0aGlzLmluaXRpYWxpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudFR5cGUgPSBcImVsZW1lbnRcIiwgdGhpcy5zZXJpYWxpemVkUHJvcGVydGllcyA9IFtcImVsZW1lbnRUeXBlXCJdLCB0aGlzLnByb3BlcnRpZXNTdGFjayA9IFtdLCB0aGlzLl9pZCA9IFwiXCIgKyAobmV3IERhdGUpLmdldFRpbWUoKVxyXG4gICAgICAgIH0sIHRoaXMuZGlzdHJveSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB9LCB0aGlzLnJlbW92ZUhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgfSwgdGhpcy5hdHRyID0gZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gYSAmJiBudWxsICE9IGIpdGhpc1thXSA9IGI7IGVsc2UgaWYgKG51bGwgIT0gYSlyZXR1cm4gdGhpc1thXTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXNcclxuICAgICAgICB9LCB0aGlzLnNhdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBhID0gdGhpcywgYiA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLnNlcmlhbGl6ZWRQcm9wZXJ0aWVzLmZvckVhY2goZnVuY3Rpb24gKGMpIHtcclxuICAgICAgICAgICAgICAgIGJbY10gPSBhW2NdXHJcbiAgICAgICAgICAgIH0pLCB0aGlzLnByb3BlcnRpZXNTdGFjay5wdXNoKGIpXHJcbiAgICAgICAgfSwgdGhpcy5yZXN0b3JlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobnVsbCAhPSB0aGlzLnByb3BlcnRpZXNTdGFjayAmJiAwICE9IHRoaXMucHJvcGVydGllc1N0YWNrLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGEgPSB0aGlzLCBiID0gdGhpcy5wcm9wZXJ0aWVzU3RhY2sucG9wKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlcmlhbGl6ZWRQcm9wZXJ0aWVzLmZvckVhY2goZnVuY3Rpb24gKGMpIHtcclxuICAgICAgICAgICAgICAgICAgICBhW2NdID0gYltjXVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIHRoaXMudG9Kc29uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgYSA9IHRoaXMsIGIgPSBcIntcIiwgYyA9IHRoaXMuc2VyaWFsaXplZFByb3BlcnRpZXMubGVuZ3RoO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZXJpYWxpemVkUHJvcGVydGllcy5mb3JFYWNoKGZ1bmN0aW9uIChkLCBlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZiA9IGFbZF07XHJcbiAgICAgICAgICAgICAgICBcInN0cmluZ1wiID09IHR5cGVvZiBmICYmIChmID0gJ1wiJyArIGYgKyAnXCInKSwgYiArPSAnXCInICsgZCArICdcIjonICsgZiwgYyA+IGUgKyAxICYmIChiICs9IFwiLFwiKVxyXG4gICAgICAgICAgICB9KSwgYiArPSBcIn1cIlxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQucHJvdG90eXBlLkpUb3BvUm91bmRSZWN0ID0gZnVuY3Rpb24gKGEsIGIsIGMsIGQsIGUpIHtcclxuICAgICAgICBcInVuZGVmaW5lZFwiID09IHR5cGVvZiBlICYmIChlID0gNSksIHRoaXMuYmVnaW5QYXRoKCksIHRoaXMubW92ZVRvKGEgKyBlLCBiKSwgdGhpcy5saW5lVG8oYSArIGMgLSBlLCBiKSwgdGhpcy5xdWFkcmF0aWNDdXJ2ZVRvKGEgKyBjLCBiLCBhICsgYywgYiArIGUpLCB0aGlzLmxpbmVUbyhhICsgYywgYiArIGQgLSBlKSwgdGhpcy5xdWFkcmF0aWNDdXJ2ZVRvKGEgKyBjLCBiICsgZCwgYSArIGMgLSBlLCBiICsgZCksIHRoaXMubGluZVRvKGEgKyBlLCBiICsgZCksIHRoaXMucXVhZHJhdGljQ3VydmVUbyhhLCBiICsgZCwgYSwgYiArIGQgLSBlKSwgdGhpcy5saW5lVG8oYSwgYiArIGUpLCB0aGlzLnF1YWRyYXRpY0N1cnZlVG8oYSwgYiwgYSArIGUsIGIpLCB0aGlzLmNsb3NlUGF0aCgpXHJcbiAgICB9LCBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQucHJvdG90eXBlLkpUb3BvRGFzaGVkTGluZVRvID0gZnVuY3Rpb24gKGEsIGIsIGMsIGQsIGUpIHtcclxuICAgICAgICBcInVuZGVmaW5lZFwiID09IHR5cGVvZiBlICYmIChlID0gNSk7XHJcbiAgICAgICAgdmFyIGYgPSBjIC0gYSwgZyA9IGQgLSBiLCBoID0gTWF0aC5mbG9vcihNYXRoLnNxcnQoZiAqIGYgKyBnICogZykpLCBpID0gMCA+PSBlID8gaCA6IGggLyBlLCBqID0gZyAvIGggKiBlLCBrID0gZiAvIGggKiBlO1xyXG4gICAgICAgIHRoaXMuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgZm9yICh2YXIgbCA9IDA7IGkgPiBsOyBsKyspbCAlIDIgPyB0aGlzLmxpbmVUbyhhICsgbCAqIGssIGIgKyBsICogaikgOiB0aGlzLm1vdmVUbyhhICsgbCAqIGssIGIgKyBsICogaik7XHJcbiAgICAgICAgdGhpcy5zdHJva2UoKVxyXG4gICAgfSwgSlRvcG8gPSB7XHJcbiAgICAgICAgdmVyc2lvbjogXCIwLjQuOF8wMVwiLFxyXG4gICAgICAgIHpJbmRleF9Db250YWluZXI6IDEsXHJcbiAgICAgICAgekluZGV4X0xpbms6IDIsXHJcbiAgICAgICAgekluZGV4X05vZGU6IDMsXHJcbiAgICAgICAgU2NlbmVNb2RlOiB7bm9ybWFsOiBcIm5vcm1hbFwiLCBkcmFnOiBcImRyYWdcIiwgZWRpdDogXCJlZGl0XCIsIHNlbGVjdDogXCJzZWxlY3RcIn0sXHJcbiAgICAgICAgTW91c2VDdXJzb3I6IHtcclxuICAgICAgICAgICAgbm9ybWFsOiBcImRlZmF1bHRcIixcclxuICAgICAgICAgICAgcG9pbnRlcjogXCJwb2ludGVyXCIsXHJcbiAgICAgICAgICAgIHRvcF9sZWZ0OiBcIm53LXJlc2l6ZVwiLFxyXG4gICAgICAgICAgICB0b3BfY2VudGVyOiBcIm4tcmVzaXplXCIsXHJcbiAgICAgICAgICAgIHRvcF9yaWdodDogXCJuZS1yZXNpemVcIixcclxuICAgICAgICAgICAgbWlkZGxlX2xlZnQ6IFwiZS1yZXNpemVcIixcclxuICAgICAgICAgICAgbWlkZGxlX3JpZ2h0OiBcImUtcmVzaXplXCIsXHJcbiAgICAgICAgICAgIGJvdHRvbV9sZWZ0OiBcIm5lLXJlc2l6ZVwiLFxyXG4gICAgICAgICAgICBib3R0b21fY2VudGVyOiBcIm4tcmVzaXplXCIsXHJcbiAgICAgICAgICAgIGJvdHRvbV9yaWdodDogXCJudy1yZXNpemVcIixcclxuICAgICAgICAgICAgbW92ZTogXCJtb3ZlXCIsXHJcbiAgICAgICAgICAgIG9wZW5faGFuZDogXCJ1cmwoLi9pbWcvY3VyL29wZW5oYW5kLmN1cikgOCA4LCBkZWZhdWx0XCIsXHJcbiAgICAgICAgICAgIGNsb3NlZF9oYW5kOiBcInVybCguL2ltZy9jdXIvY2xvc2VkaGFuZC5jdXIpIDggOCwgZGVmYXVsdFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjcmVhdGVTdGFnZUZyb21Kc29uOiBmdW5jdGlvbiAoanNvblN0ciwgY2FudmFzKSB7XHJcbiAgICAgICAgICAgIGV2YWwoXCJ2YXIganNvbk9iaiA9IFwiICsganNvblN0cik7XHJcbiAgICAgICAgICAgIHZhciBzdGFnZSA9IG5ldyBKVG9wby5TdGFnZShjYW52YXMpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBrIGluIGpzb25PYmopXCJjaGlsZHNcIiAhPSBrICYmIChzdGFnZVtrXSA9IGpzb25PYmpba10pO1xyXG4gICAgICAgICAgICB2YXIgc2NlbmVzID0ganNvbk9iai5jaGlsZHM7XHJcbiAgICAgICAgICAgIHJldHVybiBzY2VuZXMuZm9yRWFjaChmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGIgPSBuZXcgSlRvcG8uU2NlbmUoc3RhZ2UpO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgYyBpbiBhKVwiY2hpbGRzXCIgIT0gYyAmJiAoYltjXSA9IGFbY10pLCBcImJhY2tncm91bmRcIiA9PSBjICYmIChiLmJhY2tncm91bmQgPSBhW2NdKTtcclxuICAgICAgICAgICAgICAgIHZhciBkID0gYS5jaGlsZHM7XHJcbiAgICAgICAgICAgICAgICBkLmZvckVhY2goZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IG51bGwsIGQgPSBhLmVsZW1lbnRUeXBlO1xyXG4gICAgICAgICAgICAgICAgICAgIFwibm9kZVwiID09IGQgPyBjID0gbmV3IEpUb3BvLk5vZGUgOiBcIkNpcmNsZU5vZGVcIiA9PSBkICYmIChjID0gbmV3IEpUb3BvLkNpcmNsZU5vZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUgaW4gYSljW2VdID0gYVtlXTtcclxuICAgICAgICAgICAgICAgICAgICBiLmFkZChjKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSksIHN0YWdlXHJcbiAgICAgICAgfVxyXG4gICAgfSwgSlRvcG8uRWxlbWVudCA9IEVsZW1lbnQsIHdpbmRvdy5KVG9wbyA9IEpUb3BvXHJcbn0od2luZG93KSwgZnVuY3Rpb24gKEpUb3BvKSB7XHJcbiAgICBmdW5jdGlvbiBNZXNzYWdlQnVzKGEpIHtcclxuICAgICAgICB2YXIgYiA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gYSwgdGhpcy5tZXNzYWdlTWFwID0ge30sIHRoaXMubWVzc2FnZUNvdW50ID0gMCwgdGhpcy5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoYSwgYykge1xyXG4gICAgICAgICAgICB2YXIgZCA9IGIubWVzc2FnZU1hcFthXTtcclxuICAgICAgICAgICAgbnVsbCA9PSBkICYmIChiLm1lc3NhZ2VNYXBbYV0gPSBbXSksIGIubWVzc2FnZU1hcFthXS5wdXNoKGMpLCBiLm1lc3NhZ2VDb3VudCsrXHJcbiAgICAgICAgfSwgdGhpcy51bnN1YnNjcmliZSA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHZhciBjID0gYi5tZXNzYWdlTWFwW2FdO1xyXG4gICAgICAgICAgICBudWxsICE9IGMgJiYgKGIubWVzc2FnZU1hcFthXSA9IG51bGwsIGRlbGV0ZSBiLm1lc3NhZ2VNYXBbYV0sIGIubWVzc2FnZUNvdW50LS0pXHJcbiAgICAgICAgfSwgdGhpcy5wdWJsaXNoID0gZnVuY3Rpb24gKGEsIGMsIGQpIHtcclxuICAgICAgICAgICAgdmFyIGUgPSBiLm1lc3NhZ2VNYXBbYV07XHJcbiAgICAgICAgICAgIGlmIChudWxsICE9IGUpZm9yICh2YXIgZiA9IDA7IGYgPCBlLmxlbmd0aDsgZisrKWQgPyAhZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGEoYilcclxuICAgICAgICAgICAgICAgIH0sIDEwKVxyXG4gICAgICAgICAgICB9KGVbZl0sIGMpIDogZVtmXShjKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXREaXN0YW5jZShhLCBiLCBjLCBkKSB7XHJcbiAgICAgICAgdmFyIGUsIGY7XHJcbiAgICAgICAgcmV0dXJuIG51bGwgPT0gYyAmJiBudWxsID09IGQgPyAoZSA9IGIueCAtIGEueCwgZiA9IGIueSAtIGEueSkgOiAoZSA9IGMgLSBhLCBmID0gZCAtIGIpLCBNYXRoLnNxcnQoZSAqIGUgKyBmICogZilcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRFbGVtZW50c0JvdW5kKGEpIHtcclxuICAgICAgICBmb3IgKHZhciBiID0ge2xlZnQ6IE51bWJlci5NQVhfVkFMVUUsIHJpZ2h0OiBOdW1iZXIuTUlOX1ZBTFVFLCB0b3A6IE51bWJlci5NQVhfVkFMVUUsIGJvdHRvbTogTnVtYmVyLk1JTl9WQUxVRX0sIGMgPSAwOyBjIDwgYS5sZW5ndGg7IGMrKykge1xyXG4gICAgICAgICAgICB2YXIgZCA9IGFbY107XHJcbiAgICAgICAgICAgIGQgaW5zdGFuY2VvZiBKVG9wby5MaW5rIHx8IChiLmxlZnQgPiBkLnggJiYgKGIubGVmdCA9IGQueCwgYi5sZWZ0Tm9kZSA9IGQpLCBiLnJpZ2h0IDwgZC54ICsgZC53aWR0aCAmJiAoYi5yaWdodCA9IGQueCArIGQud2lkdGgsIGIucmlnaHROb2RlID0gZCksIGIudG9wID4gZC55ICYmIChiLnRvcCA9IGQueSwgYi50b3BOb2RlID0gZCksIGIuYm90dG9tIDwgZC55ICsgZC5oZWlnaHQgJiYgKGIuYm90dG9tID0gZC55ICsgZC5oZWlnaHQsIGIuYm90dG9tTm9kZSA9IGQpKVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYi53aWR0aCA9IGIucmlnaHQgLSBiLmxlZnQsIGIuaGVpZ2h0ID0gYi5ib3R0b20gLSBiLnRvcCwgYlxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG1vdXNlQ29vcmRzKGEpIHtcclxuICAgICAgICByZXR1cm4gYSA9IGNsb25lRXZlbnQoYSksIGEucGFnZVggfHwgKGEucGFnZVggPSBhLmNsaWVudFggKyBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQgLSBkb2N1bWVudC5ib2R5LmNsaWVudExlZnQsIGEucGFnZVkgPSBhLmNsaWVudFkgKyBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCAtIGRvY3VtZW50LmJvZHkuY2xpZW50VG9wKSwgYVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldEV2ZW50UG9zaXRpb24oYSkge1xyXG4gICAgICAgIHJldHVybiBhID0gbW91c2VDb29yZHMoYSlcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiByb3RhdGVQb2ludChhLCBiLCBjLCBkLCBlKSB7XHJcbiAgICAgICAgdmFyIGYgPSBjIC0gYSwgZyA9IGQgLSBiLCBoID0gTWF0aC5zcXJ0KGYgKiBmICsgZyAqIGcpLCBpID0gTWF0aC5hdGFuMihnLCBmKSArIGU7XHJcbiAgICAgICAgcmV0dXJuIHt4OiBhICsgTWF0aC5jb3MoaSkgKiBoLCB5OiBiICsgTWF0aC5zaW4oaSkgKiBofVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJvdGF0ZVBvaW50cyhhLCBiLCBjKSB7XHJcbiAgICAgICAgZm9yICh2YXIgZCA9IFtdLCBlID0gMDsgZSA8IGIubGVuZ3RoOyBlKyspIHtcclxuICAgICAgICAgICAgdmFyIGYgPSByb3RhdGVQb2ludChhLngsIGEueSwgYltlXS54LCBiW2VdLnksIGMpO1xyXG4gICAgICAgICAgICBkLnB1c2goZilcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiAkZm9yZWFjaChhLCBiLCBjKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZChlKSB7XHJcbiAgICAgICAgICAgIGUgIT0gYS5sZW5ndGggJiYgKGIoYVtlXSksIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZCgrK2UpXHJcbiAgICAgICAgICAgIH0sIGMpKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKDAgIT0gYS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdmFyIGUgPSAwO1xyXG4gICAgICAgICAgICBkKGUpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uICRmb3IoYSwgYiwgYywgZCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGUoYSkge1xyXG4gICAgICAgICAgICBhICE9IGIgJiYgKGMoYiksIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZSgrK2EpXHJcbiAgICAgICAgICAgIH0sIGQpKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCEoYSA+IGIpKSB7XHJcbiAgICAgICAgICAgIHZhciBmID0gMDtcclxuICAgICAgICAgICAgZShmKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjbG9uZUV2ZW50KGEpIHtcclxuICAgICAgICB2YXIgYiA9IHt9O1xyXG4gICAgICAgIGZvciAodmFyIGMgaW4gYSlcInJldHVyblZhbHVlXCIgIT0gYyAmJiBcImtleUxvY2F0aW9uXCIgIT0gYyAmJiAoYltjXSA9IGFbY10pO1xyXG4gICAgICAgIHJldHVybiBiXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY2xvbmUoYSkge1xyXG4gICAgICAgIHZhciBiID0ge307XHJcbiAgICAgICAgZm9yICh2YXIgYyBpbiBhKWJbY10gPSBhW2NdO1xyXG4gICAgICAgIHJldHVybiBiXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaXNQb2ludEluUmVjdChhLCBiKSB7XHJcbiAgICAgICAgdmFyIGMgPSBiLngsIGQgPSBiLnksIGUgPSBiLndpZHRoLCBmID0gYi5oZWlnaHQ7XHJcbiAgICAgICAgcmV0dXJuIGEueCA+IGMgJiYgYS54IDwgYyArIGUgJiYgYS55ID4gZCAmJiBhLnkgPCBkICsgZlxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGlzUG9pbnRJbkxpbmUoYSwgYiwgYykge1xyXG4gICAgICAgIHZhciBkID0gSlRvcG8udXRpbC5nZXREaXN0YW5jZShiLCBjKSwgZSA9IEpUb3BvLnV0aWwuZ2V0RGlzdGFuY2UoYiwgYSksIGYgPSBKVG9wby51dGlsLmdldERpc3RhbmNlKGMsIGEpLCBnID0gTWF0aC5hYnMoZSArIGYgLSBkKSA8PSAuNTtcclxuICAgICAgICByZXR1cm4gZ1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJlbW92ZUZyb21BcnJheShhLCBiKSB7XHJcbiAgICAgICAgZm9yICh2YXIgYyA9IDA7IGMgPCBhLmxlbmd0aDsgYysrKSB7XHJcbiAgICAgICAgICAgIHZhciBkID0gYVtjXTtcclxuICAgICAgICAgICAgaWYgKGQgPT09IGIpIHtcclxuICAgICAgICAgICAgICAgIGEgPSBhLmRlbChjKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiByYW5kb21Db2xvcigpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcigyNTUgKiBNYXRoLnJhbmRvbSgpKSArIFwiLFwiICsgTWF0aC5mbG9vcigyNTUgKiBNYXRoLnJhbmRvbSgpKSArIFwiLFwiICsgTWF0aC5mbG9vcigyNTUgKiBNYXRoLnJhbmRvbSgpKVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGlzSW50c2VjdCgpIHtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRQcm9wZXJ0aWVzKGEsIGIpIHtcclxuICAgICAgICBmb3IgKHZhciBjID0gXCJcIiwgZCA9IDA7IGQgPCBiLmxlbmd0aDsgZCsrKSB7XHJcbiAgICAgICAgICAgIGQgPiAwICYmIChjICs9IFwiLFwiKTtcclxuICAgICAgICAgICAgdmFyIGUgPSBhW2JbZF1dO1xyXG4gICAgICAgICAgICBcInN0cmluZ1wiID09IHR5cGVvZiBlID8gZSA9ICdcIicgKyBlICsgJ1wiJyA6IHZvaWQgMCA9PSBlICYmIChlID0gbnVsbCksIGMgKz0gYltkXSArIFwiOlwiICsgZVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGxvYWRTdGFnZUZyb21Kc29uKGpzb24sIGNhbnZhcykge1xyXG4gICAgICAgIHZhciBvYmogPSBldmFsKGpzb24pLCBzdGFnZSA9IG5ldyBKVG9wby5TdGFnZShjYW52YXMpO1xyXG4gICAgICAgIGZvciAodmFyIGsgaW4gc3RhZ2VPYmopaWYgKFwic2NlbmVzXCIgIT0gaylzdGFnZVtrXSA9IG9ialtrXTsgZWxzZSBmb3IgKHZhciBzY2VuZXMgPSBvYmouc2NlbmVzLCBpID0gMDsgaSA8IHNjZW5lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgc2NlbmVPYmogPSBzY2VuZXNbaV0sIHNjZW5lID0gbmV3IEpUb3BvLlNjZW5lKHN0YWdlKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzY2VuZU9iailpZiAoXCJlbGVtZW50c1wiICE9IHApc2NlbmVbcF0gPSBzY2VuZU9ialtwXTsgZWxzZSBmb3IgKHZhciBub2RlTWFwID0ge30sIGVsZW1lbnRzID0gc2NlbmVPYmouZWxlbWVudHMsIG0gPSAwOyBtIDwgZWxlbWVudHMubGVuZ3RoOyBtKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50T2JqID0gZWxlbWVudHNbbV0sIHR5cGUgPSBlbGVtZW50T2JqLmVsZW1lbnRUeXBlLCBlbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgXCJOb2RlXCIgPT0gdHlwZSAmJiAoZWxlbWVudCA9IG5ldyBKVG9wby5Ob2RlKTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIG1rIGluIGVsZW1lbnRPYmopZWxlbWVudFtta10gPSBlbGVtZW50T2JqW21rXTtcclxuICAgICAgICAgICAgICAgIG5vZGVNYXBbZWxlbWVudC50ZXh0XSA9IGVsZW1lbnQsIHNjZW5lLmFkZChlbGVtZW50KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjb25zb2xlLmxvZyhzdGFnZSksIHN0YWdlXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdG9Kc29uKGEpIHtcclxuICAgICAgICB2YXIgYiA9IFwiYmFja2dyb3VuZENvbG9yLHZpc2libGUsbW9kZSxyb3RhdGUsYWxwaGEsc2NhbGVYLHNjYWxlWSxzaGFkb3csdHJhbnNsYXRlWCx0cmFuc2xhdGVZLGFyZWFTZWxlY3QscGFpbnRBbGxcIi5zcGxpdChcIixcIiksIGMgPSBcInRleHQsZWxlbWVudFR5cGUseCx5LHdpZHRoLGhlaWdodCx2aXNpYmxlLGFscGhhLHJvdGF0ZSxzY2FsZVgsc2NhbGVZLGZpbGxDb2xvcixzaGFkb3csdHJhbnNmb3JtQWJsZSx6SW5kZXgsZHJhZ2FibGUsc2VsZWN0ZWQsc2hvd1NlbGVjdGVkLGZvbnQsZm9udENvbG9yLHRleHRQb3NpdGlvbix0ZXh0T2Zmc2V0WCx0ZXh0T2Zmc2V0WVwiLnNwbGl0KFwiLFwiKSwgZCA9IFwie1wiO1xyXG4gICAgICAgIGQgKz0gXCJmcmFtZXM6XCIgKyBhLmZyYW1lcywgZCArPSBcIiwgc2NlbmVzOltcIjtcclxuICAgICAgICBmb3IgKHZhciBlID0gMDsgZSA8IGEuY2hpbGRzLmxlbmd0aDsgZSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBmID0gYS5jaGlsZHNbZV07XHJcbiAgICAgICAgICAgIGQgKz0gXCJ7XCIsIGQgKz0gZ2V0UHJvcGVydGllcyhmLCBiKSwgZCArPSBcIiwgZWxlbWVudHM6W1wiO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBnID0gMDsgZyA8IGYuY2hpbGRzLmxlbmd0aDsgZysrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaCA9IGYuY2hpbGRzW2ddO1xyXG4gICAgICAgICAgICAgICAgZyA+IDAgJiYgKGQgKz0gXCIsXCIpLCBkICs9IFwie1wiLCBkICs9IGdldFByb3BlcnRpZXMoaCwgYyksIGQgKz0gXCJ9XCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkICs9IFwiXX1cIlxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZCArPSBcIl1cIiwgZCArPSBcIn1cIlxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNoYW5nZUNvbG9yKGEsIGIsIGMpIHtcclxuICAgICAgICB2YXIgZCA9IGMuc3BsaXQoXCIsXCIpLCBlID0gcGFyc2VJbnQoZFswXSksIGYgPSBwYXJzZUludChkWzFdKSwgZyA9IHBhcnNlSW50KGRbMl0pLCBoID0gY2FudmFzLndpZHRoID0gYi53aWR0aCwgaSA9IGNhbnZhcy5oZWlnaHQgPSBiLmhlaWdodDtcclxuICAgICAgICBhLmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpLCBhLmRyYXdJbWFnZShiLCAwLCAwKTtcclxuICAgICAgICBmb3IgKHZhciBqID0gYS5nZXRJbWFnZURhdGEoMCwgMCwgYi53aWR0aCwgYi5oZWlnaHQpLCBrID0gai5kYXRhLCBsID0gMDsgaCA+IGw7IGwrKylmb3IgKHZhciBtID0gMDsgaSA+IG07IG0rKykge1xyXG4gICAgICAgICAgICB2YXIgbiA9IDQgKiAobCArIG0gKiBoKTtcclxuICAgICAgICAgICAgMCAhPSBrW24gKyAzXSAmJiAobnVsbCAhPSBlICYmIChrW24gKyAwXSArPSBlKSwgbnVsbCAhPSBmICYmIChrW24gKyAxXSArPSBmKSwgbnVsbCAhPSBnICYmIChrW24gKyAyXSArPSBnKSlcclxuICAgICAgICB9XHJcbiAgICAgICAgYS5wdXRJbWFnZURhdGEoaiwgMCwgMCwgMCwgMCwgYi53aWR0aCwgYi5oZWlnaHQpO1xyXG4gICAgICAgIHZhciBvID0gY2FudmFzLnRvRGF0YVVSTCgpO1xyXG4gICAgICAgIHJldHVybiBvXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2VuSW1hZ2VBbGFybShhLCBiKSB7XHJcbiAgICAgICAgdmFyIGMgPSBhLnNyYyArIGI7XHJcbiAgICAgICAgaWYgKGFsYXJtSW1hZ2VDYWNoZVtjXSlyZXR1cm4gYWxhcm1JbWFnZUNhY2hlW2NdO1xyXG4gICAgICAgIHZhciBkID0gbmV3IEltYWdlO1xyXG4gICAgICAgIHJldHVybiBkLnNyYyA9IGNoYW5nZUNvbG9yKGdyYXBoaWNzLCBhLCBiKSwgYWxhcm1JbWFnZUNhY2hlW2NdID0gZCwgZFxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldE9mZnNldFBvc2l0aW9uKGEpIHtcclxuICAgICAgICBpZiAoIWEpcmV0dXJuIHtsZWZ0OiAwLCB0b3A6IDB9O1xyXG4gICAgICAgIHZhciBiID0gMCwgYyA9IDA7XHJcbiAgICAgICAgaWYgKFwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0XCIgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KXZhciBkID0gYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgZSA9IGEub3duZXJEb2N1bWVudCwgZiA9IGUuYm9keSwgZyA9IGUuZG9jdW1lbnRFbGVtZW50LCBoID0gZy5jbGllbnRUb3AgfHwgZi5jbGllbnRUb3AgfHwgMCwgaSA9IGcuY2xpZW50TGVmdCB8fCBmLmNsaWVudExlZnQgfHwgMCwgYiA9IGQudG9wICsgKHNlbGYucGFnZVlPZmZzZXQgfHwgZyAmJiBnLnNjcm9sbFRvcCB8fCBmLnNjcm9sbFRvcCkgLSBoLCBjID0gZC5sZWZ0ICsgKHNlbGYucGFnZVhPZmZzZXQgfHwgZyAmJiBnLnNjcm9sbExlZnQgfHwgZi5zY3JvbGxMZWZ0KSAtIGk7IGVsc2UgZG8gYiArPSBhLm9mZnNldFRvcCB8fCAwLCBjICs9IGEub2Zmc2V0TGVmdCB8fCAwLCBhID0gYS5vZmZzZXRQYXJlbnQ7IHdoaWxlIChhKTtcclxuICAgICAgICByZXR1cm4ge2xlZnQ6IGMsIHRvcDogYn1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBsaW5lRihhLCBiLCBjLCBkKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZShhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhICogZiArIGdcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBmID0gKGQgLSBiKSAvIChjIC0gYSksIGcgPSBiIC0gYSAqIGY7XHJcbiAgICAgICAgcmV0dXJuIGUuayA9IGYsIGUuYiA9IGcsIGUueDEgPSBhLCBlLngyID0gYywgZS55MSA9IGIsIGUueTIgPSBkLCBlXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaW5SYW5nZShhLCBiLCBjKSB7XHJcbiAgICAgICAgdmFyIGQgPSBNYXRoLmFicyhiIC0gYyksIGUgPSBNYXRoLmFicyhiIC0gYSksIGYgPSBNYXRoLmFicyhjIC0gYSksIGcgPSBNYXRoLmFicyhkIC0gKGUgKyBmKSk7XHJcbiAgICAgICAgcmV0dXJuIDFlLTYgPiBnID8gITAgOiAhMVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGlzUG9pbnRJbkxpbmVTZWcoYSwgYiwgYykge1xyXG4gICAgICAgIHJldHVybiBpblJhbmdlKGEsIGMueDEsIGMueDIpICYmIGluUmFuZ2UoYiwgYy55MSwgYy55MilcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBpbnRlcnNlY3Rpb24oYSwgYikge1xyXG4gICAgICAgIHZhciBjLCBkO1xyXG4gICAgICAgIHJldHVybiBhLmsgPT0gYi5rID8gbnVsbCA6ICgxIC8gMCA9PSBhLmsgfHwgYS5rID09IC0xIC8gMCA/IChjID0gYS54MSwgZCA9IGIoYS54MSkpIDogMSAvIDAgPT0gYi5rIHx8IGIuayA9PSAtMSAvIDAgPyAoYyA9IGIueDEsIGQgPSBhKGIueDEpKSA6IChjID0gKGIuYiAtIGEuYikgLyAoYS5rIC0gYi5rKSwgZCA9IGEoYykpLCAwID09IGlzUG9pbnRJbkxpbmVTZWcoYywgZCwgYSkgPyBudWxsIDogMCA9PSBpc1BvaW50SW5MaW5lU2VnKGMsIGQsIGIpID8gbnVsbCA6IHtcclxuICAgICAgICAgICAgeDogYyxcclxuICAgICAgICAgICAgeTogZFxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaW50ZXJzZWN0aW9uTGluZUJvdW5kKGEsIGIpIHtcclxuICAgICAgICB2YXIgYyA9IEpUb3BvLnV0aWwubGluZUYoYi5sZWZ0LCBiLnRvcCwgYi5sZWZ0LCBiLmJvdHRvbSksIGQgPSBKVG9wby51dGlsLmludGVyc2VjdGlvbihhLCBjKTtcclxuICAgICAgICByZXR1cm4gbnVsbCA9PSBkICYmIChjID0gSlRvcG8udXRpbC5saW5lRihiLmxlZnQsIGIudG9wLCBiLnJpZ2h0LCBiLnRvcCksIGQgPSBKVG9wby51dGlsLmludGVyc2VjdGlvbihhLCBjKSwgbnVsbCA9PSBkICYmIChjID0gSlRvcG8udXRpbC5saW5lRihiLnJpZ2h0LCBiLnRvcCwgYi5yaWdodCwgYi5ib3R0b20pLCBkID0gSlRvcG8udXRpbC5pbnRlcnNlY3Rpb24oYSwgYyksIG51bGwgPT0gZCAmJiAoYyA9IEpUb3BvLnV0aWwubGluZUYoYi5sZWZ0LCBiLmJvdHRvbSwgYi5yaWdodCwgYi5ib3R0b20pLCBkID0gSlRvcG8udXRpbC5pbnRlcnNlY3Rpb24oYSwgYykpKSksIGRcclxuICAgIH1cclxuXHJcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cubXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93Lm9SZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dChhLCAxZTMgLyAyNClcclxuICAgICAgICB9LCBBcnJheS5wcm90b3R5cGUuZGVsID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICBpZiAoXCJudW1iZXJcIiAhPSB0eXBlb2YgYSkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBiID0gMDsgYiA8IHRoaXMubGVuZ3RoOyBiKyspaWYgKHRoaXNbYl0gPT09IGEpcmV0dXJuIHRoaXMuc2xpY2UoMCwgYikuY29uY2F0KHRoaXMuc2xpY2UoYiArIDEsIHRoaXMubGVuZ3RoKSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAwID4gYSA/IHRoaXMgOiB0aGlzLnNsaWNlKDAsIGEpLmNvbmNhdCh0aGlzLnNsaWNlKGEgKyAxLCB0aGlzLmxlbmd0aCkpXHJcbiAgICB9LCBbXS5pbmRleE9mIHx8IChBcnJheS5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgZm9yICh2YXIgYiA9IDA7IGIgPCB0aGlzLmxlbmd0aDsgYisrKWlmICh0aGlzW2JdID09PSBhKXJldHVybiBiO1xyXG4gICAgICAgIHJldHVybiAtMVxyXG4gICAgfSksIHdpbmRvdy5jb25zb2xlIHx8ICh3aW5kb3cuY29uc29sZSA9IHtcclxuICAgICAgICBsb2c6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB9LCBpbmZvOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgfSwgZGVidWc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB9LCB3YXJuOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgfSwgZXJyb3I6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLCBncmFwaGljcyA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIiksIGFsYXJtSW1hZ2VDYWNoZSA9IHt9O1xyXG4gICAgSlRvcG8udXRpbCA9IHtcclxuICAgICAgICByb3RhdGVQb2ludDogcm90YXRlUG9pbnQsXHJcbiAgICAgICAgcm90YXRlUG9pbnRzOiByb3RhdGVQb2ludHMsXHJcbiAgICAgICAgZ2V0RGlzdGFuY2U6IGdldERpc3RhbmNlLFxyXG4gICAgICAgIGdldEV2ZW50UG9zaXRpb246IGdldEV2ZW50UG9zaXRpb24sXHJcbiAgICAgICAgbW91c2VDb29yZHM6IG1vdXNlQ29vcmRzLFxyXG4gICAgICAgIE1lc3NhZ2VCdXM6IE1lc3NhZ2VCdXMsXHJcbiAgICAgICAgaXNGaXJlZm94OiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCJGaXJlZm94XCIpID4gMCxcclxuICAgICAgICBpc0lFOiAhKCF3aW5kb3cuYXR0YWNoRXZlbnQgfHwgLTEgIT09IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIk9wZXJhXCIpKSxcclxuICAgICAgICBpc0Nocm9tZTogbnVsbCAhPSBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkubWF0Y2goL2Nocm9tZS8pLFxyXG4gICAgICAgIGNsb25lOiBjbG9uZSxcclxuICAgICAgICBpc1BvaW50SW5SZWN0OiBpc1BvaW50SW5SZWN0LFxyXG4gICAgICAgIGlzUG9pbnRJbkxpbmU6IGlzUG9pbnRJbkxpbmUsXHJcbiAgICAgICAgcmVtb3ZlRnJvbUFycmF5OiByZW1vdmVGcm9tQXJyYXksXHJcbiAgICAgICAgY2xvbmVFdmVudDogY2xvbmVFdmVudCxcclxuICAgICAgICByYW5kb21Db2xvcjogcmFuZG9tQ29sb3IsXHJcbiAgICAgICAgaXNJbnRzZWN0OiBpc0ludHNlY3QsXHJcbiAgICAgICAgdG9Kc29uOiB0b0pzb24sXHJcbiAgICAgICAgbG9hZFN0YWdlRnJvbUpzb246IGxvYWRTdGFnZUZyb21Kc29uLFxyXG4gICAgICAgIGdldEVsZW1lbnRzQm91bmQ6IGdldEVsZW1lbnRzQm91bmQsXHJcbiAgICAgICAgZ2VuSW1hZ2VBbGFybTogZ2VuSW1hZ2VBbGFybSxcclxuICAgICAgICBnZXRPZmZzZXRQb3NpdGlvbjogZ2V0T2Zmc2V0UG9zaXRpb24sXHJcbiAgICAgICAgbGluZUY6IGxpbmVGLFxyXG4gICAgICAgIGludGVyc2VjdGlvbjogaW50ZXJzZWN0aW9uLFxyXG4gICAgICAgIGludGVyc2VjdGlvbkxpbmVCb3VuZDogaW50ZXJzZWN0aW9uTGluZUJvdW5kXHJcbiAgICB9LCB3aW5kb3cuJGZvciA9ICRmb3IsIHdpbmRvdy4kZm9yZWFjaCA9ICRmb3JlYWNoXHJcbn0oSlRvcG8pLCBmdW5jdGlvbiAoYSkge1xyXG4gICAgZnVuY3Rpb24gYihhKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaGdhcDogMTYsIHZpc2libGU6ICExLCBleHBvcnRDYW52YXM6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksIGdldEltYWdlOiBmdW5jdGlvbiAoYiwgYykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGQgPSBhLmdldEJvdW5kKCksIGUgPSAxLCBmID0gMTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXhwb3J0Q2FudmFzLndpZHRoID0gYS5jYW52YXMud2lkdGgsIHRoaXMuZXhwb3J0Q2FudmFzLmhlaWdodCA9IGEuY2FudmFzLmhlaWdodCwgbnVsbCAhPSBiICYmIG51bGwgIT0gYyA/ICh0aGlzLmV4cG9ydENhbnZhcy53aWR0aCA9IGIsIHRoaXMuZXhwb3J0Q2FudmFzLmhlaWdodCA9IGMsIGUgPSBiIC8gZC53aWR0aCwgZiA9IGMgLyBkLmhlaWdodCkgOiAoZC53aWR0aCA+IGEuY2FudmFzLndpZHRoICYmICh0aGlzLmV4cG9ydENhbnZhcy53aWR0aCA9IGQud2lkdGgpLCBkLmhlaWdodCA+IGEuY2FudmFzLmhlaWdodCAmJiAodGhpcy5leHBvcnRDYW52YXMuaGVpZ2h0ID0gZC5oZWlnaHQpKTtcclxuICAgICAgICAgICAgICAgIHZhciBnID0gdGhpcy5leHBvcnRDYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGEuY2hpbGRzLmxlbmd0aCA+IDAgJiYgKGcuc2F2ZSgpLCBnLmNsZWFyUmVjdCgwLCAwLCB0aGlzLmV4cG9ydENhbnZhcy53aWR0aCwgdGhpcy5leHBvcnRDYW52YXMuaGVpZ2h0KSwgYS5jaGlsZHMuZm9yRWFjaChmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIDEgPT0gYS52aXNpYmxlICYmIChhLnNhdmUoKSwgYS50cmFuc2xhdGVYID0gMCwgYS50cmFuc2xhdGVZID0gMCwgYS5zY2FsZVggPSAxLCBhLnNjYWxlWSA9IDEsIGcuc2NhbGUoZSwgZiksIGQubGVmdCA8IDAgJiYgKGEudHJhbnNsYXRlWCA9IE1hdGguYWJzKGQubGVmdCkpLCBkLnRvcCA8IDAgJiYgKGEudHJhbnNsYXRlWSA9IE1hdGguYWJzKGQudG9wKSksIGEucGFpbnRBbGwgPSAhMCwgYS5yZXBhaW50KGcpLCBhLnBhaW50QWxsID0gITEsIGEucmVzdG9yZSgpKVxyXG4gICAgICAgICAgICAgICAgfSksIGcucmVzdG9yZSgpKSwgdGhpcy5leHBvcnRDYW52YXMudG9EYXRhVVJMKFwiaW1hZ2UvcG5nXCIpXHJcbiAgICAgICAgICAgIH0sIGNhbnZhczogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSwgdXBkYXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVhZ2xlSW1hZ2VEYXRhcyA9IHRoaXMuZ2V0RGF0YShhKVxyXG4gICAgICAgICAgICB9LCBzZXRTaXplOiBmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy53aWR0aCA9IHRoaXMuY2FudmFzLndpZHRoID0gYSwgdGhpcy5oZWlnaHQgPSB0aGlzLmNhbnZhcy5oZWlnaHQgPSBiXHJcbiAgICAgICAgICAgIH0sIGdldERhdGE6IGZ1bmN0aW9uIChiLCBjKSB7XHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBkKGEpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IGEuc3RhZ2UuY2FudmFzLndpZHRoLCBjID0gYS5zdGFnZS5jYW52YXMuaGVpZ2h0LCBkID0gYiAvIGEuc2NhbGVYIC8gMiwgZSA9IGMgLyBhLnNjYWxlWSAvIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHt0cmFuc2xhdGVYOiBhLnRyYW5zbGF0ZVggKyBkIC0gZCAqIGEuc2NhbGVYLCB0cmFuc2xhdGVZOiBhLnRyYW5zbGF0ZVkgKyBlIC0gZSAqIGEuc2NhbGVZfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIG51bGwgIT0gaiAmJiBudWxsICE9IGsgPyB0aGlzLnNldFNpemUoYiwgYykgOiB0aGlzLnNldFNpemUoMjAwLCAxNjApO1xyXG4gICAgICAgICAgICAgICAgdmFyIGUgPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAoYS5jaGlsZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGUuc2F2ZSgpLCBlLmNsZWFyUmVjdCgwLCAwLCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KSwgYS5jaGlsZHMuZm9yRWFjaChmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAxID09IGEudmlzaWJsZSAmJiAoYS5zYXZlKCksIGEuY2VudGVyQW5kWm9vbShudWxsLCBudWxsLCBlKSwgYS5yZXBhaW50KGUpLCBhLnJlc3RvcmUoKSlcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IGQoYS5jaGlsZHNbMF0pLCBnID0gZi50cmFuc2xhdGVYICogKHRoaXMuY2FudmFzLndpZHRoIC8gYS5jYW52YXMud2lkdGgpICogYS5jaGlsZHNbMF0uc2NhbGVYLCBoID0gZi50cmFuc2xhdGVZICogKHRoaXMuY2FudmFzLmhlaWdodCAvIGEuY2FudmFzLmhlaWdodCkgKiBhLmNoaWxkc1swXS5zY2FsZVksIGkgPSBhLmdldEJvdW5kKCksIGogPSBhLmNhbnZhcy53aWR0aCAvIGEuY2hpbGRzWzBdLnNjYWxlWCAvIGkud2lkdGgsIGsgPSBhLmNhbnZhcy5oZWlnaHQgLyBhLmNoaWxkc1swXS5zY2FsZVkgLyBpLmhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICBqID4gMSAmJiAoaiA9IDEpLCBrID4gMSAmJiAoaiA9IDEpLCBnICo9IGosIGggKj0gaywgaS5sZWZ0IDwgMCAmJiAoZyAtPSBNYXRoLmFicyhpLmxlZnQpICogKHRoaXMud2lkdGggLyBpLndpZHRoKSksIGkudG9wIDwgMCAmJiAoaCAtPSBNYXRoLmFicyhpLnRvcCkgKiAodGhpcy5oZWlnaHQgLyBpLmhlaWdodCkpLCBlLnNhdmUoKSwgZS5saW5lV2lkdGggPSAxLCBlLnN0cm9rZVN0eWxlID0gXCJyZ2JhKDI1NSwwLDAsMSlcIiwgZS5zdHJva2VSZWN0KC1nLCAtaCwgZS5jYW52YXMud2lkdGggKiBqLCBlLmNhbnZhcy5oZWlnaHQgKiBrKSwgZS5yZXN0b3JlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGwgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBlLmdldEltYWdlRGF0YSgwLCAwLCBlLmNhbnZhcy53aWR0aCwgZS5jYW52YXMuaGVpZ2h0KVxyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKG0pIHtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsXHJcbiAgICAgICAgICAgIH0sIHBhaW50OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSB0aGlzLmVhZ2xlSW1hZ2VEYXRhcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBiID0gYS5ncmFwaGljcztcclxuICAgICAgICAgICAgICAgICAgICBiLnNhdmUoKSwgYi5maWxsU3R5bGUgPSBcInJnYmEoMjExLDIxMSwyMTEsMC4zKVwiLCBiLmZpbGxSZWN0KGEuY2FudmFzLndpZHRoIC0gdGhpcy5jYW52YXMud2lkdGggLSAyICogdGhpcy5oZ2FwLCBhLmNhbnZhcy5oZWlnaHQgLSB0aGlzLmNhbnZhcy5oZWlnaHQgLSAxLCBhLmNhbnZhcy53aWR0aCAtIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQgKyAxKSwgYi5maWxsKCksIGIuc2F2ZSgpLCBiLmxpbmVXaWR0aCA9IDEsIGIuc3Ryb2tlU3R5bGUgPSBcInJnYmEoMCwwLDAsMSlcIiwgYi5yZWN0KGEuY2FudmFzLndpZHRoIC0gdGhpcy5jYW52YXMud2lkdGggLSAyICogdGhpcy5oZ2FwLCBhLmNhbnZhcy5oZWlnaHQgLSB0aGlzLmNhbnZhcy5oZWlnaHQgLSAxLCBhLmNhbnZhcy53aWR0aCAtIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQgKyAxKSwgYi5zdHJva2UoKSwgYi5yZXN0b3JlKCksIGIucHV0SW1hZ2VEYXRhKHRoaXMuZWFnbGVJbWFnZURhdGFzLCBhLmNhbnZhcy53aWR0aCAtIHRoaXMuY2FudmFzLndpZHRoIC0gdGhpcy5oZ2FwLCBhLmNhbnZhcy5oZWlnaHQgLSB0aGlzLmNhbnZhcy5oZWlnaHQpLCBiLnJlc3RvcmUoKVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHRoaXMuZWFnbGVJbWFnZURhdGFzID0gdGhpcy5nZXREYXRhKGEpXHJcbiAgICAgICAgICAgIH0sIGV2ZW50SGFuZGxlcjogZnVuY3Rpb24gKGEsIGIsIGMpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkID0gYi54LCBlID0gYi55O1xyXG4gICAgICAgICAgICAgICAgaWYgKGQgPiBjLmNhbnZhcy53aWR0aCAtIHRoaXMuY2FudmFzLndpZHRoICYmIGUgPiBjLmNhbnZhcy5oZWlnaHQgLSB0aGlzLmNhbnZhcy5oZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZCA9IGIueCAtIHRoaXMuY2FudmFzLndpZHRoLCBlID0gYi55IC0gdGhpcy5jYW52YXMuaGVpZ2h0LCBcIm1vdXNlZG93blwiID09IGEgJiYgKHRoaXMubGFzdFRyYW5zbGF0ZVggPSBjLmNoaWxkc1swXS50cmFuc2xhdGVYLCB0aGlzLmxhc3RUcmFuc2xhdGVZID0gYy5jaGlsZHNbMF0udHJhbnNsYXRlWSksIFwibW91c2VkcmFnXCIgPT0gYSAmJiBjLmNoaWxkcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmID0gYi5keCwgZyA9IGIuZHksIGggPSBjLmdldEJvdW5kKCksIGkgPSB0aGlzLmNhbnZhcy53aWR0aCAvIGMuY2hpbGRzWzBdLnNjYWxlWCAvIGgud2lkdGgsIGogPSB0aGlzLmNhbnZhcy5oZWlnaHQgLyBjLmNoaWxkc1swXS5zY2FsZVkgLyBoLmhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYy5jaGlsZHNbMF0udHJhbnNsYXRlWCA9IHRoaXMubGFzdFRyYW5zbGF0ZVggLSBmIC8gaSwgYy5jaGlsZHNbMF0udHJhbnNsYXRlWSA9IHRoaXMubGFzdFRyYW5zbGF0ZVkgLSBnIC8galxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjKGMpIHtcclxuICAgICAgICBmdW5jdGlvbiBkKGIpIHtcclxuICAgICAgICAgICAgdmFyIGMgPSBhLnV0aWwuZ2V0RXZlbnRQb3NpdGlvbihiKSwgZCA9IGEudXRpbC5nZXRPZmZzZXRQb3NpdGlvbihuLmNhbnZhcyk7XHJcbiAgICAgICAgICAgIHJldHVybiBjLm9mZnNldExlZnQgPSBjLnBhZ2VYIC0gZC5sZWZ0LCBjLm9mZnNldFRvcCA9IGMucGFnZVkgLSBkLnRvcCwgYy54ID0gYy5vZmZzZXRMZWZ0LCBjLnkgPSBjLm9mZnNldFRvcCwgYy50YXJnZXQgPSBudWxsLCBjXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBlKGEpIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQub25zZWxlY3RzdGFydCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAhMVxyXG4gICAgICAgICAgICB9LCB0aGlzLm1vdXNlT3ZlciA9ICEwO1xyXG4gICAgICAgICAgICB2YXIgYiA9IGQoYSk7XHJcbiAgICAgICAgICAgIG4uZGlzcGF0Y2hFdmVudFRvU2NlbmVzKFwibW91c2VvdmVyXCIsIGIpLCBuLmRpc3BhdGNoRXZlbnQoXCJtb3VzZW92ZXJcIiwgYilcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGYoYSkge1xyXG4gICAgICAgICAgICBwID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBvID0gITBcclxuICAgICAgICAgICAgfSwgNTAwKSwgZG9jdW1lbnQub25zZWxlY3RzdGFydCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAhMFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgYiA9IGQoYSk7XHJcbiAgICAgICAgICAgIG4uZGlzcGF0Y2hFdmVudFRvU2NlbmVzKFwibW91c2VvdXRcIiwgYiksIG4uZGlzcGF0Y2hFdmVudChcIm1vdXNlb3V0XCIsIGIpLCBuLm5lZWRSZXBhaW50ID0gMCA9PSBuLmFuaW1hdGUgPyAhMSA6ICEwXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBnKGEpIHtcclxuICAgICAgICAgICAgdmFyIGIgPSBkKGEpO1xyXG4gICAgICAgICAgICBuLm1vdXNlRG93biA9ICEwLCBuLm1vdXNlRG93blggPSBiLngsIG4ubW91c2VEb3duWSA9IGIueSwgbi5kaXNwYXRjaEV2ZW50VG9TY2VuZXMoXCJtb3VzZWRvd25cIiwgYiksIG4uZGlzcGF0Y2hFdmVudChcIm1vdXNlZG93blwiLCBiKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaChhKSB7XHJcbiAgICAgICAgICAgIHZhciBiID0gZChhKTtcclxuICAgICAgICAgICAgbi5kaXNwYXRjaEV2ZW50VG9TY2VuZXMoXCJtb3VzZXVwXCIsIGIpLCBuLmRpc3BhdGNoRXZlbnQoXCJtb3VzZXVwXCIsIGIpLCBuLm1vdXNlRG93biA9ICExLCBuLm5lZWRSZXBhaW50ID0gMCA9PSBuLmFuaW1hdGUgPyAhMSA6ICEwXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBpKGEpIHtcclxuICAgICAgICAgICAgcCAmJiAod2luZG93LmNsZWFyVGltZW91dChwKSwgcCA9IG51bGwpLCBvID0gITE7XHJcbiAgICAgICAgICAgIHZhciBiID0gZChhKTtcclxuICAgICAgICAgICAgbi5tb3VzZURvd24gPyAwID09IGEuYnV0dG9uICYmIChiLmR4ID0gYi54IC0gbi5tb3VzZURvd25YLCBiLmR5ID0gYi55IC0gbi5tb3VzZURvd25ZLCBuLmRpc3BhdGNoRXZlbnRUb1NjZW5lcyhcIm1vdXNlZHJhZ1wiLCBiKSwgbi5kaXNwYXRjaEV2ZW50KFwibW91c2VkcmFnXCIsIGIpLCAxID09IG4uZWFnbGVFeWUudmlzaWJsZSAmJiBuLmVhZ2xlRXllLnVwZGF0ZSgpKSA6IChuLmRpc3BhdGNoRXZlbnRUb1NjZW5lcyhcIm1vdXNlbW92ZVwiLCBiKSwgbi5kaXNwYXRjaEV2ZW50KFwibW91c2Vtb3ZlXCIsIGIpKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaihhKSB7XHJcbiAgICAgICAgICAgIHZhciBiID0gZChhKTtcclxuICAgICAgICAgICAgbi5kaXNwYXRjaEV2ZW50VG9TY2VuZXMoXCJjbGlja1wiLCBiKSwgbi5kaXNwYXRjaEV2ZW50KFwiY2xpY2tcIiwgYilcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGsoYSkge1xyXG4gICAgICAgICAgICB2YXIgYiA9IGQoYSk7XHJcbiAgICAgICAgICAgIG4uZGlzcGF0Y2hFdmVudFRvU2NlbmVzKFwiZGJjbGlja1wiLCBiKSwgbi5kaXNwYXRjaEV2ZW50KFwiZGJjbGlja1wiLCBiKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gbChhKSB7XHJcbiAgICAgICAgICAgIHZhciBiID0gZChhKTtcclxuICAgICAgICAgICAgbi5kaXNwYXRjaEV2ZW50VG9TY2VuZXMoXCJtb3VzZXdoZWVsXCIsIGIpLCBuLmRpc3BhdGNoRXZlbnQoXCJtb3VzZXdoZWVsXCIsIGIpLCBudWxsICE9IG4ud2hlZWxab29tICYmIChhLnByZXZlbnREZWZhdWx0ID8gYS5wcmV2ZW50RGVmYXVsdCgpIDogKGEgPSBhIHx8IHdpbmRvdy5ldmVudCwgYS5yZXR1cm5WYWx1ZSA9ICExKSwgMSA9PSBuLmVhZ2xlRXllLnZpc2libGUgJiYgbi5lYWdsZUV5ZS51cGRhdGUoKSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG0oYikge1xyXG4gICAgICAgICAgICBhLnV0aWwuaXNJRSB8fCAhd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgPyAoYi5vbm1vdXNlb3V0ID0gZiwgYi5vbm1vdXNlb3ZlciA9IGUsIGIub25tb3VzZWRvd24gPSBnLCBiLm9ubW91c2V1cCA9IGgsIGIub25tb3VzZW1vdmUgPSBpLCBiLm9uY2xpY2sgPSBqLCBiLm9uZGJsY2xpY2sgPSBrLCBiLm9ubW91c2V3aGVlbCA9IGwsIGIudG91Y2hzdGFydCA9IGcsIGIudG91Y2htb3ZlID0gaSwgYi50b3VjaGVuZCA9IGgpIDogKGIuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3V0XCIsIGYpLCBiLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgZSksIGIuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBnKSwgYi5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBoKSwgYi5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIGkpLCBiLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBqKSwgYi5hZGRFdmVudExpc3RlbmVyKFwiZGJsY2xpY2tcIiwgayksIGEudXRpbC5pc0ZpcmVmb3ggPyBiLmFkZEV2ZW50TGlzdGVuZXIoXCJET01Nb3VzZVNjcm9sbFwiLCBsKSA6IGIuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNld2hlZWxcIiwgbCkpLCB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciAmJiAod2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGZ1bmN0aW9uIChiKSB7XHJcbiAgICAgICAgICAgICAgICBuLmRpc3BhdGNoRXZlbnRUb1NjZW5lcyhcImtleWRvd25cIiwgYS51dGlsLmNsb25lRXZlbnQoYikpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGMgPSBiLmtleUNvZGU7XHJcbiAgICAgICAgICAgICAgICAoMzcgPT0gYyB8fCAzOCA9PSBjIHx8IDM5ID09IGMgfHwgNDAgPT0gYykgJiYgKGIucHJldmVudERlZmF1bHQgPyBiLnByZXZlbnREZWZhdWx0KCkgOiAoYiA9IGIgfHwgd2luZG93LmV2ZW50LCBiLnJldHVyblZhbHVlID0gITEpKVxyXG4gICAgICAgICAgICB9LCAhMCksIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgZnVuY3Rpb24gKGIpIHtcclxuICAgICAgICAgICAgICAgIG4uZGlzcGF0Y2hFdmVudFRvU2NlbmVzKFwia2V5dXBcIiwgYS51dGlsLmNsb25lRXZlbnQoYikpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGMgPSBiLmtleUNvZGU7XHJcbiAgICAgICAgICAgICAgICAoMzcgPT0gYyB8fCAzOCA9PSBjIHx8IDM5ID09IGMgfHwgNDAgPT0gYykgJiYgKGIucHJldmVudERlZmF1bHQgPyBiLnByZXZlbnREZWZhdWx0KCkgOiAoYiA9IGIgfHwgd2luZG93LmV2ZW50LCBiLnJldHVyblZhbHVlID0gITEpKVxyXG4gICAgICAgICAgICB9LCAhMCkpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhLnN0YWdlID0gdGhpcztcclxuICAgICAgICB2YXIgbiA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXplID0gZnVuY3Rpb24gKGMpIHtcclxuICAgICAgICAgICAgbShjKSwgdGhpcy5jYW52YXMgPSBjLCB0aGlzLmdyYXBoaWNzID0gYy5nZXRDb250ZXh0KFwiMmRcIiksIHRoaXMuY2hpbGRzID0gW10sIHRoaXMuZnJhbWVzID0gMjQsIHRoaXMubWVzc2FnZUJ1cyA9IG5ldyBhLnV0aWwuTWVzc2FnZUJ1cywgdGhpcy5lYWdsZUV5ZSA9IGIodGhpcyksIHRoaXMud2hlZWxab29tID0gbnVsbCwgdGhpcy5tb3VzZURvd25YID0gMCwgdGhpcy5tb3VzZURvd25ZID0gMCwgdGhpcy5tb3VzZURvd24gPSAhMSwgdGhpcy5tb3VzZU92ZXIgPSAhMSwgdGhpcy5uZWVkUmVwYWludCA9ICEwLCB0aGlzLnNlcmlhbGl6ZWRQcm9wZXJ0aWVzID0gW1wiZnJhbWVzXCIsIFwid2hlZWxab29tXCJdXHJcbiAgICAgICAgfSwgbnVsbCAhPSBjICYmIHRoaXMuaW5pdGlhbGl6ZShjKTtcclxuICAgICAgICB2YXIgbyA9ICEwLCBwID0gbnVsbDtcclxuICAgICAgICBkb2N1bWVudC5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gb1xyXG4gICAgICAgIH0sIHRoaXMuZGlzcGF0Y2hFdmVudFRvU2NlbmVzID0gZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgaWYgKDAgIT0gdGhpcy5mcmFtZXMgJiYgKHRoaXMubmVlZFJlcGFpbnQgPSAhMCksIDEgPT0gdGhpcy5lYWdsZUV5ZS52aXNpYmxlICYmIC0xICE9IGEuaW5kZXhPZihcIm1vdXNlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYyA9IGIueCwgZCA9IGIueTtcclxuICAgICAgICAgICAgICAgIGlmIChjID4gdGhpcy53aWR0aCAtIHRoaXMuZWFnbGVFeWUud2lkdGggJiYgZCA+IHRoaXMuaGVpZ2h0IC0gdGhpcy5lYWdsZUV5ZS5oZWlnaHQpcmV0dXJuIHZvaWQgdGhpcy5lYWdsZUV5ZS5ldmVudEhhbmRsZXIoYSwgYiwgdGhpcylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmNoaWxkcy5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoMSA9PSBjLnZpc2libGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IGNbYSArIFwiSGFuZGxlclwiXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBkKXRocm93IG5ldyBFcnJvcihcIkZ1bmN0aW9uIG5vdCBmb3VuZDpcIiArIGEgKyBcIkhhbmRsZXJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgZC5jYWxsKGMsIGIpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSwgdGhpcy5hZGQgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBiID0gMDsgYiA8IHRoaXMuY2hpbGRzLmxlbmd0aDsgYisrKWlmICh0aGlzLmNoaWxkc1tiXSA9PT0gYSlyZXR1cm47XHJcbiAgICAgICAgICAgIGEuYWRkVG8odGhpcyksIHRoaXMuY2hpbGRzLnB1c2goYSlcclxuICAgICAgICB9LCB0aGlzLnJlbW92ZSA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIGlmIChudWxsID09IGEpdGhyb3cgbmV3IEVycm9yKFwiU3RhZ2UucmVtb3Zl5Ye66ZSZOiDlj4LmlbDkuLpudWxsIVwiKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgYiA9IDA7IGIgPCB0aGlzLmNoaWxkcy5sZW5ndGg7IGIrKylpZiAodGhpcy5jaGlsZHNbYl0gPT09IGEpcmV0dXJuIGEuc3RhZ2UgPSBudWxsLCB0aGlzLmNoaWxkcyA9IHRoaXMuY2hpbGRzLmRlbChiKSwgdGhpcztcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXNcclxuICAgICAgICB9LCB0aGlzLmNsZWFyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aGlzLmNoaWxkcyA9IFtdXHJcbiAgICAgICAgfSwgdGhpcy5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgdmFyIGMgPSB0aGlzLCBkID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgIGIuY2FsbChjLCBhKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlQnVzLnN1YnNjcmliZShhLCBkKSwgdGhpc1xyXG4gICAgICAgIH0sIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZUJ1cy51bnN1YnNjcmliZShhKVxyXG4gICAgICAgIH0sIHRoaXMucmVtb3ZlQWxsRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlQnVzID0gbmV3IGEudXRpbC5NZXNzYWdlQnVzXHJcbiAgICAgICAgfSwgdGhpcy5kaXNwYXRjaEV2ZW50ID0gZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWVzc2FnZUJ1cy5wdWJsaXNoKGEsIGIpLCB0aGlzXHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgcSA9IFwiY2xpY2ssZGJjbGljayxtb3VzZWRvd24sbW91c2V1cCxtb3VzZW92ZXIsbW91c2VvdXQsbW91c2Vtb3ZlLG1vdXNlZHJhZyxtb3VzZXdoZWVsLHRvdWNoc3RhcnQsdG91Y2htb3ZlLHRvdWNoZW5kLGtleWRvd24sa2V5dXBcIi5zcGxpdChcIixcIiksIHIgPSB0aGlzO1xyXG4gICAgICAgIHEuZm9yRWFjaChmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICByW2FdID0gZnVuY3Rpb24gKGIpIHtcclxuICAgICAgICAgICAgICAgIG51bGwgIT0gYiA/IHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihhLCBiKSA6IHRoaXMuZGlzcGF0Y2hFdmVudChhKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSksIHRoaXMuc2F2ZUltYWdlSW5mbyA9IGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgIHZhciBjID0gdGhpcy5lYWdsZUV5ZS5nZXRJbWFnZShhLCBiKSwgZCA9IHdpbmRvdy5vcGVuKFwiYWJvdXQ6YmxhbmtcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBkLmRvY3VtZW50LndyaXRlKFwiPGltZyBzcmM9J1wiICsgYyArIFwiJyBhbHQ9J2Zyb20gY2FudmFzJy8+XCIpLCB0aGlzXHJcbiAgICAgICAgfSwgdGhpcy5zYXZlQXNMb2NhbEltYWdlID0gZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgdmFyIGMgPSB0aGlzLmVhZ2xlRXllLmdldEltYWdlKGEsIGIpO1xyXG4gICAgICAgICAgICByZXR1cm4gYy5yZXBsYWNlKFwiaW1hZ2UvcG5nXCIsIFwiaW1hZ2Uvb2N0ZXQtc3RyZWFtXCIpLCB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGMsIHRoaXNcclxuICAgICAgICB9LCB0aGlzLnBhaW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBudWxsICE9IHRoaXMuY2FudmFzICYmICh0aGlzLmdyYXBoaWNzLnNhdmUoKSwgdGhpcy5ncmFwaGljcy5jbGVhclJlY3QoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpLCB0aGlzLmNoaWxkcy5mb3JFYWNoKGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICAxID09IGEudmlzaWJsZSAmJiBhLnJlcGFpbnQobi5ncmFwaGljcylcclxuICAgICAgICAgICAgfSksIDEgPT0gdGhpcy5lYWdsZUV5ZS52aXNpYmxlICYmIHRoaXMuZWFnbGVFeWUucGFpbnQodGhpcyksIHRoaXMuZ3JhcGhpY3MucmVzdG9yZSgpKVxyXG4gICAgICAgIH0sIHRoaXMucmVwYWludCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgMCAhPSB0aGlzLmZyYW1lcyAmJiAodGhpcy5mcmFtZXMgPCAwICYmIDAgPT0gdGhpcy5uZWVkUmVwYWludCB8fCAodGhpcy5wYWludCgpLCB0aGlzLmZyYW1lcyA8IDAgJiYgKHRoaXMubmVlZFJlcGFpbnQgPSAhMSkpKVxyXG4gICAgICAgIH0sIHRoaXMuem9vbSA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hpbGRzLmZvckVhY2goZnVuY3Rpb24gKGIpIHtcclxuICAgICAgICAgICAgICAgIDAgIT0gYi52aXNpYmxlICYmIGIuem9vbShhKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0sIHRoaXMuem9vbU91dCA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hpbGRzLmZvckVhY2goZnVuY3Rpb24gKGIpIHtcclxuICAgICAgICAgICAgICAgIDAgIT0gYi52aXNpYmxlICYmIGIuem9vbU91dChhKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0sIHRoaXMuem9vbUluID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGlsZHMuZm9yRWFjaChmdW5jdGlvbiAoYikge1xyXG4gICAgICAgICAgICAgICAgMCAhPSBiLnZpc2libGUgJiYgYi56b29tSW4oYSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9LCB0aGlzLmNlbnRlckFuZFpvb20gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hpbGRzLmZvckVhY2goZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgIDAgIT0gYS52aXNpYmxlICYmIGEuY2VudGVyQW5kWm9vbSgpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSwgdGhpcy5zZXRDZW50ZXIgPSBmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgICAgICB2YXIgYyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHRoaXMuY2hpbGRzLmZvckVhY2goZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBlID0gYSAtIGMuY2FudmFzLndpZHRoIC8gMiwgZiA9IGIgLSBjLmNhbnZhcy5oZWlnaHQgLyAyO1xyXG4gICAgICAgICAgICAgICAgZC50cmFuc2xhdGVYID0gLWUsIGQudHJhbnNsYXRlWSA9IC1mXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSwgdGhpcy5nZXRCb3VuZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGEgPSB7bGVmdDogTnVtYmVyLk1BWF9WQUxVRSwgcmlnaHQ6IE51bWJlci5NSU5fVkFMVUUsIHRvcDogTnVtYmVyLk1BWF9WQUxVRSwgYm90dG9tOiBOdW1iZXIuTUlOX1ZBTFVFfTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2hpbGRzLmZvckVhY2goZnVuY3Rpb24gKGIpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjID0gYi5nZXRFbGVtZW50c0JvdW5kKCk7XHJcbiAgICAgICAgICAgICAgICBjLmxlZnQgPCBhLmxlZnQgJiYgKGEubGVmdCA9IGMubGVmdCwgYS5sZWZ0Tm9kZSA9IGMubGVmdE5vZGUpLCBjLnRvcCA8IGEudG9wICYmIChhLnRvcCA9IGMudG9wLCBhLnRvcE5vZGUgPSBjLnRvcE5vZGUpLCBjLnJpZ2h0ID4gYS5yaWdodCAmJiAoYS5yaWdodCA9IGMucmlnaHQsIGEucmlnaHROb2RlID0gYy5yaWdodE5vZGUpLCBjLmJvdHRvbSA+IGEuYm90dG9tICYmIChhLmJvdHRvbSA9IGMuYm90dG9tLCBhLmJvdHRvbU5vZGUgPSBjLmJvdHRvbU5vZGUpXHJcbiAgICAgICAgICAgIH0pLCBhLndpZHRoID0gYS5yaWdodCAtIGEubGVmdCwgYS5oZWlnaHQgPSBhLmJvdHRvbSAtIGEudG9wLCBhXHJcbiAgICAgICAgfSwgdGhpcy50b0pzb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBiID0gdGhpcywgYyA9ICd7XCJ2ZXJzaW9uXCI6XCInICsgYS52ZXJzaW9uICsgJ1wiLCc7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlcmlhbGl6ZWRQcm9wZXJ0aWVzLmxlbmd0aFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlcmlhbGl6ZWRQcm9wZXJ0aWVzLmZvckVhY2goZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkID0gYlthXTtcclxuICAgICAgICAgICAgICAgIFwic3RyaW5nXCIgPT0gdHlwZW9mIGQgJiYgKGQgPSAnXCInICsgZCArICdcIicpLCBjICs9ICdcIicgKyBhICsgJ1wiOicgKyBkICsgXCIsXCJcclxuICAgICAgICAgICAgfSksIGMgKz0gJ1wiY2hpbGRzXCI6WycsIHRoaXMuY2hpbGRzLmZvckVhY2goZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgIGMgKz0gYS50b0pzb24oKVxyXG4gICAgICAgICAgICB9KSwgYyArPSBcIl1cIiwgYyArPSBcIn1cIlxyXG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgMCA9PSBuLmZyYW1lcyA/IHNldFRpbWVvdXQoYXJndW1lbnRzLmNhbGxlZSwgMTAwKSA6IG4uZnJhbWVzIDwgMCA/IChuLnJlcGFpbnQoKSwgc2V0VGltZW91dChhcmd1bWVudHMuY2FsbGVlLCAxZTMgLyAtbi5mcmFtZXMpKSA6IChuLnJlcGFpbnQoKSwgc2V0VGltZW91dChhcmd1bWVudHMuY2FsbGVlLCAxZTMgLyBuLmZyYW1lcykpXHJcbiAgICAgICAgfSgpLCBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgbi5tb3VzZXdoZWVsKGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYiA9IG51bGwgPT0gYS53aGVlbERlbHRhID8gYS5kZXRhaWwgOiBhLndoZWVsRGVsdGE7XHJcbiAgICAgICAgICAgICAgICBudWxsICE9IHRoaXMud2hlZWxab29tICYmIChiID4gMCA/IHRoaXMuem9vbUluKHRoaXMud2hlZWxab29tKSA6IHRoaXMuem9vbU91dCh0aGlzLndoZWVsWm9vbSkpXHJcbiAgICAgICAgICAgIH0pLCBuLnBhaW50KClcclxuICAgICAgICB9LCAzMDApLCBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgbi5wYWludCgpXHJcbiAgICAgICAgfSwgMWUzKSwgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIG4ucGFpbnQoKVxyXG4gICAgICAgIH0sIDNlMylcclxuICAgIH1cclxuXHJcbiAgICBjLnByb3RvdHlwZSA9IHtcclxuICAgICAgICBnZXQgd2lkdGgoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhbnZhcy53aWR0aFxyXG4gICAgICAgIH0sIGdldCBoZWlnaHQoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhbnZhcy5oZWlnaHRcclxuICAgICAgICB9LCBzZXQgY3Vyc29yKGEpIHtcclxuICAgICAgICAgICAgdGhpcy5jYW52YXMuc3R5bGUuY3Vyc29yID0gYVxyXG4gICAgICAgIH0sIGdldCBjdXJzb3IoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhbnZhcy5zdHlsZS5jdXJzb3JcclxuICAgICAgICB9LCBzZXQgbW9kZShhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hpbGRzLmZvckVhY2goZnVuY3Rpb24gKGIpIHtcclxuICAgICAgICAgICAgICAgIGIubW9kZSA9IGFcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9LCBhLlN0YWdlID0gY1xyXG59KEpUb3BvKSwgZnVuY3Rpb24gKGEpIHtcclxuICAgIGZ1bmN0aW9uIGIoYykge1xyXG4gICAgICAgIGZ1bmN0aW9uIGQoYSwgYiwgYywgZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIGUuYmVnaW5QYXRoKCksIGUuc3Ryb2tlU3R5bGUgPSBcInJnYmEoMCwwLDIzNiwwLjUpXCIsIGUuZmlsbFN0eWxlID0gXCJyZ2JhKDAsMCwyMzYsMC4xKVwiLCBlLnJlY3QoYSwgYiwgYywgZCksIGUuZmlsbCgpLCBlLnN0cm9rZSgpLCBlLmNsb3NlUGF0aCgpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBlID0gdGhpcztcclxuICAgICAgICB0aGlzLmluaXRpYWxpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKSwgdGhpcy5tZXNzYWdlQnVzID0gbmV3IGEudXRpbC5NZXNzYWdlQnVzLCB0aGlzLmVsZW1lbnRUeXBlID0gXCJzY2VuZVwiLCB0aGlzLmNoaWxkcyA9IFtdLCB0aGlzLnpJbmRleE1hcCA9IHt9LCB0aGlzLnpJbmRleEFycmF5ID0gW10sIHRoaXMuYmFja2dyb3VuZENvbG9yID0gXCIyNTUsMjU1LDI1NVwiLCB0aGlzLnZpc2libGUgPSAhMCwgdGhpcy5hbHBoYSA9IDAsIHRoaXMuc2NhbGVYID0gMSwgdGhpcy5zY2FsZVkgPSAxLCB0aGlzLm1vZGUgPSBhLlNjZW5lTW9kZS5ub3JtYWwsIHRoaXMudHJhbnNsYXRlID0gITAsIHRoaXMudHJhbnNsYXRlWCA9IDAsIHRoaXMudHJhbnNsYXRlWSA9IDAsIHRoaXMubGFzdFRyYW5zbGF0ZVggPSAwLCB0aGlzLmxhc3RUcmFuc2xhdGVZID0gMCwgdGhpcy5tb3VzZURvd24gPSAhMSwgdGhpcy5tb3VzZURvd25YID0gbnVsbCwgdGhpcy5tb3VzZURvd25ZID0gbnVsbCwgdGhpcy5tb3VzZURvd25FdmVudCA9IG51bGwsIHRoaXMuYXJlYVNlbGVjdCA9ICEwLCB0aGlzLm9wZXJhdGlvbnMgPSBbXSwgdGhpcy5zZWxlY3RlZEVsZW1lbnRzID0gW10sIHRoaXMucGFpbnRBbGwgPSAhMTtcclxuICAgICAgICAgICAgdmFyIGMgPSBcImJhY2tncm91bmQsYmFja2dyb3VuZENvbG9yLG1vZGUscGFpbnRBbGwsYXJlYVNlbGVjdCx0cmFuc2xhdGUsdHJhbnNsYXRlWCx0cmFuc2xhdGVZLGxhc3RUcmFuc2xhdGVkWCxsYXN0VHJhbnNsYXRlZFksYWxwaGEsdmlzaWJsZSxzY2FsZVgsc2NhbGVZXCIuc3BsaXQoXCIsXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnNlcmlhbGl6ZWRQcm9wZXJ0aWVzID0gdGhpcy5zZXJpYWxpemVkUHJvcGVydGllcy5jb25jYXQoYylcclxuICAgICAgICB9LCB0aGlzLmluaXRpYWxpemUoKSwgdGhpcy5zZXRCYWNrZ3JvdW5kID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgdGhpcy5iYWNrZ3JvdW5kID0gYVxyXG4gICAgICAgIH0sIHRoaXMuYWRkVG8gPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICB0aGlzLnN0YWdlICE9PSBhICYmIG51bGwgIT0gYSAmJiAodGhpcy5zdGFnZSA9IGEpXHJcbiAgICAgICAgfSwgbnVsbCAhPSBjICYmIChjLmFkZCh0aGlzKSwgdGhpcy5hZGRUbyhjKSksIHRoaXMuc2hvdyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy52aXNpYmxlID0gITBcclxuICAgICAgICB9LCB0aGlzLmhpZGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZSA9ICExXHJcbiAgICAgICAgfSwgdGhpcy5wYWludCA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIGlmICgwICE9IHRoaXMudmlzaWJsZSAmJiBudWxsICE9IHRoaXMuc3RhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGlmIChhLnNhdmUoKSwgdGhpcy5wYWludEJhY2tncm91ZChhKSwgYS5yZXN0b3JlKCksIGEuc2F2ZSgpLCBhLnNjYWxlKHRoaXMuc2NhbGVYLCB0aGlzLnNjYWxlWSksIDEgPT0gdGhpcy50cmFuc2xhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IHRoaXMuZ2V0T2Zmc2V0VHJhbnNsYXRlKGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGEudHJhbnNsYXRlKGIudHJhbnNsYXRlWCwgYi50cmFuc2xhdGVZKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5wYWludENoaWxkcyhhKSwgYS5yZXN0b3JlKCksIGEuc2F2ZSgpLCB0aGlzLnBhaW50T3BlcmF0aW9ucyhhLCB0aGlzLm9wZXJhdGlvbnMpLCBhLnJlc3RvcmUoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgdGhpcy5yZXBhaW50ID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgMCAhPSB0aGlzLnZpc2libGUgJiYgdGhpcy5wYWludChhKVxyXG4gICAgICAgIH0sIHRoaXMucGFpbnRCYWNrZ3JvdWQgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICBudWxsICE9IHRoaXMuYmFja2dyb3VuZCA/IGEuZHJhd0ltYWdlKHRoaXMuYmFja2dyb3VuZCwgMCwgMCwgYS5jYW52YXMud2lkdGgsIGEuY2FudmFzLmhlaWdodCkgOiAoYS5iZWdpblBhdGgoKSwgYS5maWxsU3R5bGUgPSBcInJnYmEoXCIgKyB0aGlzLmJhY2tncm91bmRDb2xvciArIFwiLFwiICsgdGhpcy5hbHBoYSArIFwiKVwiLCBhLmZpbGxSZWN0KDAsIDAsIGEuY2FudmFzLndpZHRoLCBhLmNhbnZhcy5oZWlnaHQpLCBhLmNsb3NlUGF0aCgpKVxyXG4gICAgICAgIH0sIHRoaXMuZ2V0RGlzcGxheWVkRWxlbWVudHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGEgPSBbXSwgYiA9IDA7IGIgPCB0aGlzLnpJbmRleEFycmF5Lmxlbmd0aDsgYisrKWZvciAodmFyIGMgPSB0aGlzLnpJbmRleEFycmF5W2JdLCBkID0gdGhpcy56SW5kZXhNYXBbY10sIGUgPSAwOyBlIDwgZC5sZW5ndGg7IGUrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSBkW2VdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pc1Zpc2lhYmxlKGYpICYmIGEucHVzaChmKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBhXHJcbiAgICAgICAgfSwgdGhpcy5nZXREaXNwbGF5ZWROb2RlcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgYiA9IFtdLCBjID0gMDsgYyA8IHRoaXMuY2hpbGRzLmxlbmd0aDsgYysrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZCA9IHRoaXMuY2hpbGRzW2NdO1xyXG4gICAgICAgICAgICAgICAgZCBpbnN0YW5jZW9mIGEuTm9kZSAmJiB0aGlzLmlzVmlzaWFibGUoZCkgJiYgYi5wdXNoKGQpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGJcclxuICAgICAgICB9LCB0aGlzLnBhaW50Q2hpbGRzID0gZnVuY3Rpb24gKGIpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgYyA9IDA7IGMgPCB0aGlzLnpJbmRleEFycmF5Lmxlbmd0aDsgYysrKWZvciAodmFyIGQgPSB0aGlzLnpJbmRleEFycmF5W2NdLCBlID0gdGhpcy56SW5kZXhNYXBbZF0sIGYgPSAwOyBmIDwgZS5sZW5ndGg7IGYrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGcgPSBlW2ZdO1xyXG4gICAgICAgICAgICAgICAgaWYgKDEgPT0gdGhpcy5wYWludEFsbCB8fCB0aGlzLmlzVmlzaWFibGUoZykpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYi5zYXZlKCksIDEgPT0gZy50cmFuc2Zvcm1BYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoID0gZy5nZXRDZW50ZXJMb2NhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiLnRyYW5zbGF0ZShoLngsIGgueSksIGcucm90YXRlICYmIGIucm90YXRlKGcucm90YXRlKSwgZy5zY2FsZVggJiYgZy5zY2FsZVkgPyBiLnNjYWxlKGcuc2NhbGVYLCBnLnNjYWxlWSkgOiBnLnNjYWxlWCA/IGIuc2NhbGUoZy5zY2FsZVgsIDEpIDogZy5zY2FsZVkgJiYgYi5zY2FsZSgxLCBnLnNjYWxlWSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgMSA9PSBnLnNoYWRvdyAmJiAoYi5zaGFkb3dCbHVyID0gZy5zaGFkb3dCbHVyLCBiLnNoYWRvd0NvbG9yID0gZy5zaGFkb3dDb2xvciwgYi5zaGFkb3dPZmZzZXRYID0gZy5zaGFkb3dPZmZzZXRYLCBiLnNoYWRvd09mZnNldFkgPSBnLnNoYWRvd09mZnNldFkpLCBnIGluc3RhbmNlb2YgYS5JbnRlcmFjdGl2ZUVsZW1lbnQgJiYgKGcuc2VsZWN0ZWQgJiYgMSA9PSBnLnNob3dTZWxlY3RlZCAmJiBnLnBhaW50U2VsZWN0ZWQoYiksIDEgPT0gZy5pc01vdXNlT3ZlciAmJiBnLnBhaW50TW91c2VvdmVyKGIpKSwgZy5wYWludChiKSwgYi5yZXN0b3JlKClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIHRoaXMuZ2V0T2Zmc2V0VHJhbnNsYXRlID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgdmFyIGIgPSB0aGlzLnN0YWdlLmNhbnZhcy53aWR0aCwgYyA9IHRoaXMuc3RhZ2UuY2FudmFzLmhlaWdodDtcclxuICAgICAgICAgICAgbnVsbCAhPSBhICYmIFwibW92ZVwiICE9IGEgJiYgKGIgPSBhLmNhbnZhcy53aWR0aCwgYyA9IGEuY2FudmFzLmhlaWdodCk7XHJcbiAgICAgICAgICAgIHZhciBkID0gYiAvIHRoaXMuc2NhbGVYIC8gMiwgZSA9IGMgLyB0aGlzLnNjYWxlWSAvIDIsIGYgPSB7dHJhbnNsYXRlWDogdGhpcy50cmFuc2xhdGVYICsgKGQgLSBkICogdGhpcy5zY2FsZVgpLCB0cmFuc2xhdGVZOiB0aGlzLnRyYW5zbGF0ZVkgKyAoZSAtIGUgKiB0aGlzLnNjYWxlWSl9O1xyXG4gICAgICAgICAgICByZXR1cm4gZlxyXG4gICAgICAgIH0sIHRoaXMuaXNWaXNpYWJsZSA9IGZ1bmN0aW9uIChiKSB7XHJcbiAgICAgICAgICAgIGlmICgxICE9IGIudmlzaWJsZSlyZXR1cm4gITE7XHJcbiAgICAgICAgICAgIGlmIChiIGluc3RhbmNlb2YgYS5MaW5rKXJldHVybiAhMDtcclxuICAgICAgICAgICAgdmFyIGMgPSB0aGlzLmdldE9mZnNldFRyYW5zbGF0ZSgpLCBkID0gYi54ICsgYy50cmFuc2xhdGVYLCBlID0gYi55ICsgYy50cmFuc2xhdGVZO1xyXG4gICAgICAgICAgICBkICo9IHRoaXMuc2NhbGVYLCBlICo9IHRoaXMuc2NhbGVZO1xyXG4gICAgICAgICAgICB2YXIgZiA9IGQgKyBiLndpZHRoICogdGhpcy5zY2FsZVgsIGcgPSBlICsgYi5oZWlnaHQgKiB0aGlzLnNjYWxlWTtcclxuICAgICAgICAgICAgcmV0dXJuIGQgPiB0aGlzLnN0YWdlLmNhbnZhcy53aWR0aCB8fCBlID4gdGhpcy5zdGFnZS5jYW52YXMuaGVpZ2h0IHx8IDAgPiBmIHx8IDAgPiBnID8gITEgOiAhMFxyXG4gICAgICAgIH0sIHRoaXMucGFpbnRPcGVyYXRpb25zID0gZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgYyA9IDA7IGMgPCBiLmxlbmd0aDsgYysrKWJbY10oYSlcclxuICAgICAgICB9LCB0aGlzLmZpbmRFbGVtZW50cyA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGIgPSBbXSwgYyA9IDA7IGMgPCB0aGlzLmNoaWxkcy5sZW5ndGg7IGMrKykxID09IGEodGhpcy5jaGlsZHNbY10pICYmIGIucHVzaCh0aGlzLmNoaWxkc1tjXSk7XHJcbiAgICAgICAgICAgIHJldHVybiBiXHJcbiAgICAgICAgfSwgdGhpcy5nZXRFbGVtZW50c0J5Q2xhc3MgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5maW5kRWxlbWVudHMoZnVuY3Rpb24gKGIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBiIGluc3RhbmNlb2YgYVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0sIHRoaXMuYWRkT3BlcmF0aW9uID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3BlcmF0aW9ucy5wdXNoKGEpLCB0aGlzXHJcbiAgICAgICAgfSwgdGhpcy5jbGVhck9wZXJhdGlvbnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9wZXJhdGlvbnMgPSBbXSwgdGhpc1xyXG4gICAgICAgIH0sIHRoaXMuZ2V0RWxlbWVudEJ5WFkgPSBmdW5jdGlvbiAoYiwgYykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBkID0gbnVsbCwgZSA9IHRoaXMuekluZGV4QXJyYXkubGVuZ3RoIC0gMTsgZSA+PSAwOyBlLS0pZm9yICh2YXIgZiA9IHRoaXMuekluZGV4QXJyYXlbZV0sIGcgPSB0aGlzLnpJbmRleE1hcFtmXSwgaCA9IGcubGVuZ3RoIC0gMTsgaCA+PSAwOyBoLS0pIHtcclxuICAgICAgICAgICAgICAgIHZhciBpID0gZ1toXTtcclxuICAgICAgICAgICAgICAgIGlmIChpIGluc3RhbmNlb2YgYS5JbnRlcmFjdGl2ZUVsZW1lbnQgJiYgdGhpcy5pc1Zpc2lhYmxlKGkpICYmIGkuaXNJbkJvdW5kKGIsIGMpKXJldHVybiBkID0gaVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBkXHJcbiAgICAgICAgfSwgdGhpcy5hZGQgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICB0aGlzLmNoaWxkcy5wdXNoKGEpLCBudWxsID09IHRoaXMuekluZGV4TWFwW2EuekluZGV4XSAmJiAodGhpcy56SW5kZXhNYXBbYS56SW5kZXhdID0gW10sIHRoaXMuekluZGV4QXJyYXkucHVzaChhLnpJbmRleCksIHRoaXMuekluZGV4QXJyYXkuc29ydChmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGEgLSBiXHJcbiAgICAgICAgICAgIH0pKSwgdGhpcy56SW5kZXhNYXBbXCJcIiArIGEuekluZGV4XS5wdXNoKGEpXHJcbiAgICAgICAgfSwgdGhpcy5yZW1vdmUgPSBmdW5jdGlvbiAoYikge1xyXG4gICAgICAgICAgICB0aGlzLmNoaWxkcyA9IGEudXRpbC5yZW1vdmVGcm9tQXJyYXkodGhpcy5jaGlsZHMsIGIpO1xyXG4gICAgICAgICAgICB2YXIgYyA9IHRoaXMuekluZGV4TWFwW2IuekluZGV4XTtcclxuICAgICAgICAgICAgYyAmJiAodGhpcy56SW5kZXhNYXBbYi56SW5kZXhdID0gYS51dGlsLnJlbW92ZUZyb21BcnJheShjLCBiKSksIGIucmVtb3ZlSGFuZGxlcih0aGlzKVxyXG4gICAgICAgIH0sIHRoaXMuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBhID0gdGhpcztcclxuICAgICAgICAgICAgdGhpcy5jaGlsZHMuZm9yRWFjaChmdW5jdGlvbiAoYikge1xyXG4gICAgICAgICAgICAgICAgYi5yZW1vdmVIYW5kbGVyKGEpXHJcbiAgICAgICAgICAgIH0pLCB0aGlzLmNoaWxkcyA9IFtdLCB0aGlzLm9wZXJhdGlvbnMgPSBbXSwgdGhpcy56SW5kZXhBcnJheSA9IFtdLCB0aGlzLnpJbmRleE1hcCA9IHt9XHJcbiAgICAgICAgfSwgdGhpcy5hZGRUb1NlbGVjdGVkID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEVsZW1lbnRzLnB1c2goYSlcclxuICAgICAgICB9LCB0aGlzLmNhbmNsZUFsbFNlbGVjdGVkID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgYiA9IDA7IGIgPCB0aGlzLnNlbGVjdGVkRWxlbWVudHMubGVuZ3RoOyBiKyspdGhpcy5zZWxlY3RlZEVsZW1lbnRzW2JdLnVuc2VsZWN0ZWRIYW5kbGVyKGEpO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkRWxlbWVudHMgPSBbXVxyXG4gICAgICAgIH0sIHRoaXMubm90SW5TZWxlY3RlZE5vZGVzID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgYiA9IDA7IGIgPCB0aGlzLnNlbGVjdGVkRWxlbWVudHMubGVuZ3RoOyBiKyspaWYgKGEgPT09IHRoaXMuc2VsZWN0ZWRFbGVtZW50c1tiXSlyZXR1cm4gITE7XHJcbiAgICAgICAgICAgIHJldHVybiAhMFxyXG4gICAgICAgIH0sIHRoaXMucmVtb3ZlRnJvbVNlbGVjdGVkID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgYiA9IDA7IGIgPCB0aGlzLnNlbGVjdGVkRWxlbWVudHMubGVuZ3RoOyBiKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBjID0gdGhpcy5zZWxlY3RlZEVsZW1lbnRzW2JdO1xyXG4gICAgICAgICAgICAgICAgYSA9PT0gYyAmJiAodGhpcy5zZWxlY3RlZEVsZW1lbnRzID0gdGhpcy5zZWxlY3RlZEVsZW1lbnRzLmRlbChiKSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIHRoaXMudG9TY2VuZUV2ZW50ID0gZnVuY3Rpb24gKGIpIHtcclxuICAgICAgICAgICAgdmFyIGMgPSBhLnV0aWwuY2xvbmUoYik7XHJcbiAgICAgICAgICAgIGlmIChjLnggLz0gdGhpcy5zY2FsZVgsIGMueSAvPSB0aGlzLnNjYWxlWSwgMSA9PSB0aGlzLnRyYW5zbGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGQgPSB0aGlzLmdldE9mZnNldFRyYW5zbGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgYy54IC09IGQudHJhbnNsYXRlWCwgYy55IC09IGQudHJhbnNsYXRlWVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsICE9IGMuZHggJiYgKGMuZHggLz0gdGhpcy5zY2FsZVgsIGMuZHkgLz0gdGhpcy5zY2FsZVkpLCBudWxsICE9IHRoaXMuY3VycmVudEVsZW1lbnQgJiYgKGMudGFyZ2V0ID0gdGhpcy5jdXJyZW50RWxlbWVudCksIGMuc2NlbmUgPSB0aGlzLCBjXHJcbiAgICAgICAgfSwgdGhpcy5zZWxlY3RFbGVtZW50ID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgdmFyIGIgPSBlLmdldEVsZW1lbnRCeVhZKGEueCwgYS55KTtcclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gYilpZiAoYS50YXJnZXQgPSBiLCBiLm1vdXNlZG93bkhhbmRlcihhKSwgYi5zZWxlY3RlZEhhbmRsZXIoYSksIGUubm90SW5TZWxlY3RlZE5vZGVzKGIpKWEuY3RybEtleSB8fCBlLmNhbmNsZUFsbFNlbGVjdGVkKCksIGUuYWRkVG9TZWxlY3RlZChiKTsgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAxID09IGEuY3RybEtleSAmJiAoYi51bnNlbGVjdGVkSGFuZGxlcigpLCB0aGlzLnJlbW92ZUZyb21TZWxlY3RlZChiKSk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBjID0gMDsgYyA8IHRoaXMuc2VsZWN0ZWRFbGVtZW50cy5sZW5ndGg7IGMrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkID0gdGhpcy5zZWxlY3RlZEVsZW1lbnRzW2NdO1xyXG4gICAgICAgICAgICAgICAgICAgIGQuc2VsZWN0ZWRIYW5kbGVyKGEpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBhLmN0cmxLZXkgfHwgZS5jYW5jbGVBbGxTZWxlY3RlZCgpO1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRFbGVtZW50ID0gYlxyXG4gICAgICAgIH0sIHRoaXMubW91c2Vkb3duSGFuZGxlciA9IGZ1bmN0aW9uIChiKSB7XHJcbiAgICAgICAgICAgIHZhciBjID0gdGhpcy50b1NjZW5lRXZlbnQoYik7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1vdXNlRG93biA9ICEwLCB0aGlzLm1vdXNlRG93blggPSBjLngsIHRoaXMubW91c2VEb3duWSA9IGMueSwgdGhpcy5tb3VzZURvd25FdmVudCA9IGMsIHRoaXMubW9kZSA9PSBhLlNjZW5lTW9kZS5ub3JtYWwpdGhpcy5zZWxlY3RFbGVtZW50KGMpLCAobnVsbCA9PSB0aGlzLmN1cnJlbnRFbGVtZW50IHx8IHRoaXMuY3VycmVudEVsZW1lbnQgaW5zdGFuY2VvZiBhLkxpbmspICYmIDEgPT0gdGhpcy50cmFuc2xhdGUgJiYgKHRoaXMubGFzdFRyYW5zbGF0ZVggPSB0aGlzLnRyYW5zbGF0ZVgsIHRoaXMubGFzdFRyYW5zbGF0ZVkgPSB0aGlzLnRyYW5zbGF0ZVkpOyBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1vZGUgPT0gYS5TY2VuZU1vZGUuZHJhZyAmJiAxID09IHRoaXMudHJhbnNsYXRlKXJldHVybiB0aGlzLmxhc3RUcmFuc2xhdGVYID0gdGhpcy50cmFuc2xhdGVYLCB2b2lkKHRoaXMubGFzdFRyYW5zbGF0ZVkgPSB0aGlzLnRyYW5zbGF0ZVkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlID09IGEuU2NlbmVNb2RlLnNlbGVjdCA/IHRoaXMuc2VsZWN0RWxlbWVudChjKSA6IHRoaXMubW9kZSA9PSBhLlNjZW5lTW9kZS5lZGl0ICYmICh0aGlzLnNlbGVjdEVsZW1lbnQoYyksIChudWxsID09IHRoaXMuY3VycmVudEVsZW1lbnQgfHwgdGhpcy5jdXJyZW50RWxlbWVudCBpbnN0YW5jZW9mIGEuTGluaykgJiYgMSA9PSB0aGlzLnRyYW5zbGF0ZSAmJiAodGhpcy5sYXN0VHJhbnNsYXRlWCA9IHRoaXMudHJhbnNsYXRlWCwgdGhpcy5sYXN0VHJhbnNsYXRlWSA9IHRoaXMudHJhbnNsYXRlWSkpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZS5kaXNwYXRjaEV2ZW50KFwibW91c2Vkb3duXCIsIGMpXHJcbiAgICAgICAgfSwgdGhpcy5tb3VzZXVwSGFuZGxlciA9IGZ1bmN0aW9uIChiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhZ2UuY3Vyc29yICE9IGEuTW91c2VDdXJzb3Iubm9ybWFsICYmICh0aGlzLnN0YWdlLmN1cnNvciA9IGEuTW91c2VDdXJzb3Iubm9ybWFsKSwgZS5jbGVhck9wZXJhdGlvbnMoKTtcclxuICAgICAgICAgICAgdmFyIGMgPSB0aGlzLnRvU2NlbmVFdmVudChiKTtcclxuICAgICAgICAgICAgbnVsbCAhPSB0aGlzLmN1cnJlbnRFbGVtZW50ICYmIChjLnRhcmdldCA9IGUuY3VycmVudEVsZW1lbnQsIHRoaXMuY3VycmVudEVsZW1lbnQubW91c2V1cEhhbmRsZXIoYykpLCB0aGlzLmRpc3BhdGNoRXZlbnQoXCJtb3VzZXVwXCIsIGMpLCB0aGlzLm1vdXNlRG93biA9ICExXHJcbiAgICAgICAgfSwgdGhpcy5kcmFnRWxlbWVudHMgPSBmdW5jdGlvbiAoYikge1xyXG4gICAgICAgICAgICBpZiAobnVsbCAhPSB0aGlzLmN1cnJlbnRFbGVtZW50ICYmIDEgPT0gdGhpcy5jdXJyZW50RWxlbWVudC5kcmFnYWJsZSlmb3IgKHZhciBjID0gMDsgYyA8IHRoaXMuc2VsZWN0ZWRFbGVtZW50cy5sZW5ndGg7IGMrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGQgPSB0aGlzLnNlbGVjdGVkRWxlbWVudHNbY107XHJcbiAgICAgICAgICAgICAgICBpZiAoMCAhPSBkLmRyYWdhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBhLnV0aWwuY2xvbmUoYik7XHJcbiAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQgPSBkLCBkLm1vdXNlZHJhZ0hhbmRsZXIoZSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIHRoaXMubW91c2VkcmFnSGFuZGxlciA9IGZ1bmN0aW9uIChiKSB7XHJcbiAgICAgICAgICAgIHZhciBjID0gdGhpcy50b1NjZW5lRXZlbnQoYik7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZSA9PSBhLlNjZW5lTW9kZS5ub3JtYWwgPyBudWxsID09IHRoaXMuY3VycmVudEVsZW1lbnQgfHwgdGhpcy5jdXJyZW50RWxlbWVudCBpbnN0YW5jZW9mIGEuTGluayA/IDEgPT0gdGhpcy50cmFuc2xhdGUgJiYgKHRoaXMuc3RhZ2UuY3Vyc29yID0gYS5Nb3VzZUN1cnNvci5jbG9zZWRfaGFuZCwgdGhpcy50cmFuc2xhdGVYID0gdGhpcy5sYXN0VHJhbnNsYXRlWCArIGMuZHgsIHRoaXMudHJhbnNsYXRlWSA9IHRoaXMubGFzdFRyYW5zbGF0ZVkgKyBjLmR5KSA6IHRoaXMuZHJhZ0VsZW1lbnRzKGMpIDogdGhpcy5tb2RlID09IGEuU2NlbmVNb2RlLmRyYWcgPyAxID09IHRoaXMudHJhbnNsYXRlICYmICh0aGlzLnN0YWdlLmN1cnNvciA9IGEuTW91c2VDdXJzb3IuY2xvc2VkX2hhbmQsIHRoaXMudHJhbnNsYXRlWCA9IHRoaXMubGFzdFRyYW5zbGF0ZVggKyBjLmR4LCB0aGlzLnRyYW5zbGF0ZVkgPSB0aGlzLmxhc3RUcmFuc2xhdGVZICsgYy5keSkgOiB0aGlzLm1vZGUgPT0gYS5TY2VuZU1vZGUuc2VsZWN0ID8gbnVsbCAhPSB0aGlzLmN1cnJlbnRFbGVtZW50ID8gMSA9PSB0aGlzLmN1cnJlbnRFbGVtZW50LmRyYWdhYmxlICYmIHRoaXMuZHJhZ0VsZW1lbnRzKGMpIDogMSA9PSB0aGlzLmFyZWFTZWxlY3QgJiYgdGhpcy5hcmVhU2VsZWN0SGFuZGxlKGMpIDogdGhpcy5tb2RlID09IGEuU2NlbmVNb2RlLmVkaXQgJiYgKG51bGwgPT0gdGhpcy5jdXJyZW50RWxlbWVudCB8fCB0aGlzLmN1cnJlbnRFbGVtZW50IGluc3RhbmNlb2YgYS5MaW5rID8gMSA9PSB0aGlzLnRyYW5zbGF0ZSAmJiAodGhpcy5zdGFnZS5jdXJzb3IgPSBhLk1vdXNlQ3Vyc29yLmNsb3NlZF9oYW5kLCB0aGlzLnRyYW5zbGF0ZVggPSB0aGlzLmxhc3RUcmFuc2xhdGVYICsgYy5keCwgdGhpcy50cmFuc2xhdGVZID0gdGhpcy5sYXN0VHJhbnNsYXRlWSArIGMuZHkpIDogdGhpcy5kcmFnRWxlbWVudHMoYykpLCB0aGlzLmRpc3BhdGNoRXZlbnQoXCJtb3VzZWRyYWdcIiwgYylcclxuICAgICAgICB9LCB0aGlzLmFyZWFTZWxlY3RIYW5kbGUgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICB2YXIgYiA9IGEub2Zmc2V0TGVmdCwgYyA9IGEub2Zmc2V0VG9wLCBmID0gdGhpcy5tb3VzZURvd25FdmVudC5vZmZzZXRMZWZ0LCBnID0gdGhpcy5tb3VzZURvd25FdmVudC5vZmZzZXRUb3AsIGggPSBiID49IGYgPyBmIDogYiwgaSA9IGMgPj0gZyA/IGcgOiBjLCBqID0gTWF0aC5hYnMoYS5keCkgKiB0aGlzLnNjYWxlWCwgayA9IE1hdGguYWJzKGEuZHkpICogdGhpcy5zY2FsZVksIGwgPSBuZXcgZChoLCBpLCBqLCBrKTtcclxuICAgICAgICAgICAgZS5jbGVhck9wZXJhdGlvbnMoKS5hZGRPcGVyYXRpb24obCksIGIgPSBhLngsIGMgPSBhLnksIGYgPSB0aGlzLm1vdXNlRG93bkV2ZW50LngsIGcgPSB0aGlzLm1vdXNlRG93bkV2ZW50LnksIGggPSBiID49IGYgPyBmIDogYiwgaSA9IGMgPj0gZyA/IGcgOiBjLCBqID0gTWF0aC5hYnMoYS5keCksIGsgPSBNYXRoLmFicyhhLmR5KTtcclxuICAgICAgICAgICAgZm9yICh2YXIgbSA9IGggKyBqLCBuID0gaSArIGssIG8gPSAwOyBvIDwgZS5jaGlsZHMubGVuZ3RoOyBvKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBwID0gZS5jaGlsZHNbb107XHJcbiAgICAgICAgICAgICAgICBwLnggPiBoICYmIHAueCArIHAud2lkdGggPCBtICYmIHAueSA+IGkgJiYgcC55ICsgcC5oZWlnaHQgPCBuICYmIGUubm90SW5TZWxlY3RlZE5vZGVzKHApICYmIChwLnNlbGVjdGVkSGFuZGxlcihhKSwgZS5hZGRUb1NlbGVjdGVkKHApKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgdGhpcy5tb3VzZW1vdmVIYW5kbGVyID0gZnVuY3Rpb24gKGIpIHtcclxuICAgICAgICAgICAgdGhpcy5tb3VzZWNvb3JkID0ge3g6IGIueCwgeTogYi55fTtcclxuICAgICAgICAgICAgdmFyIGMgPSB0aGlzLnRvU2NlbmVFdmVudChiKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMubW9kZSA9PSBhLlNjZW5lTW9kZS5kcmFnKXJldHVybiB2b2lkKHRoaXMuc3RhZ2UuY3Vyc29yID0gYS5Nb3VzZUN1cnNvci5vcGVuX2hhbmQpO1xyXG4gICAgICAgICAgICB0aGlzLm1vZGUgPT0gYS5TY2VuZU1vZGUubm9ybWFsID8gdGhpcy5zdGFnZS5jdXJzb3IgPSBhLk1vdXNlQ3Vyc29yLm5vcm1hbCA6IHRoaXMubW9kZSA9PSBhLlNjZW5lTW9kZS5zZWxlY3QgJiYgKHRoaXMuc3RhZ2UuY3Vyc29yID0gYS5Nb3VzZUN1cnNvci5ub3JtYWwpO1xyXG4gICAgICAgICAgICB2YXIgZCA9IGUuZ2V0RWxlbWVudEJ5WFkoYy54LCBjLnkpO1xyXG4gICAgICAgICAgICBudWxsICE9IGQgPyAoZS5tb3VzZU92ZXJlbGVtZW50ICYmIGUubW91c2VPdmVyZWxlbWVudCAhPT0gZCAmJiAoYy50YXJnZXQgPSBkLCBlLm1vdXNlT3ZlcmVsZW1lbnQubW91c2VvdXRIYW5kbGVyKGMpKSwgZS5tb3VzZU92ZXJlbGVtZW50ID0gZCwgMCA9PSBkLmlzTW91c2VPdmVyID8gKGMudGFyZ2V0ID0gZCwgZC5tb3VzZW92ZXJIYW5kbGVyKGMpLCBlLmRpc3BhdGNoRXZlbnQoXCJtb3VzZW92ZXJcIiwgYykpIDogKGMudGFyZ2V0ID0gZCwgZC5tb3VzZW1vdmVIYW5kbGVyKGMpLCBlLmRpc3BhdGNoRXZlbnQoXCJtb3VzZW1vdmVcIiwgYykpKSA6IGUubW91c2VPdmVyZWxlbWVudCA/IChjLnRhcmdldCA9IGQsIGUubW91c2VPdmVyZWxlbWVudC5tb3VzZW91dEhhbmRsZXIoYyksIGUubW91c2VPdmVyZWxlbWVudCA9IG51bGwsIGUuZGlzcGF0Y2hFdmVudChcIm1vdXNlb3V0XCIsIGMpKSA6IChjLnRhcmdldCA9IG51bGwsIGUuZGlzcGF0Y2hFdmVudChcIm1vdXNlbW92ZVwiLCBjKSlcclxuICAgICAgICB9LCB0aGlzLm1vdXNlb3ZlckhhbmRsZXIgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICB2YXIgYiA9IHRoaXMudG9TY2VuZUV2ZW50KGEpO1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoXCJtb3VzZW92ZXJcIiwgYilcclxuICAgICAgICB9LCB0aGlzLm1vdXNlb3V0SGFuZGxlciA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHZhciBiID0gdGhpcy50b1NjZW5lRXZlbnQoYSk7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChcIm1vdXNlb3V0XCIsIGIpXHJcbiAgICAgICAgfSwgdGhpcy5jbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICB2YXIgYiA9IHRoaXMudG9TY2VuZUV2ZW50KGEpO1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRFbGVtZW50ICYmIChiLnRhcmdldCA9IHRoaXMuY3VycmVudEVsZW1lbnQsIHRoaXMuY3VycmVudEVsZW1lbnQuY2xpY2tIYW5kbGVyKGIpKSwgdGhpcy5kaXNwYXRjaEV2ZW50KFwiY2xpY2tcIiwgYilcclxuICAgICAgICB9LCB0aGlzLmRiY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgdmFyIGIgPSB0aGlzLnRvU2NlbmVFdmVudChhKTtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50RWxlbWVudCA/IChiLnRhcmdldCA9IHRoaXMuY3VycmVudEVsZW1lbnQsIHRoaXMuY3VycmVudEVsZW1lbnQuZGJjbGlja0hhbmRsZXIoYikpIDogZS5jYW5jbGVBbGxTZWxlY3RlZCgpLCB0aGlzLmRpc3BhdGNoRXZlbnQoXCJkYmNsaWNrXCIsIGIpXHJcbiAgICAgICAgfSwgdGhpcy5tb3VzZXdoZWVsSGFuZGxlciA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHZhciBiID0gdGhpcy50b1NjZW5lRXZlbnQoYSk7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChcIm1vdXNld2hlZWxcIiwgYilcclxuICAgICAgICB9LCB0aGlzLnRvdWNoc3RhcnQgPSB0aGlzLm1vdXNlZG93bkhhbmRlciwgdGhpcy50b3VjaG1vdmUgPSB0aGlzLm1vdXNlZHJhZ0hhbmRsZXIsIHRoaXMudG91Y2hlbmQgPSB0aGlzLm1vdXNlZG93bkhhbmRlciwgdGhpcy5rZXlkb3duSGFuZGxlciA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChcImtleWRvd25cIiwgYSlcclxuICAgICAgICB9LCB0aGlzLmtleXVwSGFuZGxlciA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChcImtleXVwXCIsIGEpXHJcbiAgICAgICAgfSwgdGhpcy5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgdmFyIGMgPSB0aGlzLCBkID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgIGIuY2FsbChjLCBhKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlQnVzLnN1YnNjcmliZShhLCBkKSwgdGhpc1xyXG4gICAgICAgIH0sIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZUJ1cy51bnN1YnNjcmliZShhKVxyXG4gICAgICAgIH0sIHRoaXMucmVtb3ZlQWxsRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlQnVzID0gbmV3IGEudXRpbC5NZXNzYWdlQnVzXHJcbiAgICAgICAgfSwgdGhpcy5kaXNwYXRjaEV2ZW50ID0gZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWVzc2FnZUJ1cy5wdWJsaXNoKGEsIGIpLCB0aGlzXHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgZiA9IFwiY2xpY2ssZGJjbGljayxtb3VzZWRvd24sbW91c2V1cCxtb3VzZW92ZXIsbW91c2VvdXQsbW91c2Vtb3ZlLG1vdXNlZHJhZyxtb3VzZXdoZWVsLHRvdWNoc3RhcnQsdG91Y2htb3ZlLHRvdWNoZW5kLGtleWRvd24sa2V5dXBcIi5zcGxpdChcIixcIiksIGcgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBmLmZvckVhY2goZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgZ1thXSA9IGZ1bmN0aW9uIChiKSB7XHJcbiAgICAgICAgICAgICAgICBudWxsICE9IGIgPyB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoYSwgYikgOiB0aGlzLmRpc3BhdGNoRXZlbnQoYSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLCB0aGlzLnpvb20gPSBmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgICAgICBudWxsICE9IGEgJiYgMCAhPSBhICYmICh0aGlzLnNjYWxlWCA9IGEpLCBudWxsICE9IGIgJiYgMCAhPSBiICYmICh0aGlzLnNjYWxlWSA9IGIpXHJcbiAgICAgICAgfSwgdGhpcy56b29tT3V0ID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgMCAhPSBhICYmIChudWxsID09IGEgJiYgKGEgPSAuOCksIHRoaXMuc2NhbGVYIC89IGEsIHRoaXMuc2NhbGVZIC89IGEpXHJcbiAgICAgICAgfSwgdGhpcy56b29tSW4gPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICAwICE9IGEgJiYgKG51bGwgPT0gYSAmJiAoYSA9IC44KSwgdGhpcy5zY2FsZVggKj0gYSwgdGhpcy5zY2FsZVkgKj0gYSlcclxuICAgICAgICB9LCB0aGlzLmdldEJvdW5kID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge2xlZnQ6IDAsIHRvcDogMCwgcmlnaHQ6IHRoaXMuc3RhZ2UuY2FudmFzLndpZHRoLCBib3R0b206IHRoaXMuc3RhZ2UuY2FudmFzLmhlaWdodCwgd2lkdGg6IHRoaXMuc3RhZ2UuY2FudmFzLndpZHRoLCBoZWlnaHQ6IHRoaXMuc3RhZ2UuY2FudmFzLmhlaWdodH1cclxuICAgICAgICB9LCB0aGlzLmdldEVsZW1lbnRzQm91bmQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhLnV0aWwuZ2V0RWxlbWVudHNCb3VuZCh0aGlzLmNoaWxkcylcclxuICAgICAgICB9LCB0aGlzLnRyYW5zbGF0ZVRvQ2VudGVyID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgdmFyIGIgPSB0aGlzLmdldEVsZW1lbnRzQm91bmQoKSwgYyA9IHRoaXMuc3RhZ2UuY2FudmFzLndpZHRoIC8gMiAtIChiLmxlZnQgKyBiLnJpZ2h0KSAvIDIsIGQgPSB0aGlzLnN0YWdlLmNhbnZhcy5oZWlnaHQgLyAyIC0gKGIudG9wICsgYi5ib3R0b20pIC8gMjtcclxuICAgICAgICAgICAgYSAmJiAoYyA9IGEuY2FudmFzLndpZHRoIC8gMiAtIChiLmxlZnQgKyBiLnJpZ2h0KSAvIDIsIGQgPSBhLmNhbnZhcy5oZWlnaHQgLyAyIC0gKGIudG9wICsgYi5ib3R0b20pIC8gMiksIHRoaXMudHJhbnNsYXRlWCA9IGMsIHRoaXMudHJhbnNsYXRlWSA9IGRcclxuICAgICAgICB9LCB0aGlzLnNldENlbnRlciA9IGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgIHZhciBjID0gYSAtIHRoaXMuc3RhZ2UuY2FudmFzLndpZHRoIC8gMiwgZCA9IGIgLSB0aGlzLnN0YWdlLmNhbnZhcy5oZWlnaHQgLyAyO1xyXG4gICAgICAgICAgICB0aGlzLnRyYW5zbGF0ZVggPSAtYywgdGhpcy50cmFuc2xhdGVZID0gLWRcclxuICAgICAgICB9LCB0aGlzLmNlbnRlckFuZFpvb20gPSBmdW5jdGlvbiAoYSwgYiwgYykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy50cmFuc2xhdGVUb0NlbnRlcihjKSwgbnVsbCA9PSBhIHx8IG51bGwgPT0gYikge1xyXG4gICAgICAgICAgICAgICAgdmFyIGQgPSB0aGlzLmdldEVsZW1lbnRzQm91bmQoKSwgZSA9IGQucmlnaHQgLSBkLmxlZnQsIGYgPSBkLmJvdHRvbSAtIGQudG9wLCBnID0gdGhpcy5zdGFnZS5jYW52YXMud2lkdGggLyBlLCBoID0gdGhpcy5zdGFnZS5jYW52YXMuaGVpZ2h0IC8gZjtcclxuICAgICAgICAgICAgICAgIGMgJiYgKGcgPSBjLmNhbnZhcy53aWR0aCAvIGUsIGggPSBjLmNhbnZhcy5oZWlnaHQgLyBmKTtcclxuICAgICAgICAgICAgICAgIHZhciBpID0gTWF0aC5taW4oZywgaCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA+IDEpcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgdGhpcy56b29tKGksIGkpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy56b29tKGEsIGIpXHJcbiAgICAgICAgfSwgdGhpcy5nZXRDZW50ZXJMb2NhdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHt4OiBlLnN0YWdlLmNhbnZhcy53aWR0aCAvIDIsIHk6IGUuc3RhZ2UuY2FudmFzLmhlaWdodCAvIDJ9XHJcbiAgICAgICAgfSwgdGhpcy5kb0xheW91dCA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIGEgJiYgYSh0aGlzLCB0aGlzLmNoaWxkcylcclxuICAgICAgICB9LCB0aGlzLnRvSnNvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGEgPSB0aGlzLCBiID0gXCJ7XCI7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlcmlhbGl6ZWRQcm9wZXJ0aWVzLmxlbmd0aFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2VyaWFsaXplZFByb3BlcnRpZXMuZm9yRWFjaChmdW5jdGlvbiAoYykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGQgPSBhW2NdO1xyXG4gICAgICAgICAgICAgICAgXCJiYWNrZ3JvdW5kXCIgPT0gYyAmJiAoZCA9IGEuX2JhY2tncm91bmQuc3JjKSwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZCAmJiAoZCA9ICdcIicgKyBkICsgJ1wiJyksIGIgKz0gJ1wiJyArIGMgKyAnXCI6JyArIGQgKyBcIixcIlxyXG4gICAgICAgICAgICB9KSwgYiArPSAnXCJjaGlsZHNcIjpbJztcclxuICAgICAgICAgICAgdmFyIGMgPSB0aGlzLmNoaWxkcy5sZW5ndGg7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNoaWxkcy5mb3JFYWNoKGZ1bmN0aW9uIChhLCBkKSB7XHJcbiAgICAgICAgICAgICAgICBiICs9IGEudG9Kc29uKCksIGMgPiBkICsgMSAmJiAoYiArPSBcIixcIilcclxuICAgICAgICAgICAgfSksIGIgKz0gXCJdXCIsIGIgKz0gXCJ9XCJcclxuICAgICAgICB9LCBlXHJcbiAgICB9XHJcblxyXG4gICAgYi5wcm90b3R5cGUgPSBuZXcgYS5FbGVtZW50O1xyXG4gICAgdmFyIGMgPSB7fTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGIucHJvdG90eXBlLCB7XHJcbiAgICAgICAgYmFja2dyb3VuZDoge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9iYWNrZ3JvdW5kXHJcbiAgICAgICAgICAgIH0sIHNldDogZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiBhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBjW2FdO1xyXG4gICAgICAgICAgICAgICAgICAgIG51bGwgPT0gYiAmJiAoYiA9IG5ldyBJbWFnZSwgYi5zcmMgPSBhLCBiLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY1thXSA9IGJcclxuICAgICAgICAgICAgICAgICAgICB9KSwgdGhpcy5fYmFja2dyb3VuZCA9IGJcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB0aGlzLl9iYWNrZ3JvdW5kID0gYVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSksIGEuU2NlbmUgPSBiXHJcbn0oSlRvcG8pLCBmdW5jdGlvbiAoYSkge1xyXG4gICAgZnVuY3Rpb24gYigpIHtcclxuICAgICAgICB0aGlzLmluaXRpYWxpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKSwgdGhpcy5lbGVtZW50VHlwZSA9IFwiZGlzcGxheUVsZW1lbnRcIiwgdGhpcy54ID0gMCwgdGhpcy55ID0gMCwgdGhpcy53aWR0aCA9IDMyLCB0aGlzLmhlaWdodCA9IDMyLCB0aGlzLnZpc2libGUgPSAhMCwgdGhpcy5hbHBoYSA9IDEsIHRoaXMucm90YXRlID0gMCwgdGhpcy5zY2FsZVggPSAxLCB0aGlzLnNjYWxlWSA9IDEsIHRoaXMuc3Ryb2tlQ29sb3IgPSBcIjIyLDEyNCwyNTVcIiwgdGhpcy5ib3JkZXJDb2xvciA9IFwiMjIsMTI0LDI1NVwiLCB0aGlzLmZpbGxDb2xvciA9IFwiMjIsMTI0LDI1NVwiLCB0aGlzLnNoYWRvdyA9ICExLCB0aGlzLnNoYWRvd0JsdXIgPSA1LCB0aGlzLnNoYWRvd0NvbG9yID0gXCJyZ2JhKDAsMCwwLDAuNSlcIiwgdGhpcy5zaGFkb3dPZmZzZXRYID0gMywgdGhpcy5zaGFkb3dPZmZzZXRZID0gNiwgdGhpcy50cmFuc2Zvcm1BYmxlID0gITEsIHRoaXMuekluZGV4ID0gMDtcclxuICAgICAgICAgICAgdmFyIGEgPSBcIngseSx3aWR0aCxoZWlnaHQsdmlzaWJsZSxhbHBoYSxyb3RhdGUsc2NhbGVYLHNjYWxlWSxzdHJva2VDb2xvcixmaWxsQ29sb3Isc2hhZG93LHNoYWRvd0NvbG9yLHNoYWRvd09mZnNldFgsc2hhZG93T2Zmc2V0WSx0cmFuc2Zvcm1BYmxlLHpJbmRleFwiLnNwbGl0KFwiLFwiKTtcclxuICAgICAgICAgICAgdGhpcy5zZXJpYWxpemVkUHJvcGVydGllcyA9IHRoaXMuc2VyaWFsaXplZFByb3BlcnRpZXMuY29uY2F0KGEpXHJcbiAgICAgICAgfSwgdGhpcy5pbml0aWFsaXplKCksIHRoaXMucGFpbnQgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICBhLmJlZ2luUGF0aCgpLCBhLmZpbGxTdHlsZSA9IFwicmdiYShcIiArIHRoaXMuZmlsbENvbG9yICsgXCIsXCIgKyB0aGlzLmFscGhhICsgXCIpXCIsIGEucmVjdCgtdGhpcy53aWR0aCAvIDIsIC10aGlzLmhlaWdodCAvIDIsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KSwgYS5maWxsKCksIGEuc3Ryb2tlKCksIGEuY2xvc2VQYXRoKClcclxuICAgICAgICB9LCB0aGlzLmdldExvY2F0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge3g6IHRoaXMueCwgeTogdGhpcy55fVxyXG4gICAgICAgIH0sIHRoaXMuc2V0TG9jYXRpb24gPSBmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy54ID0gYSwgdGhpcy55ID0gYiwgdGhpc1xyXG4gICAgICAgIH0sIHRoaXMuZ2V0Q2VudGVyTG9jYXRpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7eDogdGhpcy54ICsgdGhpcy53aWR0aCAvIDIsIHk6IHRoaXMueSArIHRoaXMuaGVpZ2h0IC8gMn1cclxuICAgICAgICB9LCB0aGlzLnNldENlbnRlckxvY2F0aW9uID0gZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMueCA9IGEgLSB0aGlzLndpZHRoIC8gMiwgdGhpcy55ID0gYiAtIHRoaXMuaGVpZ2h0IC8gMiwgdGhpc1xyXG4gICAgICAgIH0sIHRoaXMuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHt3aWR0aDogdGhpcy53aWR0aCwgaGVpZ2h0OiB0aGlzLmhlaXRofVxyXG4gICAgICAgIH0sIHRoaXMuc2V0U2l6ZSA9IGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLndpZHRoID0gYSwgdGhpcy5oZWlnaHQgPSBiLCB0aGlzXHJcbiAgICAgICAgfSwgdGhpcy5nZXRCb3VuZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtsZWZ0OiB0aGlzLngsIHRvcDogdGhpcy55LCByaWdodDogdGhpcy54ICsgdGhpcy53aWR0aCwgYm90dG9tOiB0aGlzLnkgKyB0aGlzLmhlaWdodCwgd2lkdGg6IHRoaXMud2lkdGgsIGhlaWdodDogdGhpcy5oZWlnaHR9XHJcbiAgICAgICAgfSwgdGhpcy5zZXRCb3VuZCA9IGZ1bmN0aW9uIChhLCBiLCBjLCBkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNldExvY2F0aW9uKGEsIGIpLCB0aGlzLnNldFNpemUoYywgZCksIHRoaXNcclxuICAgICAgICB9LCB0aGlzLmdldERpc3BsYXlCb3VuZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtsZWZ0OiB0aGlzLngsIHRvcDogdGhpcy55LCByaWdodDogdGhpcy54ICsgdGhpcy53aWR0aCAqIHRoaXMuc2NhbGVYLCBib3R0b206IHRoaXMueSArIHRoaXMuaGVpZ2h0ICogdGhpcy5zY2FsZVl9XHJcbiAgICAgICAgfSwgdGhpcy5nZXREaXNwbGF5U2l6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHt3aWR0aDogdGhpcy53aWR0aCAqIHRoaXMuc2NhbGVYLCBoZWlnaHQ6IHRoaXMuaGVpZ2h0ICogdGhpcy5zY2FsZVl9XHJcbiAgICAgICAgfSwgdGhpcy5nZXRQb3NpdGlvbiA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHZhciBiLCBjID0gdGhpcy5nZXRCb3VuZCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gXCJUb3BfTGVmdFwiID09IGEgPyBiID0ge3g6IGMubGVmdCwgeTogYy50b3B9IDogXCJUb3BfQ2VudGVyXCIgPT0gYSA/IGIgPSB7eDogdGhpcy5jeCwgeTogYy50b3B9IDogXCJUb3BfUmlnaHRcIiA9PSBhID8gYiA9IHt4OiBjLnJpZ2h0LCB5OiBjLnRvcH0gOiBcIk1pZGRsZV9MZWZ0XCIgPT0gYSA/IGIgPSB7XHJcbiAgICAgICAgICAgICAgICB4OiBjLmxlZnQsXHJcbiAgICAgICAgICAgICAgICB5OiB0aGlzLmN5XHJcbiAgICAgICAgICAgIH0gOiBcIk1pZGRsZV9DZW50ZXJcIiA9PSBhID8gYiA9IHt4OiB0aGlzLmN4LCB5OiB0aGlzLmN5fSA6IFwiTWlkZGxlX1JpZ2h0XCIgPT0gYSA/IGIgPSB7eDogYy5yaWdodCwgeTogdGhpcy5jeX0gOiBcIkJvdHRvbV9MZWZ0XCIgPT0gYSA/IGIgPSB7XHJcbiAgICAgICAgICAgICAgICB4OiBjLmxlZnQsXHJcbiAgICAgICAgICAgICAgICB5OiBjLmJvdHRvbVxyXG4gICAgICAgICAgICB9IDogXCJCb3R0b21fQ2VudGVyXCIgPT0gYSA/IGIgPSB7eDogdGhpcy5jeCwgeTogYy5ib3R0b219IDogXCJCb3R0b21fUmlnaHRcIiA9PSBhICYmIChiID0ge3g6IGMucmlnaHQsIHk6IGMuYm90dG9tfSksIGJcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYygpIHtcclxuICAgICAgICB0aGlzLmluaXRpYWxpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGMucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKSwgdGhpcy5lbGVtZW50VHlwZSA9IFwiaW50ZXJhY3RpdmVFbGVtZW50XCIsIHRoaXMuZHJhZ2FibGUgPSAhMSwgdGhpcy5zZWxlY3RlZCA9ICExLCB0aGlzLnNob3dTZWxlY3RlZCA9ICEwLCB0aGlzLnNlbGVjdGVkTG9jYXRpb24gPSBudWxsLCB0aGlzLmlzTW91c2VPdmVyID0gITE7XHJcbiAgICAgICAgICAgIHZhciBhID0gXCJkcmFnYWJsZSxzZWxlY3RlZCxzaG93U2VsZWN0ZWQsaXNNb3VzZU92ZXJcIi5zcGxpdChcIixcIik7XHJcbiAgICAgICAgICAgIHRoaXMuc2VyaWFsaXplZFByb3BlcnRpZXMgPSB0aGlzLnNlcmlhbGl6ZWRQcm9wZXJ0aWVzLmNvbmNhdChhKVxyXG4gICAgICAgIH0sIHRoaXMuaW5pdGlhbGl6ZSgpLCB0aGlzLnBhaW50U2VsZWN0ZWQgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICAwICE9IHRoaXMuc2hvd1NlbGVjdGVkICYmIChhLnNhdmUoKSwgYS5iZWdpblBhdGgoKSwgYS5zdHJva2VTdHlsZSA9IFwicmdiYSgxNjgsMjAyLDI1NSwgMC45KVwiLCBhLmZpbGxTdHlsZSA9IFwicmdiYSgxNjgsMjAyLDIzNiwwLjcpXCIsIGEucmVjdCgtdGhpcy53aWR0aCAvIDIgLSAzLCAtdGhpcy5oZWlnaHQgLyAyIC0gMywgdGhpcy53aWR0aCArIDYsIHRoaXMuaGVpZ2h0ICsgNiksIGEuZmlsbCgpLCBhLnN0cm9rZSgpLCBhLmNsb3NlUGF0aCgpLCBhLnJlc3RvcmUoKSlcclxuICAgICAgICB9LCB0aGlzLnBhaW50TW91c2VvdmVyID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFpbnRTZWxlY3RlZChhKVxyXG4gICAgICAgIH0sIHRoaXMuaXNJbkJvdW5kID0gZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGEgPiB0aGlzLnggJiYgYSA8IHRoaXMueCArIHRoaXMud2lkdGggKiBNYXRoLmFicyh0aGlzLnNjYWxlWCkgJiYgYiA+IHRoaXMueSAmJiBiIDwgdGhpcy55ICsgdGhpcy5oZWlnaHQgKiBNYXRoLmFicyh0aGlzLnNjYWxlWSlcclxuICAgICAgICB9LCB0aGlzLnNlbGVjdGVkSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZCA9ICEwLCB0aGlzLnNlbGVjdGVkTG9jYXRpb24gPSB7eDogdGhpcy54LCB5OiB0aGlzLnl9XHJcbiAgICAgICAgfSwgdGhpcy51bnNlbGVjdGVkSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZCA9ICExLCB0aGlzLnNlbGVjdGVkTG9jYXRpb24gPSBudWxsXHJcbiAgICAgICAgfSwgdGhpcy5kYmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChcImRiY2xpY2tcIiwgYSlcclxuICAgICAgICB9LCB0aGlzLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChcImNsaWNrXCIsIGEpXHJcbiAgICAgICAgfSwgdGhpcy5tb3VzZWRvd25IYW5kZXIgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoXCJtb3VzZWRvd25cIiwgYSlcclxuICAgICAgICB9LCB0aGlzLm1vdXNldXBIYW5kbGVyID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KFwibW91c2V1cFwiLCBhKVxyXG4gICAgICAgIH0sIHRoaXMubW91c2VvdmVySGFuZGxlciA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNNb3VzZU92ZXIgPSAhMCwgdGhpcy5kaXNwYXRjaEV2ZW50KFwibW91c2VvdmVyXCIsIGEpXHJcbiAgICAgICAgfSwgdGhpcy5tb3VzZW1vdmVIYW5kbGVyID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KFwibW91c2Vtb3ZlXCIsIGEpXHJcbiAgICAgICAgfSwgdGhpcy5tb3VzZW91dEhhbmRsZXIgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICB0aGlzLmlzTW91c2VPdmVyID0gITEsIHRoaXMuZGlzcGF0Y2hFdmVudChcIm1vdXNlb3V0XCIsIGEpXHJcbiAgICAgICAgfSwgdGhpcy5tb3VzZWRyYWdIYW5kbGVyID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgdmFyIGIgPSB0aGlzLnNlbGVjdGVkTG9jYXRpb24ueCArIGEuZHgsIGMgPSB0aGlzLnNlbGVjdGVkTG9jYXRpb24ueSArIGEuZHk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0TG9jYXRpb24oYiwgYyksIHRoaXMuZGlzcGF0Y2hFdmVudChcIm1vdXNlZHJhZ1wiLCBhKVxyXG4gICAgICAgIH0sIHRoaXMuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIChiLCBjKSB7XHJcbiAgICAgICAgICAgIHZhciBkID0gdGhpcywgZSA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICBjLmNhbGwoZCwgYSlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWVzc2FnZUJ1cyB8fCAodGhpcy5tZXNzYWdlQnVzID0gbmV3IGEudXRpbC5NZXNzYWdlQnVzKSwgdGhpcy5tZXNzYWdlQnVzLnN1YnNjcmliZShiLCBlKSwgdGhpc1xyXG4gICAgICAgIH0sIHRoaXMuZGlzcGF0Y2hFdmVudCA9IGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1lc3NhZ2VCdXMgPyAodGhpcy5tZXNzYWdlQnVzLnB1Ymxpc2goYSwgYiksIHRoaXMpIDogbnVsbFxyXG4gICAgICAgIH0sIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZUJ1cy51bnN1YnNjcmliZShhKVxyXG4gICAgICAgIH0sIHRoaXMucmVtb3ZlQWxsRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlQnVzID0gbmV3IGEudXRpbC5NZXNzYWdlQnVzXHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgYiA9IFwiY2xpY2ssZGJjbGljayxtb3VzZWRvd24sbW91c2V1cCxtb3VzZW92ZXIsbW91c2VvdXQsbW91c2Vtb3ZlLG1vdXNlZHJhZyx0b3VjaHN0YXJ0LHRvdWNobW92ZSx0b3VjaGVuZFwiLnNwbGl0KFwiLFwiKSwgZCA9IHRoaXM7XHJcbiAgICAgICAgYi5mb3JFYWNoKGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIGRbYV0gPSBmdW5jdGlvbiAoYikge1xyXG4gICAgICAgICAgICAgICAgbnVsbCAhPSBiID8gdGhpcy5hZGRFdmVudExpc3RlbmVyKGEsIGIpIDogdGhpcy5kaXNwYXRjaEV2ZW50KGEpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGQoKSB7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBkLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksIHRoaXMuZWRpdEFibGUgPSAhMSwgdGhpcy5zZWxlY3RlZFBvaW50ID0gbnVsbFxyXG4gICAgICAgIH0sIHRoaXMuZ2V0Q3RybFBvc2l0aW9uID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgdmFyIGIgPSA1LCBjID0gNSwgZCA9IHRoaXMuZ2V0UG9zaXRpb24oYSk7XHJcbiAgICAgICAgICAgIHJldHVybiB7bGVmdDogZC54IC0gYiwgdG9wOiBkLnkgLSBjLCByaWdodDogZC54ICsgYiwgYm90dG9tOiBkLnkgKyBjfVxyXG4gICAgICAgIH0sIHRoaXMuc2VsZWN0ZWRIYW5kbGVyID0gZnVuY3Rpb24gKGIpIHtcclxuICAgICAgICAgICAgZC5wcm90b3R5cGUuc2VsZWN0ZWRIYW5kbGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksIHRoaXMuc2VsZWN0ZWRTaXplID0ge3dpZHRoOiB0aGlzLndpZHRoLCBoZWlnaHQ6IHRoaXMuaGVpZ2h0fSwgYi5zY2VuZS5tb2RlID09IGEuU2NlbmVNb2RlLmVkaXQgJiYgKHRoaXMuZWRpdEFibGUgPSAhMClcclxuICAgICAgICB9LCB0aGlzLnVuc2VsZWN0ZWRIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBkLnByb3RvdHlwZS51bnNlbGVjdGVkSGFuZGxlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpLCB0aGlzLnNlbGVjdGVkU2l6ZSA9IG51bGwsIHRoaXMuZWRpdEFibGUgPSAhMVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIGIgPSBbXCJUb3BfTGVmdFwiLCBcIlRvcF9DZW50ZXJcIiwgXCJUb3BfUmlnaHRcIiwgXCJNaWRkbGVfTGVmdFwiLCBcIk1pZGRsZV9SaWdodFwiLCBcIkJvdHRvbV9MZWZ0XCIsIFwiQm90dG9tX0NlbnRlclwiLCBcIkJvdHRvbV9SaWdodFwiXTtcclxuICAgICAgICB0aGlzLnBhaW50Q3RybCA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIGlmICgwICE9IHRoaXMuZWRpdEFibGUpIHtcclxuICAgICAgICAgICAgICAgIGEuc2F2ZSgpO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgYyA9IDA7IGMgPCBiLmxlbmd0aDsgYysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSB0aGlzLmdldEN0cmxQb3NpdGlvbihiW2NdKTtcclxuICAgICAgICAgICAgICAgICAgICBkLmxlZnQgLT0gdGhpcy5jeCwgZC5yaWdodCAtPSB0aGlzLmN4LCBkLnRvcCAtPSB0aGlzLmN5LCBkLmJvdHRvbSAtPSB0aGlzLmN5O1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlID0gZC5yaWdodCAtIGQubGVmdCwgZiA9IGQuYm90dG9tIC0gZC50b3A7XHJcbiAgICAgICAgICAgICAgICAgICAgYS5iZWdpblBhdGgoKSwgYS5zdHJva2VTdHlsZSA9IFwicmdiYSgwLDAsMCwwLjgpXCIsIGEucmVjdChkLmxlZnQsIGQudG9wLCBlLCBmKSwgYS5zdHJva2UoKSwgYS5jbG9zZVBhdGgoKSwgYS5iZWdpblBhdGgoKSwgYS5zdHJva2VTdHlsZSA9IFwicmdiYSgyNTUsMjU1LDI1NSwwLjMpXCIsIGEucmVjdChkLmxlZnQgKyAxLCBkLnRvcCArIDEsIGUgLSAyLCBmIC0gMiksIGEuc3Ryb2tlKCksIGEuY2xvc2VQYXRoKClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGEucmVzdG9yZSgpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCB0aGlzLmlzSW5Cb3VuZCA9IGZ1bmN0aW9uIChhLCBjKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUG9pbnQgPSBudWxsLCAxID09IHRoaXMuZWRpdEFibGUpZm9yICh2YXIgZSA9IDA7IGUgPCBiLmxlbmd0aDsgZSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZiA9IHRoaXMuZ2V0Q3RybFBvc2l0aW9uKGJbZV0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGEgPiBmLmxlZnQgJiYgYSA8IGYucmlnaHQgJiYgYyA+IGYudG9wICYmIGMgPCBmLmJvdHRvbSlyZXR1cm4gdGhpcy5zZWxlY3RlZFBvaW50ID0gYltlXSwgITBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZC5wcm90b3R5cGUuaXNJbkJvdW5kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcclxuICAgICAgICB9LCB0aGlzLm1vdXNlZHJhZ0hhbmRsZXIgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSB0aGlzLnNlbGVjdGVkUG9pbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBiID0gdGhpcy5zZWxlY3RlZExvY2F0aW9uLnggKyBhLmR4LCBjID0gdGhpcy5zZWxlY3RlZExvY2F0aW9uLnkgKyBhLmR5O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRMb2NhdGlvbihiLCBjKSwgdGhpcy5kaXNwYXRjaEV2ZW50KFwibW91c2VkcmFnXCIsIGEpXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoXCJUb3BfTGVmdFwiID09IHRoaXMuc2VsZWN0ZWRQb2ludCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkID0gdGhpcy5zZWxlY3RlZFNpemUud2lkdGggLSBhLmR4LCBlID0gdGhpcy5zZWxlY3RlZFNpemUuaGVpZ2h0IC0gYS5keSwgYiA9IHRoaXMuc2VsZWN0ZWRMb2NhdGlvbi54ICsgYS5keCwgYyA9IHRoaXMuc2VsZWN0ZWRMb2NhdGlvbi55ICsgYS5keTtcclxuICAgICAgICAgICAgICAgICAgICBiIDwgdGhpcy54ICsgdGhpcy53aWR0aCAmJiAodGhpcy54ID0gYiwgdGhpcy53aWR0aCA9IGQpLCBjIDwgdGhpcy55ICsgdGhpcy5oZWlnaHQgJiYgKHRoaXMueSA9IGMsIHRoaXMuaGVpZ2h0ID0gZSlcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXCJUb3BfQ2VudGVyXCIgPT0gdGhpcy5zZWxlY3RlZFBvaW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0aGlzLnNlbGVjdGVkU2l6ZS5oZWlnaHQgLSBhLmR5LCBjID0gdGhpcy5zZWxlY3RlZExvY2F0aW9uLnkgKyBhLmR5O1xyXG4gICAgICAgICAgICAgICAgICAgIGMgPCB0aGlzLnkgKyB0aGlzLmhlaWdodCAmJiAodGhpcy55ID0gYywgdGhpcy5oZWlnaHQgPSBlKVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcIlRvcF9SaWdodFwiID09IHRoaXMuc2VsZWN0ZWRQb2ludCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkID0gdGhpcy5zZWxlY3RlZFNpemUud2lkdGggKyBhLmR4LCBjID0gdGhpcy5zZWxlY3RlZExvY2F0aW9uLnkgKyBhLmR5O1xyXG4gICAgICAgICAgICAgICAgICAgIGMgPCB0aGlzLnkgKyB0aGlzLmhlaWdodCAmJiAodGhpcy55ID0gYywgdGhpcy5oZWlnaHQgPSB0aGlzLnNlbGVjdGVkU2l6ZS5oZWlnaHQgLSBhLmR5KSwgZCA+IDEgJiYgKHRoaXMud2lkdGggPSBkKVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcIk1pZGRsZV9MZWZ0XCIgPT0gdGhpcy5zZWxlY3RlZFBvaW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSB0aGlzLnNlbGVjdGVkU2l6ZS53aWR0aCAtIGEuZHgsIGIgPSB0aGlzLnNlbGVjdGVkTG9jYXRpb24ueCArIGEuZHg7XHJcbiAgICAgICAgICAgICAgICAgICAgYiA8IHRoaXMueCArIHRoaXMud2lkdGggJiYgKHRoaXMueCA9IGIpLCBkID4gMSAmJiAodGhpcy53aWR0aCA9IGQpXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFwiTWlkZGxlX1JpZ2h0XCIgPT0gdGhpcy5zZWxlY3RlZFBvaW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSB0aGlzLnNlbGVjdGVkU2l6ZS53aWR0aCArIGEuZHg7XHJcbiAgICAgICAgICAgICAgICAgICAgZCA+IDEgJiYgKHRoaXMud2lkdGggPSBkKVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcIkJvdHRvbV9MZWZ0XCIgPT0gdGhpcy5zZWxlY3RlZFBvaW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSB0aGlzLnNlbGVjdGVkU2l6ZS53aWR0aCAtIGEuZHgsIGIgPSB0aGlzLnNlbGVjdGVkTG9jYXRpb24ueCArIGEuZHg7XHJcbiAgICAgICAgICAgICAgICAgICAgZCA+IDEgJiYgKHRoaXMueCA9IGIsIHRoaXMud2lkdGggPSBkKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHRoaXMuc2VsZWN0ZWRTaXplLmhlaWdodCArIGEuZHk7XHJcbiAgICAgICAgICAgICAgICAgICAgZSA+IDEgJiYgKHRoaXMuaGVpZ2h0ID0gZSlcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXCJCb3R0b21fQ2VudGVyXCIgPT0gdGhpcy5zZWxlY3RlZFBvaW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0aGlzLnNlbGVjdGVkU2l6ZS5oZWlnaHQgKyBhLmR5O1xyXG4gICAgICAgICAgICAgICAgICAgIGUgPiAxICYmICh0aGlzLmhlaWdodCA9IGUpXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFwiQm90dG9tX1JpZ2h0XCIgPT0gdGhpcy5zZWxlY3RlZFBvaW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSB0aGlzLnNlbGVjdGVkU2l6ZS53aWR0aCArIGEuZHg7XHJcbiAgICAgICAgICAgICAgICAgICAgZCA+IDEgJiYgKHRoaXMud2lkdGggPSBkKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHRoaXMuc2VsZWN0ZWRTaXplLmhlaWdodCArIGEuZHk7XHJcbiAgICAgICAgICAgICAgICAgICAgZSA+IDEgJiYgKHRoaXMuaGVpZ2h0ID0gZSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChcInJlc2l6ZVwiLCBhKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGIucHJvdG90eXBlID0gbmV3IGEuRWxlbWVudCwgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoYi5wcm90b3R5cGUsIHtcclxuICAgICAgICBjeDoge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnggKyB0aGlzLndpZHRoIC8gMlxyXG4gICAgICAgICAgICB9LCBzZXQ6IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnggPSBhIC0gdGhpcy53aWR0aCAvIDJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIGN5OiB7XHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMueSArIHRoaXMuaGVpZ2h0IC8gMlxyXG4gICAgICAgICAgICB9LCBzZXQ6IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnkgPSBhIC0gdGhpcy5oZWlnaHQgLyAyXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KSwgYy5wcm90b3R5cGUgPSBuZXcgYiwgZC5wcm90b3R5cGUgPSBuZXcgYywgYS5EaXNwbGF5RWxlbWVudCA9IGIsIGEuSW50ZXJhY3RpdmVFbGVtZW50ID0gYywgYS5FZGl0YWJsZUVsZW1lbnQgPSBkXHJcbn0oSlRvcG8pLCBmdW5jdGlvbiAoYSkge1xyXG4gICAgZnVuY3Rpb24gYihjKSB7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXplID0gZnVuY3Rpb24gKGMpIHtcclxuICAgICAgICAgICAgYi5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpLCB0aGlzLmVsZW1lbnRUeXBlID0gXCJub2RlXCIsIHRoaXMuekluZGV4ID0gYS56SW5kZXhfTm9kZSwgdGhpcy50ZXh0ID0gYywgdGhpcy5mb250ID0gXCIxMnB4IENvbnNvbGFzXCIsIHRoaXMuZm9udENvbG9yID0gXCIyNTUsMjU1LDI1NVwiLCB0aGlzLmJvcmRlcldpZHRoID0gMCwgdGhpcy5ib3JkZXJDb2xvciA9IFwiMjU1LDI1NSwyNTVcIiwgdGhpcy5ib3JkZXJSYWRpdXMgPSBudWxsLCB0aGlzLmRyYWdhYmxlID0gITAsIHRoaXMudGV4dFBvc2l0aW9uID0gXCJCb3R0b21fQ2VudGVyXCIsIHRoaXMudGV4dE9mZnNldFggPSAwLCB0aGlzLnRleHRPZmZzZXRZID0gMCwgdGhpcy50cmFuc2Zvcm1BYmxlID0gITAsIHRoaXMuaW5MaW5rcyA9IG51bGwsIHRoaXMub3V0TGlua3MgPSBudWxsO1xyXG4gICAgICAgICAgICB2YXIgZCA9IFwidGV4dCxmb250LGZvbnRDb2xvcix0ZXh0UG9zaXRpb24sdGV4dE9mZnNldFgsdGV4dE9mZnNldFksYm9yZGVyUmFkaXVzXCIuc3BsaXQoXCIsXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnNlcmlhbGl6ZWRQcm9wZXJ0aWVzID0gdGhpcy5zZXJpYWxpemVkUHJvcGVydGllcy5jb25jYXQoZClcclxuICAgICAgICB9LCB0aGlzLmluaXRpYWxpemUoYyksIHRoaXMucGFpbnQgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pbWFnZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGIgPSBhLmdsb2JhbEFscGhhO1xyXG4gICAgICAgICAgICAgICAgYS5nbG9iYWxBbHBoYSA9IHRoaXMuYWxwaGEsIG51bGwgIT0gdGhpcy5hbGFybUltYWdlICYmIG51bGwgIT0gdGhpcy5hbGFybSA/IGEuZHJhd0ltYWdlKHRoaXMuYWxhcm1JbWFnZSwgLXRoaXMud2lkdGggLyAyLCAtdGhpcy5oZWlnaHQgLyAyLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCkgOiBhLmRyYXdJbWFnZSh0aGlzLmltYWdlLCAtdGhpcy53aWR0aCAvIDIsIC10aGlzLmhlaWdodCAvIDIsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KSwgYS5nbG9iYWxBbHBoYSA9IGJcclxuICAgICAgICAgICAgfSBlbHNlIGEuYmVnaW5QYXRoKCksIGEuZmlsbFN0eWxlID0gXCJyZ2JhKFwiICsgdGhpcy5maWxsQ29sb3IgKyBcIixcIiArIHRoaXMuYWxwaGEgKyBcIilcIiwgbnVsbCA9PSB0aGlzLmJvcmRlclJhZGl1cyB8fCAwID09IHRoaXMuYm9yZGVyUmFkaXVzID8gYS5yZWN0KC10aGlzLndpZHRoIC8gMiwgLXRoaXMuaGVpZ2h0IC8gMiwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpIDogYS5KVG9wb1JvdW5kUmVjdCgtdGhpcy53aWR0aCAvIDIsIC10aGlzLmhlaWdodCAvIDIsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLmJvcmRlclJhZGl1cyksIGEuZmlsbCgpLCBhLmNsb3NlUGF0aCgpO1xyXG4gICAgICAgICAgICB0aGlzLnBhaW50VGV4dChhKSwgdGhpcy5wYWludEJvcmRlcihhKSwgdGhpcy5wYWludEN0cmwoYSksIHRoaXMucGFpbnRBbGFybVRleHQoYSlcclxuICAgICAgICB9LCB0aGlzLnBhaW50QWxhcm1UZXh0ID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gdGhpcy5hbGFybSAmJiBcIlwiICE9IHRoaXMuYWxhcm0pIHtcclxuICAgICAgICAgICAgICAgIHZhciBiID0gdGhpcy5hbGFybUNvbG9yIHx8IFwiMjU1LDAsMFwiLCBjID0gdGhpcy5hbGFybUFscGhhIHx8IC41O1xyXG4gICAgICAgICAgICAgICAgYS5iZWdpblBhdGgoKSwgYS5mb250ID0gdGhpcy5hbGFybUZvbnQgfHwgXCIxMHB4IOW+rui9r+mbhem7kVwiO1xyXG4gICAgICAgICAgICAgICAgdmFyIGQgPSBhLm1lYXN1cmVUZXh0KHRoaXMuYWxhcm0pLndpZHRoICsgNiwgZSA9IGEubWVhc3VyZVRleHQoXCLnlLBcIikud2lkdGggKyA2LCBmID0gdGhpcy53aWR0aCAvIDIgLSBkIC8gMiwgZyA9IC10aGlzLmhlaWdodCAvIDIgLSBlIC0gODtcclxuICAgICAgICAgICAgICAgIGEuc3Ryb2tlU3R5bGUgPSBcInJnYmEoXCIgKyBiICsgXCIsIFwiICsgYyArIFwiKVwiLCBhLmZpbGxTdHlsZSA9IFwicmdiYShcIiArIGIgKyBcIiwgXCIgKyBjICsgXCIpXCIsIGEubGluZUNhcCA9IFwicm91bmRcIiwgYS5saW5lV2lkdGggPSAxLCBhLm1vdmVUbyhmLCBnKSwgYS5saW5lVG8oZiArIGQsIGcpLCBhLmxpbmVUbyhmICsgZCwgZyArIGUpLCBhLmxpbmVUbyhmICsgZCAvIDIgKyA2LCBnICsgZSksIGEubGluZVRvKGYgKyBkIC8gMiwgZyArIGUgKyA4KSwgYS5saW5lVG8oZiArIGQgLyAyIC0gNiwgZyArIGUpLCBhLmxpbmVUbyhmLCBnICsgZSksIGEubGluZVRvKGYsIGcpLCBhLmZpbGwoKSwgYS5zdHJva2UoKSwgYS5jbG9zZVBhdGgoKSwgYS5iZWdpblBhdGgoKSwgYS5zdHJva2VTdHlsZSA9IFwicmdiYShcIiArIHRoaXMuZm9udENvbG9yICsgXCIsIFwiICsgdGhpcy5hbHBoYSArIFwiKVwiLCBhLmZpbGxTdHlsZSA9IFwicmdiYShcIiArIHRoaXMuZm9udENvbG9yICsgXCIsIFwiICsgdGhpcy5hbHBoYSArIFwiKVwiLCBhLmZpbGxUZXh0KHRoaXMuYWxhcm0sIGYgKyAyLCBnICsgZSAtIDQpLCBhLmNsb3NlUGF0aCgpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCB0aGlzLnBhaW50VGV4dCA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHZhciBiID0gdGhpcy50ZXh0O1xyXG4gICAgICAgICAgICBpZiAobnVsbCAhPSBiICYmIFwiXCIgIT0gYikge1xyXG4gICAgICAgICAgICAgICAgYS5iZWdpblBhdGgoKSwgYS5mb250ID0gdGhpcy5mb250O1xyXG4gICAgICAgICAgICAgICAgdmFyIGMgPSBhLm1lYXN1cmVUZXh0KGIpLndpZHRoLCBkID0gYS5tZWFzdXJlVGV4dChcIueUsFwiKS53aWR0aDtcclxuICAgICAgICAgICAgICAgIGEuZmlsbFN0eWxlID0gXCJyZ2JhKFwiICsgdGhpcy5mb250Q29sb3IgKyBcIiwgXCIgKyB0aGlzLmFscGhhICsgXCIpXCI7XHJcbiAgICAgICAgICAgICAgICB2YXIgZSA9IHRoaXMuZ2V0VGV4dFBvc3Rpb24odGhpcy50ZXh0UG9zaXRpb24sIGMsIGQpO1xyXG4gICAgICAgICAgICAgICAgYS5maWxsVGV4dChiLCBlLngsIGUueSksIGEuY2xvc2VQYXRoKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIHRoaXMucGFpbnRCb3JkZXIgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICBpZiAoMCAhPSB0aGlzLmJvcmRlcldpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICBhLmJlZ2luUGF0aCgpLCBhLmxpbmVXaWR0aCA9IHRoaXMuYm9yZGVyV2lkdGgsIGEuc3Ryb2tlU3R5bGUgPSBcInJnYmEoXCIgKyB0aGlzLmJvcmRlckNvbG9yICsgXCIsXCIgKyB0aGlzLmFscGhhICsgXCIpXCI7XHJcbiAgICAgICAgICAgICAgICB2YXIgYiA9IHRoaXMuYm9yZGVyV2lkdGggLyAyO1xyXG4gICAgICAgICAgICAgICAgbnVsbCA9PSB0aGlzLmJvcmRlclJhZGl1cyB8fCAwID09IHRoaXMuYm9yZGVyUmFkaXVzID8gYS5yZWN0KC10aGlzLndpZHRoIC8gMiAtIGIsIC10aGlzLmhlaWdodCAvIDIgLSBiLCB0aGlzLndpZHRoICsgdGhpcy5ib3JkZXJXaWR0aCwgdGhpcy5oZWlnaHQgKyB0aGlzLmJvcmRlcldpZHRoKSA6IGEuSlRvcG9Sb3VuZFJlY3QoLXRoaXMud2lkdGggLyAyIC0gYiwgLXRoaXMuaGVpZ2h0IC8gMiAtIGIsIHRoaXMud2lkdGggKyB0aGlzLmJvcmRlcldpZHRoLCB0aGlzLmhlaWdodCArIHRoaXMuYm9yZGVyV2lkdGgsIHRoaXMuYm9yZGVyUmFkaXVzKSwgYS5zdHJva2UoKSwgYS5jbG9zZVBhdGgoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgdGhpcy5nZXRUZXh0UG9zdGlvbiA9IGZ1bmN0aW9uIChhLCBiLCBjKSB7XHJcbiAgICAgICAgICAgIHZhciBkID0gbnVsbDtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gYSB8fCBcIkJvdHRvbV9DZW50ZXJcIiA9PSBhID8gZCA9IHt4OiAtdGhpcy53aWR0aCAvIDIgKyAodGhpcy53aWR0aCAtIGIpIC8gMiwgeTogdGhpcy5oZWlnaHQgLyAyICsgY30gOiBcIlRvcF9DZW50ZXJcIiA9PSBhID8gZCA9IHtcclxuICAgICAgICAgICAgICAgIHg6IC10aGlzLndpZHRoIC8gMiArICh0aGlzLndpZHRoIC0gYikgLyAyLFxyXG4gICAgICAgICAgICAgICAgeTogLXRoaXMuaGVpZ2h0IC8gMiAtIGMgLyAyXHJcbiAgICAgICAgICAgIH0gOiBcIlRvcF9SaWdodFwiID09IGEgPyBkID0ge3g6IHRoaXMud2lkdGggLyAyLCB5OiAtdGhpcy5oZWlnaHQgLyAyIC0gYyAvIDJ9IDogXCJUb3BfTGVmdFwiID09IGEgPyBkID0ge1xyXG4gICAgICAgICAgICAgICAgeDogLXRoaXMud2lkdGggLyAyIC0gYixcclxuICAgICAgICAgICAgICAgIHk6IC10aGlzLmhlaWdodCAvIDIgLSBjIC8gMlxyXG4gICAgICAgICAgICB9IDogXCJCb3R0b21fUmlnaHRcIiA9PSBhID8gZCA9IHt4OiB0aGlzLndpZHRoIC8gMiwgeTogdGhpcy5oZWlnaHQgLyAyICsgY30gOiBcIkJvdHRvbV9MZWZ0XCIgPT0gYSA/IGQgPSB7XHJcbiAgICAgICAgICAgICAgICB4OiAtdGhpcy53aWR0aCAvIDIgLSBiLFxyXG4gICAgICAgICAgICAgICAgeTogdGhpcy5oZWlnaHQgLyAyICsgY1xyXG4gICAgICAgICAgICB9IDogXCJNaWRkbGVfQ2VudGVyXCIgPT0gYSA/IGQgPSB7eDogLXRoaXMud2lkdGggLyAyICsgKHRoaXMud2lkdGggLSBiKSAvIDIsIHk6IGMgLyAyfSA6IFwiTWlkZGxlX1JpZ2h0XCIgPT0gYSA/IGQgPSB7XHJcbiAgICAgICAgICAgICAgICB4OiB0aGlzLndpZHRoIC8gMixcclxuICAgICAgICAgICAgICAgIHk6IGMgLyAyXHJcbiAgICAgICAgICAgIH0gOiBcIk1pZGRsZV9MZWZ0XCIgPT0gYSAmJiAoZCA9IHt4OiAtdGhpcy53aWR0aCAvIDIgLSBiLCB5OiBjIC8gMn0pLCBudWxsICE9IHRoaXMudGV4dE9mZnNldFggJiYgKGQueCArPSB0aGlzLnRleHRPZmZzZXRYKSwgbnVsbCAhPSB0aGlzLnRleHRPZmZzZXRZICYmIChkLnkgKz0gdGhpcy50ZXh0T2Zmc2V0WSksIGRcclxuICAgICAgICB9LCB0aGlzLnNldEltYWdlID0gZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgaWYgKG51bGwgPT0gYSl0aHJvdyBuZXcgRXJyb3IoXCJOb2RlLnNldEltYWdlKCk6IOWPguaVsEltYWdl5a+56LGh5Li656m6IVwiKTtcclxuICAgICAgICAgICAgdmFyIGMgPSB0aGlzO1xyXG4gICAgICAgICAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgYSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGQgPSBqW2FdO1xyXG4gICAgICAgICAgICAgICAgbnVsbCA9PSBkID8gKGQgPSBuZXcgSW1hZ2UsIGQuc3JjID0gYSwgZC5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgalthXSA9IGQsIDEgPT0gYiAmJiBjLnNldFNpemUoZC53aWR0aCwgZC5oZWlnaHQpLCBjLmltYWdlID0gZCwgYy5hbGFybUNvbG9yID0gbnVsbCA9PSBjLmFsYXJtQ29sb3IgPyBcIjI1NSwwLDBcIiA6IGMuYWxhcm1Db2xvclxyXG4gICAgICAgICAgICAgICAgfSkgOiAoYiAmJiB0aGlzLnNldFNpemUoZC53aWR0aCwgZC5oZWlnaHQpLCBjLmltYWdlID0gZCwgYy5hbGFybUNvbG9yID0gbnVsbCA9PSBjLmFsYXJtQ29sb3IgPyBcIjI1NSwwLDBcIiA6IGMuYWxhcm1Db2xvcilcclxuICAgICAgICAgICAgfSBlbHNlIHRoaXMuaW1hZ2UgPSBhLCBjLmFsYXJtQ29sb3IgPSBudWxsID09IGMuYWxhcm1Db2xvciA/IFwiMjU1LDAsMFwiIDogYy5hbGFybUNvbG9yLCAxID09IGIgJiYgdGhpcy5zZXRTaXplKGEud2lkdGgsIGEuaGVpZ2h0KVxyXG4gICAgICAgIH0sIHRoaXMucmVtb3ZlSGFuZGxlciA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHZhciBiID0gdGhpcztcclxuICAgICAgICAgICAgdGhpcy5vdXRMaW5rcyAmJiAodGhpcy5vdXRMaW5rcy5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7XHJcbiAgICAgICAgICAgICAgICBjLm5vZGVBID09PSBiICYmIGEucmVtb3ZlKGMpXHJcbiAgICAgICAgICAgIH0pLCB0aGlzLm91dExpbmtzID0gbnVsbCksIHRoaXMuaW5MaW5rcyAmJiAodGhpcy5pbkxpbmtzLmZvckVhY2goZnVuY3Rpb24gKGMpIHtcclxuICAgICAgICAgICAgICAgIGMubm9kZVogPT09IGIgJiYgYS5yZW1vdmUoYylcclxuICAgICAgICAgICAgfSksIHRoaXMuaW5MaW5rcyA9IG51bGwpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGMoKSB7XHJcbiAgICAgICAgYy5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZChhKSB7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXplKCksIHRoaXMudGV4dCA9IGEsIHRoaXMuZWxlbWVudFR5cGUgPSBcIlRleHROb2RlXCIsIHRoaXMucGFpbnQgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICBhLmJlZ2luUGF0aCgpLCBhLmZvbnQgPSB0aGlzLmZvbnQsIHRoaXMud2lkdGggPSBhLm1lYXN1cmVUZXh0KHRoaXMudGV4dCkud2lkdGgsIHRoaXMuaGVpZ2h0ID0gYS5tZWFzdXJlVGV4dChcIueUsFwiKS53aWR0aCwgYS5zdHJva2VTdHlsZSA9IFwicmdiYShcIiArIHRoaXMuZm9udENvbG9yICsgXCIsIFwiICsgdGhpcy5hbHBoYSArIFwiKVwiLCBhLmZpbGxTdHlsZSA9IFwicmdiYShcIiArIHRoaXMuZm9udENvbG9yICsgXCIsIFwiICsgdGhpcy5hbHBoYSArIFwiKVwiLCBhLmZpbGxUZXh0KHRoaXMudGV4dCwgLXRoaXMud2lkdGggLyAyLCB0aGlzLmhlaWdodCAvIDIpLCBhLmNsb3NlUGF0aCgpLCB0aGlzLnBhaW50Qm9yZGVyKGEpLCB0aGlzLnBhaW50Q3RybChhKSwgdGhpcy5wYWludEFsYXJtVGV4dChhKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBlKGEsIGIsIGMpIHtcclxuICAgICAgICB0aGlzLmluaXRpYWxpemUoKSwgdGhpcy50ZXh0ID0gYSwgdGhpcy5ocmVmID0gYiwgdGhpcy50YXJnZXQgPSBjLCB0aGlzLmVsZW1lbnRUeXBlID0gXCJMaW5rTm9kZVwiLCB0aGlzLmlzVmlzaXRlZCA9ICExLCB0aGlzLnZpc2l0ZWRDb2xvciA9IG51bGwsIHRoaXMucGFpbnQgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICBhLmJlZ2luUGF0aCgpLCBhLmZvbnQgPSB0aGlzLmZvbnQsIHRoaXMud2lkdGggPSBhLm1lYXN1cmVUZXh0KHRoaXMudGV4dCkud2lkdGgsIHRoaXMuaGVpZ2h0ID0gYS5tZWFzdXJlVGV4dChcIueUsFwiKS53aWR0aCwgdGhpcy5pc1Zpc2l0ZWQgJiYgbnVsbCAhPSB0aGlzLnZpc2l0ZWRDb2xvciA/IChhLnN0cm9rZVN0eWxlID0gXCJyZ2JhKFwiICsgdGhpcy52aXNpdGVkQ29sb3IgKyBcIiwgXCIgKyB0aGlzLmFscGhhICsgXCIpXCIsIGEuZmlsbFN0eWxlID0gXCJyZ2JhKFwiICsgdGhpcy52aXNpdGVkQ29sb3IgKyBcIiwgXCIgKyB0aGlzLmFscGhhICsgXCIpXCIpIDogKGEuc3Ryb2tlU3R5bGUgPSBcInJnYmEoXCIgKyB0aGlzLmZvbnRDb2xvciArIFwiLCBcIiArIHRoaXMuYWxwaGEgKyBcIilcIiwgYS5maWxsU3R5bGUgPSBcInJnYmEoXCIgKyB0aGlzLmZvbnRDb2xvciArIFwiLCBcIiArIHRoaXMuYWxwaGEgKyBcIilcIiksIGEuZmlsbFRleHQodGhpcy50ZXh0LCAtdGhpcy53aWR0aCAvIDIsIHRoaXMuaGVpZ2h0IC8gMiksIHRoaXMuaXNNb3VzZU92ZXIgJiYgKGEubW92ZVRvKC10aGlzLndpZHRoIC8gMiwgdGhpcy5oZWlnaHQpLCBhLmxpbmVUbyh0aGlzLndpZHRoIC8gMiwgdGhpcy5oZWlnaHQpLCBhLnN0cm9rZSgpKSwgYS5jbG9zZVBhdGgoKSwgdGhpcy5wYWludEJvcmRlcihhKSwgdGhpcy5wYWludEN0cmwoYSksIHRoaXMucGFpbnRBbGFybVRleHQoYSlcclxuICAgICAgICB9LCB0aGlzLm1vdXNlbW92ZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBhID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJjYW52YXNcIik7XHJcbiAgICAgICAgICAgIGlmIChhICYmIGEubGVuZ3RoID4gMClmb3IgKHZhciBiID0gMDsgYiA8IGEubGVuZ3RoOyBiKyspYVtiXS5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIlxyXG4gICAgICAgIH0pLCB0aGlzLm1vdXNlb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGEgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImNhbnZhc1wiKTtcclxuICAgICAgICAgICAgaWYgKGEgJiYgYS5sZW5ndGggPiAwKWZvciAodmFyIGIgPSAwOyBiIDwgYS5sZW5ndGg7IGIrKylhW2JdLnN0eWxlLmN1cnNvciA9IFwiZGVmYXVsdFwiXHJcbiAgICAgICAgfSksIHRoaXMuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBcIl9ibGFua1wiID09IHRoaXMudGFyZ2V0ID8gd2luZG93Lm9wZW4odGhpcy5ocmVmKSA6IGxvY2F0aW9uID0gdGhpcy5ocmVmLCB0aGlzLmlzVmlzaXRlZCA9ICEwXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBmKGEpIHtcclxuICAgICAgICB0aGlzLmluaXRpYWxpemUoYXJndW1lbnRzKSwgdGhpcy5fcmFkaXVzID0gMjAsIHRoaXMuYmVnaW5EZWdyZWUgPSAwLCB0aGlzLmVuZERlZ3JlZSA9IDIgKiBNYXRoLlBJLCB0aGlzLnRleHQgPSBhLCB0aGlzLnBhaW50ID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgYS5zYXZlKCksIGEuYmVnaW5QYXRoKCksIGEuZmlsbFN0eWxlID0gXCJyZ2JhKFwiICsgdGhpcy5maWxsQ29sb3IgKyBcIixcIiArIHRoaXMuYWxwaGEgKyBcIilcIiwgYS5hcmMoMCwgMCwgdGhpcy5yYWRpdXMsIHRoaXMuYmVnaW5EZWdyZWUsIHRoaXMuZW5kRGVncmVlLCAhMCksIGEuZmlsbCgpLCBhLmNsb3NlUGF0aCgpLCBhLnJlc3RvcmUoKSwgdGhpcy5wYWludFRleHQoYSksIHRoaXMucGFpbnRCb3JkZXIoYSksIHRoaXMucGFpbnRDdHJsKGEpLCB0aGlzLnBhaW50QWxhcm1UZXh0KGEpXHJcbiAgICAgICAgfSwgdGhpcy5wYWludFNlbGVjdGVkID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgYS5zYXZlKCksIGEuYmVnaW5QYXRoKCksIGEuc3Ryb2tlU3R5bGUgPSBcInJnYmEoMTY4LDIwMiwyNTUsIDAuOSlcIiwgYS5maWxsU3R5bGUgPSBcInJnYmEoMTY4LDIwMiwyMzYsMC43KVwiLCBhLmFyYygwLCAwLCB0aGlzLnJhZGl1cyArIDMsIHRoaXMuYmVnaW5EZWdyZWUsIHRoaXMuZW5kRGVncmVlLCAhMCksIGEuZmlsbCgpLCBhLnN0cm9rZSgpLCBhLmNsb3NlUGF0aCgpLCBhLnJlc3RvcmUoKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnKGEsIGIsIGMpIHtcclxuICAgICAgICB0aGlzLmluaXRpYWxpemUoKSwgdGhpcy5mcmFtZUltYWdlcyA9IGEgfHwgW10sIHRoaXMuZnJhbWVJbmRleCA9IDAsIHRoaXMuaXNTdG9wID0gITA7XHJcbiAgICAgICAgdmFyIGQgPSBiIHx8IDFlMztcclxuICAgICAgICB0aGlzLnJlcGVhdFBsYXkgPSAhMTtcclxuICAgICAgICB2YXIgZSA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5uZXh0RnJhbWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1N0b3AgJiYgbnVsbCAhPSB0aGlzLmZyYW1lSW1hZ2VzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZnJhbWVJbmRleCsrLCB0aGlzLmZyYW1lSW5kZXggPj0gdGhpcy5mcmFtZUltYWdlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucmVwZWF0UGxheSlyZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mcmFtZUluZGV4ID0gMFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRJbWFnZSh0aGlzLmZyYW1lSW1hZ2VzW3RoaXMuZnJhbWVJbmRleF0sIGMpLCBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBlLm5leHRGcmFtZSgpXHJcbiAgICAgICAgICAgICAgICB9LCBkIC8gYS5sZW5ndGgpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaChhLCBiLCBjLCBkLCBlKSB7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgdmFyIGYgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuc2V0SW1hZ2UoYSksIHRoaXMuZnJhbWVJbmRleCA9IDAsIHRoaXMuaXNQYXVzZSA9ICEwLCB0aGlzLnJlcGVhdFBsYXkgPSAhMTtcclxuICAgICAgICB2YXIgZyA9IGQgfHwgMWUzO1xyXG4gICAgICAgIGUgPSBlIHx8IDAsIHRoaXMucGFpbnQgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pbWFnZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGIgPSB0aGlzLndpZHRoLCBkID0gdGhpcy5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICBhLnNhdmUoKSwgYS5iZWdpblBhdGgoKSwgYS5maWxsU3R5bGUgPSBcInJnYmEoXCIgKyB0aGlzLmZpbGxDb2xvciArIFwiLFwiICsgdGhpcy5hbHBoYSArIFwiKVwiO1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSAoTWF0aC5mbG9vcih0aGlzLmZyYW1lSW5kZXggLyBjKSArIGUpICogZCwgZyA9IE1hdGguZmxvb3IodGhpcy5mcmFtZUluZGV4ICUgYykgKiBiO1xyXG4gICAgICAgICAgICAgICAgYS5kcmF3SW1hZ2UodGhpcy5pbWFnZSwgZywgZiwgYiwgZCwgLWIgLyAyLCAtZCAvIDIsIGIsIGQpLCBhLmZpbGwoKSwgYS5jbG9zZVBhdGgoKSwgYS5yZXN0b3JlKCksIHRoaXMucGFpbnRUZXh0KGEpLCB0aGlzLnBhaW50Qm9yZGVyKGEpLCB0aGlzLnBhaW50Q3RybChhKSwgdGhpcy5wYWludEFsYXJtVGV4dChhKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgdGhpcy5uZXh0RnJhbWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1N0b3ApIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZyYW1lSW5kZXgrKywgdGhpcy5mcmFtZUluZGV4ID49IGIgKiBjKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnJlcGVhdFBsYXkpcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZnJhbWVJbmRleCA9IDBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGYuaXNTdG9wIHx8IGYubmV4dEZyYW1lKClcclxuICAgICAgICAgICAgICAgIH0sIGcgLyAoYiAqIGMpKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGkoKSB7XHJcbiAgICAgICAgdmFyIGEgPSBudWxsO1xyXG4gICAgICAgIHJldHVybiBhID0gYXJndW1lbnRzLmxlbmd0aCA8PSAzID8gbmV3IGcoYXJndW1lbnRzWzBdLCBhcmd1bWVudHNbMV0sIGFyZ3VtZW50c1syXSkgOiBuZXcgaChhcmd1bWVudHNbMF0sIGFyZ3VtZW50c1sxXSwgYXJndW1lbnRzWzJdLCBhcmd1bWVudHNbM10sIGFyZ3VtZW50c1s0XSwgYXJndW1lbnRzWzVdKSwgYS5zdG9wID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBhLmlzU3RvcCA9ICEwXHJcbiAgICAgICAgfSwgYS5wbGF5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBhLmlzU3RvcCA9ICExLCBhLmZyYW1lSW5kZXggPSAwLCBhLm5leHRGcmFtZSgpXHJcbiAgICAgICAgfSwgYVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBqID0ge307XHJcbiAgICBiLnByb3RvdHlwZSA9IG5ldyBhLkVkaXRhYmxlRWxlbWVudCwgYy5wcm90b3R5cGUgPSBuZXcgYiwgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoYy5wcm90b3R5cGUsIHtcclxuICAgICAgICBhbGFybUNvbG9yOiB7XHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FsYXJtQ29sb3JcclxuICAgICAgICAgICAgfSwgc2V0OiBmdW5jdGlvbiAoYikge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2FsYXJtQ29sb3IgPSBiLCBudWxsICE9IHRoaXMuaW1hZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IGEudXRpbC5nZW5JbWFnZUFsYXJtKHRoaXMuaW1hZ2UsIGIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGMgJiYgKHRoaXMuYWxhcm1JbWFnZSA9IGMpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KSwgZC5wcm90b3R5cGUgPSBuZXcgYywgZS5wcm90b3R5cGUgPSBuZXcgZCwgZi5wcm90b3R5cGUgPSBuZXcgYywgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZi5wcm90b3R5cGUsIHtcclxuICAgICAgICByYWRpdXM6IHtcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcmFkaXVzXHJcbiAgICAgICAgICAgIH0sIHNldDogZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JhZGl1cyA9IGE7XHJcbiAgICAgICAgICAgICAgICB2YXIgYiA9IDIgKiB0aGlzLnJhZGl1cywgYyA9IDIgKiB0aGlzLnJhZGl1cztcclxuICAgICAgICAgICAgICAgIHRoaXMud2lkdGggPSBiLCB0aGlzLmhlaWdodCA9IGNcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIHdpZHRoOiB7XHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3dpZHRoXHJcbiAgICAgICAgICAgIH0sIHNldDogZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JhZGl1cyA9IGEgLyAyLCB0aGlzLl93aWR0aCA9IGFcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIGhlaWdodDoge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9oZWlnaHRcclxuICAgICAgICAgICAgfSwgc2V0OiBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcmFkaXVzID0gYSAvIDIsIHRoaXMuX2hlaWdodCA9IGFcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pLCBnLnByb3RvdHlwZSA9IG5ldyBjLCBoLnByb3RvdHlwZSA9IG5ldyBjLCBpLnByb3RvdHlwZSA9IG5ldyBjLCBhLk5vZGUgPSBjLCBhLlRleHROb2RlID0gZCwgYS5MaW5rTm9kZSA9IGUsIGEuQ2lyY2xlTm9kZSA9IGYsIGEuQW5pbWF0ZU5vZGUgPSBpXHJcbn0oSlRvcG8pLCBmdW5jdGlvbiAoYSkge1xyXG4gICAgZnVuY3Rpb24gYihhLCBiKSB7XHJcbiAgICAgICAgdmFyIGMgPSBbXTtcclxuICAgICAgICBpZiAobnVsbCA9PSBhIHx8IG51bGwgPT0gYilyZXR1cm4gYztcclxuICAgICAgICBpZiAoYSAmJiBiICYmIGEub3V0TGlua3MgJiYgYi5pbkxpbmtzKWZvciAodmFyIGQgPSAwOyBkIDwgYS5vdXRMaW5rcy5sZW5ndGg7IGQrKylmb3IgKHZhciBlID0gYS5vdXRMaW5rc1tkXSwgZiA9IDA7IGYgPCBiLmluTGlua3MubGVuZ3RoOyBmKyspIHtcclxuICAgICAgICAgICAgdmFyIGcgPSBiLmluTGlua3NbZl07XHJcbiAgICAgICAgICAgIGUgPT09IGcgJiYgYy5wdXNoKGcpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYyhhLCBjKSB7XHJcbiAgICAgICAgdmFyIGQgPSBiKGEsIGMpLCBlID0gYihjLCBhKSwgZiA9IGQuY29uY2F0KGUpO1xyXG4gICAgICAgIHJldHVybiBmXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZChhKSB7XHJcbiAgICAgICAgdmFyIGIgPSBjKGEubm9kZUEsIGEubm9kZVopO1xyXG4gICAgICAgIHJldHVybiBiID0gYi5maWx0ZXIoZnVuY3Rpb24gKGIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGEgIT09IGJcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGUoYSwgYikge1xyXG4gICAgICAgIHJldHVybiBjKGEsIGIpLmxlbmd0aFxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGYoYiwgYywgZykge1xyXG4gICAgICAgIGZ1bmN0aW9uIGgoYiwgYykge1xyXG4gICAgICAgICAgICB2YXIgZCA9IGEudXRpbC5saW5lRihiLmN4LCBiLmN5LCBjLmN4LCBjLmN5KSwgZSA9IGIuZ2V0Qm91bmQoKSwgZiA9IGEudXRpbC5pbnRlcnNlY3Rpb25MaW5lQm91bmQoZCwgZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmluaXRpYWxpemUgPSBmdW5jdGlvbiAoYiwgYywgZCkge1xyXG4gICAgICAgICAgICBpZiAoZi5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpLCB0aGlzLmVsZW1lbnRUeXBlID0gXCJsaW5rXCIsIHRoaXMuekluZGV4ID0gYS56SW5kZXhfTGluaywgMCAhPSBhcmd1bWVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRleHQgPSBkLCB0aGlzLm5vZGVBID0gYiwgdGhpcy5ub2RlWiA9IGMsIHRoaXMubm9kZUEgJiYgbnVsbCA9PSB0aGlzLm5vZGVBLm91dExpbmtzICYmICh0aGlzLm5vZGVBLm91dExpbmtzID0gW10pLCB0aGlzLm5vZGVBICYmIG51bGwgPT0gdGhpcy5ub2RlQS5pbkxpbmtzICYmICh0aGlzLm5vZGVBLmluTGlua3MgPSBbXSksIHRoaXMubm9kZVogJiYgbnVsbCA9PSB0aGlzLm5vZGVaLmluTGlua3MgJiYgKHRoaXMubm9kZVouaW5MaW5rcyA9IFtdKSwgdGhpcy5ub2RlWiAmJiBudWxsID09IHRoaXMubm9kZVoub3V0TGlua3MgJiYgKHRoaXMubm9kZVoub3V0TGlua3MgPSBbXSksIG51bGwgIT0gdGhpcy5ub2RlQSAmJiB0aGlzLm5vZGVBLm91dExpbmtzLnB1c2godGhpcyksIG51bGwgIT0gdGhpcy5ub2RlWiAmJiB0aGlzLm5vZGVaLmluTGlua3MucHVzaCh0aGlzKSwgdGhpcy5jYWN1bGF0ZUluZGV4KCksIHRoaXMuZm9udCA9IFwiMTJweCBDb25zb2xhc1wiLCB0aGlzLmZvbnRDb2xvciA9IFwiMjU1LDI1NSwyNTVcIiwgdGhpcy5saW5lV2lkdGggPSAyLCB0aGlzLmxpbmVKb2luID0gXCJtaXRlclwiLCB0aGlzLnRyYW5zZm9ybUFibGUgPSAhMSwgdGhpcy5idW5kbGVPZmZzZXQgPSAyMCwgdGhpcy5idW5kbGVHYXAgPSAxMiwgdGhpcy50ZXh0T2Zmc2V0WCA9IDAsIHRoaXMudGV4dE9mZnNldFkgPSAwLCB0aGlzLmFycm93c1JhZGl1cyA9IG51bGwsIHRoaXMuYXJyb3dzT2Zmc2V0ID0gMCwgdGhpcy5kYXNoZWRQYXR0ZXJuID0gbnVsbCwgdGhpcy5wYXRoID0gW107XHJcbiAgICAgICAgICAgICAgICB2YXIgZSA9IFwidGV4dCxmb250LGZvbnRDb2xvcixsaW5lV2lkdGgsbGluZUpvaW5cIi5zcGxpdChcIixcIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlcmlhbGl6ZWRQcm9wZXJ0aWVzID0gdGhpcy5zZXJpYWxpemVkUHJvcGVydGllcy5jb25jYXQoZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIHRoaXMuY2FjdWxhdGVJbmRleCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGEgPSBlKHRoaXMubm9kZUEsIHRoaXMubm9kZVopO1xyXG4gICAgICAgICAgICBhID4gMCAmJiAodGhpcy5ub2RlSW5kZXggPSBhIC0gMSlcclxuICAgICAgICB9LCB0aGlzLmluaXRpYWxpemUoYiwgYywgZyksIHRoaXMucmVtb3ZlSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGEgPSB0aGlzO1xyXG4gICAgICAgICAgICB0aGlzLm5vZGVBICYmIHRoaXMubm9kZUEub3V0TGlua3MgJiYgKHRoaXMubm9kZUEub3V0TGlua3MgPSB0aGlzLm5vZGVBLm91dExpbmtzLmZpbHRlcihmdW5jdGlvbiAoYikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGIgIT09IGFcclxuICAgICAgICAgICAgfSkpLCB0aGlzLm5vZGVaICYmIHRoaXMubm9kZVouaW5MaW5rcyAmJiAodGhpcy5ub2RlWi5pbkxpbmtzID0gdGhpcy5ub2RlWi5pbkxpbmtzLmZpbHRlcihmdW5jdGlvbiAoYikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGIgIT09IGFcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICB2YXIgYiA9IGQodGhpcyk7XHJcbiAgICAgICAgICAgIGIuZm9yRWFjaChmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgICAgICAgICAgYS5ub2RlSW5kZXggPSBiXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSwgdGhpcy5nZXRTdGFydFBvc2l0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgYSA9IHt4OiB0aGlzLm5vZGVBLmN4LCB5OiB0aGlzLm5vZGVBLmN5fTtcclxuICAgICAgICAgICAgcmV0dXJuIGFcclxuICAgICAgICB9LCB0aGlzLmdldEVuZFBvc2l0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgYTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGwgIT0gdGhpcy5hcnJvd3NSYWRpdXMgJiYgKGEgPSBoKHRoaXMubm9kZVosIHRoaXMubm9kZUEpKSwgbnVsbCA9PSBhICYmIChhID0ge3g6IHRoaXMubm9kZVouY3gsIHk6IHRoaXMubm9kZVouY3l9KSwgYVxyXG4gICAgICAgIH0sIHRoaXMuZ2V0UGF0aCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGEgPSBbXSwgYiA9IHRoaXMuZ2V0U3RhcnRQb3NpdGlvbigpLCBjID0gdGhpcy5nZXRFbmRQb3NpdGlvbigpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5ub2RlQSA9PT0gdGhpcy5ub2RlWilyZXR1cm4gW2IsIGNdO1xyXG4gICAgICAgICAgICB2YXIgZCA9IGUodGhpcy5ub2RlQSwgdGhpcy5ub2RlWik7XHJcbiAgICAgICAgICAgIGlmICgxID09IGQpcmV0dXJuIFtiLCBjXTtcclxuICAgICAgICAgICAgdmFyIGYgPSBNYXRoLmF0YW4yKGMueSAtIGIueSwgYy54IC0gYi54KSwgZyA9IHt4OiBiLnggKyB0aGlzLmJ1bmRsZU9mZnNldCAqIE1hdGguY29zKGYpLCB5OiBiLnkgKyB0aGlzLmJ1bmRsZU9mZnNldCAqIE1hdGguc2luKGYpfSwgaCA9IHtcclxuICAgICAgICAgICAgICAgIHg6IGMueCArIHRoaXMuYnVuZGxlT2Zmc2V0ICogTWF0aC5jb3MoZiAtIE1hdGguUEkpLFxyXG4gICAgICAgICAgICAgICAgeTogYy55ICsgdGhpcy5idW5kbGVPZmZzZXQgKiBNYXRoLnNpbihmIC0gTWF0aC5QSSlcclxuICAgICAgICAgICAgfSwgaSA9IGYgLSBNYXRoLlBJIC8gMiwgaiA9IGYgLSBNYXRoLlBJIC8gMiwgayA9IGQgKiB0aGlzLmJ1bmRsZUdhcCAvIDIgLSB0aGlzLmJ1bmRsZUdhcCAvIDIsIGwgPSB0aGlzLmJ1bmRsZUdhcCAqIHRoaXMubm9kZUluZGV4LCBtID0ge1xyXG4gICAgICAgICAgICAgICAgeDogZy54ICsgbCAqIE1hdGguY29zKGkpLFxyXG4gICAgICAgICAgICAgICAgeTogZy55ICsgbCAqIE1hdGguc2luKGkpXHJcbiAgICAgICAgICAgIH0sIG4gPSB7eDogaC54ICsgbCAqIE1hdGguY29zKGopLCB5OiBoLnkgKyBsICogTWF0aC5zaW4oail9O1xyXG4gICAgICAgICAgICByZXR1cm4gbSA9IHt4OiBtLnggKyBrICogTWF0aC5jb3MoaSAtIE1hdGguUEkpLCB5OiBtLnkgKyBrICogTWF0aC5zaW4oaSAtIE1hdGguUEkpfSwgbiA9IHt4OiBuLnggKyBrICogTWF0aC5jb3MoaiAtIE1hdGguUEkpLCB5OiBuLnkgKyBrICogTWF0aC5zaW4oaiAtIE1hdGguUEkpfSwgYS5wdXNoKHtcclxuICAgICAgICAgICAgICAgIHg6IGIueCxcclxuICAgICAgICAgICAgICAgIHk6IGIueVxyXG4gICAgICAgICAgICB9KSwgYS5wdXNoKHt4OiBtLngsIHk6IG0ueX0pLCBhLnB1c2goe3g6IG4ueCwgeTogbi55fSksIGEucHVzaCh7eDogYy54LCB5OiBjLnl9KSwgYVxyXG4gICAgICAgIH0sIHRoaXMucGFpbnRQYXRoID0gZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubm9kZUEgPT09IHRoaXMubm9kZVopcmV0dXJuIHZvaWQgdGhpcy5wYWludExvb3AoYSk7XHJcbiAgICAgICAgICAgIGEuYmVnaW5QYXRoKCksIGEubW92ZVRvKGJbMF0ueCwgYlswXS55KTtcclxuICAgICAgICAgICAgZm9yICh2YXIgYyA9IDE7IGMgPCBiLmxlbmd0aDsgYysrKW51bGwgPT0gdGhpcy5kYXNoZWRQYXR0ZXJuID8gYS5saW5lVG8oYltjXS54LCBiW2NdLnkpIDogYS5KVG9wb0Rhc2hlZExpbmVUbyhiW2MgLSAxXS54LCBiW2MgLSAxXS55LCBiW2NdLngsIGJbY10ueSwgdGhpcy5kYXNoZWRQYXR0ZXJuKTtcclxuICAgICAgICAgICAgaWYgKGEuc3Ryb2tlKCksIGEuY2xvc2VQYXRoKCksIG51bGwgIT0gdGhpcy5hcnJvd3NSYWRpdXMpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkID0gYltiLmxlbmd0aCAtIDJdLCBlID0gYltiLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wYWludEFycm93KGEsIGQsIGUpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCB0aGlzLnBhaW50TG9vcCA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIGEuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBiID0gdGhpcy5idW5kbGVHYXAgKiAodGhpcy5ub2RlSW5kZXggKyAxKSAvIDI7XHJcbiAgICAgICAgICAgICAgICBNYXRoLlBJICsgTWF0aC5QSSAvIDJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhLmFyYyh0aGlzLm5vZGVBLngsIHRoaXMubm9kZUEueSwgYiwgTWF0aC5QSSAvIDIsIDIgKiBNYXRoLlBJKSwgYS5zdHJva2UoKSwgYS5jbG9zZVBhdGgoKVxyXG4gICAgICAgIH0sIHRoaXMucGFpbnRBcnJvdyA9IGZ1bmN0aW9uIChiLCBjLCBkKSB7XHJcbiAgICAgICAgICAgIHZhciBlID0gdGhpcy5hcnJvd3NPZmZzZXQsIGYgPSB0aGlzLmFycm93c1JhZGl1cyAvIDIsIGcgPSBjLCBoID0gZCwgaSA9IE1hdGguYXRhbjIoaC55IC0gZy55LCBoLnggLSBnLngpLCBqID0gYS51dGlsLmdldERpc3RhbmNlKGcsIGgpIC0gdGhpcy5hcnJvd3NSYWRpdXMsIGsgPSBnLnggKyAoaiArIGUpICogTWF0aC5jb3MoaSksIGwgPSBnLnkgKyAoaiArIGUpICogTWF0aC5zaW4oaSksIG0gPSBoLnggKyBlICogTWF0aC5jb3MoaSksIG4gPSBoLnkgKyBlICogTWF0aC5zaW4oaSk7XHJcbiAgICAgICAgICAgIGkgLT0gTWF0aC5QSSAvIDI7XHJcbiAgICAgICAgICAgIHZhciBvID0ge3g6IGsgKyBmICogTWF0aC5jb3MoaSksIHk6IGwgKyBmICogTWF0aC5zaW4oaSl9LCBwID0ge3g6IGsgKyBmICogTWF0aC5jb3MoaSAtIE1hdGguUEkpLCB5OiBsICsgZiAqIE1hdGguc2luKGkgLSBNYXRoLlBJKX07XHJcbiAgICAgICAgICAgIGIuYmVnaW5QYXRoKCksIGIuZmlsbFN0eWxlID0gXCJyZ2JhKFwiICsgdGhpcy5zdHJva2VDb2xvciArIFwiLFwiICsgdGhpcy5hbHBoYSArIFwiKVwiLCBiLm1vdmVUbyhvLngsIG8ueSksIGIubGluZVRvKG0sIG4pLCBiLmxpbmVUbyhwLngsIHAueSksIGIuc3Ryb2tlKCksIGIuY2xvc2VQYXRoKClcclxuICAgICAgICB9LCB0aGlzLnBhaW50ID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gdGhpcy5ub2RlQSAmJiBudWxsICE9ICF0aGlzLm5vZGVaKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYiA9IHRoaXMuZ2V0UGF0aCh0aGlzLm5vZGVJbmRleCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhdGggPSBiLCBhLnN0cm9rZVN0eWxlID0gXCJyZ2JhKFwiICsgdGhpcy5zdHJva2VDb2xvciArIFwiLFwiICsgdGhpcy5hbHBoYSArIFwiKVwiLCBhLmxpbmVXaWR0aCA9IHRoaXMubGluZVdpZHRoLCB0aGlzLnBhaW50UGF0aChhLCBiKSwgYiAmJiBiLmxlbmd0aCA+IDAgJiYgdGhpcy5wYWludFRleHQoYSwgYilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIGkgPSAtKE1hdGguUEkgLyAyICsgTWF0aC5QSSAvIDQpO1xyXG4gICAgICAgIHRoaXMucGFpbnRUZXh0ID0gZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgdmFyIGMgPSBiWzBdLCBkID0gYltiLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgICAgICBpZiAoNCA9PSBiLmxlbmd0aCAmJiAoYyA9IGJbMV0sIGQgPSBiWzJdKSwgdGhpcy50ZXh0ICYmIHRoaXMudGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZSA9IChkLnggKyBjLngpIC8gMiArIHRoaXMudGV4dE9mZnNldFgsIGYgPSAoZC55ICsgYy55KSAvIDIgKyB0aGlzLnRleHRPZmZzZXRZO1xyXG4gICAgICAgICAgICAgICAgYS5zYXZlKCksIGEuYmVnaW5QYXRoKCksIGEuZm9udCA9IHRoaXMuZm9udDtcclxuICAgICAgICAgICAgICAgIHZhciBnID0gYS5tZWFzdXJlVGV4dCh0aGlzLnRleHQpLndpZHRoLCBoID0gYS5tZWFzdXJlVGV4dChcIueUsFwiKS53aWR0aDtcclxuICAgICAgICAgICAgICAgIGlmIChhLmZpbGxTdHlsZSA9IFwicmdiYShcIiArIHRoaXMuZm9udENvbG9yICsgXCIsIFwiICsgdGhpcy5hbHBoYSArIFwiKVwiLCB0aGlzLm5vZGVBID09PSB0aGlzLm5vZGVaKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGogPSB0aGlzLmJ1bmRsZUdhcCAqICh0aGlzLm5vZGVJbmRleCArIDEpIC8gMiwgZSA9IHRoaXMubm9kZUEueCArIGogKiBNYXRoLmNvcyhpKSwgZiA9IHRoaXMubm9kZUEueSArIGogKiBNYXRoLnNpbihpKTtcclxuICAgICAgICAgICAgICAgICAgICBhLmZpbGxUZXh0KHRoaXMudGV4dCwgZSwgZilcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBhLmZpbGxUZXh0KHRoaXMudGV4dCwgZSAtIGcgLyAyLCBmIC0gaCAvIDIpO1xyXG4gICAgICAgICAgICAgICAgYS5zdHJva2UoKSwgYS5jbG9zZVBhdGgoKSwgYS5yZXN0b3JlKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIHRoaXMucGFpbnRTZWxlY3RlZCA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIGEuc2hhZG93Qmx1ciA9IDEwLCBhLnNoYWRvd0NvbG9yID0gXCJyZ2JhKDAsMCwwLDEpXCIsIGEuc2hhZG93T2Zmc2V0WCA9IDAsIGEuc2hhZG93T2Zmc2V0WSA9IDBcclxuICAgICAgICB9LCB0aGlzLmlzSW5Cb3VuZCA9IGZ1bmN0aW9uIChiLCBjKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm5vZGVBID09PSB0aGlzLm5vZGVaKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZCA9IHRoaXMuYnVuZGxlR2FwICogKHRoaXMubm9kZUluZGV4ICsgMSkgLyAyLCBlID0gYS51dGlsLmdldERpc3RhbmNlKHRoaXMubm9kZUEsIHt4OiBiLCB5OiBjfSkgLSBkO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguYWJzKGUpIDw9IDNcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKHZhciBmID0gITEsIGcgPSAxOyBnIDwgdGhpcy5wYXRoLmxlbmd0aDsgZysrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaCA9IHRoaXMucGF0aFtnIC0gMV0sIGkgPSB0aGlzLnBhdGhbZ107XHJcbiAgICAgICAgICAgICAgICBpZiAoMSA9PSBhLnV0aWwuaXNQb2ludEluTGluZSh7eDogYiwgeTogY30sIGgsIGkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZiA9ICEwO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZyhhLCBiLCBjKSB7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBnLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksIHRoaXMuZGlyZWN0aW9uID0gXCJob3Jpem9udGFsXCJcclxuICAgICAgICB9LCB0aGlzLmluaXRpYWxpemUoYSwgYiwgYyksIHRoaXMuZ2V0U3RhcnRQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGEgPSB7eDogdGhpcy5ub2RlQS5jeCwgeTogdGhpcy5ub2RlQS5jeX07XHJcbiAgICAgICAgICAgIHJldHVybiBcImhvcml6b250YWxcIiA9PSB0aGlzLmRpcmVjdGlvbiA/IHRoaXMubm9kZVouY3ggPiBhLnggPyBhLnggKz0gdGhpcy5ub2RlQS53aWR0aCAvIDIgOiBhLnggLT0gdGhpcy5ub2RlQS53aWR0aCAvIDIgOiB0aGlzLm5vZGVaLmN5ID4gYS55ID8gYS55ICs9IHRoaXMubm9kZUEuaGVpZ2h0IC8gMiA6IGEueSAtPSB0aGlzLm5vZGVBLmhlaWdodCAvIDIsIGFcclxuICAgICAgICB9LCB0aGlzLmdldEVuZFBvc2l0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgYSA9IHt4OiB0aGlzLm5vZGVaLmN4LCB5OiB0aGlzLm5vZGVaLmN5fTtcclxuICAgICAgICAgICAgcmV0dXJuIFwiaG9yaXpvbnRhbFwiID09IHRoaXMuZGlyZWN0aW9uID8gdGhpcy5ub2RlQS5jeSA8IGEueSA/IGEueSAtPSB0aGlzLm5vZGVaLmhlaWdodCAvIDIgOiBhLnkgKz0gdGhpcy5ub2RlWi5oZWlnaHQgLyAyIDogYS54ID0gdGhpcy5ub2RlQS5jeCA8IGEueCA/IHRoaXMubm9kZVoueCA6IHRoaXMubm9kZVoueCArIHRoaXMubm9kZVoud2lkdGgsIGFcclxuICAgICAgICB9LCB0aGlzLmdldFBhdGggPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICB2YXIgYiA9IFtdLCBjID0gdGhpcy5nZXRTdGFydFBvc2l0aW9uKCksIGQgPSB0aGlzLmdldEVuZFBvc2l0aW9uKCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm5vZGVBID09PSB0aGlzLm5vZGVaKXJldHVybiBbYywgZF07XHJcbiAgICAgICAgICAgIHZhciBmLCBnLCBoID0gZSh0aGlzLm5vZGVBLCB0aGlzLm5vZGVaKSwgaSA9IChoIC0gMSkgKiB0aGlzLmJ1bmRsZUdhcCwgaiA9IHRoaXMuYnVuZGxlR2FwICogYSAtIGkgLyAyO1xyXG4gICAgICAgICAgICByZXR1cm4gXCJob3Jpem9udGFsXCIgPT0gdGhpcy5kaXJlY3Rpb24gPyAoZiA9IGQueCArIGosIGcgPSBjLnkgLSBqLCBiLnB1c2goe3g6IGMueCwgeTogZ30pLCBiLnB1c2goe3g6IGYsIHk6IGd9KSwgYi5wdXNoKHt4OiBmLCB5OiBkLnl9KSkgOiAoZiA9IGMueCArIGosIGcgPSBkLnkgLSBqLCBiLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgeDogZixcclxuICAgICAgICAgICAgICAgIHk6IGMueVxyXG4gICAgICAgICAgICB9KSwgYi5wdXNoKHt4OiBmLCB5OiBnfSksIGIucHVzaCh7eDogZC54LCB5OiBnfSkpLCBiXHJcbiAgICAgICAgfSwgdGhpcy5wYWludFRleHQgPSBmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgICAgICBpZiAodGhpcy50ZXh0ICYmIHRoaXMudGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYyA9IGJbMV0sIGQgPSBjLnggKyB0aGlzLnRleHRPZmZzZXRYLCBlID0gYy55ICsgdGhpcy50ZXh0T2Zmc2V0WTtcclxuICAgICAgICAgICAgICAgIGEuc2F2ZSgpLCBhLmJlZ2luUGF0aCgpLCBhLmZvbnQgPSB0aGlzLmZvbnQ7XHJcbiAgICAgICAgICAgICAgICB2YXIgZiA9IGEubWVhc3VyZVRleHQodGhpcy50ZXh0KS53aWR0aCwgZyA9IGEubWVhc3VyZVRleHQoXCLnlLBcIikud2lkdGg7XHJcbiAgICAgICAgICAgICAgICBhLmZpbGxTdHlsZSA9IFwicmdiYShcIiArIHRoaXMuZm9udENvbG9yICsgXCIsIFwiICsgdGhpcy5hbHBoYSArIFwiKVwiLCBhLmZpbGxUZXh0KHRoaXMudGV4dCwgZCAtIGYgLyAyLCBlIC0gZyAvIDIpLCBhLnN0cm9rZSgpLCBhLmNsb3NlUGF0aCgpLCBhLnJlc3RvcmUoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGgoYSwgYiwgYykge1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpLCB0aGlzLmRpcmVjdGlvbiA9IFwidmVydGljYWxcIiwgdGhpcy5vZmZzZXRHYXAgPSA0NFxyXG4gICAgICAgIH0sIHRoaXMuaW5pdGlhbGl6ZShhLCBiLCBjKSwgdGhpcy5nZXRTdGFydFBvc2l0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgYSA9IHt4OiB0aGlzLm5vZGVBLmN4LCB5OiB0aGlzLm5vZGVBLmN5fTtcclxuICAgICAgICAgICAgcmV0dXJuIFwiaG9yaXpvbnRhbFwiID09IHRoaXMuZGlyZWN0aW9uID8gYS54ID0gdGhpcy5ub2RlWi5jeCA8IGEueCA/IHRoaXMubm9kZUEueCA6IHRoaXMubm9kZUEueCArIHRoaXMubm9kZUEud2lkdGggOiBhLnkgPSB0aGlzLm5vZGVaLmN5IDwgYS55ID8gdGhpcy5ub2RlQS55IDogdGhpcy5ub2RlQS55ICsgdGhpcy5ub2RlQS5oZWlnaHQsIGFcclxuICAgICAgICB9LCB0aGlzLmdldEVuZFBvc2l0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgYSA9IHt4OiB0aGlzLm5vZGVaLmN4LCB5OiB0aGlzLm5vZGVaLmN5fTtcclxuICAgICAgICAgICAgcmV0dXJuIFwiaG9yaXpvbnRhbFwiID09IHRoaXMuZGlyZWN0aW9uID8gYS54ID0gdGhpcy5ub2RlQS5jeCA8IGEueCA/IHRoaXMubm9kZVoueCA6IHRoaXMubm9kZVoueCArIHRoaXMubm9kZVoud2lkdGggOiBhLnkgPSB0aGlzLm5vZGVBLmN5IDwgYS55ID8gdGhpcy5ub2RlWi55IDogdGhpcy5ub2RlWi55ICsgdGhpcy5ub2RlWi5oZWlnaHQsIGFcclxuICAgICAgICB9LCB0aGlzLmdldFBhdGggPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICB2YXIgYiA9IHRoaXMuZ2V0U3RhcnRQb3NpdGlvbigpLCBjID0gdGhpcy5nZXRFbmRQb3NpdGlvbigpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5ub2RlQSA9PT0gdGhpcy5ub2RlWilyZXR1cm4gW2IsIGNdO1xyXG4gICAgICAgICAgICB2YXIgZCA9IFtdLCBmID0gZSh0aGlzLm5vZGVBLCB0aGlzLm5vZGVaKSwgZyA9IChmIC0gMSkgKiB0aGlzLmJ1bmRsZUdhcCwgaCA9IHRoaXMuYnVuZGxlR2FwICogYSAtIGcgLyAyLCBpID0gdGhpcy5vZmZzZXRHYXA7XHJcbiAgICAgICAgICAgIHJldHVybiBcImhvcml6b250YWxcIiA9PSB0aGlzLmRpcmVjdGlvbiA/ICh0aGlzLm5vZGVBLmN4ID4gdGhpcy5ub2RlWi5jeCAmJiAoaSA9IC1pKSwgZC5wdXNoKHt4OiBiLngsIHk6IGIueSArIGh9KSwgZC5wdXNoKHt4OiBiLnggKyBpLCB5OiBiLnkgKyBofSksIGQucHVzaCh7XHJcbiAgICAgICAgICAgICAgICB4OiBjLnggLSBpLFxyXG4gICAgICAgICAgICAgICAgeTogYy55ICsgaFxyXG4gICAgICAgICAgICB9KSwgZC5wdXNoKHt4OiBjLngsIHk6IGMueSArIGh9KSkgOiAodGhpcy5ub2RlQS5jeSA+IHRoaXMubm9kZVouY3kgJiYgKGkgPSAtaSksIGQucHVzaCh7eDogYi54ICsgaCwgeTogYi55fSksIGQucHVzaCh7eDogYi54ICsgaCwgeTogYi55ICsgaX0pLCBkLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgeDogYy54ICsgaCxcclxuICAgICAgICAgICAgICAgIHk6IGMueSAtIGlcclxuICAgICAgICAgICAgfSksIGQucHVzaCh7eDogYy54ICsgaCwgeTogYy55fSkpLCBkXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGkoYSwgYiwgYykge1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaS5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpXHJcbiAgICAgICAgfSwgdGhpcy5pbml0aWFsaXplKGEsIGIsIGMpLCB0aGlzLnBhaW50UGF0aCA9IGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm5vZGVBID09PSB0aGlzLm5vZGVaKXJldHVybiB2b2lkIHRoaXMucGFpbnRMb29wKGEpO1xyXG4gICAgICAgICAgICBhLmJlZ2luUGF0aCgpLCBhLm1vdmVUbyhiWzBdLngsIGJbMF0ueSk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGMgPSAxOyBjIDwgYi5sZW5ndGg7IGMrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGQgPSBiW2MgLSAxXSwgZSA9IGJbY10sIGYgPSAoZC54ICsgZS54KSAvIDIsIGcgPSAoZC55ICsgZS55KSAvIDI7XHJcbiAgICAgICAgICAgICAgICBnICs9IChlLnkgLSBkLnkpIC8gMiwgYS5zdHJva2VTdHlsZSA9IFwicmdiYShcIiArIHRoaXMuc3Ryb2tlQ29sb3IgKyBcIixcIiArIHRoaXMuYWxwaGEgKyBcIilcIiwgYS5saW5lV2lkdGggPSB0aGlzLmxpbmVXaWR0aCwgYS5tb3ZlVG8oZC54LCBkLmN5KSwgYS5xdWFkcmF0aWNDdXJ2ZVRvKGYsIGcsIGUueCwgZS55KSwgYS5zdHJva2UoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChhLnN0cm9rZSgpLCBhLmNsb3NlUGF0aCgpLCBudWxsICE9IHRoaXMuYXJyb3dzUmFkaXVzKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaCA9IGJbYi5sZW5ndGggLSAyXSwgaSA9IGJbYi5sZW5ndGggLSAxXTtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFpbnRBcnJvdyhhLCBoLCBpKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGYucHJvdG90eXBlID0gbmV3IGEuSW50ZXJhY3RpdmVFbGVtZW50LCBnLnByb3RvdHlwZSA9IG5ldyBmLCBoLnByb3RvdHlwZSA9IG5ldyBmLCBpLnByb3RvdHlwZSA9IG5ldyBmLCBhLkxpbmsgPSBmLCBhLkZvbGRMaW5rID0gZywgYS5GbGV4aW9uYWxMaW5rID0gaCwgYS5DdXJ2ZUxpbmsgPSBpXHJcbn0oSlRvcG8pLCBmdW5jdGlvbiAoYSkge1xyXG4gICAgZnVuY3Rpb24gYihjKSB7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXplID0gZnVuY3Rpb24gKGMpIHtcclxuICAgICAgICAgICAgYi5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBudWxsKSwgdGhpcy5lbGVtZW50VHlwZSA9IFwiY29udGFpbmVyXCIsIHRoaXMuekluZGV4ID0gYS56SW5kZXhfQ29udGFpbmVyLCB0aGlzLndpZHRoID0gMTAwLCB0aGlzLmhlaWdodCA9IDEwMCwgdGhpcy5jaGlsZHMgPSBbXSwgdGhpcy5hbHBoYSA9IC41LCB0aGlzLmRyYWdhYmxlID0gITAsIHRoaXMuY2hpbGREcmFnYmxlID0gITAsIHRoaXMudmlzaWJsZSA9ICEwLCB0aGlzLmZpbGxDb2xvciA9IFwiMTAsMTAwLDgwXCIsIHRoaXMuYm9yZGVyV2lkdGggPSAwLCB0aGlzLmJvcmRlckNvbG9yID0gXCIyNTUsMjU1LDI1NVwiLCB0aGlzLmJvcmRlclJhZGl1cyA9IG51bGwsIHRoaXMuZm9udCA9IFwiMTJweCBDb25zb2xhc1wiLCB0aGlzLmZvbnRDb2xvciA9IFwiMjU1LDI1NSwyNTVcIiwgdGhpcy50ZXh0ID0gYywgdGhpcy50ZXh0UG9zaXRpb24gPSBcIkJvdHRvbV9DZW50ZXJcIiwgdGhpcy50ZXh0T2Zmc2V0WCA9IDAsIHRoaXMudGV4dE9mZnNldFkgPSAwLCB0aGlzLmxheW91dCA9IG5ldyBhLmxheW91dC5BdXRvQm91bmRMYXlvdXRcclxuICAgICAgICB9LCB0aGlzLmluaXRpYWxpemUoYyksIHRoaXMuYWRkID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGlsZHMucHVzaChhKSwgYS5kcmFnYWJsZSA9IHRoaXMuY2hpbGREcmFnYmxlXHJcbiAgICAgICAgfSwgdGhpcy5yZW1vdmUgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBiID0gMDsgYiA8IHRoaXMuY2hpbGRzLmxlbmd0aDsgYisrKWlmICh0aGlzLmNoaWxkc1tiXSA9PT0gYSkge1xyXG4gICAgICAgICAgICAgICAgYS5wYXJlbnRDb250YWluZXIgPSBudWxsLCB0aGlzLmNoaWxkcyA9IHRoaXMuY2hpbGRzLmRlbChiKSwgYS5sYXN0UGFyZW50Q29udGFpbmVyID0gdGhpcztcclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCB0aGlzLnJlbW92ZUFsbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGlsZHMgPSBbXVxyXG4gICAgICAgIH0sIHRoaXMuc2V0TG9jYXRpb24gPSBmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgICAgICB2YXIgYyA9IGEgLSB0aGlzLngsIGQgPSBiIC0gdGhpcy55O1xyXG4gICAgICAgICAgICB0aGlzLnggPSBhLCB0aGlzLnkgPSBiO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBlID0gMDsgZSA8IHRoaXMuY2hpbGRzLmxlbmd0aDsgZSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZiA9IHRoaXMuY2hpbGRzW2VdO1xyXG4gICAgICAgICAgICAgICAgZi5zZXRMb2NhdGlvbihmLnggKyBjLCBmLnkgKyBkKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgdGhpcy5kb0xheW91dCA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIGEgJiYgYSh0aGlzLCB0aGlzLmNoaWxkcylcclxuICAgICAgICB9LCB0aGlzLnBhaW50ID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgdGhpcy52aXNpYmxlICYmICh0aGlzLmxheW91dCAmJiB0aGlzLmxheW91dCh0aGlzLCB0aGlzLmNoaWxkcyksIGEuYmVnaW5QYXRoKCksIGEuZmlsbFN0eWxlID0gXCJyZ2JhKFwiICsgdGhpcy5maWxsQ29sb3IgKyBcIixcIiArIHRoaXMuYWxwaGEgKyBcIilcIiwgbnVsbCA9PSB0aGlzLmJvcmRlclJhZGl1cyB8fCAwID09IHRoaXMuYm9yZGVyUmFkaXVzID8gYS5yZWN0KHRoaXMueCwgdGhpcy55LCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCkgOiBhLkpUb3BvUm91bmRSZWN0KHRoaXMueCwgdGhpcy55LCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCwgdGhpcy5ib3JkZXJSYWRpdXMpLCBhLmZpbGwoKSwgYS5jbG9zZVBhdGgoKSwgdGhpcy5wYWludFRleHQoYSksIHRoaXMucGFpbnRCb3JkZXIoYSkpXHJcbiAgICAgICAgfSwgdGhpcy5wYWludEJvcmRlciA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIGlmICgwICE9IHRoaXMuYm9yZGVyV2lkdGgpIHtcclxuICAgICAgICAgICAgICAgIGEuYmVnaW5QYXRoKCksIGEubGluZVdpZHRoID0gdGhpcy5ib3JkZXJXaWR0aCwgYS5zdHJva2VTdHlsZSA9IFwicmdiYShcIiArIHRoaXMuYm9yZGVyQ29sb3IgKyBcIixcIiArIHRoaXMuYWxwaGEgKyBcIilcIjtcclxuICAgICAgICAgICAgICAgIHZhciBiID0gdGhpcy5ib3JkZXJXaWR0aCAvIDI7XHJcbiAgICAgICAgICAgICAgICBudWxsID09IHRoaXMuYm9yZGVyUmFkaXVzIHx8IDAgPT0gdGhpcy5ib3JkZXJSYWRpdXMgPyBhLnJlY3QodGhpcy54IC0gYiwgdGhpcy55IC0gYiwgdGhpcy53aWR0aCArIHRoaXMuYm9yZGVyV2lkdGgsIHRoaXMuaGVpZ2h0ICsgdGhpcy5ib3JkZXJXaWR0aCkgOiBhLkpUb3BvUm91bmRSZWN0KHRoaXMueCAtIGIsIHRoaXMueSAtIGIsIHRoaXMud2lkdGggKyB0aGlzLmJvcmRlcldpZHRoLCB0aGlzLmhlaWdodCArIHRoaXMuYm9yZGVyV2lkdGgsIHRoaXMuYm9yZGVyUmFkaXVzKSwgYS5zdHJva2UoKSwgYS5jbG9zZVBhdGgoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgdGhpcy5wYWludFRleHQgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICB2YXIgYiA9IHRoaXMudGV4dDtcclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gYiAmJiBcIlwiICE9IGIpIHtcclxuICAgICAgICAgICAgICAgIGEuYmVnaW5QYXRoKCksIGEuZm9udCA9IHRoaXMuZm9udDtcclxuICAgICAgICAgICAgICAgIHZhciBjID0gYS5tZWFzdXJlVGV4dChiKS53aWR0aCwgZCA9IGEubWVhc3VyZVRleHQoXCLnlLBcIikud2lkdGg7XHJcbiAgICAgICAgICAgICAgICBhLmZpbGxTdHlsZSA9IFwicmdiYShcIiArIHRoaXMuZm9udENvbG9yICsgXCIsIFwiICsgdGhpcy5hbHBoYSArIFwiKVwiO1xyXG4gICAgICAgICAgICAgICAgdmFyIGUgPSB0aGlzLmdldFRleHRQb3N0aW9uKHRoaXMudGV4dFBvc2l0aW9uLCBjLCBkKTtcclxuICAgICAgICAgICAgICAgIGEuZmlsbFRleHQoYiwgZS54LCBlLnkpLCBhLmNsb3NlUGF0aCgpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCB0aGlzLmdldFRleHRQb3N0aW9uID0gZnVuY3Rpb24gKGEsIGIsIGMpIHtcclxuICAgICAgICAgICAgdmFyIGQgPSBudWxsO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbCA9PSBhIHx8IFwiQm90dG9tX0NlbnRlclwiID09IGEgPyBkID0ge3g6IHRoaXMueCArIHRoaXMud2lkdGggLyAyIC0gYiAvIDIsIHk6IHRoaXMueSArIHRoaXMuaGVpZ2h0ICsgY30gOiBcIlRvcF9DZW50ZXJcIiA9PSBhID8gZCA9IHtcclxuICAgICAgICAgICAgICAgIHg6IHRoaXMueCArIHRoaXMud2lkdGggLyAyIC0gYiAvIDIsXHJcbiAgICAgICAgICAgICAgICB5OiB0aGlzLnkgLSBjIC8gMlxyXG4gICAgICAgICAgICB9IDogXCJUb3BfUmlnaHRcIiA9PSBhID8gZCA9IHt4OiB0aGlzLnggKyB0aGlzLndpZHRoIC0gYiwgeTogdGhpcy55IC0gYyAvIDJ9IDogXCJUb3BfTGVmdFwiID09IGEgPyBkID0ge3g6IHRoaXMueCwgeTogdGhpcy55IC0gYyAvIDJ9IDogXCJCb3R0b21fUmlnaHRcIiA9PSBhID8gZCA9IHtcclxuICAgICAgICAgICAgICAgIHg6IHRoaXMueCArIHRoaXMud2lkdGggLSBiLFxyXG4gICAgICAgICAgICAgICAgeTogdGhpcy55ICsgdGhpcy5oZWlnaHQgKyBjXHJcbiAgICAgICAgICAgIH0gOiBcIkJvdHRvbV9MZWZ0XCIgPT0gYSA/IGQgPSB7eDogdGhpcy54LCB5OiB0aGlzLnkgKyB0aGlzLmhlaWdodCArIGN9IDogXCJNaWRkbGVfQ2VudGVyXCIgPT0gYSA/IGQgPSB7XHJcbiAgICAgICAgICAgICAgICB4OiB0aGlzLnggKyB0aGlzLndpZHRoIC8gMiAtIGIgLyAyLFxyXG4gICAgICAgICAgICAgICAgeTogdGhpcy55ICsgdGhpcy5oZWlnaHQgLyAyICsgYyAvIDJcclxuICAgICAgICAgICAgfSA6IFwiTWlkZGxlX1JpZ2h0XCIgPT0gYSA/IGQgPSB7eDogdGhpcy54ICsgdGhpcy53aWR0aCAtIGIsIHk6IHRoaXMueSArIHRoaXMuaGVpZ2h0IC8gMiArIGMgLyAyfSA6IFwiTWlkZGxlX0xlZnRcIiA9PSBhICYmIChkID0ge1xyXG4gICAgICAgICAgICAgICAgeDogdGhpcy54LFxyXG4gICAgICAgICAgICAgICAgeTogdGhpcy55ICsgdGhpcy5oZWlnaHQgLyAyICsgYyAvIDJcclxuICAgICAgICAgICAgfSksIG51bGwgIT0gdGhpcy50ZXh0T2Zmc2V0WCAmJiAoZC54ICs9IHRoaXMudGV4dE9mZnNldFgpLCBudWxsICE9IHRoaXMudGV4dE9mZnNldFkgJiYgKGQueSArPSB0aGlzLnRleHRPZmZzZXRZKSwgZFxyXG4gICAgICAgIH0sIHRoaXMucGFpbnRNb3VzZW92ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgfSwgdGhpcy5wYWludFNlbGVjdGVkID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgYS5zaGFkb3dCbHVyID0gMTAsIGEuc2hhZG93Q29sb3IgPSBcInJnYmEoMCwwLDAsMSlcIiwgYS5zaGFkb3dPZmZzZXRYID0gMCwgYS5zaGFkb3dPZmZzZXRZID0gMFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBiLnByb3RvdHlwZSA9IG5ldyBhLkludGVyYWN0aXZlRWxlbWVudCwgYS5Db250YWluZXIgPSBiXHJcbn0oSlRvcG8pLCBmdW5jdGlvbiAoYSkge1xyXG4gICAgZnVuY3Rpb24gYihhKSB7XHJcbiAgICAgICAgdmFyIGIgPSAwLCBjID0gMDtcclxuICAgICAgICBhLmZvckVhY2goZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgYiArPSBhLmN4LCBjICs9IGEuY3lcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgZCA9IHt4OiBiIC8gYS5sZW5ndGgsIHk6IGMgLyBhLmxlbmd0aH07XHJcbiAgICAgICAgcmV0dXJuIGRcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjKGMsIGQpIHtcclxuICAgICAgICBudWxsID09IGQgJiYgKGQgPSB7fSk7XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZSA9IGQuY3gsIGYgPSBkLmN5LCBnID0gZC5taW5SYWRpdXMsIGggPSBkLm5vZGVEaWFtZXRlciwgaSA9IGQuaFNjYWxlIHx8IDEsIGogPSBkLnZTY2FsZSB8fCAxO1xyXG4gICAgICAgICAgICBkLmJlZ2luQW5nbGUgfHwgMCwgZC5lbmRBbmdsZSB8fCAyICogTWF0aC5QSVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobnVsbCA9PSBlIHx8IG51bGwgPT0gZikge1xyXG4gICAgICAgICAgICB2YXIgayA9IGIoYyk7XHJcbiAgICAgICAgICAgIGUgPSBrLngsIGYgPSBrLnlcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGwgPSAwLCBtID0gW10sIG4gPSBbXTtcclxuICAgICAgICBjLmZvckVhY2goZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgbnVsbCA9PSBkLm5vZGVEaWFtZXRlciA/IChhLmRpYW1ldGVyICYmIChoID0gYS5kaWFtZXRlciksIGggPSBhLnJhZGl1cyA/IDIgKiBhLnJhZGl1cyA6IE1hdGguc3FydCgyICogYS53aWR0aCAqIGEuaGVpZ2h0KSwgbi5wdXNoKGgpKSA6IG4ucHVzaChoKSwgbCArPSBoXHJcbiAgICAgICAgfSksIGMuZm9yRWFjaChmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgICAgICB2YXIgYyA9IG5bYl0gLyBsO1xyXG4gICAgICAgICAgICBtLnB1c2goTWF0aC5QSSAqIGMpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIG8gPSAoYy5sZW5ndGgsIG1bMF0gKyBtWzFdKSwgcCA9IG5bMF0gLyAyICsgblsxXSAvIDIsIHEgPSBwIC8gMiAvIE1hdGguc2luKG8gLyAyKTtcclxuICAgICAgICBudWxsICE9IGcgJiYgZyA+IHEgJiYgKHEgPSBnKTtcclxuICAgICAgICB2YXIgciA9IHEgKiBpLCBzID0gcSAqIGosIHQgPSBkLmFuaW1hdGU7XHJcbiAgICAgICAgaWYgKHQpIHtcclxuICAgICAgICAgICAgdmFyIHUgPSB0LnRpbWUgfHwgMWUzLCB2ID0gMDtcclxuICAgICAgICAgICAgYy5mb3JFYWNoKGZ1bmN0aW9uIChiLCBjKSB7XHJcbiAgICAgICAgICAgICAgICB2ICs9IDAgPT0gYyA/IG1bY10gOiBtW2MgLSAxXSArIG1bY107XHJcbiAgICAgICAgICAgICAgICB2YXIgZCA9IGUgKyBNYXRoLmNvcyh2KSAqIHIsIGcgPSBmICsgTWF0aC5zaW4odikgKiBzO1xyXG4gICAgICAgICAgICAgICAgYS5BbmltYXRlLnN0ZXBCeVN0ZXAoYiwge3g6IGQgLSBiLndpZHRoIC8gMiwgeTogZyAtIGIuaGVpZ2h0IC8gMn0sIHUpLnN0YXJ0KClcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgdiA9IDA7XHJcbiAgICAgICAgICAgIGMuZm9yRWFjaChmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgICAgICAgICAgdiArPSAwID09IGIgPyBtW2JdIDogbVtiIC0gMV0gKyBtW2JdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGMgPSBlICsgTWF0aC5jb3ModikgKiByLCBkID0gZiArIE1hdGguc2luKHYpICogcztcclxuICAgICAgICAgICAgICAgIGEuY3ggPSBjLCBhLmN5ID0gZFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ge2N4OiBlLCBjeTogZiwgcmFkaXVzOiByLCByYWRpdXNBOiByLCByYWRpdXNCOiBzfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGQoYSwgYikge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYykge1xyXG4gICAgICAgICAgICB2YXIgZCA9IGMuY2hpbGRzO1xyXG4gICAgICAgICAgICBpZiAoIShkLmxlbmd0aCA8PSAwKSlmb3IgKHZhciBlID0gYy5nZXRCb3VuZCgpLCBmID0gZFswXSwgZyA9IChlLndpZHRoIC0gZi53aWR0aCkgLyBiLCBoID0gKGUuaGVpZ2h0IC0gZi5oZWlnaHQpIC8gYSwgaSA9IChkLmxlbmd0aCwgMCksIGogPSAwOyBhID4gajsgaisrKWZvciAodmFyIGsgPSAwOyBiID4gazsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbCA9IGRbaSsrXSwgbSA9IGUubGVmdCArIGcgLyAyICsgayAqIGcsIG4gPSBlLnRvcCArIGggLyAyICsgaiAqIGg7XHJcbiAgICAgICAgICAgICAgICBpZiAobC5zZXRMb2NhdGlvbihtLCBuKSwgaSA+PSBkLmxlbmd0aClyZXR1cm5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBlKGEsIGIpIHtcclxuICAgICAgICByZXR1cm4gbnVsbCA9PSBhICYmIChhID0gMCksIG51bGwgPT0gYiAmJiAoYiA9IDApLCBmdW5jdGlvbiAoYykge1xyXG4gICAgICAgICAgICB2YXIgZCA9IGMuY2hpbGRzO1xyXG4gICAgICAgICAgICBpZiAoIShkLmxlbmd0aCA8PSAwKSlmb3IgKHZhciBlID0gYy5nZXRCb3VuZCgpLCBmID0gZS5sZWZ0LCBnID0gZS50b3AsIGggPSAwOyBoIDwgZC5sZW5ndGg7IGgrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGkgPSBkW2hdO1xyXG4gICAgICAgICAgICAgICAgZiArIGkud2lkdGggPj0gZS5yaWdodCAmJiAoZiA9IGUubGVmdCwgZyArPSBiICsgaS5oZWlnaHQpLCBpLnNldExvY2F0aW9uKGYsIGcpLCBmICs9IGEgKyBpLndpZHRoXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZigpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgaWYgKGIubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgYyA9IDFlNywgZCA9IC0xZTcsIGUgPSAxZTcsIGYgPSAtMWU3LCBnID0gZCAtIGMsIGggPSBmIC0gZSwgaSA9IDA7IGkgPCBiLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGogPSBiW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGoueCA8PSBjICYmIChjID0gai54KSwgai54ID49IGQgJiYgKGQgPSBqLngpLCBqLnkgPD0gZSAmJiAoZSA9IGoueSksIGoueSA+PSBmICYmIChmID0gai55KSwgZyA9IGQgLSBjICsgai53aWR0aCwgaCA9IGYgLSBlICsgai5oZWlnaHRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGEueCA9IGMsIGEueSA9IGUsIGEud2lkdGggPSBnLCBhLmhlaWdodCA9IGhcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnKGIpIHtcclxuICAgICAgICB2YXIgYyA9IFtdLCBkID0gYi5maWx0ZXIoZnVuY3Rpb24gKGIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGIgaW5zdGFuY2VvZiBhLkxpbmsgPyAhMCA6IChjLnB1c2goYiksICExKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBiID0gYy5maWx0ZXIoZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgYiA9IDA7IGIgPCBkLmxlbmd0aDsgYisrKWlmIChkW2JdLm5vZGVaID09PSBhKXJldHVybiAhMTtcclxuICAgICAgICAgICAgcmV0dXJuICEwXHJcbiAgICAgICAgfSksIGIgPSBiLmZpbHRlcihmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBiID0gMDsgYiA8IGQubGVuZ3RoOyBiKyspaWYgKGRbYl0ubm9kZUEgPT09IGEpcmV0dXJuICEwO1xyXG4gICAgICAgICAgICByZXR1cm4gITFcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGgoYSkge1xyXG4gICAgICAgIHZhciBiID0gMCwgYyA9IDA7XHJcbiAgICAgICAgcmV0dXJuIGEuZm9yRWFjaChmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICBiICs9IGEud2lkdGgsIGMgKz0gYS5oZWlnaHRcclxuICAgICAgICB9KSwge3dpZHRoOiBiIC8gYS5sZW5ndGgsIGhlaWdodDogYyAvIGEubGVuZ3RofVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGkoYSwgYiwgYywgZCkge1xyXG4gICAgICAgIGIueCArPSBjLCBiLnkgKz0gZDtcclxuICAgICAgICBmb3IgKHZhciBlID0gcShhLCBiKSwgZiA9IDA7IGYgPCBlLmxlbmd0aDsgZisrKWkoYSwgZVtmXSwgYywgZClcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBqKGEsIGIpIHtcclxuICAgICAgICBmdW5jdGlvbiBjKGIsIGUpIHtcclxuICAgICAgICAgICAgdmFyIGYgPSBxKGEsIGIpO1xyXG4gICAgICAgICAgICBudWxsID09IGRbZV0gJiYgKGRbZV0gPSB7fSwgZFtlXS5ub2RlcyA9IFtdLCBkW2VdLmNoaWxkcyA9IFtdKSwgZFtlXS5ub2Rlcy5wdXNoKGIpLCBkW2VdLmNoaWxkcy5wdXNoKGYpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBnID0gMDsgZyA8IGYubGVuZ3RoOyBnKyspYyhmW2ddLCBlICsgMSksIGZbZ10ucGFyZW50ID0gYlxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGQgPSBbXTtcclxuICAgICAgICByZXR1cm4gYyhiLCAwKSwgZFxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGsoYiwgYywgZCkge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBmKGYsIGcpIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGggPSBhLmxheW91dC5nZXRUcmVlRGVlcChmLCBnKSwgayA9IGooZiwgZyksIGwgPSBrW1wiXCIgKyBoXS5ub2RlcywgbSA9IDA7IG0gPCBsLmxlbmd0aDsgbSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBsW21dLCBvID0gKG0gKyAxKSAqIChjICsgMTApLCBwID0gaCAqIGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJkb3duXCIgPT0gYiB8fCAoXCJ1cFwiID09IGIgPyBwID0gLXAgOiBcImxlZnRcIiA9PSBiID8gKG8gPSAtaCAqIGQsIHAgPSAobSArIDEpICogKGMgKyAxMCkpIDogXCJyaWdodFwiID09IGIgJiYgKG8gPSBoICogZCwgcCA9IChtICsgMSkgKiAoYyArIDEwKSkpLCBuLnNldExvY2F0aW9uKG8sIHApXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBxID0gaCAtIDE7IHEgPj0gMDsgcS0tKWZvciAodmFyIHIgPSBrW1wiXCIgKyBxXS5ub2RlcywgcyA9IGtbXCJcIiArIHFdLmNoaWxkcywgbSA9IDA7IG0gPCByLmxlbmd0aDsgbSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSByW21dLCB1ID0gc1ttXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoXCJkb3duXCIgPT0gYiA/IHQueSA9IHEgKiBkIDogXCJ1cFwiID09IGIgPyB0LnkgPSAtcSAqIGQgOiBcImxlZnRcIiA9PSBiID8gdC54ID0gLXEgKiBkIDogXCJyaWdodFwiID09IGIgJiYgKHQueCA9IHEgKiBkKSwgdS5sZW5ndGggPiAwID8gXCJkb3duXCIgPT0gYiB8fCBcInVwXCIgPT0gYiA/IHQueCA9ICh1WzBdLnggKyB1W3UubGVuZ3RoIC0gMV0ueCkgLyAyIDogKFwibGVmdFwiID09IGIgfHwgXCJyaWdodFwiID09IGIpICYmICh0LnkgPSAodVswXS55ICsgdVt1Lmxlbmd0aCAtIDFdLnkpIC8gMikgOiBtID4gMCAmJiAoXCJkb3duXCIgPT0gYiB8fCBcInVwXCIgPT0gYiA/IHQueCA9IHJbbSAtIDFdLnggKyByW20gLSAxXS53aWR0aCArIGMgOiAoXCJsZWZ0XCIgPT0gYiB8fCBcInJpZ2h0XCIgPT0gYikgJiYgKHQueSA9IHJbbSAtIDFdLnkgKyByW20gLSAxXS5oZWlnaHQgKyBjKSksIG0gPiAwKWlmIChcImRvd25cIiA9PSBiIHx8IFwidXBcIiA9PSBiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0LnggPCByW20gLSAxXS54ICsgclttIC0gMV0ud2lkdGgpZm9yICh2YXIgdiA9IHJbbSAtIDFdLnggKyByW20gLSAxXS53aWR0aCArIGMsIHcgPSBNYXRoLmFicyh2IC0gdC54KSwgeCA9IG07IHggPCByLmxlbmd0aDsgeCsrKWkoZS5jaGlsZHMsIHJbeF0sIHcsIDApXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgoXCJsZWZ0XCIgPT0gYiB8fCBcInJpZ2h0XCIgPT0gYikgJiYgdC55IDwgclttIC0gMV0ueSArIHJbbSAtIDFdLmhlaWdodClmb3IgKHZhciB5ID0gclttIC0gMV0ueSArIHJbbSAtIDFdLmhlaWdodCArIGMsIHogPSBNYXRoLmFicyh5IC0gdC55KSwgeCA9IG07IHggPCByLmxlbmd0aDsgeCsrKWkoZS5jaGlsZHMsIHJbeF0sIDAsIHopXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBnID0gbnVsbDtcclxuICAgICAgICAgICAgbnVsbCA9PSBjICYmIChnID0gaChlLmNoaWxkcyksIGMgPSBnLndpZHRoLCAoXCJsZWZ0XCIgPT0gYiB8fCBcInJpZ2h0XCIgPT0gYikgJiYgKGMgPSBnLndpZHRoICsgMTApKSwgbnVsbCA9PSBkICYmIChudWxsID09IGcgJiYgKGcgPSBoKGUuY2hpbGRzKSksIGQgPSAyICogZy5oZWlnaHQpLCBudWxsID09IGIgJiYgKGIgPSBcImRvd25cIik7XHJcbiAgICAgICAgICAgIHZhciBrID0gYS5sYXlvdXQuZ2V0Um9vdE5vZGVzKGUuY2hpbGRzKTtcclxuICAgICAgICAgICAgaWYgKGsubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgZihlLmNoaWxkcywga1swXSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbCA9IGEudXRpbC5nZXRFbGVtZW50c0JvdW5kKGUuY2hpbGRzKSwgbSA9IGUuZ2V0Q2VudGVyTG9jYXRpb24oKSwgbiA9IG0ueCAtIChsLmxlZnQgKyBsLnJpZ2h0KSAvIDIsIG8gPSBtLnkgLSAobC50b3AgKyBsLmJvdHRvbSkgLyAyO1xyXG4gICAgICAgICAgICAgICAgZS5jaGlsZHMuZm9yRWFjaChmdW5jdGlvbiAoYikge1xyXG4gICAgICAgICAgICAgICAgICAgIGIgaW5zdGFuY2VvZiBhLk5vZGUgJiYgKGIueCArPSBuLCBiLnkgKz0gbylcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbChiKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChjKSB7XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGQoYSwgYywgZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSBxKGEsIGMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKDAgIT0gZi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBudWxsID09IGUgJiYgKGUgPSBiKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZyA9IDIgKiBNYXRoLlBJIC8gZi5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgZi5mb3JFYWNoKGZ1bmN0aW9uIChiLCBmKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoID0gYy54ICsgZSAqIE1hdGguY29zKGcgKiBmKSwgaSA9IGMueSArIGUgKiBNYXRoLnNpbihnICogZik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGIuc2V0TG9jYXRpb24oaCwgaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBqID0gZSAvIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGQoYSwgYiwgailcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZSA9IGEubGF5b3V0LmdldFJvb3ROb2RlcyhjLmNoaWxkcyk7XHJcbiAgICAgICAgICAgIGlmIChlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGQoYy5jaGlsZHMsIGVbMF0pO1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSBhLnV0aWwuZ2V0RWxlbWVudHNCb3VuZChjLmNoaWxkcyksIGcgPSBjLmdldENlbnRlckxvY2F0aW9uKCksIGggPSBnLnggLSAoZi5sZWZ0ICsgZi5yaWdodCkgLyAyLCBpID0gZy55IC0gKGYudG9wICsgZi5ib3R0b20pIC8gMjtcclxuICAgICAgICAgICAgICAgIGMuY2hpbGRzLmZvckVhY2goZnVuY3Rpb24gKGIpIHtcclxuICAgICAgICAgICAgICAgICAgICBiIGluc3RhbmNlb2YgYS5Ob2RlICYmIChiLnggKz0gaCwgYi55ICs9IGkpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG0oYSwgYiwgYywgZCwgZSwgZikge1xyXG4gICAgICAgIGZvciAodmFyIGcgPSBbXSwgaCA9IDA7IGMgPiBoOyBoKyspZm9yICh2YXIgaSA9IDA7IGQgPiBpOyBpKyspZy5wdXNoKHt4OiBhICsgaSAqIGUsIHk6IGIgKyBoICogZn0pO1xyXG4gICAgICAgIHJldHVybiBnXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbihhLCBiLCBjLCBkLCBlLCBmKSB7XHJcbiAgICAgICAgdmFyIGcgPSBlID8gZSA6IDAsIGggPSBmID8gZiA6IDIgKiBNYXRoLlBJLCBpID0gaCAtIGcsIGogPSBpIC8gYywgayA9IFtdO1xyXG4gICAgICAgIGcgKz0gaiAvIDI7XHJcbiAgICAgICAgZm9yICh2YXIgbCA9IGc7IGggPj0gbDsgbCArPSBqKSB7XHJcbiAgICAgICAgICAgIHZhciBtID0gYSArIE1hdGguY29zKGwpICogZCwgbiA9IGIgKyBNYXRoLnNpbihsKSAqIGQ7XHJcbiAgICAgICAgICAgIGsucHVzaCh7eDogbSwgeTogbn0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBrXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbyhhLCBiLCBjLCBkLCBlLCBmKSB7XHJcbiAgICAgICAgdmFyIGcgPSBmIHx8IFwiYm90dG9tXCIsIGggPSBbXTtcclxuICAgICAgICBpZiAoXCJib3R0b21cIiA9PSBnKWZvciAodmFyIGkgPSBhIC0gYyAvIDIgKiBkICsgZCAvIDIsIGogPSAwOyBjID49IGo7IGorKyloLnB1c2goe1xyXG4gICAgICAgICAgICB4OiBpICsgaiAqIGQsXHJcbiAgICAgICAgICAgIHk6IGIgKyBlXHJcbiAgICAgICAgfSk7IGVsc2UgaWYgKFwidG9wXCIgPT0gZylmb3IgKHZhciBpID0gYSAtIGMgLyAyICogZCArIGQgLyAyLCBqID0gMDsgYyA+PSBqOyBqKyspaC5wdXNoKHtcclxuICAgICAgICAgICAgeDogaSArIGogKiBkLFxyXG4gICAgICAgICAgICB5OiBiIC0gZVxyXG4gICAgICAgIH0pOyBlbHNlIGlmIChcInJpZ2h0XCIgPT0gZylmb3IgKHZhciBpID0gYiAtIGMgLyAyICogZCArIGQgLyAyLCBqID0gMDsgYyA+PSBqOyBqKyspaC5wdXNoKHtcclxuICAgICAgICAgICAgeDogYSArIGUsXHJcbiAgICAgICAgICAgIHk6IGkgKyBqICogZFxyXG4gICAgICAgIH0pOyBlbHNlIGlmIChcImxlZnRcIiA9PSBnKWZvciAodmFyIGkgPSBiIC0gYyAvIDIgKiBkICsgZCAvIDIsIGogPSAwOyBjID49IGo7IGorKyloLnB1c2goe3g6IGEgLSBlLCB5OiBpICsgaiAqIGR9KTtcclxuICAgICAgICByZXR1cm4gaFxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG0oYSwgYiwgYywgZCwgZSwgZikge1xyXG4gICAgICAgIGZvciAodmFyIGcgPSBbXSwgaCA9IDA7IGMgPiBoOyBoKyspZm9yICh2YXIgaSA9IDA7IGQgPiBpOyBpKyspZy5wdXNoKHt4OiBhICsgaSAqIGUsIHk6IGIgKyBoICogZn0pO1xyXG4gICAgICAgIHJldHVybiBnXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcChhLCBiKSB7XHJcbiAgICAgICAgaWYgKGEubGF5b3V0KSB7XHJcbiAgICAgICAgICAgIHZhciBjID0gYS5sYXlvdXQsIGQgPSBjLnR5cGUsIGUgPSBudWxsO1xyXG4gICAgICAgICAgICBpZiAoXCJjaXJjbGVcIiA9PSBkKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZiA9IGMucmFkaXVzIHx8IE1hdGgubWF4KGEud2lkdGgsIGEuaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgIGUgPSBuKGEuY3gsIGEuY3ksIGIubGVuZ3RoLCBmLCBhLmxheW91dC5iZWdpbkFuZ2xlLCBhLmxheW91dC5lbmRBbmdsZSlcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChcInRyZWVcIiA9PSBkKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZyA9IGMud2lkdGggfHwgNTAsIGggPSBjLmhlaWdodCB8fCA1MCwgaSA9IGMuZGlyZWN0aW9uO1xyXG4gICAgICAgICAgICAgICAgZSA9IG8oYS5jeCwgYS5jeSwgYi5sZW5ndGgsIGcsIGgsIGkpXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoXCJncmlkXCIgIT0gZClyZXR1cm47XHJcbiAgICAgICAgICAgICAgICBlID0gbShhLngsIGEueSwgYy5yb3dzLCBjLmNvbHMsIGMuaG9yaXpvbnRhbCB8fCAwLCBjLnZlcnRpY2FsIHx8IDApXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBiLmxlbmd0aDsgaisrKWJbal0uc2V0Q2VudGVyTG9jYXRpb24oZVtqXS54LCBlW2pdLnkpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHEoYiwgYykge1xyXG4gICAgICAgIGZvciAodmFyIGQgPSBbXSwgZSA9IDA7IGUgPCBiLmxlbmd0aDsgZSsrKWJbZV0gaW5zdGFuY2VvZiBhLkxpbmsgJiYgYltlXS5ub2RlQSA9PT0gYyAmJiBkLnB1c2goYltlXS5ub2RlWik7XHJcbiAgICAgICAgcmV0dXJuIGRcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiByKGEsIGIsIGMpIHtcclxuICAgICAgICB2YXIgZCA9IHEoYS5jaGlsZHMsIGIpO1xyXG4gICAgICAgIGlmICgwID09IGQubGVuZ3RoKXJldHVybiBudWxsO1xyXG4gICAgICAgIGlmIChwKGIsIGQpLCAxID09IGMpZm9yICh2YXIgZSA9IDA7IGUgPCBkLmxlbmd0aDsgZSsrKXIoYSwgZFtlXSwgYyk7XHJcbiAgICAgICAgcmV0dXJuIG51bGxcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzKGIsIGMpIHtcclxuICAgICAgICBmdW5jdGlvbiBkKGEsIGIpIHtcclxuICAgICAgICAgICAgdmFyIGMgPSBhLnggLSBiLngsIGQgPSBhLnkgLSBiLnk7XHJcbiAgICAgICAgICAgIGkgKz0gYyAqIGYsIGogKz0gZCAqIGYsIGkgKj0gZywgaiAqPSBnLCBqICs9IGgsIGIueCArPSBpLCBiLnkgKz0galxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZSgpIHtcclxuICAgICAgICAgICAgaWYgKCEoKytrID4gMTUwKSkge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgYSA9IDA7IGEgPCBsLmxlbmd0aDsgYSsrKWxbYV0gIT0gYiAmJiBkKGIsIGxbYV0sIGwpO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChlLCAxZTMgLyAyNClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGYgPSAuMDEsIGcgPSAuOTUsIGggPSAtNSwgaSA9IDAsIGogPSAwLCBrID0gMCwgbCA9IGMuZ2V0RWxlbWVudHNCeUNsYXNzKGEuTm9kZSk7XHJcbiAgICAgICAgZSgpXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdChhLCBiKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gYyhhLCBiLCBlKSB7XHJcbiAgICAgICAgICAgIHZhciBmID0gcShhLCBiKTtcclxuICAgICAgICAgICAgZSA+IGQgJiYgKGQgPSBlKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgZyA9IDA7IGcgPCBmLmxlbmd0aDsgZysrKWMoYSwgZltnXSwgZSArIDEpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZCA9IDA7XHJcbiAgICAgICAgcmV0dXJuIGMoYSwgYiwgMCksIGRcclxuICAgIH1cclxuXHJcbiAgICBhLmxheW91dCA9IGEuTGF5b3V0ID0ge1xyXG4gICAgICAgIGxheW91dE5vZGU6IHIsXHJcbiAgICAgICAgZ2V0Tm9kZUNoaWxkczogcSxcclxuICAgICAgICBhZGp1c3RQb3NpdGlvbjogcCxcclxuICAgICAgICBzcHJpbmdMYXlvdXQ6IHMsXHJcbiAgICAgICAgZ2V0VHJlZURlZXA6IHQsXHJcbiAgICAgICAgZ2V0Um9vdE5vZGVzOiBnLFxyXG4gICAgICAgIEdyaWRMYXlvdXQ6IGQsXHJcbiAgICAgICAgRmxvd0xheW91dDogZSxcclxuICAgICAgICBBdXRvQm91bmRMYXlvdXQ6IGYsXHJcbiAgICAgICAgQ2lyY2xlTGF5b3V0OiBsLFxyXG4gICAgICAgIFRyZWVMYXlvdXQ6IGssXHJcbiAgICAgICAgZ2V0Tm9kZXNDZW50ZXI6IGIsXHJcbiAgICAgICAgY2lyY2xlTGF5b3V0Tm9kZXM6IGNcclxuICAgIH1cclxufShKVG9wbyksIGZ1bmN0aW9uIChhKSB7XHJcbiAgICBmdW5jdGlvbiBiKCkge1xyXG4gICAgICAgIHZhciBiID0gbmV3IGEuQ2lyY2xlTm9kZTtcclxuICAgICAgICByZXR1cm4gYi5yYWRpdXMgPSAxNTAsIGIuY29sb3JzID0gW1wiIzM2NjZCMFwiLCBcIiMyQ0E4RTBcIiwgXCIjNzdEMUY2XCJdLCBiLmRhdGFzID0gWy4zLCAuMywgLjRdLCBiLnRpdGxlcyA9IFtcIkFcIiwgXCJCXCIsIFwiQ1wiXSwgYi5wYWludCA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHZhciBjID0gMiAqIGIucmFkaXVzLCBkID0gMiAqIGIucmFkaXVzO1xyXG4gICAgICAgICAgICBiLndpZHRoID0gYywgYi5oZWlnaHQgPSBkO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBlID0gMCwgZiA9IDA7IGYgPCB0aGlzLmRhdGFzLmxlbmd0aDsgZisrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZyA9IHRoaXMuZGF0YXNbZl0gKiBNYXRoLlBJICogMjtcclxuICAgICAgICAgICAgICAgIGEuc2F2ZSgpLCBhLmJlZ2luUGF0aCgpLCBhLmZpbGxTdHlsZSA9IGIuY29sb3JzW2ZdLCBhLm1vdmVUbygwLCAwKSwgYS5hcmMoMCwgMCwgdGhpcy5yYWRpdXMsIGUsIGUgKyBnLCAhMSksIGEuZmlsbCgpLCBhLmNsb3NlUGF0aCgpLCBhLnJlc3RvcmUoKSwgYS5iZWdpblBhdGgoKSwgYS5mb250ID0gdGhpcy5mb250O1xyXG4gICAgICAgICAgICAgICAgdmFyIGggPSB0aGlzLnRpdGxlc1tmXSArIFwiOiBcIiArICgxMDAgKiB0aGlzLmRhdGFzW2ZdKS50b0ZpeGVkKDIpICsgXCIlXCIsIGkgPSBhLm1lYXN1cmVUZXh0KGgpLndpZHRoLCBqID0gKGEubWVhc3VyZVRleHQoXCLnlLBcIikud2lkdGgsIChlICsgZSArIGcpIC8gMiksIGsgPSB0aGlzLnJhZGl1cyAqIE1hdGguY29zKGopLCBsID0gdGhpcy5yYWRpdXMgKiBNYXRoLnNpbihqKTtcclxuICAgICAgICAgICAgICAgIGogPiBNYXRoLlBJIC8gMiAmJiBqIDw9IE1hdGguUEkgPyBrIC09IGkgOiBqID4gTWF0aC5QSSAmJiBqIDwgMiAqIE1hdGguUEkgKiAzIC8gNCA/IGsgLT0gaSA6IGogPiAyICogTWF0aC5QSSAqIC43NSwgYS5maWxsU3R5bGUgPSBcIiNGRkZGRkZcIiwgYS5maWxsVGV4dChoLCBrLCBsKSwgYS5tb3ZlVG8odGhpcy5yYWRpdXMgKiBNYXRoLmNvcyhqKSwgdGhpcy5yYWRpdXMgKiBNYXRoLnNpbihqKSksIGogPiBNYXRoLlBJIC8gMiAmJiBqIDwgMiAqIE1hdGguUEkgKiAzIC8gNCAmJiAoayAtPSBpKSwgaiA+IE1hdGguUEksIGEuZmlsbCgpLCBhLnN0cm9rZSgpLCBhLmNsb3NlUGF0aCgpLCBlICs9IGdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIGJcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjKCkge1xyXG4gICAgICAgIHZhciBiID0gbmV3IGEuTm9kZTtcclxuICAgICAgICByZXR1cm4gYi5zaG93U2VsZWN0ZWQgPSAhMSwgYi53aWR0aCA9IDI1MCwgYi5oZWlnaHQgPSAxODAsIGIuY29sb3JzID0gW1wiIzM2NjZCMFwiLCBcIiMyQ0E4RTBcIiwgXCIjNzdEMUY2XCJdLCBiLmRhdGFzID0gWy4zLCAuMywgLjRdLCBiLnRpdGxlcyA9IFtcIkFcIiwgXCJCXCIsIFwiQ1wiXSwgYi5wYWludCA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHZhciBjID0gMywgZCA9ICh0aGlzLndpZHRoIC0gYykgLyB0aGlzLmRhdGFzLmxlbmd0aDtcclxuICAgICAgICAgICAgYS5zYXZlKCksIGEuYmVnaW5QYXRoKCksIGEuZmlsbFN0eWxlID0gXCIjRkZGRkZGXCIsIGEuc3Ryb2tlU3R5bGUgPSBcIiNGRkZGRkZcIiwgYS5tb3ZlVG8oLXRoaXMud2lkdGggLyAyIC0gMSwgLXRoaXMuaGVpZ2h0IC8gMiksIGEubGluZVRvKC10aGlzLndpZHRoIC8gMiAtIDEsIHRoaXMuaGVpZ2h0IC8gMiArIDMpLCBhLmxpbmVUbyh0aGlzLndpZHRoIC8gMiArIGMgKyAxLCB0aGlzLmhlaWdodCAvIDIgKyAzKSwgYS5zdHJva2UoKSwgYS5jbG9zZVBhdGgoKSwgYS5yZXN0b3JlKCk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGUgPSAwOyBlIDwgdGhpcy5kYXRhcy5sZW5ndGg7IGUrKykge1xyXG4gICAgICAgICAgICAgICAgYS5zYXZlKCksIGEuYmVnaW5QYXRoKCksIGEuZmlsbFN0eWxlID0gYi5jb2xvcnNbZV07XHJcbiAgICAgICAgICAgICAgICB2YXIgZiA9IHRoaXMuZGF0YXNbZV0sIGcgPSBlICogKGQgKyBjKSAtIHRoaXMud2lkdGggLyAyLCBoID0gdGhpcy5oZWlnaHQgLSBmIC0gdGhpcy5oZWlnaHQgLyAyO1xyXG4gICAgICAgICAgICAgICAgYS5maWxsUmVjdChnLCBoLCBkLCBmKTtcclxuICAgICAgICAgICAgICAgIHZhciBpID0gXCJcIiArIHBhcnNlSW50KHRoaXMuZGF0YXNbZV0pLCBqID0gYS5tZWFzdXJlVGV4dChpKS53aWR0aCwgayA9IGEubWVhc3VyZVRleHQoXCLnlLBcIikud2lkdGg7XHJcbiAgICAgICAgICAgICAgICBhLmZpbGxTdHlsZSA9IFwiI0ZGRkZGRlwiLCBhLmZpbGxUZXh0KGksIGcgKyAoZCAtIGopIC8gMiwgaCAtIGspLCBhLmZpbGxUZXh0KHRoaXMudGl0bGVzW2VdLCBnICsgKGQgLSBqKSAvIDIsIHRoaXMuaGVpZ2h0IC8gMiArIGspLCBhLmZpbGwoKSwgYS5jbG9zZVBhdGgoKSwgYS5yZXN0b3JlKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIGJcclxuICAgIH1cclxuXHJcbiAgICBhLkJhckNoYXJ0Tm9kZSA9IGMsIGEuUGllQ2hhcnROb2RlID0gYlxyXG59KEpUb3BvKSwgZnVuY3Rpb24gKGEpIHtcclxuICAgIGZ1bmN0aW9uIGIoYiwgYykge1xyXG4gICAgICAgIHZhciBkLCBlID0gbnVsbDtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzdG9wOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZCA/ICh3aW5kb3cuY2xlYXJJbnRlcnZhbChkKSwgZSAmJiBlLnB1Ymxpc2goXCJzdG9wXCIpLCB0aGlzKSA6IHRoaXNcclxuICAgICAgICAgICAgfSwgc3RhcnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBhID0gdGhpcztcclxuICAgICAgICAgICAgICAgIHJldHVybiBkID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGIuY2FsbChhKVxyXG4gICAgICAgICAgICAgICAgfSwgYyksIHRoaXNcclxuICAgICAgICAgICAgfSwgb25TdG9wOiBmdW5jdGlvbiAoYikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gZSAmJiAoZSA9IG5ldyBhLnV0aWwuTWVzc2FnZUJ1cyksIGUuc3Vic2NyaWJlKFwic3RvcFwiLCBiKSwgdGhpc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGMoYSwgYykge1xyXG4gICAgICAgIGMgPSBjIHx8IHt9O1xyXG4gICAgICAgIHZhciBkID0gYy5ncmF2aXR5IHx8IC4xLCBlID0gYy5keCB8fCAwLCBmID0gYy5keSB8fCA1LCBnID0gYy5zdG9wLCBoID0gYy5pbnRlcnZhbCB8fCAzMCwgaSA9IG5ldyBiKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZyAmJiBnKCkgPyAoZiA9IC41LCB0aGlzLnN0b3AoKSkgOiAoZiArPSBkLCBhLnNldExvY2F0aW9uKGEueCArIGUsIGEueSArIGYpKVxyXG4gICAgICAgIH0sIGgpO1xyXG4gICAgICAgIHJldHVybiBpXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZChhLCBjLCBkLCBlLCBmKSB7XHJcbiAgICAgICAgdmFyIGcgPSAxZTMgLyAyNCwgaCA9IHt9O1xyXG4gICAgICAgIGZvciAodmFyIGkgaW4gYykge1xyXG4gICAgICAgICAgICB2YXIgaiA9IGNbaV0sIGsgPSBqIC0gYVtpXTtcclxuICAgICAgICAgICAgaFtpXSA9IHtcclxuICAgICAgICAgICAgICAgIG9sZFZhbHVlOiBhW2ldLCB0YXJnZXRWYWx1ZTogaiwgc3RlcDogayAvIGQgKiBnLCBpc0RvbmU6IGZ1bmN0aW9uIChiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSB0aGlzLnN0ZXAgPiAwICYmIGFbYl0gPj0gdGhpcy50YXJnZXRWYWx1ZSB8fCB0aGlzLnN0ZXAgPCAwICYmIGFbYl0gPD0gdGhpcy50YXJnZXRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBsID0gbmV3IGIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgYiA9ICEwO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBkIGluIGMpaFtkXS5pc0RvbmUoZCkgfHwgKGFbZF0gKz0gaFtkXS5zdGVwLCBiID0gITEpO1xyXG4gICAgICAgICAgICBpZiAoYikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFlKXJldHVybiB0aGlzLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGQgaW4gYylpZiAoZikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBnID0gaFtkXS50YXJnZXRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBoW2RdLnRhcmdldFZhbHVlID0gaFtkXS5vbGRWYWx1ZSwgaFtkXS5vbGRWYWx1ZSA9IGcsIGhbZF0uc3RlcCA9IC1oW2RdLnN0ZXBcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBhW2RdID0gaFtkXS5vbGRWYWx1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzXHJcbiAgICAgICAgfSwgZyk7XHJcbiAgICAgICAgcmV0dXJuIGxcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBlKGEpIHtcclxuICAgICAgICBudWxsID09IGEgJiYgKGEgPSB7fSk7XHJcbiAgICAgICAgdmFyIGIgPSBhLnNwcmluZyB8fCAuMSwgYyA9IGEuZnJpY3Rpb24gfHwgLjgsIGQgPSBhLmdyaXZpdHkgfHwgMCwgZSA9IChhLndpbmQgfHwgMCwgYS5taW5MZW5ndGggfHwgMCk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaXRlbXM6IFtdLCB0aW1lcjogbnVsbCwgaXNQYXVzZTogITEsIGFkZE5vZGU6IGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYyA9IHtub2RlOiBhLCB0YXJnZXQ6IGIsIHZ4OiAwLCB2eTogMH07XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pdGVtcy5wdXNoKGMpLCB0aGlzXHJcbiAgICAgICAgICAgIH0sIHBsYXk6IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0b3AoKSwgYSA9IG51bGwgPT0gYSA/IDFlMyAvIDI0IDogYTtcclxuICAgICAgICAgICAgICAgIHZhciBiID0gdGhpcztcclxuICAgICAgICAgICAgICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYi5uZXh0RnJhbWUoKVxyXG4gICAgICAgICAgICAgICAgfSwgYSlcclxuICAgICAgICAgICAgfSwgc3RvcDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgbnVsbCAhPSB0aGlzLnRpbWVyICYmIHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMudGltZXIpXHJcbiAgICAgICAgICAgIH0sIG5leHRGcmFtZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgYSA9IDA7IGEgPCB0aGlzLml0ZW1zLmxlbmd0aDsgYSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSB0aGlzLml0ZW1zW2FdLCBnID0gZi5ub2RlLCBoID0gZi50YXJnZXQsIGkgPSBmLnZ4LCBqID0gZi52eSwgayA9IGgueCAtIGcueCwgbCA9IGgueSAtIGcueSwgbSA9IE1hdGguYXRhbjIobCwgayk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKDAgIT0gZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IGgueCAtIE1hdGguY29zKG0pICogZSwgbyA9IGgueSAtIE1hdGguc2luKG0pICogZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaSArPSAobiAtIGcueCkgKiBiLCBqICs9IChvIC0gZy55KSAqIGJcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaSArPSBrICogYiwgaiArPSBsICogYjtcclxuICAgICAgICAgICAgICAgICAgICBpICo9IGMsIGogKj0gYywgaiArPSBkLCBnLnggKz0gaSwgZy55ICs9IGosIGYudnggPSBpLCBmLnZ5ID0galxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGYoYSwgYikge1xyXG4gICAgICAgIGZ1bmN0aW9uIGMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBlID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG8gPyB2b2lkIGYuc3RvcCgpIDogKGEucm90YXRlICs9IGcgfHwgLjIsIHZvaWQoYS5yb3RhdGUgPiAyICogTWF0aC5QSSAmJiAoYS5yb3RhdGUgPSAwKSkpXHJcbiAgICAgICAgICAgIH0sIDEwMCksIGZcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGQoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB3aW5kb3cuY2xlYXJJbnRlcnZhbChlKSwgZi5vblN0b3AgJiYgZi5vblN0b3AoYSksIGZcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBlID0gKGIuY29udGV4dCwgbnVsbCksIGYgPSB7fSwgZyA9IGIudjtcclxuICAgICAgICByZXR1cm4gZi5ydW4gPSBjLCBmLnN0b3AgPSBkLCBmLm9uU3RvcCA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmLm9uU3RvcCA9IGEsIGZcclxuICAgICAgICB9LCBmXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZyhhLCBiKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gYygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5jbGVhckludGVydmFsKGcpLCBoLm9uU3RvcCAmJiBoLm9uU3RvcChhKSwgaFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZCgpIHtcclxuICAgICAgICAgICAgdmFyIGQgPSBiLmR4IHx8IDAsIGkgPSBiLmR5IHx8IDI7XHJcbiAgICAgICAgICAgIHJldHVybiBnID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG8gPyB2b2lkIGguc3RvcCgpIDogKGkgKz0gZiwgdm9pZChhLnkgKyBhLmhlaWdodCA8IGUuc3RhZ2UuY2FudmFzLmhlaWdodCA/IGEuc2V0TG9jYXRpb24oYS54ICsgZCwgYS55ICsgaSkgOiAoaSA9IDAsIGMoKSkpKVxyXG4gICAgICAgICAgICB9LCAyMCksIGhcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBlID0gYi5jb250ZXh0LCBmID0gYi5ncmF2aXR5IHx8IC4xLCBnID0gbnVsbCwgaCA9IHt9O1xyXG4gICAgICAgIHJldHVybiBoLnJ1biA9IGQsIGguc3RvcCA9IGMsIGgub25TdG9wID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGgub25TdG9wID0gYSwgaFxyXG4gICAgICAgIH0sIGhcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBoKGIsIGMpIHtcclxuICAgICAgICBmdW5jdGlvbiBkKGMsIGQsIGUsIGYsIGcpIHtcclxuICAgICAgICAgICAgdmFyIGggPSBuZXcgYS5Ob2RlO1xyXG4gICAgICAgICAgICByZXR1cm4gaC5zZXRJbWFnZShiLmltYWdlKSwgaC5zZXRTaXplKGIud2lkdGgsIGIuaGVpZ2h0KSwgaC5zZXRMb2NhdGlvbihjLCBkKSwgaC5zaG93U2VsZWN0ZWQgPSAhMSwgaC5kcmFnYWJsZSA9ICExLCBoLnBhaW50ID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgIGEuc2F2ZSgpLCBhLmFyYygwLCAwLCBlLCBmLCBnKSwgYS5jbGlwKCksIGEuYmVnaW5QYXRoKCksIG51bGwgIT0gdGhpcy5pbWFnZSA/IGEuZHJhd0ltYWdlKHRoaXMuaW1hZ2UsIC10aGlzLndpZHRoIC8gMiwgLXRoaXMuaGVpZ2h0IC8gMikgOiAoYS5maWxsU3R5bGUgPSBcInJnYmEoXCIgKyB0aGlzLnN0eWxlLmZpbGxTdHlsZSArIFwiLFwiICsgdGhpcy5hbHBoYSArIFwiKVwiLCBhLnJlY3QoLXRoaXMud2lkdGggLyAyLCAtdGhpcy5oZWlnaHQgLyAyLCB0aGlzLndpZHRoIC8gMiwgdGhpcy5oZWlnaHQgLyAyKSwgYS5maWxsKCkpLCBhLmNsb3NlUGF0aCgpLCBhLnJlc3RvcmUoKVxyXG4gICAgICAgICAgICB9LCBoXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBlKGMsIGUpIHtcclxuICAgICAgICAgICAgdmFyIGYgPSBjLCBnID0gYyArIE1hdGguUEksIGggPSBkKGIueCwgYi55LCBiLndpZHRoLCBmLCBnKSwgaiA9IGQoYi54IC0gMiArIDQgKiBNYXRoLnJhbmRvbSgpLCBiLnksIGIud2lkdGgsIGYgKyBNYXRoLlBJLCBmKTtcclxuICAgICAgICAgICAgYi52aXNpYmxlID0gITEsIGUuYWRkKGgpLCBlLmFkZChqKSwgYS5BbmltYXRlLmdyYXZpdHkoaCwge2NvbnRleHQ6IGUsIGR4OiAuM30pLnJ1bigpLm9uU3RvcChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBlLnJlbW92ZShoKSwgZS5yZW1vdmUoaiksIGkuc3RvcCgpXHJcbiAgICAgICAgICAgIH0pLCBhLkFuaW1hdGUuZ3Jhdml0eShqLCB7Y29udGV4dDogZSwgZHg6IC0uMn0pLnJ1bigpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBmKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZShjLmFuZ2xlLCBoKSwgaVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGkub25TdG9wICYmIGkub25TdG9wKGIpLCBpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgaCA9IGMuY29udGV4dCwgaSA9IChiLnN0eWxlLCB7fSk7XHJcbiAgICAgICAgcmV0dXJuIGkub25TdG9wID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGkub25TdG9wID0gYSwgaVxyXG4gICAgICAgIH0sIGkucnVuID0gZiwgaS5zdG9wID0gZywgaVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGkoYSwgYikge1xyXG4gICAgICAgIGZ1bmN0aW9uIGMoYSkge1xyXG4gICAgICAgICAgICBhLnZpc2libGUgPSAhMCwgYS5yb3RhdGUgPSBNYXRoLnJhbmRvbSgpO1xyXG4gICAgICAgICAgICB2YXIgYiA9IGcuc3RhZ2UuY2FudmFzLndpZHRoIC8gMjtcclxuICAgICAgICAgICAgYS54ID0gYiArIE1hdGgucmFuZG9tKCkgKiAoYiAtIDEwMCkgLSBNYXRoLnJhbmRvbSgpICogKGIgLSAxMDApLCBhLnkgPSBnLnN0YWdlLmNhbnZhcy5oZWlnaHQsIGEudnggPSA1ICogTWF0aC5yYW5kb20oKSAtIDUgKiBNYXRoLnJhbmRvbSgpLCBhLnZ5ID0gLTI1XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBkKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gYyhhKSwgaCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvID8gdm9pZCBpLnN0b3AoKSA6IChhLnZ5ICs9IGYsIGEueCArPSBhLnZ4LCBhLnkgKz0gYS52eSwgdm9pZCgoYS54IDwgMCB8fCBhLnggPiBnLnN0YWdlLmNhbnZhcy53aWR0aCB8fCBhLnkgPiBnLnN0YWdlLmNhbnZhcy5oZWlnaHQpICYmIChpLm9uU3RvcCAmJiBpLm9uU3RvcChhKSwgYyhhKSkpKVxyXG4gICAgICAgICAgICB9LCA1MCksIGlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGUoKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKGgpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZiA9IC44LCBnID0gYi5jb250ZXh0LCBoID0gbnVsbCwgaSA9IHt9O1xyXG4gICAgICAgIHJldHVybiBpLm9uU3RvcCA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpLm9uU3RvcCA9IGEsIGlcclxuICAgICAgICB9LCBpLnJ1biA9IGQsIGkuc3RvcCA9IGUsIGlcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBqKCkge1xyXG4gICAgICAgIG8gPSAhMFxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGsoKSB7XHJcbiAgICAgICAgbyA9ICExXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbChiLCBjKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZCgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG4gPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobylyZXR1cm4gdm9pZCBtLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgIHZhciBhID0gZi55ICsgaCArIE1hdGguc2luKGspICogajtcclxuICAgICAgICAgICAgICAgIGIuc2V0TG9jYXRpb24oYi54LCBhKSwgayArPSBsXHJcbiAgICAgICAgICAgIH0sIDEwMCksIG1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGUoKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKG4pXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZiA9IGMucDEsIGcgPSBjLnAyLCBoID0gKGMuY29udGV4dCwgZi54ICsgKGcueCAtIGYueCkgLyAyKSwgaSA9IGYueSArIChnLnkgLSBmLnkpIC8gMiwgaiA9IGEudXRpbC5nZXREaXN0YW5jZShmLCBnKSAvIDIsIGsgPSBNYXRoLmF0YW4yKGksIGgpLCBsID0gYy5zcGVlZCB8fCAuMiwgbSA9IHt9LCBuID0gbnVsbDtcclxuICAgICAgICByZXR1cm4gbS5ydW4gPSBkLCBtLnN0b3AgPSBlLCBtXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbShhLCBiKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gYygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGggPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobylyZXR1cm4gdm9pZCBnLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgIHZhciBiID0gZS54IC0gYS54LCBjID0gZS55IC0gYS55LCBoID0gYiAqIGYsIGkgPSBjICogZjtcclxuICAgICAgICAgICAgICAgIGEueCArPSBoLCBhLnkgKz0gaSwgLjAxID4gaCAmJiAuMSA+IGkgJiYgZCgpXHJcbiAgICAgICAgICAgIH0sIDEwMCksIGdcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGQoKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKGgpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZSA9IGIucG9zaXRpb24sIGYgPSAoYi5jb250ZXh0LCBiLmVhc2luZyB8fCAuMiksIGcgPSB7fSwgaCA9IG51bGw7XHJcbiAgICAgICAgcmV0dXJuIGcub25TdG9wID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGcub25TdG9wID0gYSwgZ1xyXG4gICAgICAgIH0sIGcucnVuID0gYywgZy5zdG9wID0gZCwgZ1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG4oYSwgYikge1xyXG4gICAgICAgIGZ1bmN0aW9uIGMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBqID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgYS5zY2FsZVggKz0gZiwgYS5zY2FsZVkgKz0gZiwgYS5zY2FsZVggPj0gZSAmJiBkKClcclxuICAgICAgICAgICAgfSwgMTAwKSwgaVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZCgpIHtcclxuICAgICAgICAgICAgaS5vblN0b3AgJiYgaS5vblN0b3AoYSksIGEuc2NhbGVYID0gZywgYS5zY2FsZVkgPSBoLCB3aW5kb3cuY2xlYXJJbnRlcnZhbChqKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGUgPSAoYi5wb3NpdGlvbiwgYi5jb250ZXh0LCBiLnNjYWxlIHx8IDEpLCBmID0gLjA2LCBnID0gYS5zY2FsZVgsIGggPSBhLnNjYWxlWSwgaSA9IHt9LCBqID0gbnVsbDtcclxuICAgICAgICByZXR1cm4gaS5vblN0b3AgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICByZXR1cm4gaS5vblN0b3AgPSBhLCBpXHJcbiAgICAgICAgfSwgaS5ydW4gPSBjLCBpLnN0b3AgPSBkLCBpXHJcbiAgICB9XHJcblxyXG4gICAgYS5BbmltYXRlID0ge30sIGEuRWZmZWN0ID0ge307XHJcbiAgICB2YXIgbyA9ICExO1xyXG4gICAgYS5FZmZlY3Quc3ByaW5nID0gZSwgYS5FZmZlY3QuZ3Jhdml0eSA9IGMsIGEuQW5pbWF0ZS5zdGVwQnlTdGVwID0gZCwgYS5BbmltYXRlLnJvdGF0ZSA9IGYsIGEuQW5pbWF0ZS5zY2FsZSA9IG4sIGEuQW5pbWF0ZS5tb3ZlID0gbSwgYS5BbmltYXRlLmN5Y2xlID0gbCwgYS5BbmltYXRlLnJlcGVhdFRocm93ID0gaSwgYS5BbmltYXRlLmRpdmlkZWRUd29QaWVjZSA9IGgsIGEuQW5pbWF0ZS5ncmF2aXR5ID0gZywgYS5BbmltYXRlLnN0YXJ0QWxsID0gaywgYS5BbmltYXRlLnN0b3BBbGwgPSBqXHJcbn0oSlRvcG8pLCBmdW5jdGlvbiAoYSkge1xyXG4gICAgZnVuY3Rpb24gYihhLCBiKSB7XHJcbiAgICAgICAgdmFyIGMgPSBbXTtcclxuICAgICAgICBpZiAoMCA9PSBhLmxlbmd0aClyZXR1cm4gYztcclxuICAgICAgICB2YXIgZCA9IGIubWF0Y2goL15cXHMqKFxcdyspXFxzKiQvKTtcclxuICAgICAgICBpZiAobnVsbCAhPSBkKSB7XHJcbiAgICAgICAgICAgIHZhciBlID0gYS5maWx0ZXIoZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhLmVsZW1lbnRUeXBlID09IGRbMV1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG51bGwgIT0gZSAmJiBlLmxlbmd0aCA+IDAgJiYgKGMgPSBjLmNvbmNhdChlKSlcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgZiA9ICExO1xyXG4gICAgICAgICAgICBpZiAoZCA9IGIubWF0Y2goL1xccyooXFx3KylcXHMqXFxbXFxzKihcXHcrKVxccyooWz49PF0pXFxzKlsnXCJdKFxcUyspWydcIl1cXHMqXFxdXFxzKi8pLCAobnVsbCA9PSBkIHx8IGQubGVuZ3RoIDwgNSkgJiYgKGQgPSBiLm1hdGNoKC9cXHMqKFxcdyspXFxzKlxcW1xccyooXFx3KylcXHMqKFs+PTxdKVxccyooXFxkKyhcXC5cXGQrKT8pXFxzKlxcXVxccyovKSwgZiA9ICEwKSwgbnVsbCAhPSBkICYmIGQubGVuZ3RoID49IDUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBnID0gZFsxXSwgaCA9IGRbMl0sIGkgPSBkWzNdLCBqID0gZFs0XTtcclxuICAgICAgICAgICAgICAgIGUgPSBhLmZpbHRlcihmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhLmVsZW1lbnRUeXBlICE9IGcpcmV0dXJuICExO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBiID0gYVtoXTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMSA9PSBmICYmIChiID0gcGFyc2VJbnQoYikpLCBcIj1cIiA9PSBpID8gYiA9PSBqIDogXCI+XCIgPT0gaSA/IGIgPiBqIDogXCI8XCIgPT0gaSA/IGogPiBiIDogXCI8PVwiID09IGkgPyBqID49IGIgOiBcIj49XCIgPT0gaSA/IGIgPj0gaiA6IFwiIT1cIiA9PSBpID8gYiAhPSBqIDogITFcclxuICAgICAgICAgICAgICAgIH0pLCBudWxsICE9IGUgJiYgZS5sZW5ndGggPiAwICYmIChjID0gYy5jb25jYXQoZSkpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjKGEpIHtcclxuICAgICAgICBpZiAoYS5maW5kID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkLmNhbGwodGhpcywgYSlcclxuICAgICAgICAgICAgfSwgZS5mb3JFYWNoKGZ1bmN0aW9uIChiKSB7XHJcbiAgICAgICAgICAgICAgICBhW2JdID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBjID0gMDsgYyA8IHRoaXMubGVuZ3RoOyBjKyspdGhpc1tjXVtiXShhKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpc1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSwgYS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHZhciBiID0gYVswXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgYyBpbiBiKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZiA9IGJbY107XHJcbiAgICAgICAgICAgICAgICBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGYgJiYgIWZ1bmN0aW9uIChiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYVtjXSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYyA9IFtdLCBkID0gMDsgZCA8IGEubGVuZ3RoOyBkKyspYy5wdXNoKGIuYXBwbHkoYVtkXSwgYXJndW1lbnRzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfShmKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhLmF0dHIgPSBmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgICAgICBpZiAobnVsbCAhPSBhICYmIG51bGwgIT0gYilmb3IgKHZhciBjID0gMDsgYyA8IHRoaXMubGVuZ3RoOyBjKyspdGhpc1tjXVthXSA9IGI7IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gYSAmJiBcInN0cmluZ1wiID09IHR5cGVvZiBhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZCA9IFtdLCBjID0gMDsgYyA8IHRoaXMubGVuZ3RoOyBjKyspZC5wdXNoKHRoaXNbY11bYV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBhKWZvciAodmFyIGMgPSAwOyBjIDwgdGhpcy5sZW5ndGg7IGMrKylmb3IgKHZhciBlIGluIGEpdGhpc1tjXVtlXSA9IGFbZV1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpc1xyXG4gICAgICAgIH0sIGFcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBkKGQpIHtcclxuICAgICAgICB2YXIgZSA9IFtdLCBmID0gW107XHJcbiAgICAgICAgdGhpcyBpbnN0YW5jZW9mIGEuU3RhZ2UgPyAoZSA9IHRoaXMuY2hpbGRzLCBmID0gZi5jb25jYXQoZSkpIDogdGhpcyBpbnN0YW5jZW9mIGEuU2NlbmUgPyBlID0gW3RoaXNdIDogZiA9IHRoaXMsIGUuZm9yRWFjaChmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICBmID0gZi5jb25jYXQoYS5jaGlsZHMpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIGcgPSBudWxsO1xyXG4gICAgICAgIHJldHVybiBnID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBkID8gZi5maWx0ZXIoZCkgOiBiKGYsIGQpLCBnID0gYyhnKVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBlID0gXCJjbGljayxtb3VzZWRvd24sbW91c2V1cCxtb3VzZW92ZXIsbW91c2VvdXQsbW91c2VkcmFnLGtleWRvd24sa2V5dXBcIi5zcGxpdChcIixcIik7XHJcbiAgICBhLlN0YWdlLnByb3RvdHlwZS5maW5kID0gZCwgYS5TY2VuZS5wcm90b3R5cGUuZmluZCA9IGRcclxufShKVG9wbyksIGZ1bmN0aW9uIChhKSB7XHJcbiAgICBmdW5jdGlvbiBiKGEsIGIpIHtcclxuICAgICAgICB0aGlzLnggPSBhLCB0aGlzLnkgPSBiXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYyhhKSB7XHJcbiAgICAgICAgdGhpcy5wID0gbmV3IGIoMCwgMCksIHRoaXMudyA9IG5ldyBiKDEsIDApLCB0aGlzLnBhaW50ID0gYVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGQoYSwgYiwgYykge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZCkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBlID0gMDsgYiA+IGU7IGUrKylhKCksIGMgJiYgZC50dXJuKGMpLCBkLm1vdmUoMylcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZShhLCBiKSB7XHJcbiAgICAgICAgdmFyIGMgPSAyICogTWF0aC5QSTtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgZSA9IDA7IGIgPiBlOyBlKyspYSgpLCBkLnR1cm4oYyAvIGIpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGYoYSwgYiwgYykge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZCkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBlID0gMDsgYiA+IGU7IGUrKylhKCksIGQucmVzaXplKGMpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGcoYSkge1xyXG4gICAgICAgIHZhciBiID0gMiAqIE1hdGguUEk7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChjKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGQgPSAwOyBhID4gZDsgZCsrKWMuZm9yd2FyZCgxKSwgYy50dXJuKGIgLyBhKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBoKGEpIHtcclxuICAgICAgICB2YXIgYiA9IDQgKiBNYXRoLlBJO1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBkID0gMDsgYSA+IGQ7IGQrKyljLmZvcndhcmQoMSksIGMudHVybihiIC8gYSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaShhLCBiLCBjLCBkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGYgPSAwOyBiID4gZjsgZisrKWEoKSwgZS5mb3J3YXJkKDEpLCBlLnR1cm4oYyksIGUucmVzaXplKGQpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBqID0ge307XHJcbiAgICBjLnByb3RvdHlwZS5mb3J3YXJkID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICB2YXIgYiA9IHRoaXMucCwgYyA9IHRoaXMudztcclxuICAgICAgICByZXR1cm4gYi54ID0gYi54ICsgYSAqIGMueCwgYi55ID0gYi55ICsgYSAqIGMueSwgdGhpcy5wYWludCAmJiB0aGlzLnBhaW50KGIueCwgYi55KSwgdGhpc1xyXG4gICAgfSwgYy5wcm90b3R5cGUubW92ZSA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgdmFyIGIgPSB0aGlzLnAsIGMgPSB0aGlzLnc7XHJcbiAgICAgICAgcmV0dXJuIGIueCA9IGIueCArIGEgKiBjLngsIGIueSA9IGIueSArIGEgKiBjLnksIHRoaXNcclxuICAgIH0sIGMucHJvdG90eXBlLm1vdmVUbyA9IGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucC54ID0gYSwgdGhpcy5wLnkgPSBiLCB0aGlzXHJcbiAgICB9LCBjLnByb3RvdHlwZS50dXJuID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICB2YXIgYiA9ICh0aGlzLnAsIHRoaXMudyksIGMgPSBNYXRoLmNvcyhhKSAqIGIueCAtIE1hdGguc2luKGEpICogYi55LCBkID0gTWF0aC5zaW4oYSkgKiBiLnggKyBNYXRoLmNvcyhhKSAqIGIueTtcclxuICAgICAgICByZXR1cm4gYi54ID0gYywgYi55ID0gZCwgdGhpc1xyXG4gICAgfSwgYy5wcm90b3R5cGUucmVzaXplID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICB2YXIgYiA9IHRoaXMudztcclxuICAgICAgICByZXR1cm4gYi54ID0gYi54ICogYSwgYi55ID0gYi55ICogYSwgdGhpc1xyXG4gICAgfSwgYy5wcm90b3R5cGUuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gbnVsbCA9PSB0aGlzLl9zdGFjayAmJiAodGhpcy5fc3RhY2sgPSBbXSksIHRoaXMuX3N0YWNrLnB1c2goW3RoaXMucCwgdGhpcy53XSksIHRoaXNcclxuICAgIH0sIGMucHJvdG90eXBlLnJlc3RvcmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKG51bGwgIT0gdGhpcy5fc3RhY2sgJiYgdGhpcy5fc3RhY2subGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB2YXIgYSA9IHRoaXMuX3N0YWNrLnBvcCgpO1xyXG4gICAgICAgICAgICB0aGlzLnAgPSBhWzBdLCB0aGlzLncgPSBhWzFdXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzXHJcbiAgICB9LCBqLlRvcnRvaXNlID0gYywgai5zaGlmdCA9IGQsIGouc3BpbiA9IGUsIGoucG9seWdvbiA9IGcsIGouc3BpcmFsID0gaSwgai5zdGFyID0gaCwgai5zY2FsZSA9IGYsIGEuTG9nbyA9IGpcclxufSh3aW5kb3cpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vY29yZS9saWIvanRvcG8vanRvcG8tbWluLmpzXG4vLyBtb2R1bGUgaWQgPSAzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=');
},function(module,exports){eval('/**\r\n * Created by qiyc on 2017/2/6.\r\n */\r\nvar ruler;\r\nvar util={\r\n    ajax: function (options) {\r\n        var op = options || {};\r\n        if (op.url) {\r\n            var ajax = {\r\n                url: op.url,\r\n                type: "GET",\r\n                data: op.data || \'\',\r\n                success: function (v) {\r\n                    if (op.do && $.isFunction(op.do)) {\r\n                        op.do(v);\r\n                    }\r\n                },\r\n                error: function (e) {\r\n                    if (op.error && $.isFunction(op.error)) {\r\n                        op.error(e);\r\n                    } else {\r\n                        console.info("ajax failed");\r\n                        console.info(e);\r\n                    }\r\n                }\r\n            };\r\n            $.ajax(ajax);\r\n        } else {\r\n            if (op.do && $.isFunction(op.do)) {\r\n                op.do(\'\');\r\n            }\r\n        }\r\n    },\r\n    upFirst: function (string) {\r\n        return string.replace(/(^|\\s+)\\w/g, function (s) {\r\n            return s.toUpperCase();//首字母大寫\r\n        })\r\n    },\r\n    extend: function (base, config) {\r\n        try{\r\n            if(typeof base =="object"&&typeof config =="object"){\r\n                deep(base, config);\r\n            }else{\r\n                console.error("some extend error:",base,config);\r\n            }\r\n        }catch (e){\r\n            console.error("extend error",e,base,config);\r\n        }\r\n        function deep(base, config){\r\n            $.each(base, function (key, value) {\r\n                if (typeof base[key] == "object" && typeof config[key] == "object") {\r\n                    if($.isArray(base[key])&& $.isArray(config[key])){\r\n                        base[key] = config[key];\r\n                    }else if($.isFunction(base[key])&&$.isFunction(config[key])){\r\n                        base[key] = config[key];\r\n                    }else{\r\n                        deep(base[key], config[key]);\r\n                    }\r\n                } else if (typeof base[key]!="undefined" && typeof config[key]!="undefined") {\r\n                    base[key] = config[key];\r\n                }\r\n            });\r\n        }\r\n        return base;\r\n    },\r\n    getParameter: function (param) {\r\n        var query = window.location.search;//获取URL地址中？后的所有字符\r\n        var iLen = param.length;//获取你的参数名称长度\r\n        var iStart = query.indexOf(param);//获取你该参数名称的其实索引\r\n        if (iStart == -1)//-1为没有该参数\r\n            return "";\r\n        iStart += iLen + 1;\r\n        var iEnd = query.indexOf("&", iStart);//获取第二个参数的其实索引\r\n        if (iEnd == -1)//只有一个参数\r\n            return query.substring(iStart);//获取单个参数的参数值\r\n        return query.substring(iStart, iEnd);//获取第二个参数的值\r\n    },\r\n    //仅画布全屏展示\r\n    runPrefixMethod: function (element, method) {\r\n        var usablePrefixMethod;\r\n        ["webkit", "moz", "ms", "o", ""].forEach(function (prefix) {\r\n                if (usablePrefixMethod) return;\r\n                if (prefix === "") {\r\n                    // 无前缀，方法首字母小写\r\n                    method = method.slice(0, 1).toLowerCase() + method.slice(1);\r\n                }\r\n                var typePrefixMethod = typeof element[prefix + method];\r\n                if (typePrefixMethod + "" !== "undefined") {\r\n                    if (typePrefixMethod === "function") {\r\n                        usablePrefixMethod = element[prefix + method]();\r\n                    } else {\r\n                        usablePrefixMethod = element[prefix + method];\r\n                    }\r\n                }\r\n            }\r\n        );\r\n    },\r\n    //浏览器全屏展示\r\n    launchFullScreen: function (element) {\r\n        if (element.requestFullscreen) {\r\n            element.requestFullscreen();\r\n        } else if (element.mozRequestFullScreen) {\r\n            element.mozRequestFullScreen();\r\n        } else if (element.webkitRequestFullscreen) {\r\n            element.webkitRequestFullscreen();\r\n        } else if (element.msRequestFullscreen) {\r\n            element.msRequestFullscreen();\r\n        }\r\n    },\r\n    //关闭浏览器全屏\r\n    exitFullScreen: function (doc) {\r\n        if (doc.exitFullscreen) {\r\n            doc.exitFullscreen();\r\n        } else if (doc.mozCancelFullScreen) {\r\n            doc.mozCancelFullScreen();\r\n        } else if (doc.webkitExitFullscreen) {\r\n            doc.webkitExitFullscreen();\r\n        }\r\n    },\r\n    //16进制转换\r\n    transHex: function (color) {\r\n        if (color && color.length == 7 && color.charAt(0) == \'#\') {\r\n            var a = parseInt(color.substr(1, 2), 16);\r\n            var b = parseInt(color.substr(3, 2), 16);\r\n            var c = parseInt(color.substr(5, 2), 16);\r\n            return a + \',\' + b + \',\' + c;\r\n        } else {\r\n            return color;\r\n        }\r\n    },\r\n    //切换隐藏\r\n    toggleElemnts: function (arr, visiable) {\r\n        if (arr && arr instanceof Array) {\r\n            $.each(arr, function (i, v) {\r\n                if (typeof(visiable) == \'boolean\') {\r\n                    visiable ? v.show() : v.hide();\r\n                } else {\r\n                    v.visible ? v.hide() : v.show();\r\n                }\r\n            });\r\n        }\r\n    },\r\n    //如果数组中不存在则存入，否则不做操作\r\n    arrayPush: function (arr, value) {\r\n        if (arr.indexOf(value) < 0) {\r\n            arr.push(value);\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n    //如果数组中不存在则删除，否则不做操作\r\n    arrayDelete: function (arr, value) {\r\n        var i = arr.indexOf(value);\r\n        if (i >= 0) {\r\n            arr.splice(i, 1);\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n    //批量设值\r\n    setAttr: function (element, object) {\r\n        $.each(object, function (key, value) {\r\n            element.prop[key] = value;\r\n        });\r\n    }, /**\r\n     * 构造类继承关系\r\n     * @memberOf module:zrender/tool/util\r\n     * @param {Function} clazz 源类\r\n     * @param {Function} baseClazz 基类\r\n     */\r\n    inherits: function (clazz, baseClazz) {\r\n        var clazzPrototype = clazz.prototype;\r\n\r\n        function F() {\r\n        }\r\n\r\n        F.prototype = baseClazz.prototype;\r\n        clazz.prototype = new F();\r\n\r\n        for (var prop in clazzPrototype) {\r\n            clazz.prototype[prop] = clazzPrototype[prop];\r\n        }\r\n        clazz.constructor = clazz;\r\n    },\r\n    //显示名字\r\n    showName: function (element) {\r\n        element.text = element.prop.name;\r\n    },\r\n    hideName: function (element) {\r\n        element.text = \'\';\r\n    },\r\n    //深度克隆对象\r\n    deepClone: function (obj) {\r\n        var result, oClass = isClass(obj);\r\n        //确定result的类型\r\n        if (oClass === "Object") {\r\n            result = {};\r\n        } else if (oClass === "Array") {\r\n            result = [];\r\n        } else {\r\n            return obj;\r\n        }\r\n        for (key in obj) {\r\n            var copy = obj[key];\r\n            if (isClass(copy) == "Object") {\r\n                result[key] = arguments.callee(copy);//递归调用\r\n            } else if (isClass(copy) == "Array") {\r\n                result[key] = arguments.callee(copy);\r\n            } else {\r\n                result[key] = obj[key];\r\n            }\r\n        }\r\n        return result;\r\n        function isClass(o) {\r\n            if (o === null) return "Null";\r\n            if (o === undefined) return "Undefined";\r\n            return Object.prototype.toString.call(o).slice(8, -1);\r\n        }\r\n    },\r\n    //获取当前屏幕正中心\r\n    getCenterPosition: function (scene) {\r\n        return {\r\n            x: -scene.translateX + $(window).width() / 2,\r\n            y: -scene.translateY + $(window).height() / 2\r\n        }\r\n    },\r\n    //闪烁\r\n    nodeFlash: function (node, n) {\r\n        if (n == 0) {\r\n            node.selected = false;\r\n            return;\r\n        }\r\n        node.selected = !node.selected;\r\n        setTimeout(function () {\r\n            util.nodeFlash(node, n - 1);\r\n        }, 300);\r\n    },\r\n    //图层平移到节点上\r\n    nodeAsCenter: function (scene, node) {\r\n        if (node) {\r\n            var location = node.getCenterLocation();\r\n            // 查询到的节点居中显示\r\n            if (scene.childs.indexOf(node) > -1) {\r\n                scene.scaleX = 1;\r\n                scene.scaleY = 1;\r\n                scene.setCenter(location.x, location.y);\r\n                // 闪烁几下\r\n                util.nodeFlash(node, 6);\r\n            }\r\n        }\r\n    },//获取字符串长度\r\n    getStringWidth: function (text, size) {\r\n        if (!ruler) {\r\n            ruler = $("span[name=topo_get_string_Width]");\r\n        }\r\n        ruler.text(text);\r\n        if (size) {\r\n            ruler.css("fontSize", size);\r\n        } else {\r\n            ruler.css("fontSize", "14px");\r\n        }\r\n        return ruler[0].offsetWidth;\r\n    }\r\n};\r\nmodule.exports =util;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jb3JlL3V0aWwuanM/ZjQ1MiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkMsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsMkNBQTJDO0FBQzNDLGdDQUFnQztBQUNoQywwQ0FBMEM7QUFDMUM7QUFDQTtBQUNBO0FBQ0EsOENBQThDO0FBQzlDO0FBQ0EsMkNBQTJDO0FBQzNDLDZDQUE2QztBQUM3QyxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFEO0FBQ3JELGFBQWE7QUFDYjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6IjQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBxaXljIG9uIDIwMTcvMi82LlxyXG4gKi9cclxudmFyIHJ1bGVyO1xyXG52YXIgdXRpbD17XHJcbiAgICBhamF4OiBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHZhciBvcCA9IG9wdGlvbnMgfHwge307XHJcbiAgICAgICAgaWYgKG9wLnVybCkge1xyXG4gICAgICAgICAgICB2YXIgYWpheCA9IHtcclxuICAgICAgICAgICAgICAgIHVybDogb3AudXJsLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogXCJHRVRcIixcclxuICAgICAgICAgICAgICAgIGRhdGE6IG9wLmRhdGEgfHwgJycsXHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAodikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcC5kbyAmJiAkLmlzRnVuY3Rpb24ob3AuZG8pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wLmRvKHYpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3AuZXJyb3IgJiYgJC5pc0Z1bmN0aW9uKG9wLmVycm9yKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcC5lcnJvcihlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oXCJhamF4IGZhaWxlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgJC5hamF4KGFqYXgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChvcC5kbyAmJiAkLmlzRnVuY3Rpb24ob3AuZG8pKSB7XHJcbiAgICAgICAgICAgICAgICBvcC5kbygnJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgdXBGaXJzdDogZnVuY3Rpb24gKHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvKF58XFxzKylcXHcvZywgZnVuY3Rpb24gKHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHMudG9VcHBlckNhc2UoKTsvL+mmluWtl+avjeWkp+Wvq1xyXG4gICAgICAgIH0pXHJcbiAgICB9LFxyXG4gICAgZXh0ZW5kOiBmdW5jdGlvbiAoYmFzZSwgY29uZmlnKSB7XHJcbiAgICAgICAgdHJ5e1xyXG4gICAgICAgICAgICBpZih0eXBlb2YgYmFzZSA9PVwib2JqZWN0XCImJnR5cGVvZiBjb25maWcgPT1cIm9iamVjdFwiKXtcclxuICAgICAgICAgICAgICAgIGRlZXAoYmFzZSwgY29uZmlnKTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwic29tZSBleHRlbmQgZXJyb3I6XCIsYmFzZSxjb25maWcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfWNhdGNoIChlKXtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcImV4dGVuZCBlcnJvclwiLGUsYmFzZSxjb25maWcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmdW5jdGlvbiBkZWVwKGJhc2UsIGNvbmZpZyl7XHJcbiAgICAgICAgICAgICQuZWFjaChiYXNlLCBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBiYXNlW2tleV0gPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgY29uZmlnW2tleV0gPT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCQuaXNBcnJheShiYXNlW2tleV0pJiYgJC5pc0FycmF5KGNvbmZpZ1trZXldKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2Vba2V5XSA9IGNvbmZpZ1trZXldO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKCQuaXNGdW5jdGlvbihiYXNlW2tleV0pJiYkLmlzRnVuY3Rpb24oY29uZmlnW2tleV0pKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVtrZXldID0gY29uZmlnW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZXAoYmFzZVtrZXldLCBjb25maWdba2V5XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYmFzZVtrZXldIT1cInVuZGVmaW5lZFwiICYmIHR5cGVvZiBjb25maWdba2V5XSE9XCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGJhc2Vba2V5XSA9IGNvbmZpZ1trZXldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGJhc2U7XHJcbiAgICB9LFxyXG4gICAgZ2V0UGFyYW1ldGVyOiBmdW5jdGlvbiAocGFyYW0pIHtcclxuICAgICAgICB2YXIgcXVlcnkgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoOy8v6I635Y+WVVJM5Zyw5Z2A5Lit77yf5ZCO55qE5omA5pyJ5a2X56ymXHJcbiAgICAgICAgdmFyIGlMZW4gPSBwYXJhbS5sZW5ndGg7Ly/ojrflj5bkvaDnmoTlj4LmlbDlkI3np7Dplb/luqZcclxuICAgICAgICB2YXIgaVN0YXJ0ID0gcXVlcnkuaW5kZXhPZihwYXJhbSk7Ly/ojrflj5bkvaDor6Xlj4LmlbDlkI3np7DnmoTlhbblrp7ntKLlvJVcclxuICAgICAgICBpZiAoaVN0YXJ0ID09IC0xKS8vLTHkuLrmsqHmnInor6Xlj4LmlbBcclxuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgaVN0YXJ0ICs9IGlMZW4gKyAxO1xyXG4gICAgICAgIHZhciBpRW5kID0gcXVlcnkuaW5kZXhPZihcIiZcIiwgaVN0YXJ0KTsvL+iOt+WPluesrOS6jOS4quWPguaVsOeahOWFtuWunue0ouW8lVxyXG4gICAgICAgIGlmIChpRW5kID09IC0xKS8v5Y+q5pyJ5LiA5Liq5Y+C5pWwXHJcbiAgICAgICAgICAgIHJldHVybiBxdWVyeS5zdWJzdHJpbmcoaVN0YXJ0KTsvL+iOt+WPluWNleS4quWPguaVsOeahOWPguaVsOWAvFxyXG4gICAgICAgIHJldHVybiBxdWVyeS5zdWJzdHJpbmcoaVN0YXJ0LCBpRW5kKTsvL+iOt+WPluesrOS6jOS4quWPguaVsOeahOWAvFxyXG4gICAgfSxcclxuICAgIC8v5LuF55S75biD5YWo5bGP5bGV56S6XHJcbiAgICBydW5QcmVmaXhNZXRob2Q6IGZ1bmN0aW9uIChlbGVtZW50LCBtZXRob2QpIHtcclxuICAgICAgICB2YXIgdXNhYmxlUHJlZml4TWV0aG9kO1xyXG4gICAgICAgIFtcIndlYmtpdFwiLCBcIm1velwiLCBcIm1zXCIsIFwib1wiLCBcIlwiXS5mb3JFYWNoKGZ1bmN0aW9uIChwcmVmaXgpIHtcclxuICAgICAgICAgICAgICAgIGlmICh1c2FibGVQcmVmaXhNZXRob2QpIHJldHVybjtcclxuICAgICAgICAgICAgICAgIGlmIChwcmVmaXggPT09IFwiXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDml6DliY3nvIDvvIzmlrnms5XpppblrZfmr43lsI/lhplcclxuICAgICAgICAgICAgICAgICAgICBtZXRob2QgPSBtZXRob2Quc2xpY2UoMCwgMSkudG9Mb3dlckNhc2UoKSArIG1ldGhvZC5zbGljZSgxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciB0eXBlUHJlZml4TWV0aG9kID0gdHlwZW9mIGVsZW1lbnRbcHJlZml4ICsgbWV0aG9kXTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlUHJlZml4TWV0aG9kICsgXCJcIiAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlUHJlZml4TWV0aG9kID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNhYmxlUHJlZml4TWV0aG9kID0gZWxlbWVudFtwcmVmaXggKyBtZXRob2RdKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNhYmxlUHJlZml4TWV0aG9kID0gZWxlbWVudFtwcmVmaXggKyBtZXRob2RdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9LFxyXG4gICAgLy/mtY/op4jlmajlhajlsY/lsZXnpLpcclxuICAgIGxhdW5jaEZ1bGxTY3JlZW46IGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgaWYgKGVsZW1lbnQucmVxdWVzdEZ1bGxzY3JlZW4pIHtcclxuICAgICAgICAgICAgZWxlbWVudC5yZXF1ZXN0RnVsbHNjcmVlbigpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudC5tb3pSZXF1ZXN0RnVsbFNjcmVlbikge1xyXG4gICAgICAgICAgICBlbGVtZW50Lm1velJlcXVlc3RGdWxsU2NyZWVuKCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50LndlYmtpdFJlcXVlc3RGdWxsc2NyZWVuKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4oKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnQubXNSZXF1ZXN0RnVsbHNjcmVlbikge1xyXG4gICAgICAgICAgICBlbGVtZW50Lm1zUmVxdWVzdEZ1bGxzY3JlZW4oKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy/lhbPpl63mtY/op4jlmajlhajlsY9cclxuICAgIGV4aXRGdWxsU2NyZWVuOiBmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgaWYgKGRvYy5leGl0RnVsbHNjcmVlbikge1xyXG4gICAgICAgICAgICBkb2MuZXhpdEZ1bGxzY3JlZW4oKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGRvYy5tb3pDYW5jZWxGdWxsU2NyZWVuKSB7XHJcbiAgICAgICAgICAgIGRvYy5tb3pDYW5jZWxGdWxsU2NyZWVuKCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChkb2Mud2Via2l0RXhpdEZ1bGxzY3JlZW4pIHtcclxuICAgICAgICAgICAgZG9jLndlYmtpdEV4aXRGdWxsc2NyZWVuKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8vMTbov5vliLbovazmjaJcclxuICAgIHRyYW5zSGV4OiBmdW5jdGlvbiAoY29sb3IpIHtcclxuICAgICAgICBpZiAoY29sb3IgJiYgY29sb3IubGVuZ3RoID09IDcgJiYgY29sb3IuY2hhckF0KDApID09ICcjJykge1xyXG4gICAgICAgICAgICB2YXIgYSA9IHBhcnNlSW50KGNvbG9yLnN1YnN0cigxLCAyKSwgMTYpO1xyXG4gICAgICAgICAgICB2YXIgYiA9IHBhcnNlSW50KGNvbG9yLnN1YnN0cigzLCAyKSwgMTYpO1xyXG4gICAgICAgICAgICB2YXIgYyA9IHBhcnNlSW50KGNvbG9yLnN1YnN0cig1LCAyKSwgMTYpO1xyXG4gICAgICAgICAgICByZXR1cm4gYSArICcsJyArIGIgKyAnLCcgKyBjO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb2xvcjtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy/liIfmjaLpmpDol49cclxuICAgIHRvZ2dsZUVsZW1udHM6IGZ1bmN0aW9uIChhcnIsIHZpc2lhYmxlKSB7XHJcbiAgICAgICAgaWYgKGFyciAmJiBhcnIgaW5zdGFuY2VvZiBBcnJheSkge1xyXG4gICAgICAgICAgICAkLmVhY2goYXJyLCBmdW5jdGlvbiAoaSwgdikge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZih2aXNpYWJsZSkgPT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmlzaWFibGUgPyB2LnNob3coKSA6IHYuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2LnZpc2libGUgPyB2LmhpZGUoKSA6IHYuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy/lpoLmnpzmlbDnu4TkuK3kuI3lrZjlnKjliJnlrZjlhaXvvIzlkKbliJnkuI3lgZrmk43kvZxcclxuICAgIGFycmF5UHVzaDogZnVuY3Rpb24gKGFyciwgdmFsdWUpIHtcclxuICAgICAgICBpZiAoYXJyLmluZGV4T2YodmFsdWUpIDwgMCkge1xyXG4gICAgICAgICAgICBhcnIucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9LFxyXG4gICAgLy/lpoLmnpzmlbDnu4TkuK3kuI3lrZjlnKjliJnliKDpmaTvvIzlkKbliJnkuI3lgZrmk43kvZxcclxuICAgIGFycmF5RGVsZXRlOiBmdW5jdGlvbiAoYXJyLCB2YWx1ZSkge1xyXG4gICAgICAgIHZhciBpID0gYXJyLmluZGV4T2YodmFsdWUpO1xyXG4gICAgICAgIGlmIChpID49IDApIHtcclxuICAgICAgICAgICAgYXJyLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0sXHJcbiAgICAvL+aJuemHj+iuvuWAvFxyXG4gICAgc2V0QXR0cjogZnVuY3Rpb24gKGVsZW1lbnQsIG9iamVjdCkge1xyXG4gICAgICAgICQuZWFjaChvYmplY3QsIGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQucHJvcFtrZXldID0gdmFsdWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LCAvKipcclxuICAgICAqIOaehOmAoOexu+e7p+aJv+WFs+ezu1xyXG4gICAgICogQG1lbWJlck9mIG1vZHVsZTp6cmVuZGVyL3Rvb2wvdXRpbFxyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2xhenog5rqQ57G7XHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBiYXNlQ2xhenog5Z+657G7XHJcbiAgICAgKi9cclxuICAgIGluaGVyaXRzOiBmdW5jdGlvbiAoY2xhenosIGJhc2VDbGF6eikge1xyXG4gICAgICAgIHZhciBjbGF6elByb3RvdHlwZSA9IGNsYXp6LnByb3RvdHlwZTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gRigpIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEYucHJvdG90eXBlID0gYmFzZUNsYXp6LnByb3RvdHlwZTtcclxuICAgICAgICBjbGF6ei5wcm90b3R5cGUgPSBuZXcgRigpO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBwcm9wIGluIGNsYXp6UHJvdG90eXBlKSB7XHJcbiAgICAgICAgICAgIGNsYXp6LnByb3RvdHlwZVtwcm9wXSA9IGNsYXp6UHJvdG90eXBlW3Byb3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjbGF6ei5jb25zdHJ1Y3RvciA9IGNsYXp6O1xyXG4gICAgfSxcclxuICAgIC8v5pi+56S65ZCN5a2XXHJcbiAgICBzaG93TmFtZTogZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICBlbGVtZW50LnRleHQgPSBlbGVtZW50LnByb3AubmFtZTtcclxuICAgIH0sXHJcbiAgICBoaWRlTmFtZTogZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICBlbGVtZW50LnRleHQgPSAnJztcclxuICAgIH0sXHJcbiAgICAvL+a3seW6puWFi+mahuWvueixoVxyXG4gICAgZGVlcENsb25lOiBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCwgb0NsYXNzID0gaXNDbGFzcyhvYmopO1xyXG4gICAgICAgIC8v56Gu5a6acmVzdWx055qE57G75Z6LXHJcbiAgICAgICAgaWYgKG9DbGFzcyA9PT0gXCJPYmplY3RcIikge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB7fTtcclxuICAgICAgICB9IGVsc2UgaWYgKG9DbGFzcyA9PT0gXCJBcnJheVwiKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IFtdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBvYmo7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAoa2V5IGluIG9iaikge1xyXG4gICAgICAgICAgICB2YXIgY29weSA9IG9ialtrZXldO1xyXG4gICAgICAgICAgICBpZiAoaXNDbGFzcyhjb3B5KSA9PSBcIk9iamVjdFwiKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRba2V5XSA9IGFyZ3VtZW50cy5jYWxsZWUoY29weSk7Ly/pgJLlvZLosIPnlKhcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChpc0NsYXNzKGNvcHkpID09IFwiQXJyYXlcIikge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBhcmd1bWVudHMuY2FsbGVlKGNvcHkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBvYmpba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIGZ1bmN0aW9uIGlzQ2xhc3Mobykge1xyXG4gICAgICAgICAgICBpZiAobyA9PT0gbnVsbCkgcmV0dXJuIFwiTnVsbFwiO1xyXG4gICAgICAgICAgICBpZiAobyA9PT0gdW5kZWZpbmVkKSByZXR1cm4gXCJVbmRlZmluZWRcIjtcclxuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8v6I635Y+W5b2T5YmN5bGP5bmV5q2j5Lit5b+DXHJcbiAgICBnZXRDZW50ZXJQb3NpdGlvbjogZnVuY3Rpb24gKHNjZW5lKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgeDogLXNjZW5lLnRyYW5zbGF0ZVggKyAkKHdpbmRvdykud2lkdGgoKSAvIDIsXHJcbiAgICAgICAgICAgIHk6IC1zY2VuZS50cmFuc2xhdGVZICsgJCh3aW5kb3cpLmhlaWdodCgpIC8gMlxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvL+mXqueDgVxyXG4gICAgbm9kZUZsYXNoOiBmdW5jdGlvbiAobm9kZSwgbikge1xyXG4gICAgICAgIGlmIChuID09IDApIHtcclxuICAgICAgICAgICAgbm9kZS5zZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG5vZGUuc2VsZWN0ZWQgPSAhbm9kZS5zZWxlY3RlZDtcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdXRpbC5ub2RlRmxhc2gobm9kZSwgbiAtIDEpO1xyXG4gICAgICAgIH0sIDMwMCk7XHJcbiAgICB9LFxyXG4gICAgLy/lm77lsYLlubPnp7vliLDoioLngrnkuIpcclxuICAgIG5vZGVBc0NlbnRlcjogZnVuY3Rpb24gKHNjZW5lLCBub2RlKSB7XHJcbiAgICAgICAgaWYgKG5vZGUpIHtcclxuICAgICAgICAgICAgdmFyIGxvY2F0aW9uID0gbm9kZS5nZXRDZW50ZXJMb2NhdGlvbigpO1xyXG4gICAgICAgICAgICAvLyDmn6Xor6LliLDnmoToioLngrnlsYXkuK3mmL7npLpcclxuICAgICAgICAgICAgaWYgKHNjZW5lLmNoaWxkcy5pbmRleE9mKG5vZGUpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIHNjZW5lLnNjYWxlWCA9IDE7XHJcbiAgICAgICAgICAgICAgICBzY2VuZS5zY2FsZVkgPSAxO1xyXG4gICAgICAgICAgICAgICAgc2NlbmUuc2V0Q2VudGVyKGxvY2F0aW9uLngsIGxvY2F0aW9uLnkpO1xyXG4gICAgICAgICAgICAgICAgLy8g6Zeq54OB5Yeg5LiLXHJcbiAgICAgICAgICAgICAgICB1dGlsLm5vZGVGbGFzaChub2RlLCA2KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sLy/ojrflj5blrZfnrKbkuLLplb/luqZcclxuICAgIGdldFN0cmluZ1dpZHRoOiBmdW5jdGlvbiAodGV4dCwgc2l6ZSkge1xyXG4gICAgICAgIGlmICghcnVsZXIpIHtcclxuICAgICAgICAgICAgcnVsZXIgPSAkKFwic3BhbltuYW1lPXRvcG9fZ2V0X3N0cmluZ19XaWR0aF1cIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJ1bGVyLnRleHQodGV4dCk7XHJcbiAgICAgICAgaWYgKHNpemUpIHtcclxuICAgICAgICAgICAgcnVsZXIuY3NzKFwiZm9udFNpemVcIiwgc2l6ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcnVsZXIuY3NzKFwiZm9udFNpemVcIiwgXCIxNHB4XCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcnVsZXJbMF0ub2Zmc2V0V2lkdGg7XHJcbiAgICB9XHJcbn07XHJcbm1vZHVsZS5leHBvcnRzID11dGlsO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vY29yZS91dGlsLmpzXG4vLyBtb2R1bGUgaWQgPSA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=')},function(module,exports,__webpack_require__){eval('/**\r\n * Created by qiyc on 2017/2/7.\r\n */\r\nvar Node = {\r\n    Normal: __webpack_require__(6),\r\n    Text: __webpack_require__(9)\r\n};\r\nvar Link = {\r\n    Curve: __webpack_require__(10),\r\n    Direct: __webpack_require__(12),\r\n    Flexional: __webpack_require__(13),\r\n    Fold: __webpack_require__(14)\r\n};\r\nvar Container = {\r\n    Group: __webpack_require__(15)\r\n};\r\nmodule.exports = Scene;\r\nvar Element = __webpack_require__(8);\r\n//画布对象\r\nvar defaults = function () {\r\n    return {\r\n        name: \'\',\r\n        id: \'\',\r\n        pid: \'\',\r\n        weight: 1,\r\n        path: [],\r\n        offsetX: 0,\r\n        offsetY: 0,\r\n        mode: "edit",\r\n        background:""\r\n    };\r\n};\r\nfunction Scene(stage, config) {\r\n    var self = this;\r\n    self.jtopo = new JTopo.Scene();\r\n    self.children = {\r\n        node: [],\r\n        link: [],\r\n        container: []\r\n    };\r\n    self.attr =  QTopo.util.extend(defaults(), config || {});\r\n    self.createNode = createNode;\r\n    self.createLink = createLink;\r\n    self.createContainer = createContainer;\r\n    self.add = add;\r\n    self.on = Element.on;\r\n    self.off = Element.off;\r\n    self.set = setJTopo;\r\n    self.set(config);\r\n    self.find = find;\r\n    stage.add(self.jtopo);\r\n}\r\n//scan 格式 aaa=bb,ccc=dd条件之间以,分隔\r\nfunction find(scan, type) {\r\n    var children = this.children;\r\n    var result = [];\r\n    var condition = typeof scan == "string" ? scan.split(",") : [];\r\n    if (condition.length > 0) {\r\n        $.each(condition, function (i, term) {\r\n            term = term.split("=");\r\n            //制定了类型，缩小查找范围，未指定则全部遍历\r\n            if (type) {\r\n                switch (type) {\r\n                    case "node":\r\n                        scanArr(children.node, term[0], term[1]);\r\n                        break;\r\n                    case "link":\r\n                        scanArr(children.link, term[0], term[1]);\r\n                        break;\r\n                    case "container":\r\n                        scanArr(children.container, term[0], term[1]);\r\n                        break;\r\n                }\r\n            } else {\r\n                $.each(children,function(j,arr){\r\n                    scanArr(arr, term[0], term[1]);\r\n                });\r\n            }\r\n        });\r\n    }\r\n    return result;\r\n    function scanArr(arr, key, value) {\r\n        $.each(arr, function (i, v) {\r\n            if (equal(v, key, value) || equal(v.attr, key, value)) {\r\n                result.push(v);\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n\r\n    function equal(object, key, value) {\r\n        return object[key] && object[key] == value;\r\n    }\r\n}\r\nfunction createNode(config) {\r\n    var newNode;\r\n    config = config || {};\r\n    switch (config.type) {\r\n        case "text":\r\n            newNode = new Node.Text(config);\r\n            break;\r\n        default:\r\n            newNode = new Node.Normal(config);\r\n    }\r\n    if (newNode.jtopo) {\r\n        this.add(newNode.jtopo);\r\n        this.children.node.push(newNode);\r\n        return newNode;\r\n    } else {\r\n        console.error("create Node error", config);\r\n        return false;\r\n    }\r\n}\r\nfunction createLink(config) {\r\n    var newLink;\r\n    config = config || {};\r\n    switch (config.type) {\r\n        case "direct":\r\n            newLink = new Link.Direct(config);\r\n            break;\r\n        case "curve":\r\n            newLink = new Link.Curve(config);\r\n            break;\r\n        case "flexional":\r\n            newLink = new Link.Flexional(config);\r\n            break;\r\n        case "fold":\r\n            newLink = new Link.Fold(config);\r\n            break;\r\n        default:\r\n            newLink = new Link.Direct(config);\r\n    }\r\n    if (newLink.jtopo) {\r\n        this.add(newLink.jtopo);\r\n        this.children.link.push(newLink);\r\n        return newLink;\r\n    } else {\r\n        console.error("create Link error", config);\r\n        return false;\r\n    }\r\n}\r\nfunction createContainer(config) {\r\n    var newContainer;\r\n    config = config || {};\r\n    switch (config.type) {\r\n        default:\r\n            newContainer = new Container.Group(config);\r\n    }\r\n    if (newContainer.jtopo) {\r\n        this.add(newContainer.jtopo);\r\n        this.children.container.push(newContainer);\r\n        return newContainer;\r\n    } else {\r\n        console.error("create Container error", config);\r\n        return false;\r\n    }\r\n}\r\nfunction add(element) {\r\n    if (element) {\r\n        this.jtopo.add(element);\r\n    }\r\n}\r\nfunction setJTopo(config) {\r\n    if (config) {\r\n        var jtopo = this.jtopo;\r\n        QTopo.util.extend(this.attr, config || {});\r\n        if (config.mode) {\r\n            setMode(config.mode);\r\n        }\r\n        if (config.background) {\r\n            jtopo.background = config.background;\r\n        }\r\n    }\r\n}\r\nfunction setMode(mode) {\r\n    this.attr.mode = mode;\r\n    this.jtopo.mode = mode;\r\n}\r\n//私有函数//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jb3JlL1NjZW5lLmpzPzAyZTciXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQ7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlEO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6IjUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBxaXljIG9uIDIwMTcvMi83LlxyXG4gKi9cclxudmFyIE5vZGUgPSB7XHJcbiAgICBOb3JtYWw6IHJlcXVpcmUoXCIuL2VsZW1lbnQvbm9kZS9Ob3JtYWwuanNcIiksXHJcbiAgICBUZXh0OiByZXF1aXJlKFwiLi9lbGVtZW50L25vZGUvVGV4dC5qc1wiKVxyXG59O1xyXG52YXIgTGluayA9IHtcclxuICAgIEN1cnZlOiByZXF1aXJlKFwiLi9lbGVtZW50L2xpbmsvQ3VydmUuanNcIiksXHJcbiAgICBEaXJlY3Q6IHJlcXVpcmUoXCIuL2VsZW1lbnQvbGluay9EaXJlY3QuanNcIiksXHJcbiAgICBGbGV4aW9uYWw6IHJlcXVpcmUoXCIuL2VsZW1lbnQvbGluay9GbGV4aW9uYWwuanNcIiksXHJcbiAgICBGb2xkOiByZXF1aXJlKFwiLi9lbGVtZW50L2xpbmsvRm9sZC5qc1wiKVxyXG59O1xyXG52YXIgQ29udGFpbmVyID0ge1xyXG4gICAgR3JvdXA6IHJlcXVpcmUoXCIuL2VsZW1lbnQvY29udGFpbmVyL0dyb3VwLmpzXCIpXHJcbn07XHJcbm1vZHVsZS5leHBvcnRzID0gU2NlbmU7XHJcbnZhciBFbGVtZW50ID0gcmVxdWlyZShcIi4vZWxlbWVudC9FbGVtZW50LmpzXCIpO1xyXG4vL+eUu+W4g+WvueixoVxyXG52YXIgZGVmYXVsdHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG5hbWU6ICcnLFxyXG4gICAgICAgIGlkOiAnJyxcclxuICAgICAgICBwaWQ6ICcnLFxyXG4gICAgICAgIHdlaWdodDogMSxcclxuICAgICAgICBwYXRoOiBbXSxcclxuICAgICAgICBvZmZzZXRYOiAwLFxyXG4gICAgICAgIG9mZnNldFk6IDAsXHJcbiAgICAgICAgbW9kZTogXCJlZGl0XCIsXHJcbiAgICAgICAgYmFja2dyb3VuZDpcIlwiXHJcbiAgICB9O1xyXG59O1xyXG5mdW5jdGlvbiBTY2VuZShzdGFnZSwgY29uZmlnKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmp0b3BvID0gbmV3IEpUb3BvLlNjZW5lKCk7XHJcbiAgICBzZWxmLmNoaWxkcmVuID0ge1xyXG4gICAgICAgIG5vZGU6IFtdLFxyXG4gICAgICAgIGxpbms6IFtdLFxyXG4gICAgICAgIGNvbnRhaW5lcjogW11cclxuICAgIH07XHJcbiAgICBzZWxmLmF0dHIgPSAgUVRvcG8udXRpbC5leHRlbmQoZGVmYXVsdHMoKSwgY29uZmlnIHx8IHt9KTtcclxuICAgIHNlbGYuY3JlYXRlTm9kZSA9IGNyZWF0ZU5vZGU7XHJcbiAgICBzZWxmLmNyZWF0ZUxpbmsgPSBjcmVhdGVMaW5rO1xyXG4gICAgc2VsZi5jcmVhdGVDb250YWluZXIgPSBjcmVhdGVDb250YWluZXI7XHJcbiAgICBzZWxmLmFkZCA9IGFkZDtcclxuICAgIHNlbGYub24gPSBFbGVtZW50Lm9uO1xyXG4gICAgc2VsZi5vZmYgPSBFbGVtZW50Lm9mZjtcclxuICAgIHNlbGYuc2V0ID0gc2V0SlRvcG87XHJcbiAgICBzZWxmLnNldChjb25maWcpO1xyXG4gICAgc2VsZi5maW5kID0gZmluZDtcclxuICAgIHN0YWdlLmFkZChzZWxmLmp0b3BvKTtcclxufVxyXG4vL3NjYW4g5qC85byPIGFhYT1iYixjY2M9ZGTmnaHku7bkuYvpl7Tku6Us5YiG6ZqUXHJcbmZ1bmN0aW9uIGZpbmQoc2NhbiwgdHlwZSkge1xyXG4gICAgdmFyIGNoaWxkcmVuID0gdGhpcy5jaGlsZHJlbjtcclxuICAgIHZhciByZXN1bHQgPSBbXTtcclxuICAgIHZhciBjb25kaXRpb24gPSB0eXBlb2Ygc2NhbiA9PSBcInN0cmluZ1wiID8gc2Nhbi5zcGxpdChcIixcIikgOiBbXTtcclxuICAgIGlmIChjb25kaXRpb24ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICQuZWFjaChjb25kaXRpb24sIGZ1bmN0aW9uIChpLCB0ZXJtKSB7XHJcbiAgICAgICAgICAgIHRlcm0gPSB0ZXJtLnNwbGl0KFwiPVwiKTtcclxuICAgICAgICAgICAgLy/liLblrprkuobnsbvlnovvvIznvKnlsI/mn6Xmib7ojIPlm7TvvIzmnKrmjIflrprliJnlhajpg6jpgY3ljoZcclxuICAgICAgICAgICAgaWYgKHR5cGUpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJub2RlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjYW5BcnIoY2hpbGRyZW4ubm9kZSwgdGVybVswXSwgdGVybVsxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJsaW5rXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjYW5BcnIoY2hpbGRyZW4ubGluaywgdGVybVswXSwgdGVybVsxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJjb250YWluZXJcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NhbkFycihjaGlsZHJlbi5jb250YWluZXIsIHRlcm1bMF0sIHRlcm1bMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQuZWFjaChjaGlsZHJlbixmdW5jdGlvbihqLGFycil7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NhbkFycihhcnIsIHRlcm1bMF0sIHRlcm1bMV0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICBmdW5jdGlvbiBzY2FuQXJyKGFyciwga2V5LCB2YWx1ZSkge1xyXG4gICAgICAgICQuZWFjaChhcnIsIGZ1bmN0aW9uIChpLCB2KSB7XHJcbiAgICAgICAgICAgIGlmIChlcXVhbCh2LCBrZXksIHZhbHVlKSB8fCBlcXVhbCh2LmF0dHIsIGtleSwgdmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh2KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZXF1YWwob2JqZWN0LCBrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIG9iamVjdFtrZXldICYmIG9iamVjdFtrZXldID09IHZhbHVlO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZU5vZGUoY29uZmlnKSB7XHJcbiAgICB2YXIgbmV3Tm9kZTtcclxuICAgIGNvbmZpZyA9IGNvbmZpZyB8fCB7fTtcclxuICAgIHN3aXRjaCAoY29uZmlnLnR5cGUpIHtcclxuICAgICAgICBjYXNlIFwidGV4dFwiOlxyXG4gICAgICAgICAgICBuZXdOb2RlID0gbmV3IE5vZGUuVGV4dChjb25maWcpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICBuZXdOb2RlID0gbmV3IE5vZGUuTm9ybWFsKGNvbmZpZyk7XHJcbiAgICB9XHJcbiAgICBpZiAobmV3Tm9kZS5qdG9wbykge1xyXG4gICAgICAgIHRoaXMuYWRkKG5ld05vZGUuanRvcG8pO1xyXG4gICAgICAgIHRoaXMuY2hpbGRyZW4ubm9kZS5wdXNoKG5ld05vZGUpO1xyXG4gICAgICAgIHJldHVybiBuZXdOb2RlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiY3JlYXRlIE5vZGUgZXJyb3JcIiwgY29uZmlnKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gY3JlYXRlTGluayhjb25maWcpIHtcclxuICAgIHZhciBuZXdMaW5rO1xyXG4gICAgY29uZmlnID0gY29uZmlnIHx8IHt9O1xyXG4gICAgc3dpdGNoIChjb25maWcudHlwZSkge1xyXG4gICAgICAgIGNhc2UgXCJkaXJlY3RcIjpcclxuICAgICAgICAgICAgbmV3TGluayA9IG5ldyBMaW5rLkRpcmVjdChjb25maWcpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwiY3VydmVcIjpcclxuICAgICAgICAgICAgbmV3TGluayA9IG5ldyBMaW5rLkN1cnZlKGNvbmZpZyk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJmbGV4aW9uYWxcIjpcclxuICAgICAgICAgICAgbmV3TGluayA9IG5ldyBMaW5rLkZsZXhpb25hbChjb25maWcpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwiZm9sZFwiOlxyXG4gICAgICAgICAgICBuZXdMaW5rID0gbmV3IExpbmsuRm9sZChjb25maWcpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICBuZXdMaW5rID0gbmV3IExpbmsuRGlyZWN0KGNvbmZpZyk7XHJcbiAgICB9XHJcbiAgICBpZiAobmV3TGluay5qdG9wbykge1xyXG4gICAgICAgIHRoaXMuYWRkKG5ld0xpbmsuanRvcG8pO1xyXG4gICAgICAgIHRoaXMuY2hpbGRyZW4ubGluay5wdXNoKG5ld0xpbmspO1xyXG4gICAgICAgIHJldHVybiBuZXdMaW5rO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiY3JlYXRlIExpbmsgZXJyb3JcIiwgY29uZmlnKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gY3JlYXRlQ29udGFpbmVyKGNvbmZpZykge1xyXG4gICAgdmFyIG5ld0NvbnRhaW5lcjtcclxuICAgIGNvbmZpZyA9IGNvbmZpZyB8fCB7fTtcclxuICAgIHN3aXRjaCAoY29uZmlnLnR5cGUpIHtcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICBuZXdDb250YWluZXIgPSBuZXcgQ29udGFpbmVyLkdyb3VwKGNvbmZpZyk7XHJcbiAgICB9XHJcbiAgICBpZiAobmV3Q29udGFpbmVyLmp0b3BvKSB7XHJcbiAgICAgICAgdGhpcy5hZGQobmV3Q29udGFpbmVyLmp0b3BvKTtcclxuICAgICAgICB0aGlzLmNoaWxkcmVuLmNvbnRhaW5lci5wdXNoKG5ld0NvbnRhaW5lcik7XHJcbiAgICAgICAgcmV0dXJuIG5ld0NvbnRhaW5lcjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcImNyZWF0ZSBDb250YWluZXIgZXJyb3JcIiwgY29uZmlnKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gYWRkKGVsZW1lbnQpIHtcclxuICAgIGlmIChlbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5qdG9wby5hZGQoZWxlbWVudCk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gc2V0SlRvcG8oY29uZmlnKSB7XHJcbiAgICBpZiAoY29uZmlnKSB7XHJcbiAgICAgICAgdmFyIGp0b3BvID0gdGhpcy5qdG9wbztcclxuICAgICAgICBRVG9wby51dGlsLmV4dGVuZCh0aGlzLmF0dHIsIGNvbmZpZyB8fCB7fSk7XHJcbiAgICAgICAgaWYgKGNvbmZpZy5tb2RlKSB7XHJcbiAgICAgICAgICAgIHNldE1vZGUoY29uZmlnLm1vZGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY29uZmlnLmJhY2tncm91bmQpIHtcclxuICAgICAgICAgICAganRvcG8uYmFja2dyb3VuZCA9IGNvbmZpZy5iYWNrZ3JvdW5kO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBzZXRNb2RlKG1vZGUpIHtcclxuICAgIHRoaXMuYXR0ci5tb2RlID0gbW9kZTtcclxuICAgIHRoaXMuanRvcG8ubW9kZSA9IG1vZGU7XHJcbn1cclxuLy/np4HmnInlh73mlbBcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2NvcmUvU2NlbmUuanNcbi8vIG1vZHVsZSBpZCA9IDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==');
},function(module,exports,__webpack_require__){eval('/**\r\n * Created by qiyc on 2017/2/7.\r\n */\r\nNormal.prototype=__webpack_require__(7);\r\nmodule.exports = Normal;\r\nvar defaults = function () {\r\n    return {\r\n        image: "",\r\n        size: [64, 64],\r\n        name: "node",\r\n        alpha: 1,\r\n        position: [0, 0],\r\n        font: {\r\n            size: 16,\r\n            type: \'微软雅黑\',\r\n            color:"255,255,255"\r\n        },\r\n        zIndex: 200,//层级(10-999)\r\n        color: JTopo.util.randomColor(),\r\n        textPosition: \'bottom\',//Bottom_Center Top_Center Middle_Left Middle_Right Hidden\r\n        type: \'normal\'\r\n    }\r\n};\r\n//一般节点\r\nfunction Normal(config) {\r\n    var self = this;\r\n    self.attr = QTopo.util.extend(defaults(), config || {});\r\n    self.jtopo = new JTopo.Node();\r\n    //封装对象之间相互保持引用\r\n    self.jtopo.qtopo=self;\r\n    //函数\r\n    self.set = setJTopo;\r\n    //初始化\r\n    self.set(self.attr);\r\n}\r\nfunction setJTopo(config) {\r\n    if (config) {\r\n        var self = this;\r\n        //处理一般属性的设置\r\n        self._setNode(config,["name","textPosition","size","color"]);\r\n        //处理特殊属性的设置\r\n        if (config.image) {\r\n            setImage.call(self, config.image);\r\n        }\r\n    }\r\n}\r\n\r\n//私有函数\r\nfunction setImage(image) {\r\n    this.jtopo.setImage(image);\r\n}\r\nfunction drawAlarm(set) {\r\n    if (this.attr.scene) {\r\n        var config = QTopo.config;\r\n        var color = set.color ? set.color.toLowerCase() : (this.attr.alarmLevel ? config.alarm.color[this.attr.alarmLevel - 1] : \'0,0,255\');\r\n        this.alarm = set.text || (this.alarm || \'No Alarm Text!\');\r\n        this.alarmColor = QTopo.util.transHex(color);\r\n        this.alarmAlpha = 1;\r\n        this.alarmFont = (set.size || 20) + \'px \' + (set.font || \'微软雅黑\');\r\n        this.attr.alarmLevel = set.level || (this.attr.alarmLevel || config.alarm.color.length);\r\n        this.attr.alarmColor = color;\r\n        shadowFlash(this, this.alarmColor);\r\n    }\r\n}\r\nfunction shadowFlash(node, color) {\r\n    node.shadow = true;\r\n    node.shadowOffsetX = 0;\r\n    node.shadowOffsetY = 0;\r\n    node.shadowColor = "rgba(" + color + ",1)";\r\n    node.shadowBlur = 10;\r\n    flash(node, true);\r\n}\r\nfunction flash(node, flag) {\r\n    if (node.attr.flash) {\r\n        clearInterval(node.attr.flash);\r\n    }\r\n    node.attr.flash = setInterval(function () {\r\n        if (flag) {\r\n            node.shadowBlur += 10;\r\n            if (node.shadowBlur >= 100) {\r\n                flag = false;\r\n            }\r\n        }\r\n        else {\r\n            node.shadowBlur -= 10;\r\n            if (node.shadowBlur <= 10) {\r\n                flag = true;\r\n            }\r\n        }\r\n    }, 100);\r\n}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jb3JlL2VsZW1lbnQvbm9kZS9Ob3JtYWwuanM/ZTZhMCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQ7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMIiwiZmlsZSI6IjYuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBxaXljIG9uIDIwMTcvMi83LlxyXG4gKi9cclxuTm9ybWFsLnByb3RvdHlwZT1yZXF1aXJlKFwiLi9Ob2RlLmpzXCIpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IE5vcm1hbDtcclxudmFyIGRlZmF1bHRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBpbWFnZTogXCJcIixcclxuICAgICAgICBzaXplOiBbNjQsIDY0XSxcclxuICAgICAgICBuYW1lOiBcIm5vZGVcIixcclxuICAgICAgICBhbHBoYTogMSxcclxuICAgICAgICBwb3NpdGlvbjogWzAsIDBdLFxyXG4gICAgICAgIGZvbnQ6IHtcclxuICAgICAgICAgICAgc2l6ZTogMTYsXHJcbiAgICAgICAgICAgIHR5cGU6ICflvq7ova/pm4Xpu5EnLFxyXG4gICAgICAgICAgICBjb2xvcjpcIjI1NSwyNTUsMjU1XCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIHpJbmRleDogMjAwLC8v5bGC57qnKDEwLTk5OSlcclxuICAgICAgICBjb2xvcjogSlRvcG8udXRpbC5yYW5kb21Db2xvcigpLFxyXG4gICAgICAgIHRleHRQb3NpdGlvbjogJ2JvdHRvbScsLy9Cb3R0b21fQ2VudGVyIFRvcF9DZW50ZXIgTWlkZGxlX0xlZnQgTWlkZGxlX1JpZ2h0IEhpZGRlblxyXG4gICAgICAgIHR5cGU6ICdub3JtYWwnXHJcbiAgICB9XHJcbn07XHJcbi8v5LiA6Iis6IqC54K5XHJcbmZ1bmN0aW9uIE5vcm1hbChjb25maWcpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYuYXR0ciA9IFFUb3BvLnV0aWwuZXh0ZW5kKGRlZmF1bHRzKCksIGNvbmZpZyB8fCB7fSk7XHJcbiAgICBzZWxmLmp0b3BvID0gbmV3IEpUb3BvLk5vZGUoKTtcclxuICAgIC8v5bCB6KOF5a+56LGh5LmL6Ze055u45LqS5L+d5oyB5byV55SoXHJcbiAgICBzZWxmLmp0b3BvLnF0b3BvPXNlbGY7XHJcbiAgICAvL+WHveaVsFxyXG4gICAgc2VsZi5zZXQgPSBzZXRKVG9wbztcclxuICAgIC8v5Yid5aeL5YyWXHJcbiAgICBzZWxmLnNldChzZWxmLmF0dHIpO1xyXG59XHJcbmZ1bmN0aW9uIHNldEpUb3BvKGNvbmZpZykge1xyXG4gICAgaWYgKGNvbmZpZykge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAvL+WkhOeQhuS4gOiIrOWxnuaAp+eahOiuvue9rlxyXG4gICAgICAgIHNlbGYuX3NldE5vZGUoY29uZmlnLFtcIm5hbWVcIixcInRleHRQb3NpdGlvblwiLFwic2l6ZVwiLFwiY29sb3JcIl0pO1xyXG4gICAgICAgIC8v5aSE55CG54m55q6K5bGe5oCn55qE6K6+572uXHJcbiAgICAgICAgaWYgKGNvbmZpZy5pbWFnZSkge1xyXG4gICAgICAgICAgICBzZXRJbWFnZS5jYWxsKHNlbGYsIGNvbmZpZy5pbWFnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vL+engeacieWHveaVsFxyXG5mdW5jdGlvbiBzZXRJbWFnZShpbWFnZSkge1xyXG4gICAgdGhpcy5qdG9wby5zZXRJbWFnZShpbWFnZSk7XHJcbn1cclxuZnVuY3Rpb24gZHJhd0FsYXJtKHNldCkge1xyXG4gICAgaWYgKHRoaXMuYXR0ci5zY2VuZSkge1xyXG4gICAgICAgIHZhciBjb25maWcgPSBRVG9wby5jb25maWc7XHJcbiAgICAgICAgdmFyIGNvbG9yID0gc2V0LmNvbG9yID8gc2V0LmNvbG9yLnRvTG93ZXJDYXNlKCkgOiAodGhpcy5hdHRyLmFsYXJtTGV2ZWwgPyBjb25maWcuYWxhcm0uY29sb3JbdGhpcy5hdHRyLmFsYXJtTGV2ZWwgLSAxXSA6ICcwLDAsMjU1Jyk7XHJcbiAgICAgICAgdGhpcy5hbGFybSA9IHNldC50ZXh0IHx8ICh0aGlzLmFsYXJtIHx8ICdObyBBbGFybSBUZXh0IScpO1xyXG4gICAgICAgIHRoaXMuYWxhcm1Db2xvciA9IFFUb3BvLnV0aWwudHJhbnNIZXgoY29sb3IpO1xyXG4gICAgICAgIHRoaXMuYWxhcm1BbHBoYSA9IDE7XHJcbiAgICAgICAgdGhpcy5hbGFybUZvbnQgPSAoc2V0LnNpemUgfHwgMjApICsgJ3B4ICcgKyAoc2V0LmZvbnQgfHwgJ+W+rui9r+mbhem7kScpO1xyXG4gICAgICAgIHRoaXMuYXR0ci5hbGFybUxldmVsID0gc2V0LmxldmVsIHx8ICh0aGlzLmF0dHIuYWxhcm1MZXZlbCB8fCBjb25maWcuYWxhcm0uY29sb3IubGVuZ3RoKTtcclxuICAgICAgICB0aGlzLmF0dHIuYWxhcm1Db2xvciA9IGNvbG9yO1xyXG4gICAgICAgIHNoYWRvd0ZsYXNoKHRoaXMsIHRoaXMuYWxhcm1Db2xvcik7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gc2hhZG93Rmxhc2gobm9kZSwgY29sb3IpIHtcclxuICAgIG5vZGUuc2hhZG93ID0gdHJ1ZTtcclxuICAgIG5vZGUuc2hhZG93T2Zmc2V0WCA9IDA7XHJcbiAgICBub2RlLnNoYWRvd09mZnNldFkgPSAwO1xyXG4gICAgbm9kZS5zaGFkb3dDb2xvciA9IFwicmdiYShcIiArIGNvbG9yICsgXCIsMSlcIjtcclxuICAgIG5vZGUuc2hhZG93Qmx1ciA9IDEwO1xyXG4gICAgZmxhc2gobm9kZSwgdHJ1ZSk7XHJcbn1cclxuZnVuY3Rpb24gZmxhc2gobm9kZSwgZmxhZykge1xyXG4gICAgaWYgKG5vZGUuYXR0ci5mbGFzaCkge1xyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwobm9kZS5hdHRyLmZsYXNoKTtcclxuICAgIH1cclxuICAgIG5vZGUuYXR0ci5mbGFzaCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoZmxhZykge1xyXG4gICAgICAgICAgICBub2RlLnNoYWRvd0JsdXIgKz0gMTA7XHJcbiAgICAgICAgICAgIGlmIChub2RlLnNoYWRvd0JsdXIgPj0gMTAwKSB7XHJcbiAgICAgICAgICAgICAgICBmbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG5vZGUuc2hhZG93Qmx1ciAtPSAxMDtcclxuICAgICAgICAgICAgaWYgKG5vZGUuc2hhZG93Qmx1ciA8PSAxMCkge1xyXG4gICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LCAxMDApO1xyXG59XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9jb3JlL2VsZW1lbnQvbm9kZS9Ob3JtYWwuanNcbi8vIG1vZHVsZSBpZCA9IDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==')},function(module,exports,__webpack_require__){eval('/**\r\n * Created by qiyc on 2017/2/7.\r\n */\r\nNode.prototype = __webpack_require__(8);\r\nmodule.exports = new Node();\r\nfunction Node() {\r\n    this.getType=function(){\r\n        return "node";\r\n    };\r\n    this.setColor = function (color) {\r\n        if (color) {\r\n            color = QTopo.util.transHex(color.toLowerCase());\r\n            this.jtopo.fillColor = color;\r\n        }\r\n    };\r\n    this.setName=function(name){\r\n        if(this.attr.textPosition!="hide"){\r\n            this.jtopo.text=name;\r\n        }\r\n    };\r\n    this._setNode=function(config,arr){\r\n        var temp= ["font","position","alpha","zIndex"];\r\n        if(arr){\r\n            this._setAttr($.merge(temp,arr),config);\r\n        }else{\r\n            this._setAttr(temp,config);\r\n        }\r\n    }\r\n}\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jb3JlL2VsZW1lbnQvbm9kZS9Ob2RlLmpzP2RhZjkiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6IjcuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBxaXljIG9uIDIwMTcvMi83LlxyXG4gKi9cclxuTm9kZS5wcm90b3R5cGUgPSByZXF1aXJlKFwiLi4vRWxlbWVudC5qc1wiKTtcclxubW9kdWxlLmV4cG9ydHMgPSBuZXcgTm9kZSgpO1xyXG5mdW5jdGlvbiBOb2RlKCkge1xyXG4gICAgdGhpcy5nZXRUeXBlPWZ1bmN0aW9uKCl7XHJcbiAgICAgICAgcmV0dXJuIFwibm9kZVwiO1xyXG4gICAgfTtcclxuICAgIHRoaXMuc2V0Q29sb3IgPSBmdW5jdGlvbiAoY29sb3IpIHtcclxuICAgICAgICBpZiAoY29sb3IpIHtcclxuICAgICAgICAgICAgY29sb3IgPSBRVG9wby51dGlsLnRyYW5zSGV4KGNvbG9yLnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgICAgICAgICB0aGlzLmp0b3BvLmZpbGxDb2xvciA9IGNvbG9yO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aGlzLnNldE5hbWU9ZnVuY3Rpb24obmFtZSl7XHJcbiAgICAgICAgaWYodGhpcy5hdHRyLnRleHRQb3NpdGlvbiE9XCJoaWRlXCIpe1xyXG4gICAgICAgICAgICB0aGlzLmp0b3BvLnRleHQ9bmFtZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhpcy5fc2V0Tm9kZT1mdW5jdGlvbihjb25maWcsYXJyKXtcclxuICAgICAgICB2YXIgdGVtcD0gW1wiZm9udFwiLFwicG9zaXRpb25cIixcImFscGhhXCIsXCJ6SW5kZXhcIl07XHJcbiAgICAgICAgaWYoYXJyKXtcclxuICAgICAgICAgICAgdGhpcy5fc2V0QXR0cigkLm1lcmdlKHRlbXAsYXJyKSxjb25maWcpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB0aGlzLl9zZXRBdHRyKHRlbXAsY29uZmlnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vY29yZS9lbGVtZW50L25vZGUvTm9kZS5qc1xuLy8gbW9kdWxlIGlkID0gN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9')},function(module,exports){eval('/**\r\n * Created by qiyc on 2017/2/7.\r\n */\r\nmodule.exports = new Element();\r\nfunction Element() {\r\n    this.show = function () {\r\n        this.jtopo.visible = true;\r\n    };\r\n    this.hide = function () {\r\n        this.jtopo.visible = false;\r\n    };\r\n    this.setText = function (text) {\r\n        this.jtopo.text = text;\r\n    };\r\n    this.on = function (name, fn) {\r\n        this.jtopo.addEventListener(name, function(e){\r\n            fn(e.target.qtopo,e);\r\n        });\r\n    };\r\n    this.off = function (name, fn) {\r\n        this.jtopo.removeEventListener(name);\r\n    };\r\n    this.setZIndex = function (zIndex) {\r\n        this.jtopo.zIndex = parseInt($.isNumeric(zIndex) ? zIndex : 10);\r\n    };\r\n    this.setFont = function (font) {\r\n        if ($.isNumeric(font.size) && font.type) {\r\n            this.jtopo.font = font.size + "px " + font.type;\r\n        } else {\r\n            console.error("setFont need size and type");\r\n        }\r\n        if (font.color) {\r\n            this.jtopo.fontColor = QTopo.util.transHex(font.color.toLowerCase());\r\n        } else {\r\n            console.error("setFontColor has no param");\r\n        }\r\n    };\r\n    this.setAlpha = function (alpha) {\r\n        if ($.isNumeric(alpha) && alpha <= 1 && alpha > 0) {\r\n            this.jtopo.alpha = alpha;\r\n        } else {\r\n            this.jtopo.alpha = 1;\r\n        }\r\n    };\r\n    this.setTextOffset = function (arr) {\r\n        if ($.isArray(arr) && arr.length >= 2) {\r\n            this.jtopo.textOffsetX = arr[0];\r\n            this.jtopo.textOffsetY = arr[1];\r\n        } else {\r\n            console.error("textOffset need be array and 2 length");\r\n        }\r\n    };\r\n    this.setPosition = function (position, fix) {\r\n        if ($.isArray(position) && position.length >= 2) {\r\n            this.jtopo.setLocation(position[0], position[1]);\r\n        } else {\r\n            console.error("position need be array and 2 length");\r\n        }\r\n    };\r\n    this.setSize = function (size) {\r\n        if ($.isArray(size) && size.length >= 2) {\r\n            this.jtopo.setSize(size[0], size[1]);\r\n        } else {\r\n            console.error("size need be array and 2 length");\r\n        }\r\n    };\r\n    this.setDragable = function (dragable) {\r\n        this.jtopo.dragable = dragable;\r\n    };\r\n    this.setTextPosition = function (textPosition) {\r\n        var jtopo = this.jtopo;\r\n        jtopo.text = this.attr.name;\r\n        switch (textPosition) {\r\n            case \'hide\':\r\n                jtopo.text = \'\';\r\n                break;\r\n            case \'bottom\':\r\n                jtopo.textOffsetX = 0;\r\n                jtopo.textOffsetY = 0;\r\n                jtopo.textPosition = "Bottom_Center";\r\n                break;\r\n            case \'top\':\r\n                jtopo.textOffsetX = 0;\r\n                jtopo.textOffsetY = 0;\r\n                jtopo.textPosition = "Top_Center";\r\n                break;\r\n            case \'left\':\r\n                jtopo.textOffsetX = -5;\r\n                jtopo.textOffsetY = 0;\r\n                jtopo.textPosition = "Middle_Left";\r\n                break;\r\n            case \'right\':\r\n                jtopo.textOffsetX = 5;\r\n                jtopo.textOffsetY = 0;\r\n                jtopo.textPosition = "Middle_Right";\r\n                break;\r\n            default:\r\n                jtopo.textOffsetX = 0;\r\n                jtopo.textOffsetY = 0;\r\n                jtopo.text = this.attr.name;\r\n                jtopo.textPosition = \'Bottom_Center\';\r\n                this.attr.textPosition="bottom";\r\n                console.error("set wrong textPosition,default is bottom");\r\n                break;\r\n        }\r\n    };\r\n    //限制所能修改的属性,arr为所能修改的属性列表\r\n    this._setAttr = function (arr, config) {\r\n        var self = this;\r\n        try {\r\n            $.each(arr, function (i, v) {\r\n                var fn = self[\'set\' + QTopo.util.upFirst(v)];\r\n                var attr = config[v];\r\n                if (attr && fn) {\r\n                    fn.call(self, attr);\r\n                    self.attr[v] = attr;\r\n                }\r\n            });\r\n        } catch (e) {\r\n            console.info("Element _setAttr error :" + e);\r\n        }\r\n    }\r\n}\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jb3JlL2VsZW1lbnQvRWxlbWVudC5qcz80NjViIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiI4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgcWl5YyBvbiAyMDE3LzIvNy5cclxuICovXHJcbm1vZHVsZS5leHBvcnRzID0gbmV3IEVsZW1lbnQoKTtcclxuZnVuY3Rpb24gRWxlbWVudCgpIHtcclxuICAgIHRoaXMuc2hvdyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmp0b3BvLnZpc2libGUgPSB0cnVlO1xyXG4gICAgfTtcclxuICAgIHRoaXMuaGlkZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmp0b3BvLnZpc2libGUgPSBmYWxzZTtcclxuICAgIH07XHJcbiAgICB0aGlzLnNldFRleHQgPSBmdW5jdGlvbiAodGV4dCkge1xyXG4gICAgICAgIHRoaXMuanRvcG8udGV4dCA9IHRleHQ7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5vbiA9IGZ1bmN0aW9uIChuYW1lLCBmbikge1xyXG4gICAgICAgIHRoaXMuanRvcG8uYWRkRXZlbnRMaXN0ZW5lcihuYW1lLCBmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgZm4oZS50YXJnZXQucXRvcG8sZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5vZmYgPSBmdW5jdGlvbiAobmFtZSwgZm4pIHtcclxuICAgICAgICB0aGlzLmp0b3BvLnJlbW92ZUV2ZW50TGlzdGVuZXIobmFtZSk7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5zZXRaSW5kZXggPSBmdW5jdGlvbiAoekluZGV4KSB7XHJcbiAgICAgICAgdGhpcy5qdG9wby56SW5kZXggPSBwYXJzZUludCgkLmlzTnVtZXJpYyh6SW5kZXgpID8gekluZGV4IDogMTApO1xyXG4gICAgfTtcclxuICAgIHRoaXMuc2V0Rm9udCA9IGZ1bmN0aW9uIChmb250KSB7XHJcbiAgICAgICAgaWYgKCQuaXNOdW1lcmljKGZvbnQuc2l6ZSkgJiYgZm9udC50eXBlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuanRvcG8uZm9udCA9IGZvbnQuc2l6ZSArIFwicHggXCIgKyBmb250LnR5cGU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcInNldEZvbnQgbmVlZCBzaXplIGFuZCB0eXBlXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZm9udC5jb2xvcikge1xyXG4gICAgICAgICAgICB0aGlzLmp0b3BvLmZvbnRDb2xvciA9IFFUb3BvLnV0aWwudHJhbnNIZXgoZm9udC5jb2xvci50b0xvd2VyQ2FzZSgpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwic2V0Rm9udENvbG9yIGhhcyBubyBwYXJhbVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhpcy5zZXRBbHBoYSA9IGZ1bmN0aW9uIChhbHBoYSkge1xyXG4gICAgICAgIGlmICgkLmlzTnVtZXJpYyhhbHBoYSkgJiYgYWxwaGEgPD0gMSAmJiBhbHBoYSA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5qdG9wby5hbHBoYSA9IGFscGhhO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuanRvcG8uYWxwaGEgPSAxO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aGlzLnNldFRleHRPZmZzZXQgPSBmdW5jdGlvbiAoYXJyKSB7XHJcbiAgICAgICAgaWYgKCQuaXNBcnJheShhcnIpICYmIGFyci5sZW5ndGggPj0gMikge1xyXG4gICAgICAgICAgICB0aGlzLmp0b3BvLnRleHRPZmZzZXRYID0gYXJyWzBdO1xyXG4gICAgICAgICAgICB0aGlzLmp0b3BvLnRleHRPZmZzZXRZID0gYXJyWzFdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJ0ZXh0T2Zmc2V0IG5lZWQgYmUgYXJyYXkgYW5kIDIgbGVuZ3RoXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aGlzLnNldFBvc2l0aW9uID0gZnVuY3Rpb24gKHBvc2l0aW9uLCBmaXgpIHtcclxuICAgICAgICBpZiAoJC5pc0FycmF5KHBvc2l0aW9uKSAmJiBwb3NpdGlvbi5sZW5ndGggPj0gMikge1xyXG4gICAgICAgICAgICB0aGlzLmp0b3BvLnNldExvY2F0aW9uKHBvc2l0aW9uWzBdLCBwb3NpdGlvblsxXSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcInBvc2l0aW9uIG5lZWQgYmUgYXJyYXkgYW5kIDIgbGVuZ3RoXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aGlzLnNldFNpemUgPSBmdW5jdGlvbiAoc2l6ZSkge1xyXG4gICAgICAgIGlmICgkLmlzQXJyYXkoc2l6ZSkgJiYgc2l6ZS5sZW5ndGggPj0gMikge1xyXG4gICAgICAgICAgICB0aGlzLmp0b3BvLnNldFNpemUoc2l6ZVswXSwgc2l6ZVsxXSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcInNpemUgbmVlZCBiZSBhcnJheSBhbmQgMiBsZW5ndGhcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRoaXMuc2V0RHJhZ2FibGUgPSBmdW5jdGlvbiAoZHJhZ2FibGUpIHtcclxuICAgICAgICB0aGlzLmp0b3BvLmRyYWdhYmxlID0gZHJhZ2FibGU7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5zZXRUZXh0UG9zaXRpb24gPSBmdW5jdGlvbiAodGV4dFBvc2l0aW9uKSB7XHJcbiAgICAgICAgdmFyIGp0b3BvID0gdGhpcy5qdG9wbztcclxuICAgICAgICBqdG9wby50ZXh0ID0gdGhpcy5hdHRyLm5hbWU7XHJcbiAgICAgICAgc3dpdGNoICh0ZXh0UG9zaXRpb24pIHtcclxuICAgICAgICAgICAgY2FzZSAnaGlkZSc6XHJcbiAgICAgICAgICAgICAgICBqdG9wby50ZXh0ID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnYm90dG9tJzpcclxuICAgICAgICAgICAgICAgIGp0b3BvLnRleHRPZmZzZXRYID0gMDtcclxuICAgICAgICAgICAgICAgIGp0b3BvLnRleHRPZmZzZXRZID0gMDtcclxuICAgICAgICAgICAgICAgIGp0b3BvLnRleHRQb3NpdGlvbiA9IFwiQm90dG9tX0NlbnRlclwiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3RvcCc6XHJcbiAgICAgICAgICAgICAgICBqdG9wby50ZXh0T2Zmc2V0WCA9IDA7XHJcbiAgICAgICAgICAgICAgICBqdG9wby50ZXh0T2Zmc2V0WSA9IDA7XHJcbiAgICAgICAgICAgICAgICBqdG9wby50ZXh0UG9zaXRpb24gPSBcIlRvcF9DZW50ZXJcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdsZWZ0JzpcclxuICAgICAgICAgICAgICAgIGp0b3BvLnRleHRPZmZzZXRYID0gLTU7XHJcbiAgICAgICAgICAgICAgICBqdG9wby50ZXh0T2Zmc2V0WSA9IDA7XHJcbiAgICAgICAgICAgICAgICBqdG9wby50ZXh0UG9zaXRpb24gPSBcIk1pZGRsZV9MZWZ0XCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAncmlnaHQnOlxyXG4gICAgICAgICAgICAgICAganRvcG8udGV4dE9mZnNldFggPSA1O1xyXG4gICAgICAgICAgICAgICAganRvcG8udGV4dE9mZnNldFkgPSAwO1xyXG4gICAgICAgICAgICAgICAganRvcG8udGV4dFBvc2l0aW9uID0gXCJNaWRkbGVfUmlnaHRcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAganRvcG8udGV4dE9mZnNldFggPSAwO1xyXG4gICAgICAgICAgICAgICAganRvcG8udGV4dE9mZnNldFkgPSAwO1xyXG4gICAgICAgICAgICAgICAganRvcG8udGV4dCA9IHRoaXMuYXR0ci5uYW1lO1xyXG4gICAgICAgICAgICAgICAganRvcG8udGV4dFBvc2l0aW9uID0gJ0JvdHRvbV9DZW50ZXInO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hdHRyLnRleHRQb3NpdGlvbj1cImJvdHRvbVwiO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcInNldCB3cm9uZyB0ZXh0UG9zaXRpb24sZGVmYXVsdCBpcyBib3R0b21cIik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLy/pmZDliLbmiYDog73kv67mlLnnmoTlsZ7mgKcsYXJy5Li65omA6IO95L+u5pS555qE5bGe5oCn5YiX6KGoXHJcbiAgICB0aGlzLl9zZXRBdHRyID0gZnVuY3Rpb24gKGFyciwgY29uZmlnKSB7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICQuZWFjaChhcnIsIGZ1bmN0aW9uIChpLCB2KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZm4gPSBzZWxmWydzZXQnICsgUVRvcG8udXRpbC51cEZpcnN0KHYpXTtcclxuICAgICAgICAgICAgICAgIHZhciBhdHRyID0gY29uZmlnW3ZdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGF0dHIgJiYgZm4pIHtcclxuICAgICAgICAgICAgICAgICAgICBmbi5jYWxsKHNlbGYsIGF0dHIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuYXR0clt2XSA9IGF0dHI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5pbmZvKFwiRWxlbWVudCBfc2V0QXR0ciBlcnJvciA6XCIgKyBlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vY29yZS9lbGVtZW50L0VsZW1lbnQuanNcbi8vIG1vZHVsZSBpZCA9IDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==')},function(module,exports,__webpack_require__){eval("/**\r\n * Created by qiyc on 2017/2/7.\r\n */\r\nText.prototype=__webpack_require__(7);\r\nmodule.exports = Text;\r\nvar defaults =function(){\r\n    return {\r\n        position:[0,0],\r\n        font:{\r\n            size:16,\r\n            type: '微软雅黑',\r\n            color:\"255,255,255\"\r\n        },\r\n        zIndex: 200,//层级(10-999)\r\n        alpha: 1,\r\n        text: 'no text here',\r\n        type: 'text'\r\n    };\r\n};\r\n//一般节点\r\nfunction Text(config) {\r\n    var self = this;\r\n    self.attr = QTopo.util.extend(defaults(), config || {});\r\n    self.jtopo = new JTopo.TextNode();\r\n    //封装对象之间相互保持引用\r\n    self.jtopo.qtopo=self;\r\n    //函数\r\n    self.set = setJTopo;\r\n    //初始化\r\n    self.set(self.attr);\r\n}\r\nfunction setJTopo(config) {\r\n    if (config) {\r\n        var self=this;\r\n        //处理一般属性的设置\r\n        self._setNode(config,[\"text\"]);\r\n        //处理特殊属性的设置\r\n    }\r\n}\r\n//私有函数//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jb3JlL2VsZW1lbnQvbm9kZS9UZXh0LmpzPzMyMmEiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRDtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6IjkuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBxaXljIG9uIDIwMTcvMi83LlxyXG4gKi9cclxuVGV4dC5wcm90b3R5cGU9cmVxdWlyZShcIi4vTm9kZS5qc1wiKTtcclxubW9kdWxlLmV4cG9ydHMgPSBUZXh0O1xyXG52YXIgZGVmYXVsdHMgPWZ1bmN0aW9uKCl7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHBvc2l0aW9uOlswLDBdLFxyXG4gICAgICAgIGZvbnQ6e1xyXG4gICAgICAgICAgICBzaXplOjE2LFxyXG4gICAgICAgICAgICB0eXBlOiAn5b6u6L2v6ZuF6buRJyxcclxuICAgICAgICAgICAgY29sb3I6XCIyNTUsMjU1LDI1NVwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICB6SW5kZXg6IDIwMCwvL+Wxgue6pygxMC05OTkpXHJcbiAgICAgICAgYWxwaGE6IDEsXHJcbiAgICAgICAgdGV4dDogJ25vIHRleHQgaGVyZScsXHJcbiAgICAgICAgdHlwZTogJ3RleHQnXHJcbiAgICB9O1xyXG59O1xyXG4vL+S4gOiIrOiKgueCuVxyXG5mdW5jdGlvbiBUZXh0KGNvbmZpZykge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5hdHRyID0gUVRvcG8udXRpbC5leHRlbmQoZGVmYXVsdHMoKSwgY29uZmlnIHx8IHt9KTtcclxuICAgIHNlbGYuanRvcG8gPSBuZXcgSlRvcG8uVGV4dE5vZGUoKTtcclxuICAgIC8v5bCB6KOF5a+56LGh5LmL6Ze055u45LqS5L+d5oyB5byV55SoXHJcbiAgICBzZWxmLmp0b3BvLnF0b3BvPXNlbGY7XHJcbiAgICAvL+WHveaVsFxyXG4gICAgc2VsZi5zZXQgPSBzZXRKVG9wbztcclxuICAgIC8v5Yid5aeL5YyWXHJcbiAgICBzZWxmLnNldChzZWxmLmF0dHIpO1xyXG59XHJcbmZ1bmN0aW9uIHNldEpUb3BvKGNvbmZpZykge1xyXG4gICAgaWYgKGNvbmZpZykge1xyXG4gICAgICAgIHZhciBzZWxmPXRoaXM7XHJcbiAgICAgICAgLy/lpITnkIbkuIDoiKzlsZ7mgKfnmoTorr7nva5cclxuICAgICAgICBzZWxmLl9zZXROb2RlKGNvbmZpZyxbXCJ0ZXh0XCJdKTtcclxuICAgICAgICAvL+WkhOeQhueJueauiuWxnuaAp+eahOiuvue9rlxyXG4gICAgfVxyXG59XHJcbi8v56eB5pyJ5Ye95pWwXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9jb3JlL2VsZW1lbnQvbm9kZS9UZXh0LmpzXG4vLyBtb2R1bGUgaWQgPSA5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=")},function(module,exports,__webpack_require__){eval('/**\r\n * Created by qiyc on 2017/2/7.\r\n */\r\nCurve.prototype=__webpack_require__(11);\r\nmodule.exports = Curve;\r\n//曲线\r\nvar defaults =function(){\r\n    return {\r\n        num: 1,\r\n        alpha:1,\r\n        color: \'22,124,255\',\r\n        arrow:{\r\n            size:null,\r\n            offset:0,\r\n            start:false,\r\n            end:true\r\n        },\r\n        gap:20,\r\n        width: 4,\r\n        dashed:  null,\r\n        zIndex : 100,\r\n        textOffset:[0,0],\r\n        font:{\r\n            size:16,\r\n            type:"微软雅黑",\r\n            color:\'255,255,255\'\r\n        },\r\n        type: \'curve\',\r\n        curveOffset:200\r\n    };\r\n};\r\nfunction Curve(config){\r\n    if(!config.start||!config.end){\r\n        console.error("Create Link need start and end");\r\n        return;\r\n    }\r\n    var self = this;\r\n    self.jtopo = new JTopo.FoldLink(config.start.jtopo, config.end.jtopo);\r\n    //封装对象之间相互保持引用\r\n    self.jtopo.qtopo=self;\r\n    self.attr =  QTopo.util.extend(defaults(), config || {});\r\n    //函数\r\n    self.set = setJTopo;\r\n    //初始化\r\n    self.set(self.attr);\r\n    //改写源码绘制曲线,可由curveOffset指定弧度\r\n    reset(self);\r\n}\r\nfunction setJTopo(config) {\r\n    if (config) {\r\n        var self=this;\r\n        self._setLink(config);\r\n        if(config.direction){\r\n            setDirection.call(self,config.direction);\r\n        }\r\n    }\r\n}\r\nfunction reset(link){\r\n    link.jtopo.getStartPosition = function () {\r\n        var a;\r\n        return (a = (function (thisl) {\r\n            var b = thisl.nodeA, c = thisl.nodeZ;\r\n            var d = JTopo.util.lineF(b.cx, b.cy, c.cx, c.cy);\r\n            var e = b.getBound();\r\n            return f = JTopo.util.intersectionLineBound(d, e);\r\n        })(this)), a;\r\n    };\r\n    link.jtopo.getEndPosition = function () {\r\n        var a;\r\n        return (a = (function (thisl) {\r\n            var b = thisl.nodeZ, c = thisl.nodeA;\r\n            var d = JTopo.util.lineF(b.cx, b.cy, c.cx, c.cy);\r\n            var e = b.getBound();\r\n            return f = JTopo.util.intersectionLineBound(d, e);\r\n        })(this)), a;\r\n    };\r\n    link.jtopo.paintPath = function (cx, path) {\r\n        if (this.nodeA === this.nodeZ)return void this.paintLoop(cx);\r\n        var s = path[0];\r\n        var t = path[path.length - 1];\r\n        cx.beginPath();\r\n        cx.moveTo(s.x, s.y);\r\n        var angle = Math.atan(Math.abs(t.y - s.y) / Math.abs(t.x - s.x));\r\n        var mX = (s.x + t.x) / 2 + link.attr.curveOffset * Math.cos(angle - Math.PI / 2);\r\n        var mY = (s.y + t.y) / 2 + link.attr.curveOffset * Math.sin(angle - Math.PI / 2);\r\n        cx.strokeStyle = "rgba(" + this.strokeColor + "," + this.alpha + ")";\r\n        cx.lineWidth = this.lineWidth;\r\n        cx.moveTo(s.x, s.cy);\r\n        cx.quadraticCurveTo(mX, mY, t.x, t.y);\r\n        cx.stroke();\r\n        if (cx.stroke(), cx.closePath(), null != this.arrowsRadius) {\r\n            if (link.attr.arrow.end) {\r\n                this.paintArrow(cx, s, t);\r\n            }\r\n            if (link.attr.arrow.start) {\r\n                this.paintArrow(cx, t, s);\r\n            }\r\n        }\r\n    };\r\n}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jb3JlL2VsZW1lbnQvbGluay9DdXJ2ZS5qcz8xYjY1Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRDtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiIxMC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHFpeWMgb24gMjAxNy8yLzcuXHJcbiAqL1xyXG5DdXJ2ZS5wcm90b3R5cGU9cmVxdWlyZShcIi4vTGluay5qc1wiKTtcclxubW9kdWxlLmV4cG9ydHMgPSBDdXJ2ZTtcclxuLy/mm7Lnur9cclxudmFyIGRlZmF1bHRzID1mdW5jdGlvbigpe1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBudW06IDEsXHJcbiAgICAgICAgYWxwaGE6MSxcclxuICAgICAgICBjb2xvcjogJzIyLDEyNCwyNTUnLFxyXG4gICAgICAgIGFycm93OntcclxuICAgICAgICAgICAgc2l6ZTpudWxsLFxyXG4gICAgICAgICAgICBvZmZzZXQ6MCxcclxuICAgICAgICAgICAgc3RhcnQ6ZmFsc2UsXHJcbiAgICAgICAgICAgIGVuZDp0cnVlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBnYXA6MjAsXHJcbiAgICAgICAgd2lkdGg6IDQsXHJcbiAgICAgICAgZGFzaGVkOiAgbnVsbCxcclxuICAgICAgICB6SW5kZXggOiAxMDAsXHJcbiAgICAgICAgdGV4dE9mZnNldDpbMCwwXSxcclxuICAgICAgICBmb250OntcclxuICAgICAgICAgICAgc2l6ZToxNixcclxuICAgICAgICAgICAgdHlwZTpcIuW+rui9r+mbhem7kVwiLFxyXG4gICAgICAgICAgICBjb2xvcjonMjU1LDI1NSwyNTUnXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0eXBlOiAnY3VydmUnLFxyXG4gICAgICAgIGN1cnZlT2Zmc2V0OjIwMFxyXG4gICAgfTtcclxufTtcclxuZnVuY3Rpb24gQ3VydmUoY29uZmlnKXtcclxuICAgIGlmKCFjb25maWcuc3RhcnR8fCFjb25maWcuZW5kKXtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiQ3JlYXRlIExpbmsgbmVlZCBzdGFydCBhbmQgZW5kXCIpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYuanRvcG8gPSBuZXcgSlRvcG8uRm9sZExpbmsoY29uZmlnLnN0YXJ0Lmp0b3BvLCBjb25maWcuZW5kLmp0b3BvKTtcclxuICAgIC8v5bCB6KOF5a+56LGh5LmL6Ze055u45LqS5L+d5oyB5byV55SoXHJcbiAgICBzZWxmLmp0b3BvLnF0b3BvPXNlbGY7XHJcbiAgICBzZWxmLmF0dHIgPSAgUVRvcG8udXRpbC5leHRlbmQoZGVmYXVsdHMoKSwgY29uZmlnIHx8IHt9KTtcclxuICAgIC8v5Ye95pWwXHJcbiAgICBzZWxmLnNldCA9IHNldEpUb3BvO1xyXG4gICAgLy/liJ3lp4vljJZcclxuICAgIHNlbGYuc2V0KHNlbGYuYXR0cik7XHJcbiAgICAvL+aUueWGmea6kOeggee7mOWItuabsue6vyzlj6/nlLFjdXJ2ZU9mZnNldOaMh+WumuW8p+W6plxyXG4gICAgcmVzZXQoc2VsZik7XHJcbn1cclxuZnVuY3Rpb24gc2V0SlRvcG8oY29uZmlnKSB7XHJcbiAgICBpZiAoY29uZmlnKSB7XHJcbiAgICAgICAgdmFyIHNlbGY9dGhpcztcclxuICAgICAgICBzZWxmLl9zZXRMaW5rKGNvbmZpZyk7XHJcbiAgICAgICAgaWYoY29uZmlnLmRpcmVjdGlvbil7XHJcbiAgICAgICAgICAgIHNldERpcmVjdGlvbi5jYWxsKHNlbGYsY29uZmlnLmRpcmVjdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHJlc2V0KGxpbmspe1xyXG4gICAgbGluay5qdG9wby5nZXRTdGFydFBvc2l0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhO1xyXG4gICAgICAgIHJldHVybiAoYSA9IChmdW5jdGlvbiAodGhpc2wpIHtcclxuICAgICAgICAgICAgdmFyIGIgPSB0aGlzbC5ub2RlQSwgYyA9IHRoaXNsLm5vZGVaO1xyXG4gICAgICAgICAgICB2YXIgZCA9IEpUb3BvLnV0aWwubGluZUYoYi5jeCwgYi5jeSwgYy5jeCwgYy5jeSk7XHJcbiAgICAgICAgICAgIHZhciBlID0gYi5nZXRCb3VuZCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gZiA9IEpUb3BvLnV0aWwuaW50ZXJzZWN0aW9uTGluZUJvdW5kKGQsIGUpO1xyXG4gICAgICAgIH0pKHRoaXMpKSwgYTtcclxuICAgIH07XHJcbiAgICBsaW5rLmp0b3BvLmdldEVuZFBvc2l0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhO1xyXG4gICAgICAgIHJldHVybiAoYSA9IChmdW5jdGlvbiAodGhpc2wpIHtcclxuICAgICAgICAgICAgdmFyIGIgPSB0aGlzbC5ub2RlWiwgYyA9IHRoaXNsLm5vZGVBO1xyXG4gICAgICAgICAgICB2YXIgZCA9IEpUb3BvLnV0aWwubGluZUYoYi5jeCwgYi5jeSwgYy5jeCwgYy5jeSk7XHJcbiAgICAgICAgICAgIHZhciBlID0gYi5nZXRCb3VuZCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gZiA9IEpUb3BvLnV0aWwuaW50ZXJzZWN0aW9uTGluZUJvdW5kKGQsIGUpO1xyXG4gICAgICAgIH0pKHRoaXMpKSwgYTtcclxuICAgIH07XHJcbiAgICBsaW5rLmp0b3BvLnBhaW50UGF0aCA9IGZ1bmN0aW9uIChjeCwgcGF0aCkge1xyXG4gICAgICAgIGlmICh0aGlzLm5vZGVBID09PSB0aGlzLm5vZGVaKXJldHVybiB2b2lkIHRoaXMucGFpbnRMb29wKGN4KTtcclxuICAgICAgICB2YXIgcyA9IHBhdGhbMF07XHJcbiAgICAgICAgdmFyIHQgPSBwYXRoW3BhdGgubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgY3guYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgY3gubW92ZVRvKHMueCwgcy55KTtcclxuICAgICAgICB2YXIgYW5nbGUgPSBNYXRoLmF0YW4oTWF0aC5hYnModC55IC0gcy55KSAvIE1hdGguYWJzKHQueCAtIHMueCkpO1xyXG4gICAgICAgIHZhciBtWCA9IChzLnggKyB0LngpIC8gMiArIGxpbmsuYXR0ci5jdXJ2ZU9mZnNldCAqIE1hdGguY29zKGFuZ2xlIC0gTWF0aC5QSSAvIDIpO1xyXG4gICAgICAgIHZhciBtWSA9IChzLnkgKyB0LnkpIC8gMiArIGxpbmsuYXR0ci5jdXJ2ZU9mZnNldCAqIE1hdGguc2luKGFuZ2xlIC0gTWF0aC5QSSAvIDIpO1xyXG4gICAgICAgIGN4LnN0cm9rZVN0eWxlID0gXCJyZ2JhKFwiICsgdGhpcy5zdHJva2VDb2xvciArIFwiLFwiICsgdGhpcy5hbHBoYSArIFwiKVwiO1xyXG4gICAgICAgIGN4LmxpbmVXaWR0aCA9IHRoaXMubGluZVdpZHRoO1xyXG4gICAgICAgIGN4Lm1vdmVUbyhzLngsIHMuY3kpO1xyXG4gICAgICAgIGN4LnF1YWRyYXRpY0N1cnZlVG8obVgsIG1ZLCB0LngsIHQueSk7XHJcbiAgICAgICAgY3guc3Ryb2tlKCk7XHJcbiAgICAgICAgaWYgKGN4LnN0cm9rZSgpLCBjeC5jbG9zZVBhdGgoKSwgbnVsbCAhPSB0aGlzLmFycm93c1JhZGl1cykge1xyXG4gICAgICAgICAgICBpZiAobGluay5hdHRyLmFycm93LmVuZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wYWludEFycm93KGN4LCBzLCB0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobGluay5hdHRyLmFycm93LnN0YXJ0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhaW50QXJyb3coY3gsIHQsIHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vY29yZS9lbGVtZW50L2xpbmsvQ3VydmUuanNcbi8vIG1vZHVsZSBpZCA9IDEwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=');
},function(module,exports,__webpack_require__){eval('/**\r\n * Created by qiyc on 2017/2/7.\r\n */\r\nLink.prototype =__webpack_require__(8);\r\nmodule.exports = new Link();\r\nfunction Link() {\r\n    this.getType=function(){\r\n        return "link";\r\n    };\r\n    this.setColor = function (color) {\r\n        if (color) {\r\n            color = QTopo.util.transHex(color.toLowerCase());\r\n            this.jtopo.strokeColor = color;\r\n        }\r\n    };\r\n    this.setNum = function (num) {\r\n        if ($.isNumeric(num)&&num > 1) {\r\n            this.jtopo.text = \'(+\' + num + \')\';\r\n        } else {\r\n            this.jtopo.text = \'\';\r\n        }\r\n    };\r\n    this.setWidth=function(width){\r\n        this.jtopo.lineWidth = width; // 线宽\r\n    };\r\n    this.setArrow = function(arrow){\r\n        this.jtopo.arrowsRadius = $.isNumeric(arrow.size)?arrow.size:0;\r\n        this.jtopo.arrowsOffset = $.isNumeric(arrow.offset)?arrow.offset:0;\r\n    };\r\n    this.setGap=function(gap){\r\n        this.jtopo.bundleGap = $.isNumeric(gap)?gap:0; // 线条之间的间隔\r\n    };\r\n    this.setDashed=function(dashedPattern){\r\n        if($.isNumeric(dashedPattern)&&dashedPattern>0){\r\n            this.jtopo.dashedPattern=dashedPattern;\r\n        }else{\r\n            this.jtopo.dashedPattern=null;\r\n        }\r\n    };\r\n    this.setDirection=function(direction){\r\n        //折线方向 horizontal 水平 "vertical"垂直\r\n        this.jtopo.direction=direction;\r\n    };\r\n    this._setLink=function(config,arr){\r\n        var temp= ["num","font","color","alpha","arrow","gap","textOffset","width","dashed","zIndex"];\r\n        if(arr){\r\n            this._setAttr($.merge(temp,arr),config);\r\n        }else{\r\n            this._setAttr(temp,config);\r\n        }\r\n    };\r\n}\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jb3JlL2VsZW1lbnQvbGluay9MaW5rLmpzPzg2ZTUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRDtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6IjExLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgcWl5YyBvbiAyMDE3LzIvNy5cclxuICovXHJcbkxpbmsucHJvdG90eXBlID1yZXF1aXJlKFwiLi4vRWxlbWVudC5qc1wiKTtcclxubW9kdWxlLmV4cG9ydHMgPSBuZXcgTGluaygpO1xyXG5mdW5jdGlvbiBMaW5rKCkge1xyXG4gICAgdGhpcy5nZXRUeXBlPWZ1bmN0aW9uKCl7XHJcbiAgICAgICAgcmV0dXJuIFwibGlua1wiO1xyXG4gICAgfTtcclxuICAgIHRoaXMuc2V0Q29sb3IgPSBmdW5jdGlvbiAoY29sb3IpIHtcclxuICAgICAgICBpZiAoY29sb3IpIHtcclxuICAgICAgICAgICAgY29sb3IgPSBRVG9wby51dGlsLnRyYW5zSGV4KGNvbG9yLnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgICAgICAgICB0aGlzLmp0b3BvLnN0cm9rZUNvbG9yID0gY29sb3I7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRoaXMuc2V0TnVtID0gZnVuY3Rpb24gKG51bSkge1xyXG4gICAgICAgIGlmICgkLmlzTnVtZXJpYyhudW0pJiZudW0gPiAxKSB7XHJcbiAgICAgICAgICAgIHRoaXMuanRvcG8udGV4dCA9ICcoKycgKyBudW0gKyAnKSc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5qdG9wby50ZXh0ID0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRoaXMuc2V0V2lkdGg9ZnVuY3Rpb24od2lkdGgpe1xyXG4gICAgICAgIHRoaXMuanRvcG8ubGluZVdpZHRoID0gd2lkdGg7IC8vIOe6v+WuvVxyXG4gICAgfTtcclxuICAgIHRoaXMuc2V0QXJyb3cgPSBmdW5jdGlvbihhcnJvdyl7XHJcbiAgICAgICAgdGhpcy5qdG9wby5hcnJvd3NSYWRpdXMgPSAkLmlzTnVtZXJpYyhhcnJvdy5zaXplKT9hcnJvdy5zaXplOjA7XHJcbiAgICAgICAgdGhpcy5qdG9wby5hcnJvd3NPZmZzZXQgPSAkLmlzTnVtZXJpYyhhcnJvdy5vZmZzZXQpP2Fycm93Lm9mZnNldDowO1xyXG4gICAgfTtcclxuICAgIHRoaXMuc2V0R2FwPWZ1bmN0aW9uKGdhcCl7XHJcbiAgICAgICAgdGhpcy5qdG9wby5idW5kbGVHYXAgPSAkLmlzTnVtZXJpYyhnYXApP2dhcDowOyAvLyDnur/mnaHkuYvpl7TnmoTpl7TpmpRcclxuICAgIH07XHJcbiAgICB0aGlzLnNldERhc2hlZD1mdW5jdGlvbihkYXNoZWRQYXR0ZXJuKXtcclxuICAgICAgICBpZigkLmlzTnVtZXJpYyhkYXNoZWRQYXR0ZXJuKSYmZGFzaGVkUGF0dGVybj4wKXtcclxuICAgICAgICAgICAgdGhpcy5qdG9wby5kYXNoZWRQYXR0ZXJuPWRhc2hlZFBhdHRlcm47XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMuanRvcG8uZGFzaGVkUGF0dGVybj1udWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aGlzLnNldERpcmVjdGlvbj1mdW5jdGlvbihkaXJlY3Rpb24pe1xyXG4gICAgICAgIC8v5oqY57q/5pa55ZCRIGhvcml6b250YWwg5rC05bmzIFwidmVydGljYWxcIuWeguebtFxyXG4gICAgICAgIHRoaXMuanRvcG8uZGlyZWN0aW9uPWRpcmVjdGlvbjtcclxuICAgIH07XHJcbiAgICB0aGlzLl9zZXRMaW5rPWZ1bmN0aW9uKGNvbmZpZyxhcnIpe1xyXG4gICAgICAgIHZhciB0ZW1wPSBbXCJudW1cIixcImZvbnRcIixcImNvbG9yXCIsXCJhbHBoYVwiLFwiYXJyb3dcIixcImdhcFwiLFwidGV4dE9mZnNldFwiLFwid2lkdGhcIixcImRhc2hlZFwiLFwiekluZGV4XCJdO1xyXG4gICAgICAgIGlmKGFycil7XHJcbiAgICAgICAgICAgIHRoaXMuX3NldEF0dHIoJC5tZXJnZSh0ZW1wLGFyciksY29uZmlnKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgdGhpcy5fc2V0QXR0cih0ZW1wLGNvbmZpZyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5cclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9jb3JlL2VsZW1lbnQvbGluay9MaW5rLmpzXG4vLyBtb2R1bGUgaWQgPSAxMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9')},function(module,exports,__webpack_require__){eval("/**\r\n * Created by qiyc on 2017/2/7.\r\n */\r\nDirect.prototype=__webpack_require__(11);\r\nmodule.exports = Direct;\r\n//直线\r\nvar defaults =function(){\r\n    return {\r\n        num: 1,\r\n        alpha:1,\r\n        color: '22,124,255',\r\n        arrow:{\r\n            size:null,\r\n            offset:0,\r\n            start:false,\r\n            end:true\r\n        },\r\n        gap:20,\r\n        width: 4,\r\n        dashed:  null,\r\n        zIndex : 100,\r\n        textOffset:[0,0],\r\n        font:{\r\n            size:16,\r\n            type:\"微软雅黑\",\r\n            color:'255,255,255'\r\n        },\r\n        type: 'direct',\r\n        bundleOffset:60// 多条直线时，线条折线拐角处的长度\r\n    };\r\n};\r\nfunction Direct(config) {\r\n    if(!config.start||!config.end){\r\n        console.error(\"Create Link need start and end\");\r\n        return;\r\n    }\r\n    var self = this;\r\n    self.jtopo = new JTopo.Link(config.start.jtopo, config.end.jtopo);\r\n    //封装对象之间相互保持引用\r\n    self.jtopo.qtopo=self;\r\n    self.attr =  QTopo.util.extend(defaults(), config || {});\r\n    //函数\r\n    self.set = setJTopo;\r\n    //初始化\r\n    self.set(self.attr);\r\n    //源码修改\r\n    reset(self);\r\n\r\n}\r\nfunction setJTopo(config) {\r\n    if (config) {\r\n        var self=this;\r\n        self._setLink(config);\r\n        if(config.bundleOffset){\r\n            self.jtopo.bundleOffset=parseInt(config.bundleOffset);\r\n        }\r\n    }\r\n}\r\nfunction reset(link){\r\n    //双向箭头\r\n    link.jtopo.getStartPosition = function () {\r\n        var a;\r\n        return null != this.arrowsRadius && (a = (function (thisl) {\r\n            var b = thisl.nodeA, c = thisl.nodeZ;\r\n            var d = JTopo.util.lineF(b.cx, b.cy, c.cx, c.cy);\r\n            var e = b.getBound();\r\n            return f = JTopo.util.intersectionLineBound(d, e);\r\n        })(this)), null == a && (a = {\r\n            x: this.nodeA.cx,\r\n            y: this.nodeA.cy\r\n        }), a;\r\n    };\r\n    link.jtopo.paintPath = function (a, b) {\r\n        if (this.nodeA === this.nodeZ) return void this.paintLoop(a);\r\n        a.beginPath(),\r\n            a.moveTo(b[0].x, b[0].y);\r\n        for (var c = 1; c < b.length; c++) {\r\n            null == this.dashedPattern ? (\r\n                (null == this.PointPathColor ? a.lineTo(b[c].x, b[c].y) : a.JtopoDrawPointPath(b[c - 1].x, b[c - 1].y, b[c].x, b[c].y, a.strokeStyle, this.PointPathColor))\r\n            ) : a.JTopoDashedLineTo(b[c - 1].x, b[c - 1].y, b[c].x, b[c].y, this.dashedPattern)\r\n        }\r\n        if (a.stroke(), a.closePath(), null != this.arrowsRadius) {\r\n            if (link.attr.arrow.end) {\r\n                this.paintArrow(a, b[0], b[b.length - 1]);\r\n            }//终点箭头\r\n            if (link.attr.arrow.start) {\r\n                this.paintArrow(a, b[b.length - 1], b[0]);\r\n            }//起点箭头\r\n        }\r\n    };\r\n}\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jb3JlL2VsZW1lbnQvbGluay9EaXJlY3QuanM/ZTVhYyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQ7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixjQUFjO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBIiwiZmlsZSI6IjEyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgcWl5YyBvbiAyMDE3LzIvNy5cclxuICovXHJcbkRpcmVjdC5wcm90b3R5cGU9cmVxdWlyZShcIi4vTGluay5qc1wiKTtcclxubW9kdWxlLmV4cG9ydHMgPSBEaXJlY3Q7XHJcbi8v55u057q/XHJcbnZhciBkZWZhdWx0cyA9ZnVuY3Rpb24oKXtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbnVtOiAxLFxyXG4gICAgICAgIGFscGhhOjEsXHJcbiAgICAgICAgY29sb3I6ICcyMiwxMjQsMjU1JyxcclxuICAgICAgICBhcnJvdzp7XHJcbiAgICAgICAgICAgIHNpemU6bnVsbCxcclxuICAgICAgICAgICAgb2Zmc2V0OjAsXHJcbiAgICAgICAgICAgIHN0YXJ0OmZhbHNlLFxyXG4gICAgICAgICAgICBlbmQ6dHJ1ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2FwOjIwLFxyXG4gICAgICAgIHdpZHRoOiA0LFxyXG4gICAgICAgIGRhc2hlZDogIG51bGwsXHJcbiAgICAgICAgekluZGV4IDogMTAwLFxyXG4gICAgICAgIHRleHRPZmZzZXQ6WzAsMF0sXHJcbiAgICAgICAgZm9udDp7XHJcbiAgICAgICAgICAgIHNpemU6MTYsXHJcbiAgICAgICAgICAgIHR5cGU6XCLlvq7ova/pm4Xpu5FcIixcclxuICAgICAgICAgICAgY29sb3I6JzI1NSwyNTUsMjU1J1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdHlwZTogJ2RpcmVjdCcsXHJcbiAgICAgICAgYnVuZGxlT2Zmc2V0OjYwLy8g5aSa5p2h55u057q/5pe277yM57q/5p2h5oqY57q/5ouQ6KeS5aSE55qE6ZW/5bqmXHJcbiAgICB9O1xyXG59O1xyXG5mdW5jdGlvbiBEaXJlY3QoY29uZmlnKSB7XHJcbiAgICBpZighY29uZmlnLnN0YXJ0fHwhY29uZmlnLmVuZCl7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkNyZWF0ZSBMaW5rIG5lZWQgc3RhcnQgYW5kIGVuZFwiKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmp0b3BvID0gbmV3IEpUb3BvLkxpbmsoY29uZmlnLnN0YXJ0Lmp0b3BvLCBjb25maWcuZW5kLmp0b3BvKTtcclxuICAgIC8v5bCB6KOF5a+56LGh5LmL6Ze055u45LqS5L+d5oyB5byV55SoXHJcbiAgICBzZWxmLmp0b3BvLnF0b3BvPXNlbGY7XHJcbiAgICBzZWxmLmF0dHIgPSAgUVRvcG8udXRpbC5leHRlbmQoZGVmYXVsdHMoKSwgY29uZmlnIHx8IHt9KTtcclxuICAgIC8v5Ye95pWwXHJcbiAgICBzZWxmLnNldCA9IHNldEpUb3BvO1xyXG4gICAgLy/liJ3lp4vljJZcclxuICAgIHNlbGYuc2V0KHNlbGYuYXR0cik7XHJcbiAgICAvL+a6kOeggeS/ruaUuVxyXG4gICAgcmVzZXQoc2VsZik7XHJcblxyXG59XHJcbmZ1bmN0aW9uIHNldEpUb3BvKGNvbmZpZykge1xyXG4gICAgaWYgKGNvbmZpZykge1xyXG4gICAgICAgIHZhciBzZWxmPXRoaXM7XHJcbiAgICAgICAgc2VsZi5fc2V0TGluayhjb25maWcpO1xyXG4gICAgICAgIGlmKGNvbmZpZy5idW5kbGVPZmZzZXQpe1xyXG4gICAgICAgICAgICBzZWxmLmp0b3BvLmJ1bmRsZU9mZnNldD1wYXJzZUludChjb25maWcuYnVuZGxlT2Zmc2V0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gcmVzZXQobGluayl7XHJcbiAgICAvL+WPjOWQkeeureWktFxyXG4gICAgbGluay5qdG9wby5nZXRTdGFydFBvc2l0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhO1xyXG4gICAgICAgIHJldHVybiBudWxsICE9IHRoaXMuYXJyb3dzUmFkaXVzICYmIChhID0gKGZ1bmN0aW9uICh0aGlzbCkge1xyXG4gICAgICAgICAgICB2YXIgYiA9IHRoaXNsLm5vZGVBLCBjID0gdGhpc2wubm9kZVo7XHJcbiAgICAgICAgICAgIHZhciBkID0gSlRvcG8udXRpbC5saW5lRihiLmN4LCBiLmN5LCBjLmN4LCBjLmN5KTtcclxuICAgICAgICAgICAgdmFyIGUgPSBiLmdldEJvdW5kKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBmID0gSlRvcG8udXRpbC5pbnRlcnNlY3Rpb25MaW5lQm91bmQoZCwgZSk7XHJcbiAgICAgICAgfSkodGhpcykpLCBudWxsID09IGEgJiYgKGEgPSB7XHJcbiAgICAgICAgICAgIHg6IHRoaXMubm9kZUEuY3gsXHJcbiAgICAgICAgICAgIHk6IHRoaXMubm9kZUEuY3lcclxuICAgICAgICB9KSwgYTtcclxuICAgIH07XHJcbiAgICBsaW5rLmp0b3BvLnBhaW50UGF0aCA9IGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubm9kZUEgPT09IHRoaXMubm9kZVopIHJldHVybiB2b2lkIHRoaXMucGFpbnRMb29wKGEpO1xyXG4gICAgICAgIGEuYmVnaW5QYXRoKCksXHJcbiAgICAgICAgICAgIGEubW92ZVRvKGJbMF0ueCwgYlswXS55KTtcclxuICAgICAgICBmb3IgKHZhciBjID0gMTsgYyA8IGIubGVuZ3RoOyBjKyspIHtcclxuICAgICAgICAgICAgbnVsbCA9PSB0aGlzLmRhc2hlZFBhdHRlcm4gPyAoXHJcbiAgICAgICAgICAgICAgICAobnVsbCA9PSB0aGlzLlBvaW50UGF0aENvbG9yID8gYS5saW5lVG8oYltjXS54LCBiW2NdLnkpIDogYS5KdG9wb0RyYXdQb2ludFBhdGgoYltjIC0gMV0ueCwgYltjIC0gMV0ueSwgYltjXS54LCBiW2NdLnksIGEuc3Ryb2tlU3R5bGUsIHRoaXMuUG9pbnRQYXRoQ29sb3IpKVxyXG4gICAgICAgICAgICApIDogYS5KVG9wb0Rhc2hlZExpbmVUbyhiW2MgLSAxXS54LCBiW2MgLSAxXS55LCBiW2NdLngsIGJbY10ueSwgdGhpcy5kYXNoZWRQYXR0ZXJuKVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYS5zdHJva2UoKSwgYS5jbG9zZVBhdGgoKSwgbnVsbCAhPSB0aGlzLmFycm93c1JhZGl1cykge1xyXG4gICAgICAgICAgICBpZiAobGluay5hdHRyLmFycm93LmVuZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wYWludEFycm93KGEsIGJbMF0sIGJbYi5sZW5ndGggLSAxXSk7XHJcbiAgICAgICAgICAgIH0vL+e7iOeCueeureWktFxyXG4gICAgICAgICAgICBpZiAobGluay5hdHRyLmFycm93LnN0YXJ0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhaW50QXJyb3coYSwgYltiLmxlbmd0aCAtIDFdLCBiWzBdKTtcclxuICAgICAgICAgICAgfS8v6LW354K5566t5aS0XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2NvcmUvZWxlbWVudC9saW5rL0RpcmVjdC5qc1xuLy8gbW9kdWxlIGlkID0gMTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==")},function(module,exports,__webpack_require__){eval('/**\r\n * Created by qiyc on 2017/2/7.\r\n */\r\nFlexional.prototype=__webpack_require__(11);\r\nmodule.exports = Flexional;\r\n//二次折线\r\nvar defaults =function(){\r\n    return {\r\n        num: 1,\r\n        alpha:1,\r\n        color: \'22,124,255\',\r\n        arrow:{\r\n            size:null,\r\n            offset:0,\r\n            start:false,\r\n            end:true\r\n        },\r\n        gap:20,\r\n        width:3,\r\n        dashed:  null,\r\n        zIndex : 100,\r\n        textOffset:[0,0],\r\n        font:{\r\n            size:16,\r\n            type:"微软雅黑",\r\n            color:\'255,255,255\'\r\n        },\r\n        type: \'flexional\',\r\n        direction:"horizontal",\r\n        offsetGap:60\r\n    };\r\n};\r\nfunction Flexional(config){\r\n    if(!config.start||!config.end){\r\n        console.error("Create Link need start and end");\r\n        return;\r\n    }\r\n    var self = this;\r\n    self.jtopo = new JTopo.FlexionalLink(config.start.jtopo, config.end.jtopo);\r\n    //封装对象之间相互保持引用\r\n    self.jtopo.qtopo=self;\r\n    self.attr =  QTopo.util.extend(defaults(), config || {});\r\n    //函数\r\n    self.set = setJTopo;\r\n    //初始化\r\n    self.set(self.attr);\r\n    //修改源码\r\n    reset(self);\r\n}\r\nfunction setJTopo(config) {\r\n    if (config) {\r\n        var self=this;\r\n        self._setLink(config,["direction"]);\r\n        if(config.offsetGap){\r\n            setOffsetGap.call(self,config.offsetGap);\r\n        }\r\n    }\r\n}\r\nfunction setOffsetGap(offsetGap){\r\n    this.jtopo.offsetGap = parseInt(offsetGap);// 折线拐角处的长度\r\n}\r\nfunction reset(link){\r\n    //双向箭头\r\n    link.jtopo.paintPath = function (a, b) {\r\n        if (this.nodeA === this.nodeZ)return void this.paintLoop(a);\r\n        a.beginPath(), a.moveTo(b[0].x, b[0].y);\r\n        for (var c = 1; c < b.length; c++)\r\n            null == this.dashedPattern ? a.lineTo(b[c].x, b[c].y) : a.JTopoDashedLineTo(b[c - 1].x, b[c - 1].y, b[c].x, b[c].y, this.dashedPattern);\r\n        if (a.stroke(), a.closePath(), null != this.arrowsRadius) {\r\n            if (link.attr.arrow.end) {\r\n                this.paintArrow(a, b[b.length - 2], b[b.length - 1]);\r\n            }\r\n            if (link.attr.arrow.start) {\r\n                this.paintArrow(a, b[1], b[0]);//添加双向箭头\r\n            }\r\n        }\r\n    };\r\n}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jb3JlL2VsZW1lbnQvbGluay9GbGV4aW9uYWwuanM/Yzk4ZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRDtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixjQUFjO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQztBQUMvQztBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiIxMy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHFpeWMgb24gMjAxNy8yLzcuXHJcbiAqL1xyXG5GbGV4aW9uYWwucHJvdG90eXBlPXJlcXVpcmUoXCIuL0xpbmsuanNcIik7XHJcbm1vZHVsZS5leHBvcnRzID0gRmxleGlvbmFsO1xyXG4vL+S6jOasoeaKmOe6v1xyXG52YXIgZGVmYXVsdHMgPWZ1bmN0aW9uKCl7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG51bTogMSxcclxuICAgICAgICBhbHBoYToxLFxyXG4gICAgICAgIGNvbG9yOiAnMjIsMTI0LDI1NScsXHJcbiAgICAgICAgYXJyb3c6e1xyXG4gICAgICAgICAgICBzaXplOm51bGwsXHJcbiAgICAgICAgICAgIG9mZnNldDowLFxyXG4gICAgICAgICAgICBzdGFydDpmYWxzZSxcclxuICAgICAgICAgICAgZW5kOnRydWVcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdhcDoyMCxcclxuICAgICAgICB3aWR0aDozLFxyXG4gICAgICAgIGRhc2hlZDogIG51bGwsXHJcbiAgICAgICAgekluZGV4IDogMTAwLFxyXG4gICAgICAgIHRleHRPZmZzZXQ6WzAsMF0sXHJcbiAgICAgICAgZm9udDp7XHJcbiAgICAgICAgICAgIHNpemU6MTYsXHJcbiAgICAgICAgICAgIHR5cGU6XCLlvq7ova/pm4Xpu5FcIixcclxuICAgICAgICAgICAgY29sb3I6JzI1NSwyNTUsMjU1J1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdHlwZTogJ2ZsZXhpb25hbCcsXHJcbiAgICAgICAgZGlyZWN0aW9uOlwiaG9yaXpvbnRhbFwiLFxyXG4gICAgICAgIG9mZnNldEdhcDo2MFxyXG4gICAgfTtcclxufTtcclxuZnVuY3Rpb24gRmxleGlvbmFsKGNvbmZpZyl7XHJcbiAgICBpZighY29uZmlnLnN0YXJ0fHwhY29uZmlnLmVuZCl7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkNyZWF0ZSBMaW5rIG5lZWQgc3RhcnQgYW5kIGVuZFwiKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmp0b3BvID0gbmV3IEpUb3BvLkZsZXhpb25hbExpbmsoY29uZmlnLnN0YXJ0Lmp0b3BvLCBjb25maWcuZW5kLmp0b3BvKTtcclxuICAgIC8v5bCB6KOF5a+56LGh5LmL6Ze055u45LqS5L+d5oyB5byV55SoXHJcbiAgICBzZWxmLmp0b3BvLnF0b3BvPXNlbGY7XHJcbiAgICBzZWxmLmF0dHIgPSAgUVRvcG8udXRpbC5leHRlbmQoZGVmYXVsdHMoKSwgY29uZmlnIHx8IHt9KTtcclxuICAgIC8v5Ye95pWwXHJcbiAgICBzZWxmLnNldCA9IHNldEpUb3BvO1xyXG4gICAgLy/liJ3lp4vljJZcclxuICAgIHNlbGYuc2V0KHNlbGYuYXR0cik7XHJcbiAgICAvL+S/ruaUuea6kOeggVxyXG4gICAgcmVzZXQoc2VsZik7XHJcbn1cclxuZnVuY3Rpb24gc2V0SlRvcG8oY29uZmlnKSB7XHJcbiAgICBpZiAoY29uZmlnKSB7XHJcbiAgICAgICAgdmFyIHNlbGY9dGhpcztcclxuICAgICAgICBzZWxmLl9zZXRMaW5rKGNvbmZpZyxbXCJkaXJlY3Rpb25cIl0pO1xyXG4gICAgICAgIGlmKGNvbmZpZy5vZmZzZXRHYXApe1xyXG4gICAgICAgICAgICBzZXRPZmZzZXRHYXAuY2FsbChzZWxmLGNvbmZpZy5vZmZzZXRHYXApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBzZXRPZmZzZXRHYXAob2Zmc2V0R2FwKXtcclxuICAgIHRoaXMuanRvcG8ub2Zmc2V0R2FwID0gcGFyc2VJbnQob2Zmc2V0R2FwKTsvLyDmipjnur/mi5Dop5LlpITnmoTplb/luqZcclxufVxyXG5mdW5jdGlvbiByZXNldChsaW5rKXtcclxuICAgIC8v5Y+M5ZCR566t5aS0XHJcbiAgICBsaW5rLmp0b3BvLnBhaW50UGF0aCA9IGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubm9kZUEgPT09IHRoaXMubm9kZVopcmV0dXJuIHZvaWQgdGhpcy5wYWludExvb3AoYSk7XHJcbiAgICAgICAgYS5iZWdpblBhdGgoKSwgYS5tb3ZlVG8oYlswXS54LCBiWzBdLnkpO1xyXG4gICAgICAgIGZvciAodmFyIGMgPSAxOyBjIDwgYi5sZW5ndGg7IGMrKylcclxuICAgICAgICAgICAgbnVsbCA9PSB0aGlzLmRhc2hlZFBhdHRlcm4gPyBhLmxpbmVUbyhiW2NdLngsIGJbY10ueSkgOiBhLkpUb3BvRGFzaGVkTGluZVRvKGJbYyAtIDFdLngsIGJbYyAtIDFdLnksIGJbY10ueCwgYltjXS55LCB0aGlzLmRhc2hlZFBhdHRlcm4pO1xyXG4gICAgICAgIGlmIChhLnN0cm9rZSgpLCBhLmNsb3NlUGF0aCgpLCBudWxsICE9IHRoaXMuYXJyb3dzUmFkaXVzKSB7XHJcbiAgICAgICAgICAgIGlmIChsaW5rLmF0dHIuYXJyb3cuZW5kKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhaW50QXJyb3coYSwgYltiLmxlbmd0aCAtIDJdLCBiW2IubGVuZ3RoIC0gMV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChsaW5rLmF0dHIuYXJyb3cuc3RhcnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFpbnRBcnJvdyhhLCBiWzFdLCBiWzBdKTsvL+a3u+WKoOWPjOWQkeeureWktFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vY29yZS9lbGVtZW50L2xpbmsvRmxleGlvbmFsLmpzXG4vLyBtb2R1bGUgaWQgPSAxM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9')},function(module,exports,__webpack_require__){eval('/**\r\n * Created by qiyc on 2017/2/7.\r\n */\r\nFold.prototype=__webpack_require__(11);\r\nmodule.exports = Fold;\r\n//折线\r\nvar defaults =function(){\r\n    return {\r\n        num:1,\r\n        alpha:1,\r\n        color: \'22,124,255\',\r\n        arrow:{\r\n            size:null,\r\n            offset:0,\r\n            start:false,\r\n            end:true\r\n        },\r\n        gap:20,\r\n        width: 4,\r\n        dashed:  null,\r\n        zIndex : 100,\r\n        textOffset:[0,0],\r\n        font:{\r\n            size:16,\r\n            type:"微软雅黑",\r\n            color:\'255,255,255\'\r\n        },\r\n        type: \'fold\',\r\n        direction:"vertical"\r\n    };\r\n};\r\nfunction Fold(config){\r\n    if(!config.start||!config.end){\r\n        console.error("Create Link need start and end");\r\n        return;\r\n    }\r\n    var self = this;\r\n    self.jtopo = new JTopo.FoldLink(config.start.jtopo, config.end.jtopo);\r\n    //封装对象之间相互保持引用\r\n    self.jtopo.qtopo=self;\r\n    self.attr =  QTopo.util.extend(defaults(), config || {});\r\n    //函数\r\n    self.set = setJTopo;\r\n    //初始化\r\n    self.set(self.attr);\r\n    //修改源码\r\n    reset(self);\r\n}\r\nfunction setJTopo(config) {\r\n    if (config) {\r\n        var self=this;\r\n        self._setLink(config,["direction"]);\r\n    }\r\n}\r\nfunction reset(link){\r\n    //双向箭头\r\n    link.jtopo.paintPath = function (a, b) {\r\n        if (this.nodeA === this.nodeZ)return void this.paintLoop(a);\r\n        a.beginPath(), a.moveTo(b[0].x, b[0].y);\r\n        for (var c = 1; c < b.length; c++)\r\n            null == this.dashedPattern ? a.lineTo(b[c].x, b[c].y) : a.JTopoDashedLineTo(b[c - 1].x, b[c - 1].y, b[c].x, b[c].y, this.dashedPattern);\r\n        if (a.stroke(), a.closePath(), null != this.arrowsRadius) {\r\n            if (link.attr.arrow.end) {\r\n                this.paintArrow(a, b[b.length - 2], b[b.length - 1]);\r\n            }\r\n            if (link.attr.arrow.start) {\r\n                this.paintArrow(a, b[1], b[0]);//添加双向箭头\r\n            }\r\n        }\r\n    };\r\n}\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jb3JlL2VsZW1lbnQvbGluay9Gb2xkLmpzPzQ4ZmYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJEO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixjQUFjO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQztBQUMvQztBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiIxNC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHFpeWMgb24gMjAxNy8yLzcuXHJcbiAqL1xyXG5Gb2xkLnByb3RvdHlwZT1yZXF1aXJlKFwiLi9MaW5rLmpzXCIpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IEZvbGQ7XHJcbi8v5oqY57q/XHJcbnZhciBkZWZhdWx0cyA9ZnVuY3Rpb24oKXtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbnVtOjEsXHJcbiAgICAgICAgYWxwaGE6MSxcclxuICAgICAgICBjb2xvcjogJzIyLDEyNCwyNTUnLFxyXG4gICAgICAgIGFycm93OntcclxuICAgICAgICAgICAgc2l6ZTpudWxsLFxyXG4gICAgICAgICAgICBvZmZzZXQ6MCxcclxuICAgICAgICAgICAgc3RhcnQ6ZmFsc2UsXHJcbiAgICAgICAgICAgIGVuZDp0cnVlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBnYXA6MjAsXHJcbiAgICAgICAgd2lkdGg6IDQsXHJcbiAgICAgICAgZGFzaGVkOiAgbnVsbCxcclxuICAgICAgICB6SW5kZXggOiAxMDAsXHJcbiAgICAgICAgdGV4dE9mZnNldDpbMCwwXSxcclxuICAgICAgICBmb250OntcclxuICAgICAgICAgICAgc2l6ZToxNixcclxuICAgICAgICAgICAgdHlwZTpcIuW+rui9r+mbhem7kVwiLFxyXG4gICAgICAgICAgICBjb2xvcjonMjU1LDI1NSwyNTUnXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0eXBlOiAnZm9sZCcsXHJcbiAgICAgICAgZGlyZWN0aW9uOlwidmVydGljYWxcIlxyXG4gICAgfTtcclxufTtcclxuZnVuY3Rpb24gRm9sZChjb25maWcpe1xyXG4gICAgaWYoIWNvbmZpZy5zdGFydHx8IWNvbmZpZy5lbmQpe1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJDcmVhdGUgTGluayBuZWVkIHN0YXJ0IGFuZCBlbmRcIik7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5qdG9wbyA9IG5ldyBKVG9wby5Gb2xkTGluayhjb25maWcuc3RhcnQuanRvcG8sIGNvbmZpZy5lbmQuanRvcG8pO1xyXG4gICAgLy/lsIHoo4Xlr7nosaHkuYvpl7Tnm7jkupLkv53mjIHlvJXnlKhcclxuICAgIHNlbGYuanRvcG8ucXRvcG89c2VsZjtcclxuICAgIHNlbGYuYXR0ciA9ICBRVG9wby51dGlsLmV4dGVuZChkZWZhdWx0cygpLCBjb25maWcgfHwge30pO1xyXG4gICAgLy/lh73mlbBcclxuICAgIHNlbGYuc2V0ID0gc2V0SlRvcG87XHJcbiAgICAvL+WIneWni+WMllxyXG4gICAgc2VsZi5zZXQoc2VsZi5hdHRyKTtcclxuICAgIC8v5L+u5pS55rqQ56CBXHJcbiAgICByZXNldChzZWxmKTtcclxufVxyXG5mdW5jdGlvbiBzZXRKVG9wbyhjb25maWcpIHtcclxuICAgIGlmIChjb25maWcpIHtcclxuICAgICAgICB2YXIgc2VsZj10aGlzO1xyXG4gICAgICAgIHNlbGYuX3NldExpbmsoY29uZmlnLFtcImRpcmVjdGlvblwiXSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gcmVzZXQobGluayl7XHJcbiAgICAvL+WPjOWQkeeureWktFxyXG4gICAgbGluay5qdG9wby5wYWludFBhdGggPSBmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgIGlmICh0aGlzLm5vZGVBID09PSB0aGlzLm5vZGVaKXJldHVybiB2b2lkIHRoaXMucGFpbnRMb29wKGEpO1xyXG4gICAgICAgIGEuYmVnaW5QYXRoKCksIGEubW92ZVRvKGJbMF0ueCwgYlswXS55KTtcclxuICAgICAgICBmb3IgKHZhciBjID0gMTsgYyA8IGIubGVuZ3RoOyBjKyspXHJcbiAgICAgICAgICAgIG51bGwgPT0gdGhpcy5kYXNoZWRQYXR0ZXJuID8gYS5saW5lVG8oYltjXS54LCBiW2NdLnkpIDogYS5KVG9wb0Rhc2hlZExpbmVUbyhiW2MgLSAxXS54LCBiW2MgLSAxXS55LCBiW2NdLngsIGJbY10ueSwgdGhpcy5kYXNoZWRQYXR0ZXJuKTtcclxuICAgICAgICBpZiAoYS5zdHJva2UoKSwgYS5jbG9zZVBhdGgoKSwgbnVsbCAhPSB0aGlzLmFycm93c1JhZGl1cykge1xyXG4gICAgICAgICAgICBpZiAobGluay5hdHRyLmFycm93LmVuZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wYWludEFycm93KGEsIGJbYi5sZW5ndGggLSAyXSwgYltiLmxlbmd0aCAtIDFdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobGluay5hdHRyLmFycm93LnN0YXJ0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhaW50QXJyb3coYSwgYlsxXSwgYlswXSk7Ly/mt7vliqDlj4zlkJHnrq3lpLRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9jb3JlL2VsZW1lbnQvbGluay9Gb2xkLmpzXG4vLyBtb2R1bGUgaWQgPSAxNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9')},function(module,exports,__webpack_require__){eval("/**\r\n * Created by qiyc on 2017/2/8.\r\n */\r\nGroup.prototype = __webpack_require__(16);\r\nmodule.exports = Group;\r\n//曲线\r\nvar defaults = function () {\r\n    return {\r\n        name: 'group',\r\n        font:{\r\n            size:16,\r\n            type:\"微软雅黑\",\r\n            color:'255,255,255'\r\n        },\r\n        color: '10,10,100',\r\n        alpha: 0.5,\r\n        dragable: true,\r\n        zIndex: 10,\r\n        border:{\r\n            width:0,\r\n            radius:30,//最大160 最小0\r\n            color:\"255,0,0\"\r\n        },\r\n        textPosition: 'bottom',//Bottom_Center Top_Center Middle_Left Middle_Right Hidden,\r\n        layout: \"\",\r\n        children:{\r\n            showLink: false,\r\n            showName: true,\r\n            dragble: true\r\n        }\r\n    };\r\n};\r\n\r\nfunction Group(config) {\r\n    var self = this;\r\n    self.jtopo = new JTopo.Container();\r\n    //封装对象之间相互保持引用\r\n    self.jtopo.qtopo=self;\r\n    self.attr =  QTopo.util.extend(defaults(), config || {});\r\n    //函数\r\n    self.set = setJTopo;\r\n    //初始化\r\n    self.children=[];\r\n    self.set(self.attr);\r\n    //改写源码绘制曲线,可由curveOffset指定弧度\r\n    reset(self);\r\n}\r\nvar defaultLayout = function (container, children) {\r\n    if (children.length > 0) {\r\n        var left = 1e7,\r\n            right = -1e7,\r\n            top = 1e7,\r\n            bottom = -1e7,\r\n            width = right - left,\r\n            height = bottom - top;\r\n        for (var i = 0; i < children.length; i++) {\r\n            var child = children[i];\r\n            child.x <= left && (left = child.x);\r\n            (child.x+child.width) >= right && (right = child.x+child.width);\r\n            child.y <= top && (top = child.y);\r\n            (child.y+child.height) >= bottom && (bottom = child.y+child.height);\r\n            width = right - left;\r\n            height = bottom - top;\r\n        }\r\n        container.x = left;\r\n        container.y = top;\r\n        container.width = width;\r\n        container.height = height;\r\n    }\r\n};\r\nfunction setJTopo(config) {\r\n    if (config) {\r\n        var self=this;\r\n        self._setContainer(config);\r\n        if(config.layout){\r\n            setLayout.call(self,config.layout);\r\n        }\r\n    }\r\n}\r\nfunction reset(group) {\r\n    group.jtopo.layout=defaultLayout;\r\n}\r\nfunction setLayout(layout){\r\n    var selected;\r\n    if (layout) {\r\n        switch (layout.type) {\r\n            case 'flow':\r\n                // 流式布局（水平,垂直间隔)\r\n                selected = JTopo.layout.FlowLayout(layout.row, layout.column);\r\n                this.attr.layout=layout;\r\n                break;\r\n            case 'grid':\r\n                // 网格布局(行,列)\r\n                selected = JTopo.layout.GridLayout(layout.row, layout.column);\r\n                this.attr.layout=layout;\r\n                break;\r\n            default:\r\n                selected = defaultLayout;\r\n                this.attr.layout={};\r\n                this.attr.layout.type=\"set\";\r\n        }\r\n    } else {\r\n        selected = defaultLayout;\r\n        this.attr.layout={};\r\n        this.attr.layout.type=\"set\";\r\n    }\r\n    this.jtopo.layout = selected;\r\n}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jb3JlL2VsZW1lbnQvY29udGFpbmVyL0dyb3VwLmpzPzY5NzMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRDtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixxQkFBcUI7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiIxNS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHFpeWMgb24gMjAxNy8yLzguXHJcbiAqL1xyXG5Hcm91cC5wcm90b3R5cGUgPSByZXF1aXJlKFwiLi9Db250YWluZXIuanNcIik7XHJcbm1vZHVsZS5leHBvcnRzID0gR3JvdXA7XHJcbi8v5puy57q/XHJcbnZhciBkZWZhdWx0cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbmFtZTogJ2dyb3VwJyxcclxuICAgICAgICBmb250OntcclxuICAgICAgICAgICAgc2l6ZToxNixcclxuICAgICAgICAgICAgdHlwZTpcIuW+rui9r+mbhem7kVwiLFxyXG4gICAgICAgICAgICBjb2xvcjonMjU1LDI1NSwyNTUnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjb2xvcjogJzEwLDEwLDEwMCcsXHJcbiAgICAgICAgYWxwaGE6IDAuNSxcclxuICAgICAgICBkcmFnYWJsZTogdHJ1ZSxcclxuICAgICAgICB6SW5kZXg6IDEwLFxyXG4gICAgICAgIGJvcmRlcjp7XHJcbiAgICAgICAgICAgIHdpZHRoOjAsXHJcbiAgICAgICAgICAgIHJhZGl1czozMCwvL+acgOWkpzE2MCDmnIDlsI8wXHJcbiAgICAgICAgICAgIGNvbG9yOlwiMjU1LDAsMFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0ZXh0UG9zaXRpb246ICdib3R0b20nLC8vQm90dG9tX0NlbnRlciBUb3BfQ2VudGVyIE1pZGRsZV9MZWZ0IE1pZGRsZV9SaWdodCBIaWRkZW4sXHJcbiAgICAgICAgbGF5b3V0OiBcIlwiLFxyXG4gICAgICAgIGNoaWxkcmVuOntcclxuICAgICAgICAgICAgc2hvd0xpbms6IGZhbHNlLFxyXG4gICAgICAgICAgICBzaG93TmFtZTogdHJ1ZSxcclxuICAgICAgICAgICAgZHJhZ2JsZTogdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn07XHJcblxyXG5mdW5jdGlvbiBHcm91cChjb25maWcpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYuanRvcG8gPSBuZXcgSlRvcG8uQ29udGFpbmVyKCk7XHJcbiAgICAvL+WwgeijheWvueixoeS5i+mXtOebuOS6kuS/neaMgeW8leeUqFxyXG4gICAgc2VsZi5qdG9wby5xdG9wbz1zZWxmO1xyXG4gICAgc2VsZi5hdHRyID0gIFFUb3BvLnV0aWwuZXh0ZW5kKGRlZmF1bHRzKCksIGNvbmZpZyB8fCB7fSk7XHJcbiAgICAvL+WHveaVsFxyXG4gICAgc2VsZi5zZXQgPSBzZXRKVG9wbztcclxuICAgIC8v5Yid5aeL5YyWXHJcbiAgICBzZWxmLmNoaWxkcmVuPVtdO1xyXG4gICAgc2VsZi5zZXQoc2VsZi5hdHRyKTtcclxuICAgIC8v5pS55YaZ5rqQ56CB57uY5Yi25puy57q/LOWPr+eUsWN1cnZlT2Zmc2V05oyH5a6a5byn5bqmXHJcbiAgICByZXNldChzZWxmKTtcclxufVxyXG52YXIgZGVmYXVsdExheW91dCA9IGZ1bmN0aW9uIChjb250YWluZXIsIGNoaWxkcmVuKSB7XHJcbiAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHZhciBsZWZ0ID0gMWU3LFxyXG4gICAgICAgICAgICByaWdodCA9IC0xZTcsXHJcbiAgICAgICAgICAgIHRvcCA9IDFlNyxcclxuICAgICAgICAgICAgYm90dG9tID0gLTFlNyxcclxuICAgICAgICAgICAgd2lkdGggPSByaWdodCAtIGxlZnQsXHJcbiAgICAgICAgICAgIGhlaWdodCA9IGJvdHRvbSAtIHRvcDtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZCA9IGNoaWxkcmVuW2ldO1xyXG4gICAgICAgICAgICBjaGlsZC54IDw9IGxlZnQgJiYgKGxlZnQgPSBjaGlsZC54KTtcclxuICAgICAgICAgICAgKGNoaWxkLngrY2hpbGQud2lkdGgpID49IHJpZ2h0ICYmIChyaWdodCA9IGNoaWxkLngrY2hpbGQud2lkdGgpO1xyXG4gICAgICAgICAgICBjaGlsZC55IDw9IHRvcCAmJiAodG9wID0gY2hpbGQueSk7XHJcbiAgICAgICAgICAgIChjaGlsZC55K2NoaWxkLmhlaWdodCkgPj0gYm90dG9tICYmIChib3R0b20gPSBjaGlsZC55K2NoaWxkLmhlaWdodCk7XHJcbiAgICAgICAgICAgIHdpZHRoID0gcmlnaHQgLSBsZWZ0O1xyXG4gICAgICAgICAgICBoZWlnaHQgPSBib3R0b20gLSB0b3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnRhaW5lci54ID0gbGVmdDtcclxuICAgICAgICBjb250YWluZXIueSA9IHRvcDtcclxuICAgICAgICBjb250YWluZXIud2lkdGggPSB3aWR0aDtcclxuICAgICAgICBjb250YWluZXIuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgfVxyXG59O1xyXG5mdW5jdGlvbiBzZXRKVG9wbyhjb25maWcpIHtcclxuICAgIGlmIChjb25maWcpIHtcclxuICAgICAgICB2YXIgc2VsZj10aGlzO1xyXG4gICAgICAgIHNlbGYuX3NldENvbnRhaW5lcihjb25maWcpO1xyXG4gICAgICAgIGlmKGNvbmZpZy5sYXlvdXQpe1xyXG4gICAgICAgICAgICBzZXRMYXlvdXQuY2FsbChzZWxmLGNvbmZpZy5sYXlvdXQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiByZXNldChncm91cCkge1xyXG4gICAgZ3JvdXAuanRvcG8ubGF5b3V0PWRlZmF1bHRMYXlvdXQ7XHJcbn1cclxuZnVuY3Rpb24gc2V0TGF5b3V0KGxheW91dCl7XHJcbiAgICB2YXIgc2VsZWN0ZWQ7XHJcbiAgICBpZiAobGF5b3V0KSB7XHJcbiAgICAgICAgc3dpdGNoIChsYXlvdXQudHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlICdmbG93JzpcclxuICAgICAgICAgICAgICAgIC8vIOa1geW8j+W4g+WxgO+8iOawtOW5syzlnoLnm7Tpl7TpmpQpXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZCA9IEpUb3BvLmxheW91dC5GbG93TGF5b3V0KGxheW91dC5yb3csIGxheW91dC5jb2x1bW4pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hdHRyLmxheW91dD1sYXlvdXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnZ3JpZCc6XHJcbiAgICAgICAgICAgICAgICAvLyDnvZHmoLzluIPlsYAo6KGMLOWIlylcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkID0gSlRvcG8ubGF5b3V0LkdyaWRMYXlvdXQobGF5b3V0LnJvdywgbGF5b3V0LmNvbHVtbik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmF0dHIubGF5b3V0PWxheW91dDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQgPSBkZWZhdWx0TGF5b3V0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hdHRyLmxheW91dD17fTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXR0ci5sYXlvdXQudHlwZT1cInNldFwiO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2VsZWN0ZWQgPSBkZWZhdWx0TGF5b3V0O1xyXG4gICAgICAgIHRoaXMuYXR0ci5sYXlvdXQ9e307XHJcbiAgICAgICAgdGhpcy5hdHRyLmxheW91dC50eXBlPVwic2V0XCI7XHJcbiAgICB9XHJcbiAgICB0aGlzLmp0b3BvLmxheW91dCA9IHNlbGVjdGVkO1xyXG59XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9jb3JlL2VsZW1lbnQvY29udGFpbmVyL0dyb3VwLmpzXG4vLyBtb2R1bGUgaWQgPSAxNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");
},function(module,exports,__webpack_require__){eval('/**\r\n * Created by qiyc on 2017/2/7.\r\n */\r\nContainer.prototype = __webpack_require__(8);\r\nmodule.exports = new Container();\r\nfunction Container() {\r\n    this.setName=function(name){\r\n        if(this.attr.textPosition!="hide"){\r\n            this.jtopo.text=name;\r\n        }\r\n    };\r\n    this.add = function (element) {\r\n        if (!$.isArray(this.children)) {\r\n            this.children = [];\r\n        }\r\n        if(element.jtopo&&this.children.indexOf(element)<0){\r\n            this.children.push(element);\r\n            this.jtopo.add(element.jtopo);\r\n        }\r\n    };\r\n    this.remove=function(element){\r\n        if($.isArray(this.children)&&this.children.indexOf(element)>0){\r\n            this.children.splice(this.children.indexOf(element),1);\r\n            this.jtopo.remove(element.jtopo);\r\n        }\r\n    };\r\n    this.getChildren=function(){\r\n        var children=[];\r\n        var self=this;\r\n        if(self.jtopo&&self.jtopo.childs){\r\n            $.each(self.jtopo.childs,function(i,v){\r\n                if(v.qtopo){\r\n                    children.push(v.qtopo);\r\n                }else{\r\n                    console.error("the child not wraped by qtopo",v);\r\n                }\r\n            });\r\n        }\r\n        this.children=children;\r\n        return children;\r\n    };\r\n    this.getType = function () {\r\n        return "container"\r\n    };\r\n    this.setColor = function (color) {\r\n        if (color) {\r\n            color = QTopo.util.transHex(color.toLowerCase());\r\n            this.jtopo.fillColor = color;\r\n        }\r\n    };\r\n    this.setBorder = function (border) {\r\n        if (border.color && $.isNumeric(border.width) && $.isNumeric(border.radius)) {\r\n            this.jtopo.borderColor = QTopo.util.transHex(border.color.toLowerCase());\r\n            this.jtopo.borderWidth = parseInt(border.width);\r\n            this.jtopo.borderRadius = parseInt(border.radius);\r\n        } else {\r\n            console.error("setBorder need params", border);\r\n        }\r\n    };\r\n    this.setChildren = function (children) {\r\n        if (children) {\r\n            this.jtopo.childDragble = typeof children.dragble == "boolean" ? children.dragble : true;\r\n        }\r\n    };\r\n    this._setContainer = function (config, arr) {\r\n        var temp = ["children", "dragable", "color", "border", "font", "position", "alpha", "fontColor", "zIndex","name"];\r\n        if (arr) {\r\n            this._setAttr($.merge(temp, arr), config);\r\n        } else {\r\n            this._setAttr(temp, config);\r\n        }\r\n    }\r\n}\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jb3JlL2VsZW1lbnQvY29udGFpbmVyL0NvbnRhaW5lci5qcz84MjdlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiMTYuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBxaXljIG9uIDIwMTcvMi83LlxyXG4gKi9cclxuQ29udGFpbmVyLnByb3RvdHlwZSA9IHJlcXVpcmUoXCIuLi9FbGVtZW50LmpzXCIpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBDb250YWluZXIoKTtcclxuZnVuY3Rpb24gQ29udGFpbmVyKCkge1xyXG4gICAgdGhpcy5zZXROYW1lPWZ1bmN0aW9uKG5hbWUpe1xyXG4gICAgICAgIGlmKHRoaXMuYXR0ci50ZXh0UG9zaXRpb24hPVwiaGlkZVwiKXtcclxuICAgICAgICAgICAgdGhpcy5qdG9wby50ZXh0PW5hbWU7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRoaXMuYWRkID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICBpZiAoISQuaXNBcnJheSh0aGlzLmNoaWxkcmVuKSkge1xyXG4gICAgICAgICAgICB0aGlzLmNoaWxkcmVuID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGVsZW1lbnQuanRvcG8mJnRoaXMuY2hpbGRyZW4uaW5kZXhPZihlbGVtZW50KTwwKXtcclxuICAgICAgICAgICAgdGhpcy5jaGlsZHJlbi5wdXNoKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB0aGlzLmp0b3BvLmFkZChlbGVtZW50Lmp0b3BvKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhpcy5yZW1vdmU9ZnVuY3Rpb24oZWxlbWVudCl7XHJcbiAgICAgICAgaWYoJC5pc0FycmF5KHRoaXMuY2hpbGRyZW4pJiZ0aGlzLmNoaWxkcmVuLmluZGV4T2YoZWxlbWVudCk+MCl7XHJcbiAgICAgICAgICAgIHRoaXMuY2hpbGRyZW4uc3BsaWNlKHRoaXMuY2hpbGRyZW4uaW5kZXhPZihlbGVtZW50KSwxKTtcclxuICAgICAgICAgICAgdGhpcy5qdG9wby5yZW1vdmUoZWxlbWVudC5qdG9wbyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRoaXMuZ2V0Q2hpbGRyZW49ZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgY2hpbGRyZW49W107XHJcbiAgICAgICAgdmFyIHNlbGY9dGhpcztcclxuICAgICAgICBpZihzZWxmLmp0b3BvJiZzZWxmLmp0b3BvLmNoaWxkcyl7XHJcbiAgICAgICAgICAgICQuZWFjaChzZWxmLmp0b3BvLmNoaWxkcyxmdW5jdGlvbihpLHYpe1xyXG4gICAgICAgICAgICAgICAgaWYodi5xdG9wbyl7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW4ucHVzaCh2LnF0b3BvKTtcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJ0aGUgY2hpbGQgbm90IHdyYXBlZCBieSBxdG9wb1wiLHYpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jaGlsZHJlbj1jaGlsZHJlbjtcclxuICAgICAgICByZXR1cm4gY2hpbGRyZW47XHJcbiAgICB9O1xyXG4gICAgdGhpcy5nZXRUeXBlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBcImNvbnRhaW5lclwiXHJcbiAgICB9O1xyXG4gICAgdGhpcy5zZXRDb2xvciA9IGZ1bmN0aW9uIChjb2xvcikge1xyXG4gICAgICAgIGlmIChjb2xvcikge1xyXG4gICAgICAgICAgICBjb2xvciA9IFFUb3BvLnV0aWwudHJhbnNIZXgoY29sb3IudG9Mb3dlckNhc2UoKSk7XHJcbiAgICAgICAgICAgIHRoaXMuanRvcG8uZmlsbENvbG9yID0gY29sb3I7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRoaXMuc2V0Qm9yZGVyID0gZnVuY3Rpb24gKGJvcmRlcikge1xyXG4gICAgICAgIGlmIChib3JkZXIuY29sb3IgJiYgJC5pc051bWVyaWMoYm9yZGVyLndpZHRoKSAmJiAkLmlzTnVtZXJpYyhib3JkZXIucmFkaXVzKSkge1xyXG4gICAgICAgICAgICB0aGlzLmp0b3BvLmJvcmRlckNvbG9yID0gUVRvcG8udXRpbC50cmFuc0hleChib3JkZXIuY29sb3IudG9Mb3dlckNhc2UoKSk7XHJcbiAgICAgICAgICAgIHRoaXMuanRvcG8uYm9yZGVyV2lkdGggPSBwYXJzZUludChib3JkZXIud2lkdGgpO1xyXG4gICAgICAgICAgICB0aGlzLmp0b3BvLmJvcmRlclJhZGl1cyA9IHBhcnNlSW50KGJvcmRlci5yYWRpdXMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJzZXRCb3JkZXIgbmVlZCBwYXJhbXNcIiwgYm9yZGVyKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhpcy5zZXRDaGlsZHJlbiA9IGZ1bmN0aW9uIChjaGlsZHJlbikge1xyXG4gICAgICAgIGlmIChjaGlsZHJlbikge1xyXG4gICAgICAgICAgICB0aGlzLmp0b3BvLmNoaWxkRHJhZ2JsZSA9IHR5cGVvZiBjaGlsZHJlbi5kcmFnYmxlID09IFwiYm9vbGVhblwiID8gY2hpbGRyZW4uZHJhZ2JsZSA6IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRoaXMuX3NldENvbnRhaW5lciA9IGZ1bmN0aW9uIChjb25maWcsIGFycikge1xyXG4gICAgICAgIHZhciB0ZW1wID0gW1wiY2hpbGRyZW5cIiwgXCJkcmFnYWJsZVwiLCBcImNvbG9yXCIsIFwiYm9yZGVyXCIsIFwiZm9udFwiLCBcInBvc2l0aW9uXCIsIFwiYWxwaGFcIiwgXCJmb250Q29sb3JcIiwgXCJ6SW5kZXhcIixcIm5hbWVcIl07XHJcbiAgICAgICAgaWYgKGFycikge1xyXG4gICAgICAgICAgICB0aGlzLl9zZXRBdHRyKCQubWVyZ2UodGVtcCwgYXJyKSwgY29uZmlnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9zZXRBdHRyKHRlbXAsIGNvbmZpZyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2NvcmUvZWxlbWVudC9jb250YWluZXIvQ29udGFpbmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAxNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9')}]);